# DP: updates from the 3.5 branch (until 2017-06-07, ).

# git diff 51ba5b7d0c194b0c2b1e5d647e70e3538b8dde3e ee9de30aa0dbcfd848e4200944674a084d963588 | filterdiff -x ?/.hgignore -x ?/.hgeol -x ?/.hgtags -x ?/.hgtouch -x ?/.gitignore -x ?/.gitattributes -x '?/.github/*' -x '?/.git*' -x ?/.codecov.yml -x ?/.travis.yml -x ?/configure --remove-timestamps

diff --git a/Doc/Makefile b/Doc/Makefile
index 10c3288..b0800c1 100644
--- a/Doc/Makefile
+++ b/Doc/Makefile
@@ -4,13 +4,13 @@
 #
 
 # You can set these variables from the command line.
-PYTHON       = python
+PYTHON       = python3
 SPHINXBUILD  = sphinx-build
 PAPER        =
 SOURCES      =
 DISTVERSION  = $(shell $(PYTHON) tools/extensions/patchlevel.py)
 
-ALLSPHINXOPTS = -b $(BUILDER) -d build/doctrees -D latex_paper_size=$(PAPER) \
+ALLSPHINXOPTS = -b $(BUILDER) -d build/doctrees -D latex_elements.papersize=$(PAPER) \
                 $(SPHINXOPTS) . build/$(BUILDER) $(SOURCES)
 
 .PHONY: help build html htmlhelp latex text changes linkcheck \
diff --git a/Doc/c-api/exceptions.rst b/Doc/c-api/exceptions.rst
index c389888..6454eb5 100644
--- a/Doc/c-api/exceptions.rst
+++ b/Doc/c-api/exceptions.rst
@@ -291,16 +291,11 @@ an error value).
    is the function calling :c:func:`PyErr_WarnEx`, 2 is  the function above that,
    and so forth.
 
-   Warning categories must be subclasses of :c:data:`Warning`; the default warning
-   category is :c:data:`RuntimeWarning`.  The standard Python warning categories are
-   available as global variables whose names are ``PyExc_`` followed by the Python
-   exception name. These have the type :c:type:`PyObject\*`; they are all class
-   objects. Their names are :c:data:`PyExc_Warning`, :c:data:`PyExc_UserWarning`,
-   :c:data:`PyExc_UnicodeWarning`, :c:data:`PyExc_DeprecationWarning`,
-   :c:data:`PyExc_SyntaxWarning`, :c:data:`PyExc_RuntimeWarning`, and
-   :c:data:`PyExc_FutureWarning`.  :c:data:`PyExc_Warning` is a subclass of
-   :c:data:`PyExc_Exception`; the other warning categories are subclasses of
-   :c:data:`PyExc_Warning`.
+   Warning categories must be subclasses of :c:data:`PyExc_Warning`;
+   :c:data:`PyExc_Warning` is a subclass of :c:data:`PyExc_Exception`;
+   the default warning category is :c:data:`PyExc_RuntimeWarning`. The standard
+   Python warning categories are available as global variables whose names are
+   enumerated at :ref:`standardwarningcategories`.
 
    For information about warning control, see the documentation for the
    :mod:`warnings` module and the :option:`-W` option in the command line
@@ -735,6 +730,60 @@ All standard Python exceptions are available as global variables whose names are
 :c:type:`PyObject\*`; they are all class objects.  For completeness, here are all
 the variables:
 
+.. index::
+   single: PyExc_BaseException
+   single: PyExc_Exception
+   single: PyExc_ArithmeticError
+   single: PyExc_AssertionError
+   single: PyExc_AttributeError
+   single: PyExc_BlockingIOError
+   single: PyExc_BrokenPipeError
+   single: PyExc_BufferError
+   single: PyExc_ChildProcessError
+   single: PyExc_ConnectionAbortedError
+   single: PyExc_ConnectionError
+   single: PyExc_ConnectionRefusedError
+   single: PyExc_ConnectionResetError
+   single: PyExc_EOFError
+   single: PyExc_FileExistsError
+   single: PyExc_FileNotFoundError
+   single: PyExc_FloatingPointError
+   single: PyExc_GeneratorExit
+   single: PyExc_ImportError
+   single: PyExc_IndentationError
+   single: PyExc_IndexError
+   single: PyExc_InterruptedError
+   single: PyExc_IsADirectoryError
+   single: PyExc_KeyError
+   single: PyExc_KeyboardInterrupt
+   single: PyExc_LookupError
+   single: PyExc_MemoryError
+   single: PyExc_NameError
+   single: PyExc_NotADirectoryError
+   single: PyExc_NotImplementedError
+   single: PyExc_OSError
+   single: PyExc_OverflowError
+   single: PyExc_PermissionError
+   single: PyExc_ProcessLookupError
+   single: PyExc_RecursionError
+   single: PyExc_ReferenceError
+   single: PyExc_RuntimeError
+   single: PyExc_StopAsyncIteration
+   single: PyExc_StopIteration
+   single: PyExc_SyntaxError
+   single: PyExc_SystemError
+   single: PyExc_SystemExit
+   single: PyExc_TabError
+   single: PyExc_TimeoutError
+   single: PyExc_TypeError
+   single: PyExc_UnboundLocalError
+   single: PyExc_UnicodeDecodeError
+   single: PyExc_UnicodeEncodeError
+   single: PyExc_UnicodeError
+   single: PyExc_UnicodeTranslateError
+   single: PyExc_ValueError
+   single: PyExc_ZeroDivisionError
+
 +-----------------------------------------+---------------------------------+----------+
 | C Name                                  | Python Name                     | Notes    |
 +=========================================+=================================+==========+
@@ -744,8 +793,6 @@ the variables:
 +-----------------------------------------+---------------------------------+----------+
 | :c:data:`PyExc_ArithmeticError`         | :exc:`ArithmeticError`          | \(1)     |
 +-----------------------------------------+---------------------------------+----------+
-| :c:data:`PyExc_LookupError`             | :exc:`LookupError`              | \(1)     |
-+-----------------------------------------+---------------------------------+----------+
 | :c:data:`PyExc_AssertionError`          | :exc:`AssertionError`           |          |
 +-----------------------------------------+---------------------------------+----------+
 | :c:data:`PyExc_AttributeError`          | :exc:`AttributeError`           |          |
@@ -754,26 +801,32 @@ the variables:
 +-----------------------------------------+---------------------------------+----------+
 | :c:data:`PyExc_BrokenPipeError`         | :exc:`BrokenPipeError`          |          |
 +-----------------------------------------+---------------------------------+----------+
-| :c:data:`PyExc_ChildProcessError`       | :exc:`ChildProcessError`        |          |
+| :c:data:`PyExc_BufferError`             | :exc:`BufferError`              |          |
 +-----------------------------------------+---------------------------------+----------+
-| :c:data:`PyExc_ConnectionError`         | :exc:`ConnectionError`          |          |
+| :c:data:`PyExc_ChildProcessError`       | :exc:`ChildProcessError`        |          |
 +-----------------------------------------+---------------------------------+----------+
 | :c:data:`PyExc_ConnectionAbortedError`  | :exc:`ConnectionAbortedError`   |          |
 +-----------------------------------------+---------------------------------+----------+
+| :c:data:`PyExc_ConnectionError`         | :exc:`ConnectionError`          |          |
++-----------------------------------------+---------------------------------+----------+
 | :c:data:`PyExc_ConnectionRefusedError`  | :exc:`ConnectionRefusedError`   |          |
 +-----------------------------------------+---------------------------------+----------+
 | :c:data:`PyExc_ConnectionResetError`    | :exc:`ConnectionResetError`     |          |
 +-----------------------------------------+---------------------------------+----------+
+| :c:data:`PyExc_EOFError`                | :exc:`EOFError`                 |          |
++-----------------------------------------+---------------------------------+----------+
 | :c:data:`PyExc_FileExistsError`         | :exc:`FileExistsError`          |          |
 +-----------------------------------------+---------------------------------+----------+
 | :c:data:`PyExc_FileNotFoundError`       | :exc:`FileNotFoundError`        |          |
 +-----------------------------------------+---------------------------------+----------+
-| :c:data:`PyExc_EOFError`                | :exc:`EOFError`                 |          |
-+-----------------------------------------+---------------------------------+----------+
 | :c:data:`PyExc_FloatingPointError`      | :exc:`FloatingPointError`       |          |
 +-----------------------------------------+---------------------------------+----------+
+| :c:data:`PyExc_GeneratorExit`           | :exc:`GeneratorExit`            |          |
++-----------------------------------------+---------------------------------+----------+
 | :c:data:`PyExc_ImportError`             | :exc:`ImportError`              |          |
 +-----------------------------------------+---------------------------------+----------+
+| :c:data:`PyExc_IndentationError`        | :exc:`IndentationError`         |          |
++-----------------------------------------+---------------------------------+----------+
 | :c:data:`PyExc_IndexError`              | :exc:`IndexError`               |          |
 +-----------------------------------------+---------------------------------+----------+
 | :c:data:`PyExc_InterruptedError`        | :exc:`InterruptedError`         |          |
@@ -784,6 +837,8 @@ the variables:
 +-----------------------------------------+---------------------------------+----------+
 | :c:data:`PyExc_KeyboardInterrupt`       | :exc:`KeyboardInterrupt`        |          |
 +-----------------------------------------+---------------------------------+----------+
+| :c:data:`PyExc_LookupError`             | :exc:`LookupError`              | \(1)     |
++-----------------------------------------+---------------------------------+----------+
 | :c:data:`PyExc_MemoryError`             | :exc:`MemoryError`              |          |
 +-----------------------------------------+---------------------------------+----------+
 | :c:data:`PyExc_NameError`               | :exc:`NameError`                |          |
@@ -806,16 +861,32 @@ the variables:
 +-----------------------------------------+---------------------------------+----------+
 | :c:data:`PyExc_RuntimeError`            | :exc:`RuntimeError`             |          |
 +-----------------------------------------+---------------------------------+----------+
+| :c:data:`PyExc_StopAsyncIteration`      | :exc:`StopAsyncIteration`       |          |
++-----------------------------------------+---------------------------------+----------+
+| :c:data:`PyExc_StopIteration`           | :exc:`StopIteration`            |          |
++-----------------------------------------+---------------------------------+----------+
 | :c:data:`PyExc_SyntaxError`             | :exc:`SyntaxError`              |          |
 +-----------------------------------------+---------------------------------+----------+
 | :c:data:`PyExc_SystemError`             | :exc:`SystemError`              |          |
 +-----------------------------------------+---------------------------------+----------+
-| :c:data:`PyExc_TimeoutError`            | :exc:`TimeoutError`             |          |
-+-----------------------------------------+---------------------------------+----------+
 | :c:data:`PyExc_SystemExit`              | :exc:`SystemExit`               |          |
 +-----------------------------------------+---------------------------------+----------+
+| :c:data:`PyExc_TabError`                | :exc:`TabError`                 |          |
++-----------------------------------------+---------------------------------+----------+
+| :c:data:`PyExc_TimeoutError`            | :exc:`TimeoutError`             |          |
++-----------------------------------------+---------------------------------+----------+
 | :c:data:`PyExc_TypeError`               | :exc:`TypeError`                |          |
 +-----------------------------------------+---------------------------------+----------+
+| :c:data:`PyExc_UnboundLocalError`       | :exc:`UnboundLocalError`        |          |
++-----------------------------------------+---------------------------------+----------+
+| :c:data:`PyExc_UnicodeDecodeError`      | :exc:`UnicodeDecodeError`       |          |
++-----------------------------------------+---------------------------------+----------+
+| :c:data:`PyExc_UnicodeEncodeError`      | :exc:`UnicodeEncodeError`       |          |
++-----------------------------------------+---------------------------------+----------+
+| :c:data:`PyExc_UnicodeError`            | :exc:`UnicodeError`             |          |
++-----------------------------------------+---------------------------------+----------+
+| :c:data:`PyExc_UnicodeTranslateError`   | :exc:`UnicodeTranslateError`    |          |
++-----------------------------------------+---------------------------------+----------+
 | :c:data:`PyExc_ValueError`              | :exc:`ValueError`               |          |
 +-----------------------------------------+---------------------------------+----------+
 | :c:data:`PyExc_ZeroDivisionError`       | :exc:`ZeroDivisionError`        |          |
@@ -832,11 +903,15 @@ the variables:
    and :c:data:`PyExc_TimeoutError` were introduced following :pep:`3151`.
 
 .. versionadded:: 3.5
-   :c:data:`PyExc_RecursionError`.
-
+   :c:data:`PyExc_StopAsyncIteration` and :c:data:`PyExc_RecursionError`.
 
 These are compatibility aliases to :c:data:`PyExc_OSError`:
 
+.. index::
+   single: PyExc_EnvironmentError
+   single: PyExc_IOError
+   single: PyExc_WindowsError
+
 +-------------------------------------+----------+
 | C Name                              | Notes    |
 +=====================================+==========+
@@ -850,52 +925,6 @@ These are compatibility aliases to :c:data:`PyExc_OSError`:
 .. versionchanged:: 3.3
    These aliases used to be separate exception types.
 
-
-.. index::
-   single: PyExc_BaseException
-   single: PyExc_Exception
-   single: PyExc_ArithmeticError
-   single: PyExc_LookupError
-   single: PyExc_AssertionError
-   single: PyExc_AttributeError
-   single: PyExc_BlockingIOError
-   single: PyExc_BrokenPipeError
-   single: PyExc_ConnectionError
-   single: PyExc_ConnectionAbortedError
-   single: PyExc_ConnectionRefusedError
-   single: PyExc_ConnectionResetError
-   single: PyExc_EOFError
-   single: PyExc_FileExistsError
-   single: PyExc_FileNotFoundError
-   single: PyExc_FloatingPointError
-   single: PyExc_ImportError
-   single: PyExc_IndexError
-   single: PyExc_InterruptedError
-   single: PyExc_IsADirectoryError
-   single: PyExc_KeyError
-   single: PyExc_KeyboardInterrupt
-   single: PyExc_MemoryError
-   single: PyExc_NameError
-   single: PyExc_NotADirectoryError
-   single: PyExc_NotImplementedError
-   single: PyExc_OSError
-   single: PyExc_OverflowError
-   single: PyExc_PermissionError
-   single: PyExc_ProcessLookupError
-   single: PyExc_RecursionError
-   single: PyExc_ReferenceError
-   single: PyExc_RuntimeError
-   single: PyExc_SyntaxError
-   single: PyExc_SystemError
-   single: PyExc_SystemExit
-   single: PyExc_TimeoutError
-   single: PyExc_TypeError
-   single: PyExc_ValueError
-   single: PyExc_ZeroDivisionError
-   single: PyExc_EnvironmentError
-   single: PyExc_IOError
-   single: PyExc_WindowsError
-
 Notes:
 
 (1)
@@ -907,3 +936,60 @@ Notes:
 (3)
    Only defined on Windows; protect code that uses this by testing that the
    preprocessor macro ``MS_WINDOWS`` is defined.
+
+.. _standardwarningcategories:
+
+Standard Warning Categories
+===========================
+
+All standard Python warning categories are available as global variables whose
+names are ``PyExc_`` followed by the Python exception name. These have the type
+:c:type:`PyObject\*`; they are all class objects. For completeness, here are all
+the variables:
+
+.. index::
+   single: PyExc_Warning
+   single: PyExc_BytesWarning
+   single: PyExc_DeprecationWarning
+   single: PyExc_FutureWarning
+   single: PyExc_ImportWarning
+   single: PyExc_PendingDeprecationWarning
+   single: PyExc_ResourceWarning
+   single: PyExc_RuntimeWarning
+   single: PyExc_SyntaxWarning
+   single: PyExc_UnicodeWarning
+   single: PyExc_UserWarning
+
++------------------------------------------+---------------------------------+----------+
+| C Name                                   | Python Name                     | Notes    |
++==========================================+=================================+==========+
+| :c:data:`PyExc_Warning`                  | :exc:`Warning`                  | \(1)     |
++------------------------------------------+---------------------------------+----------+
+| :c:data:`PyExc_BytesWarning`             | :exc:`BytesWarning`             |          |
++------------------------------------------+---------------------------------+----------+
+| :c:data:`PyExc_DeprecationWarning`       | :exc:`DeprecationWarning`       |          |
++------------------------------------------+---------------------------------+----------+
+| :c:data:`PyExc_FutureWarning`            | :exc:`FutureWarning`            |          |
++------------------------------------------+---------------------------------+----------+
+| :c:data:`PyExc_ImportWarning`            | :exc:`ImportWarning`            |          |
++------------------------------------------+---------------------------------+----------+
+| :c:data:`PyExc_PendingDeprecationWarning`| :exc:`PendingDeprecationWarning`|          |
++------------------------------------------+---------------------------------+----------+
+| :c:data:`PyExc_ResourceWarning`          | :exc:`ResourceWarning`          |          |
++------------------------------------------+---------------------------------+----------+
+| :c:data:`PyExc_RuntimeWarning`           | :exc:`RuntimeWarning`           |          |
++------------------------------------------+---------------------------------+----------+
+| :c:data:`PyExc_SyntaxWarning`            | :exc:`SyntaxWarning`            |          |
++------------------------------------------+---------------------------------+----------+
+| :c:data:`PyExc_UnicodeWarning`           | :exc:`UnicodeWarning`           |          |
++------------------------------------------+---------------------------------+----------+
+| :c:data:`PyExc_UserWarning`              | :exc:`UserWarning`              |          |
++------------------------------------------+---------------------------------+----------+
+
+.. versionadded:: 3.2
+   :c:data:`PyExc_ResourceWarning`.
+
+Notes:
+
+(1)
+   This is a base class for other standard warning categories.
diff --git a/Doc/c-api/long.rst b/Doc/c-api/long.rst
index 68f6a8e..78e555c 100644
--- a/Doc/c-api/long.rst
+++ b/Doc/c-api/long.rst
@@ -85,13 +85,12 @@ All integers are implemented as "long" integer objects of arbitrary size.
    Return a new :c:type:`PyLongObject` based on the string value in *str*, which
    is interpreted according to the radix in *base*.  If *pend* is non-*NULL*,
    *\*pend* will point to the first character in *str* which follows the
-   representation of the number.  If *base* is ``0``, the radix will be
-   determined based on the leading characters of *str*: if *str* starts with
-   ``'0x'`` or ``'0X'``, radix 16 will be used; if *str* starts with ``'0o'`` or
-   ``'0O'``, radix 8 will be used; if *str* starts with ``'0b'`` or ``'0B'``,
-   radix 2 will be used; otherwise radix 10 will be used.  If *base* is not
-   ``0``, it must be between ``2`` and ``36``, inclusive.  Leading spaces are
-   ignored.  If there are no digits, :exc:`ValueError` will be raised.
+   representation of the number.  If *base* is ``0``, *str* is interpreted using
+   the :ref:`integers` definition; in this case, leading zeros in a
+   non-zero decimal number raises a :exc:`ValueError`. If *base* is not ``0``,
+   it must be between ``2`` and ``36``, inclusive.  Leading spaces and single
+   underscores after a base specifier and between digits are ignored.  If there
+   are no digits, :exc:`ValueError` will be raised.
 
 
 .. c:function:: PyObject* PyLong_FromUnicode(Py_UNICODE *u, Py_ssize_t length, int base)
diff --git a/Doc/c-api/marshal.rst b/Doc/c-api/marshal.rst
index a6d0f46..c6d1d02 100644
--- a/Doc/c-api/marshal.rst
+++ b/Doc/c-api/marshal.rst
@@ -34,7 +34,7 @@ unmarshalling.  Version 2 uses a binary format for floating point numbers.
 
 .. c:function:: PyObject* PyMarshal_WriteObjectToString(PyObject *value, int version)
 
-   Return a string object containing the marshalled representation of *value*.
+   Return a bytes object containing the marshalled representation of *value*.
    *version* indicates the file format.
 
 
@@ -88,10 +88,10 @@ written using these routines?
    :exc:`TypeError`) and returns *NULL*.
 
 
-.. c:function:: PyObject* PyMarshal_ReadObjectFromString(const char *string, Py_ssize_t len)
+.. c:function:: PyObject* PyMarshal_ReadObjectFromString(const char *data, Py_ssize_t len)
 
-   Return a Python object from the data stream in a character buffer
-   containing *len* bytes pointed to by *string*.
+   Return a Python object from the data stream in a byte buffer
+   containing *len* bytes pointed to by *data*.
 
    On error, sets the appropriate exception (:exc:`EOFError` or
    :exc:`TypeError`) and returns *NULL*.
diff --git a/Doc/c-api/slice.rst b/Doc/c-api/slice.rst
index a825164..8b695e0 100644
--- a/Doc/c-api/slice.rst
+++ b/Doc/c-api/slice.rst
@@ -56,3 +56,14 @@ Slice Objects
    .. versionchanged:: 3.2
       The parameter type for the *slice* parameter was ``PySliceObject*``
       before.
+
+
+Ellipsis Object
+---------------
+
+
+.. c:var:: PyObject *Py_Ellipsis
+
+   The Python ``Ellipsis`` object.  This object has no methods.  It needs to be
+   treated just like any other object with respect to reference counts.  Like
+   :c:data:`Py_None` it is a singleton object.
diff --git a/Doc/c-api/structures.rst b/Doc/c-api/structures.rst
index 3e8a90c..c080f31 100644
--- a/Doc/c-api/structures.rst
+++ b/Doc/c-api/structures.rst
@@ -168,7 +168,7 @@ can be combined with a binding flag.
 
    Methods with these flags must be of type :c:type:`PyCFunctionWithKeywords`.
    The function expects three parameters: *self*, *args*, and a dictionary of
-   all the keyword arguments.  The flag is typically combined with
+   all the keyword arguments.  The flag must be combined with
    :const:`METH_VARARGS`, and the parameters are typically processed using
    :c:func:`PyArg_ParseTupleAndKeywords`.
 
@@ -241,7 +241,7 @@ definition with the same method name.
    +==================+=============+===============================+
    | :attr:`name`     | char \*     | name of the member            |
    +------------------+-------------+-------------------------------+
-   | :attr:`type`     | int         | the type of the member in the |
+   | :attr:`!type`    | int         | the type of the member in the |
    |                  |             | C struct                      |
    +------------------+-------------+-------------------------------+
    | :attr:`offset`   | Py_ssize_t  | the offset in bytes that the  |
@@ -256,7 +256,7 @@ definition with the same method name.
    |                  |             | docstring                     |
    +------------------+-------------+-------------------------------+
 
-   :attr:`type` can be one of many ``T_`` macros corresponding to various C
+   :attr:`!type` can be one of many ``T_`` macros corresponding to various C
    types.  When the member is accessed in Python, it will be converted to the
    equivalent Python type.
 
diff --git a/Doc/c-api/unicode.rst b/Doc/c-api/unicode.rst
index 256fef3..54d0373 100644
--- a/Doc/c-api/unicode.rst
+++ b/Doc/c-api/unicode.rst
@@ -1388,77 +1388,78 @@ Character Map Codecs
 This codec is special in that it can be used to implement many different codecs
 (and this is in fact what was done to obtain most of the standard codecs
 included in the :mod:`encodings` package). The codec uses mapping to encode and
-decode characters.
-
-Decoding mappings must map single string characters to single Unicode
-characters, integers (which are then interpreted as Unicode ordinals) or ``None``
-(meaning "undefined mapping" and causing an error).
-
-Encoding mappings must map single Unicode characters to single string
-characters, integers (which are then interpreted as Latin-1 ordinals) or ``None``
-(meaning "undefined mapping" and causing an error).
-
-The mapping objects provided must only support the __getitem__ mapping
-interface.
-
-If a character lookup fails with a LookupError, the character is copied as-is
-meaning that its ordinal value will be interpreted as Unicode or Latin-1 ordinal
-resp. Because of this, mappings only need to contain those mappings which map
-characters to different code points.
+decode characters.  The mapping objects provided must support the
+:meth:`__getitem__` mapping interface; dictionaries and sequences work well.
 
 These are the mapping codec APIs:
 
-.. c:function:: PyObject* PyUnicode_DecodeCharmap(const char *s, Py_ssize_t size, \
+.. c:function:: PyObject* PyUnicode_DecodeCharmap(const char *data, Py_ssize_t size, \
                               PyObject *mapping, const char *errors)
 
-   Create a Unicode object by decoding *size* bytes of the encoded string *s* using
-   the given *mapping* object.  Return *NULL* if an exception was raised by the
-   codec. If *mapping* is *NULL* latin-1 decoding will be done. Else it can be a
-   dictionary mapping byte or a unicode string, which is treated as a lookup table.
-   Byte values greater that the length of the string and U+FFFE "characters" are
-   treated as "undefined mapping".
+   Create a Unicode object by decoding *size* bytes of the encoded string *s*
+   using the given *mapping* object.  Return *NULL* if an exception was raised
+   by the codec.
+
+   If *mapping* is *NULL*, Latin-1 decoding will be applied.  Else
+   *mapping* must map bytes ordinals (integers in the range from 0 to 255)
+   to Unicode strings, integers (which are then interpreted as Unicode
+   ordinals) or ``None``.  Unmapped data bytes -- ones which cause a
+   :exc:`LookupError`, as well as ones which get mapped to ``None``,
+   ``0xFFFE`` or ``'\ufffe'``, are treated as undefined mappings and cause
+   an error.
 
 
 .. c:function:: PyObject* PyUnicode_AsCharmapString(PyObject *unicode, PyObject *mapping)
 
-   Encode a Unicode object using the given *mapping* object and return the result
-   as Python string object.  Error handling is "strict".  Return *NULL* if an
+   Encode a Unicode object using the given *mapping* object and return the
+   result as a bytes object.  Error handling is "strict".  Return *NULL* if an
    exception was raised by the codec.
 
-The following codec API is special in that maps Unicode to Unicode.
-
+   The *mapping* object must map Unicode ordinal integers to bytes objects,
+   integers in the range from 0 to 255 or ``None``.  Unmapped character
+   ordinals (ones which cause a :exc:`LookupError`) as well as mapped to
+   ``None`` are treated as "undefined mapping" and cause an error.
 
-.. c:function:: PyObject* PyUnicode_TranslateCharmap(const Py_UNICODE *s, Py_ssize_t size, \
-                              PyObject *table, const char *errors)
-
-   Translate a :c:type:`Py_UNICODE` buffer of the given *size* by applying a
-   character mapping *table* to it and return the resulting Unicode object.  Return
-   *NULL* when an exception was raised by the codec.
 
-   The *mapping* table must map Unicode ordinal integers to Unicode ordinal
-   integers or ``None`` (causing deletion of the character).
+.. c:function:: PyObject* PyUnicode_EncodeCharmap(const Py_UNICODE *s, Py_ssize_t size, \
+                              PyObject *mapping, const char *errors)
 
-   Mapping tables need only provide the :meth:`__getitem__` interface; dictionaries
-   and sequences work well.  Unmapped character ordinals (ones which cause a
-   :exc:`LookupError`) are left untouched and are copied as-is.
+   Encode the :c:type:`Py_UNICODE` buffer of the given *size* using the given
+   *mapping* object and return the result as a bytes object.  Return *NULL* if
+   an exception was raised by the codec.
 
    .. deprecated-removed:: 3.3 4.0
       Part of the old-style :c:type:`Py_UNICODE` API; please migrate to using
-      :c:func:`PyUnicode_Translate`. or :ref:`generic codec based API
-      <codec-registry>`
+      :c:func:`PyUnicode_AsCharmapString` or
+      :c:func:`PyUnicode_AsEncodedString`.
 
 
-.. c:function:: PyObject* PyUnicode_EncodeCharmap(const Py_UNICODE *s, Py_ssize_t size, \
+The following codec API is special in that maps Unicode to Unicode.
+
+.. c:function:: PyObject* PyUnicode_Translate(PyObject *unicode, \
                               PyObject *mapping, const char *errors)
 
-   Encode the :c:type:`Py_UNICODE` buffer of the given *size* using the given
-   *mapping* object and return a Python string object. Return *NULL* if an
-   exception was raised by the codec.
+   Translate a Unicode object using the given *mapping* object and return the
+   resulting Unicode object.  Return *NULL* if an exception was raised by the
+   codec.
+
+   The *mapping* object must map Unicode ordinal integers to Unicode strings,
+   integers (which are then interpreted as Unicode ordinals) or ``None``
+   (causing deletion of the character).  Unmapped character ordinals (ones
+   which cause a :exc:`LookupError`) are left untouched and are copied as-is.
+
+
+.. c:function:: PyObject* PyUnicode_TranslateCharmap(const Py_UNICODE *s, Py_ssize_t size, \
+                              PyObject *mapping, const char *errors)
+
+   Translate a :c:type:`Py_UNICODE` buffer of the given *size* by applying a
+   character *mapping* table to it and return the resulting Unicode object.
+   Return *NULL* when an exception was raised by the codec.
 
    .. deprecated-removed:: 3.3 4.0
       Part of the old-style :c:type:`Py_UNICODE` API; please migrate to using
-      :c:func:`PyUnicode_AsCharmapString` or
-      :c:func:`PyUnicode_AsEncodedString`.
+      :c:func:`PyUnicode_Translate`. or :ref:`generic codec based API
+      <codec-registry>`
 
 
 MBCS codecs for Windows
diff --git a/Doc/c-api/veryhigh.rst b/Doc/c-api/veryhigh.rst
index d0ceb05..6ab5942 100644
--- a/Doc/c-api/veryhigh.rst
+++ b/Doc/c-api/veryhigh.rst
@@ -300,12 +300,13 @@ the same library that the Python runtime is using.
    set to *NULL*.
 
 
-.. c:function:: PyObject* PyEval_EvalCodeEx(PyObject *co, PyObject *globals, PyObject *locals, PyObject **args, int argcount, PyObject **kws, int kwcount, PyObject **defs, int defcount, PyObject *closure)
+.. c:function:: PyObject* PyEval_EvalCodeEx(PyObject *co, PyObject *globals, PyObject *locals, PyObject **args, int argcount, PyObject **kws, int kwcount, PyObject **defs, int defcount, PyObject *kwdefs, PyObject *closure)
 
    Evaluate a precompiled code object, given a particular environment for its
    evaluation.  This environment consists of a dictionary of global variables,
    a mapping object of local variables, arrays of arguments, keywords and
-   defaults, and a closure tuple of cells.
+   defaults, a dictionary of default values for :ref:`keyword-only\
+   <keyword-only_parameter>` arguments and a closure tuple of cells.
 
 
 .. c:type:: PyFrameObject
diff --git a/Doc/conf.py b/Doc/conf.py
index b1bb620..b3f26d5 100644
--- a/Doc/conf.py
+++ b/Doc/conf.py
@@ -88,11 +88,24 @@ html_split_index = True
 # Options for LaTeX output
 # ------------------------
 
+# Get LaTeX to handle Unicode correctly
+latex_elements = {'inputenc': r'\usepackage[utf8x]{inputenc}', 'utf8extra': ''}
+
+# Additional stuff for the LaTeX preamble.
+latex_elements['preamble'] = r'''
+\authoraddress{
+  \strong{Python Software Foundation}\\
+  Email: \email{docs@python.org}
+}
+\let\Verbatim=\OriginalVerbatim
+\let\endVerbatim=\endOriginalVerbatim
+'''
+
 # The paper size ('letter' or 'a4').
-latex_paper_size = 'a4'
+latex_elements['papersize'] = 'a4'
 
 # The font size ('10pt', '11pt' or '12pt').
-latex_font_size = '10pt'
+latex_elements['font_size'] = '10pt'
 
 # Grouping the document tree into LaTeX files. List of tuples
 # (source start file, target name, title, author, document class [howto/manual]).
@@ -125,22 +138,9 @@ latex_documents.extend(('howto/' + fn[:-4], 'howto-' + fn[:-4] + '.tex',
                        for fn in os.listdir('howto')
                        if fn.endswith('.rst') and fn != 'index.rst')
 
-# Additional stuff for the LaTeX preamble.
-latex_preamble = r'''
-\authoraddress{
-  \strong{Python Software Foundation}\\
-  Email: \email{docs@python.org}
-}
-\let\Verbatim=\OriginalVerbatim
-\let\endVerbatim=\endOriginalVerbatim
-'''
-
 # Documents to append as an appendix to all manuals.
 latex_appendices = ['glossary', 'about', 'license', 'copyright']
 
-# Get LaTeX to handle Unicode correctly
-latex_elements = {'inputenc': r'\usepackage[utf8x]{inputenc}', 'utf8extra': ''}
-
 # Options for Epub output
 # -----------------------
 
diff --git a/Doc/distutils/examples.rst b/Doc/distutils/examples.rst
index 1f5be9c..4e2761d 100644
--- a/Doc/distutils/examples.rst
+++ b/Doc/distutils/examples.rst
@@ -321,7 +321,7 @@ You can read back this static file, by using the
     >>> metadata.description
     'Easily download, build, install, upgrade, and uninstall Python packages'
 
-Notice that the class can also be instanciated with a metadata file path to
+Notice that the class can also be instantiated with a metadata file path to
 loads its values::
 
     >>> pkg_info_path = 'distribute-0.6.8-py2.7.egg-info'
diff --git a/Doc/extending/newtypes.rst b/Doc/extending/newtypes.rst
index b8ce437..003b4e5 100644
--- a/Doc/extending/newtypes.rst
+++ b/Doc/extending/newtypes.rst
@@ -124,7 +124,7 @@ our objects and in some error messages, for example::
 
    >>> "" + noddy.new_noddy()
    Traceback (most recent call last):
-     File "<stdin>", line 1, in ?
+     File "<stdin>", line 1, in <module>
    TypeError: cannot add type "noddy.Noddy" to string
 
 Note that the name is a dotted name that includes both the module name and the
diff --git a/Doc/faq/general.rst b/Doc/faq/general.rst
index f1e33af..8f6a907 100644
--- a/Doc/faq/general.rst
+++ b/Doc/faq/general.rst
@@ -159,7 +159,7 @@ How do I obtain a copy of the Python source?
 
 The latest Python source distribution is always available from python.org, at
 https://www.python.org/downloads/.  The latest development sources can be obtained
-via anonymous Mercurial access at https://hg.python.org/cpython.
+at https://github.com/python/cpython/.
 
 The source distribution is a gzipped tar file containing the complete C source,
 Sphinx-formatted documentation, Python library modules, example programs, and
@@ -222,8 +222,8 @@ releases are announced on the comp.lang.python and comp.lang.python.announce
 newsgroups and on the Python home page at https://www.python.org/; an RSS feed of
 news is available.
 
-You can also access the development version of Python through Mercurial.  See
-https://docs.python.org/devguide/faq.html for details.
+You can also access the development version of Python through Git.  See
+`The Python Developer's Guide <https://docs.python.org/devguide/>`_ for details.
 
 
 How do I submit bug reports and patches for Python?
diff --git a/Doc/faq/windows.rst b/Doc/faq/windows.rst
index d725343..6ac83e4 100644
--- a/Doc/faq/windows.rst
+++ b/Doc/faq/windows.rst
@@ -300,9 +300,10 @@ this respect, and is easily configured to use spaces: Take :menuselection:`Tools
 --> Options --> Tabs`, and for file type "Default" set "Tab size" and "Indent
 size" to 4, and select the "Insert spaces" radio button.
 
-If you suspect mixed tabs and spaces are causing problems in leading whitespace,
-run Python with the :option:`-t` switch or run ``Tools/Scripts/tabnanny.py`` to
-check a directory tree in batch mode.
+Python raises :exc:`IndentationError` or :exc:`TabError` if mixed tabs
+and spaces are causing problems in leading whitespace.
+You may also run the :mod:`tabnanny` module to check a directory tree
+in batch mode.
 
 
 How do I check for a keypress without blocking?
diff --git a/Doc/glossary.rst b/Doc/glossary.rst
index 45b794f..f474a6d 100644
--- a/Doc/glossary.rst
+++ b/Doc/glossary.rst
@@ -103,6 +103,10 @@ Glossary
    binary file
       A :term:`file object` able to read and write
       :term:`bytes-like objects <bytes-like object>`.
+      Examples of binary files are files opened in binary mode (``'rb'``,
+      ``'wb'`` or ``'rb+'``), :data:`sys.stdin.buffer`,
+      :data:`sys.stdout.buffer`, and instances of :class:`io.BytesIO` and
+      :class:`gzip.GzipFile`.
 
       .. seealso::
          A :term:`text file` reads and writes :class:`str` objects.
@@ -127,7 +131,7 @@ Glossary
    bytecode
       Python source code is compiled into bytecode, the internal representation
       of a Python program in the CPython interpreter.  The bytecode is also
-      cached in ``.pyc`` and ``.pyo`` files so that executing the same file is
+      cached in ``.pyc`` files so that executing the same file is
       faster the second time (recompilation from source to bytecode can be
       avoided).  This "intermediate language" is said to run on a
       :term:`virtual machine` that executes the machine code corresponding to
@@ -430,9 +434,9 @@ Glossary
       Hashability makes an object usable as a dictionary key and a set member,
       because these data structures use the hash value internally.
 
-      All of Python's immutable built-in objects are hashable, while no mutable
-      containers (such as lists or dictionaries) are.  Objects which are
-      instances of user-defined classes are hashable by default; they all
+      All of Python's immutable built-in objects are hashable; mutable
+      containers (such as lists or dictionaries) are not.  Objects which are
+      instances of user-defined classes are hashable by default.  They all
       compare unequal (except with themselves), and their hash value is derived
       from their :func:`id`.
 
@@ -926,6 +930,9 @@ Glossary
       A :term:`file object` able to read and write :class:`str` objects.
       Often, a text file actually accesses a byte-oriented datastream
       and handles the :term:`text encoding` automatically.
+      Examples of text files are files opened in text mode (``'r'`` or ``'w'``),
+      :data:`sys.stdin`, :data:`sys.stdout`, and instances of
+      :class:`io.StringIO`.
 
       .. seealso::
          A :term:`binary file` reads and write :class:`bytes` objects.
diff --git a/Doc/howto/argparse.rst b/Doc/howto/argparse.rst
index 3b79b92..fac1a35 100644
--- a/Doc/howto/argparse.rst
+++ b/Doc/howto/argparse.rst
@@ -221,7 +221,7 @@ before proceeding.
 Introducing Optional arguments
 ==============================
 
-So far we, have been playing with positional arguments. Let us
+So far we have been playing with positional arguments. Let us
 have a look on how to add optional ones::
 
    import argparse
diff --git a/Doc/howto/clinic.rst b/Doc/howto/clinic.rst
index 491c5a2..8b2fc74 100644
--- a/Doc/howto/clinic.rst
+++ b/Doc/howto/clinic.rst
@@ -1407,8 +1407,8 @@ Let's start with defining some terminology:
 
   ``two-pass``
     A buffer like ``buffer``.  However, a two-pass buffer can only
-    be written once, and it prints out all text sent to it during
-    all of processing, even from Clinic blocks *after* the
+    be dumped once, and it prints out all text sent to it during
+    all processing, even from Clinic blocks *after* the dumping point.
 
   ``suppress``
     The text is suppressedâ€”thrown away.
@@ -1471,7 +1471,7 @@ preset configurations, as follows:
     The default filename is ``"{dirname}/clinic/{basename}.h"``.
 
   ``buffer``
-    Save up all most of the output from Clinic, to be written into
+    Save up most of the output from Clinic, to be written into
     your file near the end.  For Python files implementing modules
     or builtin types, it's recommended that you dump the buffer
     just above the static structures for your module or
diff --git a/Doc/howto/descriptor.rst b/Doc/howto/descriptor.rst
index c2bf473..2dd6c34 100644
--- a/Doc/howto/descriptor.rst
+++ b/Doc/howto/descriptor.rst
@@ -282,7 +282,7 @@ this::
         . . .
         def __get__(self, obj, objtype=None):
             "Simulate func_descr_get() in Objects/funcobject.c"
-            return types.MethodType(self, obj, objtype)
+            return types.MethodType(self, obj)
 
 Running the interpreter shows how the function descriptor works in practice::
 
diff --git a/Doc/howto/functional.rst b/Doc/howto/functional.rst
index 8ae9679..4060181 100644
--- a/Doc/howto/functional.rst
+++ b/Doc/howto/functional.rst
@@ -210,7 +210,7 @@ You can experiment with the iteration interface manually:
     3
     >>> next(it)
     Traceback (most recent call last):
-      File "<stdin>", line 1, in ?
+      File "<stdin>", line 1, in <module>
     StopIteration
     >>>
 
@@ -474,7 +474,7 @@ Here's a sample usage of the ``generate_ints()`` generator:
     2
     >>> next(gen)
     Traceback (most recent call last):
-      File "stdin", line 1, in ?
+      File "stdin", line 1, in <module>
       File "stdin", line 2, in generate_ints
     StopIteration
 
@@ -577,7 +577,7 @@ And here's an example of changing the counter:
     9
     >>> next(it)  #doctest: +SKIP
     Traceback (most recent call last):
-      File "t.py", line 15, in ?
+      File "t.py", line 15, in <module>
         it.next()
     StopIteration
 
@@ -653,8 +653,9 @@ This can also be written as a list comprehension:
     [0, 2, 4, 6, 8]
 
 
-:func:`enumerate(iter) <enumerate>` counts off the elements in the iterable,
-returning 2-tuples containing the count and each element. ::
+:func:`enumerate(iter, start=0) <enumerate>` counts off the elements in the
+iterable returning 2-tuples containing the count (from *start*) and
+each element. ::
 
     >>> for item in enumerate(['subject', 'verb', 'object']):
     ...     print(item)
@@ -747,14 +748,16 @@ The module's functions fall into a few broad classes:
 Creating new iterators
 ----------------------
 
-:func:`itertools.count(n) <itertools.count>` returns an infinite stream of
-integers, increasing by 1 each time.  You can optionally supply the starting
-number, which defaults to 0::
+:func:`itertools.count(start, step) <itertools.count>` returns an infinite
+stream of evenly spaced values.  You can optionally supply the starting number,
+which defaults to 0, and the interval between numbers, which defaults to 1::
 
     itertools.count() =>
       0, 1, 2, 3, 4, 5, 6, 7, 8, 9, ...
     itertools.count(10) =>
       10, 11, 12, 13, 14, 15, 16, 17, 18, 19, ...
+    itertools.count(10, 5) =>
+      10, 15, 20, 25, 30, 35, 40, 45, 50, 55, ...
 
 :func:`itertools.cycle(iter) <itertools.cycle>` saves a copy of the contents of
 a provided iterable and returns a new iterator that returns its elements from
@@ -1060,10 +1063,10 @@ write the obvious :keyword:`for` loop::
    for i in [1,2,3]:
        product *= i
 
-A related function is `itertools.accumulate(iterable, func=operator.add) <itertools.accumulate`.
-It performs the same calculation, but instead of returning only the
-final result, :func:`accumulate` returns an iterator that also yields
-each partial result::
+A related function is :func:`itertools.accumulate(iterable, func=operator.add)
+<itertools.accumulate>`.  It performs the same calculation, but instead of
+returning only the final result, :func:`accumulate` returns an iterator that
+also yields each partial result::
 
     itertools.accumulate([1,2,3,4,5]) =>
       1, 3, 6, 10, 15
@@ -1235,6 +1238,8 @@ Python documentation
 
 Documentation for the :mod:`itertools` module.
 
+Documentation for the :mod:`functools` module.
+
 Documentation for the :mod:`operator` module.
 
 :pep:`289`: "Generator Expressions"
diff --git a/Doc/howto/logging-cookbook.rst b/Doc/howto/logging-cookbook.rst
index f962cd8..6498ea5 100644
--- a/Doc/howto/logging-cookbook.rst
+++ b/Doc/howto/logging-cookbook.rst
@@ -1683,7 +1683,7 @@ Implementing structured logging
 -------------------------------
 
 Although most logging messages are intended for reading by humans, and thus not
-readily machine-parseable, there might be cirumstances where you want to output
+readily machine-parseable, there might be circumstances where you want to output
 messages in a structured format which *is* capable of being parsed by a program
 (without needing complex regular expressions to parse the log message). This is
 straightforward to achieve using the logging package. There are a number of
@@ -2165,8 +2165,8 @@ Speaking logging messages
 -------------------------
 
 There might be situations when it is desirable to have logging messages rendered
-in an audible rather than a visible format. This is easy to do if you have text-
-to-speech (TTS) functionality available in your system, even if it doesn't have
+in an audible rather than a visible format. This is easy to do if you have
+text-to-speech (TTS) functionality available in your system, even if it doesn't have
 a Python binding. Most TTS systems have a command line program you can run, and
 this can be invoked from a handler using :mod:`subprocess`. It's assumed here
 that TTS command line programs won't expect to interact with users or take a
diff --git a/Doc/howto/unicode.rst b/Doc/howto/unicode.rst
index a48ae1f..9649b9c 100644
--- a/Doc/howto/unicode.rst
+++ b/Doc/howto/unicode.rst
@@ -43,9 +43,9 @@ hold values ranging from 0 to 255.  ASCII codes only went up to 127, so some
 machines assigned values between 128 and 255 to accented characters.  Different
 machines had different codes, however, which led to problems exchanging files.
 Eventually various commonly used sets of values for the 128--255 range emerged.
-Some were true standards, defined by the International Standards Organization,
-and some were *de facto* conventions that were invented by one company or
-another and managed to catch on.
+Some were true standards, defined by the International Organization for
+Standardization, and some were *de facto* conventions that were invented by one
+company or another and managed to catch on.
 
 255 characters aren't very many.  For example, you can't fit both the accented
 characters used in Western Europe and the Cyrillic alphabet used for Russian
diff --git a/Doc/howto/urllib2.rst b/Doc/howto/urllib2.rst
index 18b5c65..8d383e0 100644
--- a/Doc/howto/urllib2.rst
+++ b/Doc/howto/urllib2.rst
@@ -34,8 +34,8 @@ handling common situations - like basic authentication, cookies, proxies and so
 on. These are provided by objects called handlers and openers.
 
 urllib.request supports fetching URLs for many "URL schemes" (identified by the string
-before the ":" in URL - for example "ftp" is the URL scheme of
-"ftp://python.org/") using their associated network protocols (e.g. FTP, HTTP).
+before the ``":"`` in URL - for example ``"ftp"`` is the URL scheme of
+``"ftp://python.org/"``) using their associated network protocols (e.g. FTP, HTTP).
 This tutorial focuses on the most common case, HTTP.
 
 For straightforward situations *urlopen* is very easy to use. But as soon as you
@@ -511,10 +511,10 @@ than the URL you pass to .add_password() will also match. ::
 
 ``top_level_url`` is in fact *either* a full URL (including the 'http:' scheme
 component and the hostname and optionally the port number)
-e.g. "http://example.com/" *or* an "authority" (i.e. the hostname,
-optionally including the port number) e.g. "example.com" or "example.com:8080"
+e.g. ``"http://example.com/"`` *or* an "authority" (i.e. the hostname,
+optionally including the port number) e.g. ``"example.com"`` or ``"example.com:8080"``
 (the latter example includes a port number).  The authority, if present, must
-NOT contain the "userinfo" component - for example "joe:password@example.com" is
+NOT contain the "userinfo" component - for example ``"joe:password@example.com"`` is
 not correct.
 
 
diff --git a/Doc/includes/setup.py b/Doc/includes/setup.py
index b853d23..a38a39d 100644
--- a/Doc/includes/setup.py
+++ b/Doc/includes/setup.py
@@ -5,4 +5,5 @@ setup(name="noddy", version="1.0",
          Extension("noddy2", ["noddy2.c"]),
          Extension("noddy3", ["noddy3.c"]),
          Extension("noddy4", ["noddy4.c"]),
+         Extension("shoddy", ["shoddy.c"]),
          ])
diff --git a/Doc/includes/shoddy.c b/Doc/includes/shoddy.c
index 07a2721..0c6d412 100644
--- a/Doc/includes/shoddy.c
+++ b/Doc/includes/shoddy.c
@@ -31,7 +31,7 @@ Shoddy_init(Shoddy *self, PyObject *args, PyObject *kwds)
 
 
 static PyTypeObject ShoddyType = {
-    PyObject_HEAD_INIT(NULL)
+    PyVarObject_HEAD_INIT(NULL, 0)
     "shoddy.Shoddy",         /* tp_name */
     sizeof(Shoddy),          /* tp_basicsize */
     0,                       /* tp_itemsize */
diff --git a/Doc/library/2to3.rst b/Doc/library/2to3.rst
index ace1bfa..4c9a528 100644
--- a/Doc/library/2to3.rst
+++ b/Doc/library/2to3.rst
@@ -199,13 +199,6 @@ and off individually.  They are described here in more detail.
    because the :class:`memoryview` API is similar but not exactly the same as
    that of :class:`buffer`.
 
-.. 2to3fixer:: callable
-
-   Converts ``callable(x)`` to ``isinstance(x, collections.Callable)``, adding
-   an import to :mod:`collections` if needed. Note ``callable(x)`` has returned
-   in Python 3.2, so if you do not intend to support Python 3.1, you can disable
-   this fixer.
-
 .. 2to3fixer:: dict
 
    Fixes dictionary iteration methods.  :meth:`dict.iteritems` is converted to
diff --git a/Doc/library/argparse.rst b/Doc/library/argparse.rst
index c6b2bf6..4530304 100644
--- a/Doc/library/argparse.rst
+++ b/Doc/library/argparse.rst
@@ -174,7 +174,7 @@ ArgumentParser objects
    * conflict_handler_ - The strategy for resolving conflicting optionals
      (usually unnecessary)
 
-   * add_help_ - Add a -h/--help option to the parser (default: ``True``)
+   * add_help_ - Add a ``-h/--help`` option to the parser (default: ``True``)
 
    * allow_abbrev_ - Allows long options to be abbreviated if the
      abbreviation is unambiguous. (default: ``True``)
@@ -211,7 +211,7 @@ The help for this program will display ``myprogram.py`` as the program name
     -h, --help  show this help message and exit
     --foo FOO   foo help
    $ cd ..
-   $ python subdir\myprogram.py --help
+   $ python subdir/myprogram.py --help
    usage: myprogram.py [-h] [--foo FOO]
 
    optional arguments:
diff --git a/Doc/library/asyncio-protocol.rst b/Doc/library/asyncio-protocol.rst
index c0342f7..2e1a11b 100644
--- a/Doc/library/asyncio-protocol.rst
+++ b/Doc/library/asyncio-protocol.rst
@@ -33,7 +33,7 @@ BaseTransport
 
    Base class for transports.
 
-   .. method:: close(self)
+   .. method:: close()
 
       Close the transport.  If the transport has a buffer for outgoing
       data, buffered data will be flushed asynchronously.  No more data
@@ -41,7 +41,7 @@ BaseTransport
       protocol's :meth:`connection_lost` method will be called with
       :const:`None` as its argument.
 
-   .. method:: is_closing(self)
+   .. method:: is_closing()
 
       Return ``True`` if the transport is closing or is closed.
 
@@ -248,7 +248,7 @@ BaseSubprocessTransport
       if it hasn't returned, similarly to the
       :attr:`subprocess.Popen.returncode` attribute.
 
-   .. method:: kill(self)
+   .. method:: kill()
 
       Kill the subprocess, as in :meth:`subprocess.Popen.kill`.
 
@@ -381,7 +381,7 @@ The following callbacks are called on :class:`Protocol` instances:
 
 .. method:: Protocol.eof_received()
 
-   Calls when the other end signals it won't send any more data
+   Called when the other end signals it won't send any more data
    (for example by calling :meth:`write_eof`, if the other end also uses
    asyncio).
 
diff --git a/Doc/library/asyncio-subprocess.rst b/Doc/library/asyncio-subprocess.rst
index dc93a74..16ba9a3 100644
--- a/Doc/library/asyncio-subprocess.rst
+++ b/Doc/library/asyncio-subprocess.rst
@@ -80,7 +80,7 @@ Run subprocesses asynchronously using the :mod:`subprocess` module.
    however, where :class:`~subprocess.Popen` takes a single argument which is
    list of strings, :func:`subprocess_exec` takes multiple string arguments.
 
-   The *protocol_factory* must instanciate a subclass of the
+   The *protocol_factory* must instantiate a subclass of the
    :class:`asyncio.SubprocessProtocol` class.
 
    Other parameters:
@@ -123,7 +123,7 @@ Run subprocesses asynchronously using the :mod:`subprocess` module.
    using the platform's "shell" syntax. This is similar to the standard library
    :class:`subprocess.Popen` class called with ``shell=True``.
 
-   The *protocol_factory* must instanciate a subclass of the
+   The *protocol_factory* must instantiate a subclass of the
    :class:`asyncio.SubprocessProtocol` class.
 
    See :meth:`~AbstractEventLoop.subprocess_exec` for more details about
diff --git a/Doc/library/asyncio-task.rst b/Doc/library/asyncio-task.rst
index 9bff1c4..558d17c 100644
--- a/Doc/library/asyncio-task.rst
+++ b/Doc/library/asyncio-task.rst
@@ -136,17 +136,6 @@ using the :meth:`sleep` function::
     loop.run_until_complete(display_date(loop))
     loop.close()
 
-The same coroutine implemented using a generator::
-
-    @asyncio.coroutine
-    def display_date(loop):
-        end_time = loop.time() + 5.0
-        while True:
-            print(datetime.datetime.now())
-            if (loop.time() + 1.0) >= end_time:
-                break
-            yield from asyncio.sleep(1)
-
 .. seealso::
 
    The :ref:`display the current date with call_later()
@@ -309,9 +298,8 @@ Example combining a :class:`Future` and a :ref:`coroutine function
 
     import asyncio
 
-    @asyncio.coroutine
-    def slow_operation(future):
-        yield from asyncio.sleep(1)
+    async def slow_operation(future):
+        await asyncio.sleep(1)
         future.set_result('Future is done!')
 
     loop = asyncio.get_event_loop()
@@ -341,9 +329,8 @@ flow::
 
     import asyncio
 
-    @asyncio.coroutine
-    def slow_operation(future):
-        yield from asyncio.sleep(1)
+    async def slow_operation(future):
+        await asyncio.sleep(1)
         future.set_result('Future is done!')
 
     def got_result(future):
@@ -472,21 +459,20 @@ Example executing 3 tasks (A, B, C) in parallel::
 
     import asyncio
 
-    @asyncio.coroutine
-    def factorial(name, number):
+    async def factorial(name, number):
         f = 1
         for i in range(2, number+1):
             print("Task %s: Compute factorial(%s)..." % (name, i))
-            yield from asyncio.sleep(1)
+            await asyncio.sleep(1)
             f *= i
         print("Task %s: factorial(%s) = %s" % (name, number, f))
 
     loop = asyncio.get_event_loop()
-    tasks = [
-        asyncio.ensure_future(factorial("A", 2)),
-        asyncio.ensure_future(factorial("B", 3)),
-        asyncio.ensure_future(factorial("C", 4))]
-    loop.run_until_complete(asyncio.gather(*tasks))
+    loop.run_until_complete(asyncio.gather(
+        factorial("A", 2),
+        factorial("B", 3),
+        factorial("C", 4),
+    ))
     loop.close()
 
 Output::
diff --git a/Doc/library/base64.rst b/Doc/library/base64.rst
index 080d9d7..ceecf17 100644
--- a/Doc/library/base64.rst
+++ b/Doc/library/base64.rst
@@ -237,14 +237,18 @@ The legacy interface:
 
 
 .. function:: decodebytes(s)
-              decodestring(s)
 
    Decode the :term:`bytes-like object` *s*, which must contain one or more
    lines of base64 encoded data, and return the decoded :class:`bytes`.
-   ``decodestring`` is a deprecated alias.
 
    .. versionadded:: 3.1
 
+.. function:: decodestring(s)
+
+   Deprecated alias of :func:`decodebytes`.
+
+   .. deprecated:: 3.1
+
 
 .. function:: encode(input, output)
 
@@ -257,14 +261,19 @@ The legacy interface:
 
 
 .. function:: encodebytes(s)
-              encodestring(s)
 
    Encode the :term:`bytes-like object` *s*, which can contain arbitrary binary
    data, and return :class:`bytes` containing the base64-encoded data, with newlines
    (``b'\n'``) inserted after every 76 bytes of output, and ensuring that
    there is a trailing newline, as per :rfc:`2045` (MIME).
 
-   ``encodestring`` is a deprecated alias.
+   .. versionadded:: 3.1
+
+.. function:: encodestring(s)
+
+   Deprecated alias of :func:`encodebytes`.
+
+   .. deprecated:: 3.1
 
 
 An example usage of the module:
diff --git a/Doc/library/binhex.rst b/Doc/library/binhex.rst
index 359ab23..2966e0d 100644
--- a/Doc/library/binhex.rst
+++ b/Doc/library/binhex.rst
@@ -55,5 +55,3 @@ the source for details.
 If you code or decode textfiles on non-Macintosh platforms they will still use
 the old Macintosh newline convention (carriage-return as end of line).
 
-As of this writing, :func:`hexbin` appears to not work in all cases.
-
diff --git a/Doc/library/cmd.rst b/Doc/library/cmd.rst
index f40cfdf..3b4a8ff 100644
--- a/Doc/library/cmd.rst
+++ b/Doc/library/cmd.rst
@@ -266,10 +266,10 @@ immediate playback::
             'Draw circle with given radius an options extent and steps:  CIRCLE 50'
             circle(*parse(arg))
         def do_position(self, arg):
-            'Print the current turle position:  POSITION'
+            'Print the current turtle position:  POSITION'
             print('Current position is %d %d\n' % position())
         def do_heading(self, arg):
-            'Print the current turle heading in degrees:  HEADING'
+            'Print the current turtle heading in degrees:  HEADING'
             print('Current heading is %d\n' % (heading(),))
         def do_color(self, arg):
             'Set the color:  COLOR BLUE'
diff --git a/Doc/library/configparser.rst b/Doc/library/configparser.rst
index 8d141a2..6f1c55e 100644
--- a/Doc/library/configparser.rst
+++ b/Doc/library/configparser.rst
@@ -34,8 +34,8 @@ can be customized by end users easily.
 .. seealso::
 
    Module :mod:`shlex`
-      Support for a creating Unix shell-like mini-languages which can be used
-      as an alternate format for application configuration files.
+      Support for creating Unix shell-like mini-languages which can be used as
+      an alternate format for application configuration files.
 
    Module :mod:`json`
       The json module implements a subset of JavaScript syntax which can also
@@ -1161,20 +1161,20 @@ ConfigParser Objects
          Use :meth:`read_file` instead.
 
       .. versionchanged:: 3.2
-         :meth:`readfp` now iterates on *f* instead of calling ``f.readline()``.
+         :meth:`readfp` now iterates on *fp* instead of calling ``fp.readline()``.
 
       For existing code calling :meth:`readfp` with arguments which don't
       support iteration, the following generator may be used as a wrapper
       around the file-like object::
 
-         def readline_generator(f):
-             line = f.readline()
+         def readline_generator(fp):
+             line = fp.readline()
              while line:
                  yield line
-                 line = f.readline()
+                 line = fp.readline()
 
-      Instead of ``parser.readfp(f)`` use
-      ``parser.read_file(readline_generator(f))``.
+      Instead of ``parser.readfp(fp)`` use
+      ``parser.read_file(readline_generator(fp))``.
 
 
 .. data:: MAX_INTERPOLATION_DEPTH
diff --git a/Doc/library/copy.rst b/Doc/library/copy.rst
index d0b861d..2041d91 100644
--- a/Doc/library/copy.rst
+++ b/Doc/library/copy.rst
@@ -47,8 +47,8 @@ copy operations:
 * Recursive objects (compound objects that, directly or indirectly, contain a
   reference to themselves) may cause a recursive loop.
 
-* Because deep copy copies *everything* it may copy too much, e.g.,
-  even administrative data structures that should be shared even between copies.
+* Because deep copy copies everything it may copy too much, such as data
+  which is intended to be shared between copies.
 
 The :func:`deepcopy` function avoids these problems by:
 
diff --git a/Doc/library/csv.rst b/Doc/library/csv.rst
index 7fb4fc8..21353e3 100644
--- a/Doc/library/csv.rst
+++ b/Doc/library/csv.rst
@@ -390,8 +390,10 @@ Reader objects (:class:`DictReader` instances and objects returned by the
 
 .. method:: csvreader.__next__()
 
-   Return the next row of the reader's iterable object as a list, parsed according
-   to the current dialect.  Usually you should call this as ``next(reader)``.
+   Return the next row of the reader's iterable object as a list (if the object
+   was returned from :func:`reader`) or a dict (if it is a :class:`DictReader`
+   instance), parsed according to the current dialect.  Usually you should call
+   this as ``next(reader)``.
 
 
 Reader objects have the following public attributes:
diff --git a/Doc/library/ctypes.rst b/Doc/library/ctypes.rst
index b25fbbb..97a59a7 100644
--- a/Doc/library/ctypes.rst
+++ b/Doc/library/ctypes.rst
@@ -97,7 +97,7 @@ Functions are accessed as attributes of dll objects::
    <_FuncPtr object at 0x...>
    >>> print(windll.kernel32.MyOwnFunction)     # doctest: +WINDOWS
    Traceback (most recent call last):
-     File "<stdin>", line 1, in ?
+     File "<stdin>", line 1, in <module>
      File "ctypes.py", line 239, in __getattr__
        func = _StdcallFuncPtr(name, self)
    AttributeError: function 'MyOwnFunction' not found
@@ -135,7 +135,7 @@ functions can be accessed by indexing the dll object with the ordinal number::
    <_FuncPtr object at 0x...>
    >>> cdll.kernel32[0]  # doctest: +WINDOWS
    Traceback (most recent call last):
-     File "<stdin>", line 1, in ?
+     File "<stdin>", line 1, in <module>
      File "ctypes.py", line 310, in __getitem__
        func = _StdcallFuncPtr(name, self)
    AttributeError: function ordinal 0 not found
@@ -168,11 +168,11 @@ although an error is raised the function *has* been called::
 
    >>> windll.kernel32.GetModuleHandleA()      # doctest: +WINDOWS
    Traceback (most recent call last):
-     File "<stdin>", line 1, in ?
+     File "<stdin>", line 1, in <module>
    ValueError: Procedure probably called with not enough arguments (4 bytes missing)
    >>> windll.kernel32.GetModuleHandleA(0, 0)  # doctest: +WINDOWS
    Traceback (most recent call last):
-     File "<stdin>", line 1, in ?
+     File "<stdin>", line 1, in <module>
    ValueError: Procedure probably called with too many arguments (4 bytes in excess)
    >>>
 
@@ -181,13 +181,13 @@ The same exception is raised when you call an ``stdcall`` function with the
 
    >>> cdll.kernel32.GetModuleHandleA(None)  # doctest: +WINDOWS
    Traceback (most recent call last):
-     File "<stdin>", line 1, in ?
+     File "<stdin>", line 1, in <module>
    ValueError: Procedure probably called with not enough arguments (4 bytes missing)
    >>>
 
    >>> windll.msvcrt.printf(b"spam")  # doctest: +WINDOWS
    Traceback (most recent call last):
-     File "<stdin>", line 1, in ?
+     File "<stdin>", line 1, in <module>
    ValueError: Procedure probably called with too many arguments (4 bytes in excess)
    >>>
 
@@ -200,7 +200,7 @@ argument values::
 
    >>> windll.kernel32.GetModuleHandleA(32)  # doctest: +WINDOWS
    Traceback (most recent call last):
-     File "<stdin>", line 1, in ?
+     File "<stdin>", line 1, in <module>
    OSError: exception: access violation reading 0x00000020
    >>>
 
@@ -284,7 +284,7 @@ the correct type and value::
    >>> c_int()
    c_long(0)
    >>> c_wchar_p("Hello, World")
-   c_wchar_p('Hello, World')
+   c_wchar_p(140018365411392)
    >>> c_ushort(-3)
    c_ushort(65533)
    >>>
@@ -309,11 +309,15 @@ bytes objects are immutable)::
    >>> s = "Hello, World"
    >>> c_s = c_wchar_p(s)
    >>> print(c_s)
-   c_wchar_p('Hello, World')
+   c_wchar_p(139966785747344)
+   >>> print(c_s.value)
+   Hello World
    >>> c_s.value = "Hi, there"
-   >>> print(c_s)
-   c_wchar_p('Hi, there')
-   >>> print(s)                 # first object is unchanged
+   >>> print(c_s)              # the memory location has changed
+   c_wchar_p(139966783348904)
+   >>> print(c_s.value)
+   Hi, there
+   >>> print(s)                # first object is unchanged
    Hello, World
    >>>
 
@@ -369,7 +373,7 @@ from within *IDLE* or *PythonWin*::
    19
    >>> printf(b"%f bottles of beer\n", 42.5)
    Traceback (most recent call last):
-     File "<stdin>", line 1, in ?
+     File "<stdin>", line 1, in <module>
    ArgumentError: argument 2: exceptions.TypeError: Don't know how to convert parameter 2
    >>>
 
@@ -432,7 +436,7 @@ prototype for a C function), and tries to convert the arguments to valid types::
 
    >>> printf(b"%d %d %d", 1, 2, 3)
    Traceback (most recent call last):
-     File "<stdin>", line 1, in ?
+     File "<stdin>", line 1, in <module>
    ArgumentError: argument 2: exceptions.TypeError: wrong type
    >>> printf(b"%s %d %f\n", b"X", 2, 3)
    X 2 3.000000
@@ -482,7 +486,7 @@ single character Python bytes object into a C char::
    'def'
    >>> strchr(b"abcdef", b"def")
    Traceback (most recent call last):
-     File "<stdin>", line 1, in ?
+     File "<stdin>", line 1, in <module>
    ArgumentError: argument 2: exceptions.TypeError: one character string expected
    >>> print(strchr(b"abcdef", b"x"))
    None
@@ -508,7 +512,7 @@ useful to check for error return values and automatically raise an exception::
    486539264
    >>> GetModuleHandle("something silly")  # doctest: +WINDOWS
    Traceback (most recent call last):
-     File "<stdin>", line 1, in ?
+     File "<stdin>", line 1, in <module>
      File "<stdin>", line 3, in ValidHandle
    OSError: [Errno 126] The specified module could not be found.
    >>>
@@ -579,7 +583,7 @@ Here is a simple example of a POINT structure, which contains two integers named
    0 5
    >>> POINT(1, 2, 3)
    Traceback (most recent call last):
-     File "<stdin>", line 1, in ?
+     File "<stdin>", line 1, in <module>
    ValueError: too many initializers
    >>>
 
@@ -782,7 +786,7 @@ new type::
    <class 'ctypes.LP_c_long'>
    >>> PI(42)
    Traceback (most recent call last):
-     File "<stdin>", line 1, in ?
+     File "<stdin>", line 1, in <module>
    TypeError: expected c_long instead of int
    >>> PI(c_int(42))
    <ctypes.LP_c_long object at 0x...>
@@ -858,7 +862,7 @@ but not instances of other types::
 
    >>> bar.values = (c_byte * 4)()
    Traceback (most recent call last):
-     File "<stdin>", line 1, in ?
+     File "<stdin>", line 1, in <module>
    TypeError: incompatible types, c_byte_Array_4 instance instead of LP_c_long instance
    >>>
 
@@ -909,7 +913,7 @@ work::
    ...                 ("next", POINTER(cell))]
    ...
    Traceback (most recent call last):
-     File "<stdin>", line 1, in ?
+     File "<stdin>", line 1, in <module>
      File "<stdin>", line 2, in cell
    NameError: name 'cell' is not defined
    >>>
diff --git a/Doc/library/curses.rst b/Doc/library/curses.rst
index d746eaf..3442e4e 100644
--- a/Doc/library/curses.rst
+++ b/Doc/library/curses.rst
@@ -290,8 +290,8 @@ The module :mod:`curses` defines the following functions:
 
 .. function:: initscr()
 
-   Initialize the library. Return a :class:`WindowObject` which represents the
-   whole screen.
+   Initialize the library. Return a :ref:`window <curses-window-objects>` object
+   which represents the whole screen.
 
    .. note::
 
@@ -383,8 +383,8 @@ The module :mod:`curses` defines the following functions:
 .. function:: newwin(nlines, ncols)
               newwin(nlines, ncols, begin_y, begin_x)
 
-   Return a new window, whose left-upper corner is at  ``(begin_y, begin_x)``, and
-   whose height/width is  *nlines*/*ncols*.
+   Return a new :ref:`window <curses-window-objects>`, whose left-upper corner
+   is at  ``(begin_y, begin_x)``, and whose height/width is  *nlines*/*ncols*.
 
    By default, the window will extend from the  specified position to the lower
    right corner of the screen.
@@ -1443,7 +1443,7 @@ The exact keycaps available are system dependent.
 +-------------------+--------------------------------------------+
 | ``KEY_SEOL``      | Shifted Clear line                         |
 +-------------------+--------------------------------------------+
-| ``KEY_SEXIT``     | Shifted Dxit                               |
+| ``KEY_SEXIT``     | Shifted Exit                               |
 +-------------------+--------------------------------------------+
 | ``KEY_SFIND``     | Shifted Find                               |
 +-------------------+--------------------------------------------+
@@ -1679,10 +1679,10 @@ You can instantiate a :class:`Textbox` object as follows:
 .. class:: Textbox(win)
 
    Return a textbox widget object.  The *win* argument should be a curses
-   :class:`WindowObject` in which the textbox is to be contained. The edit cursor
-   of the textbox is initially located at the upper left hand corner of the
-   containing window, with coordinates ``(0, 0)``. The instance's
-   :attr:`stripspaces` flag is initially on.
+   :ref:`window <curses-window-objects>` object in which the textbox is to
+   be contained. The edit cursor of the textbox is initially located at the
+   upper left hand corner of the containing window, with coordinates ``(0, 0)``.
+   The instance's :attr:`stripspaces` flag is initially on.
 
    :class:`Textbox` objects have the following methods:
 
diff --git a/Doc/library/dis.rst b/Doc/library/dis.rst
index f86725b..186aab4 100644
--- a/Doc/library/dis.rst
+++ b/Doc/library/dis.rst
@@ -765,8 +765,59 @@ the more significant byte last.
 
 .. opcode:: BUILD_MAP (count)
 
-   Pushes a new dictionary object onto the stack.  The dictionary is pre-sized
-   to hold *count* entries.
+   Pushes a new dictionary object onto the stack.  Pops ``2 * count`` items
+   so that the dictionary holds *count* entries:
+   ``{..., TOS3: TOS2, TOS1: TOS}``.
+
+   .. versionchanged:: 3.5
+      The dictionary is created from stack items instead of creating an
+      empty dictionary pre-sized to hold *count* items.
+
+
+.. opcode:: BUILD_TUPLE_UNPACK (count)
+
+   Pops *count* iterables from the stack, joins them in a single tuple,
+   and pushes the result.  Implements iterable unpacking in tuple
+   displays ``(*x, *y, *z)``.
+
+   .. versionadded:: 3.5
+
+
+.. opcode:: BUILD_LIST_UNPACK (count)
+
+   This is similar to :opcode:`BUILD_TUPLE_UNPACK`, but pushes a list
+   instead of tuple.  Implements iterable unpacking in list
+   displays ``[*x, *y, *z]``.
+
+   .. versionadded:: 3.5
+
+
+.. opcode:: BUILD_SET_UNPACK (count)
+
+   This is similar to :opcode:`BUILD_TUPLE_UNPACK`, but pushes a set
+   instead of tuple.  Implements iterable unpacking in set
+   displays ``{*x, *y, *z}``.
+
+   .. versionadded:: 3.5
+
+
+.. opcode:: BUILD_MAP_UNPACK (count)
+
+   Pops *count* mappings from the stack, merges them into a single dictionary,
+   and pushes the result.  Implements dictionary unpacking in dictionary
+   displays ``{**x, **y, **z}``.
+
+   .. versionadded:: 3.5
+
+
+.. opcode:: BUILD_MAP_UNPACK_WITH_CALL (oparg)
+
+   This is similar to :opcode:`BUILD_MAP_UNPACK`,
+   but is used for ``f(**x, **y, **z)`` call syntax.  The lowest byte of
+   *oparg* is the count of mappings, the relative position of the
+   corresponding callable ``f`` is encoded in the second byte of *oparg*.
+
+   .. versionadded:: 3.5
 
 
 .. opcode:: LOAD_ATTR (namei)
diff --git a/Doc/library/doctest.rst b/Doc/library/doctest.rst
index 131206d..587a0a0 100644
--- a/Doc/library/doctest.rst
+++ b/Doc/library/doctest.rst
@@ -408,7 +408,7 @@ Simple example::
 
    >>> [1, 2, 3].remove(42)
    Traceback (most recent call last):
-     File "<stdin>", line 1, in ?
+     File "<stdin>", line 1, in <module>
    ValueError: list.remove(x): x not in list
 
 That doctest succeeds if :exc:`ValueError` is raised, with the ``list.remove(x):
@@ -432,7 +432,7 @@ multi-line detail::
 
    >>> raise ValueError('multi\n    line\ndetail')
    Traceback (most recent call last):
-     File "<stdin>", line 1, in ?
+     File "<stdin>", line 1, in <module>
    ValueError: multi
        line
    detail
@@ -510,9 +510,9 @@ Option Flags
 
 A number of option flags control various aspects of doctest's behavior.
 Symbolic names for the flags are supplied as module constants, which can be
-or'ed together and passed to various functions.  The names can also be used in
-:ref:`doctest directives <doctest-directives>`, and may be passed to the
-doctest command line interface via the ``-o`` option.
+:ref:`bitwise ORed <bitwise>` together and passed to various functions.
+The names can also be used in :ref:`doctest directives <doctest-directives>`,
+and may be passed to the doctest command line interface via the ``-o`` option.
 
 .. versionadded:: 3.4
    The ``-o`` command line option.
@@ -591,7 +591,7 @@ doctest decides whether actual output matches an example's expected output:
 
       >>> (1, 2)[3] = 'moo'
       Traceback (most recent call last):
-        File "<stdin>", line 1, in ?
+        File "<stdin>", line 1, in <module>
       TypeError: object doesn't support item assignment
 
    passes under Python 2.3 and later Python versions with the flag specified,
@@ -877,8 +877,9 @@ and :ref:`doctest-simple-testfile`.
    nothing at the end.  In verbose mode, the summary is detailed, else the summary
    is very brief (in fact, empty if all tests passed).
 
-   Optional argument *optionflags* (default value 0) takes the bitwise-or of
-   option flags.  See section :ref:`doctest-options`.
+   Optional argument *optionflags* (default value 0) takes the
+   :ref:`bitwise OR <bitwise>` of option flags.
+   See section :ref:`doctest-options`.
 
    Optional argument *raise_on_error* defaults to false.  If true, an exception is
    raised upon the first failure or unexpected exception in an example.  This
@@ -1098,18 +1099,19 @@ reporting flags specific to :mod:`unittest` support, via this function:
 
    Set the :mod:`doctest` reporting flags to use.
 
-   Argument *flags* takes the bitwise-or of option flags.  See section
-   :ref:`doctest-options`.  Only "reporting flags" can be used.
+   Argument *flags* takes the :ref:`bitwise OR <bitwise>` of option flags.  See
+   section :ref:`doctest-options`.  Only "reporting flags" can be used.
 
    This is a module-global setting, and affects all future doctests run by module
    :mod:`unittest`:  the :meth:`runTest` method of :class:`DocTestCase` looks at
    the option flags specified for the test case when the :class:`DocTestCase`
    instance was constructed.  If no reporting flags were specified (which is the
    typical and expected case), :mod:`doctest`'s :mod:`unittest` reporting flags are
-   or'ed into the option flags, and the option flags so augmented are passed to the
-   :class:`DocTestRunner` instance created to run the doctest.  If any reporting
-   flags were specified when the :class:`DocTestCase` instance was constructed,
-   :mod:`doctest`'s :mod:`unittest` reporting flags are ignored.
+   :ref:`bitwise ORed <bitwise>` into the option flags, and the option flags
+   so augmented are passed to the :class:`DocTestRunner` instance created to
+   run the doctest.  If any reporting flags were specified when the
+   :class:`DocTestCase` instance was constructed, :mod:`doctest`'s
+   :mod:`unittest` reporting flags are ignored.
 
    The value of the :mod:`unittest` reporting flags in effect before the function
    was called is returned by the function.
diff --git a/Doc/library/email.contentmanager.rst b/Doc/library/email.contentmanager.rst
index a9c078b..5302b12 100644
--- a/Doc/library/email.contentmanager.rst
+++ b/Doc/library/email.contentmanager.rst
@@ -62,7 +62,7 @@ this module.
 .. class:: EmailMessage(policy=default)
 
    If *policy* is specified (it must be an instance of a :mod:`~email.policy`
-   class) use the rules it specifies to udpate and serialize the representation
+   class) use the rules it specifies to update and serialize the representation
    of the message.  If *policy* is not set, use the
    :class:`~email.policy.default` policy, which follows the rules of the email
    RFCs except for line endings (instead of the RFC mandated ``\r\n``, it uses
@@ -108,7 +108,7 @@ this module.
       the part a candidate match if the value of the header is ``inline``.
 
       If none of the candidates matches any of the preferences in
-      *preferneclist*, return ``None``.
+      *preferencelist*, return ``None``.
 
       Notes: (1) For most applications the only *preferencelist* combinations
       that really make sense are ``('plain',)``, ``('html', 'plain')``, and the
@@ -396,7 +396,7 @@ Currently the email package provides only one concrete content manager,
        MIME charset name, use the standard charset instead.
 
        If *cte* is set, encode the payload using the specified content transfer
-       encoding, and set the :mailheader:`Content-Transfer-Endcoding` header to
+       encoding, and set the :mailheader:`Content-Transfer-Encoding` header to
        that value.  For ``str`` objects, if it is not set use heuristics to
        determine the most compact encoding.  Possible values for *cte* are
        ``quoted-printable``, ``base64``, ``7bit``, ``8bit``, and ``binary``.
diff --git a/Doc/library/email.errors.rst b/Doc/library/email.errors.rst
index 8470783..b5b78f3 100644
--- a/Doc/library/email.errors.rst
+++ b/Doc/library/email.errors.rst
@@ -108,9 +108,9 @@ this class is *not* an exception!
   return false even though its content type claims to be :mimetype:`multipart`.
 
 * :class:`InvalidBase64PaddingDefect` -- When decoding a block of base64
-  enocded bytes, the padding was not correct.  Enough padding is added to
+  encoded bytes, the padding was not correct.  Enough padding is added to
   perform the decode, but the resulting decoded bytes may be invalid.
 
 * :class:`InvalidBase64CharactersDefect` -- When decoding a block of base64
-  enocded bytes, characters outside the base64 alphebet were encountered.
+  encoded bytes, characters outside the base64 alphabet were encountered.
   The characters are ignored, but the resulting decoded bytes may be invalid.
diff --git a/Doc/library/email.message.rst b/Doc/library/email.message.rst
index 2907975..3dae8a9 100644
--- a/Doc/library/email.message.rst
+++ b/Doc/library/email.message.rst
@@ -50,7 +50,7 @@ Here are the methods of the :class:`Message` class:
 
       Return the entire message flattened as a string.  When optional *unixfrom*
       is true, the envelope header is included in the returned string.
-      *unixfrom* defaults to ``False``.  For backward compabitility reasons,
+      *unixfrom* defaults to ``False``.  For backward compatibility reasons,
       *maxheaderlen* defaults to ``0``, so if you want a different value you
       must override it explicitly (the value specified for *max_line_length* in
       the policy will be ignored by this method).  The *policy* argument may be
diff --git a/Doc/library/email.mime.rst b/Doc/library/email.mime.rst
index 8297dea..bd007c0 100644
--- a/Doc/library/email.mime.rst
+++ b/Doc/library/email.mime.rst
@@ -203,7 +203,7 @@ Here are the classes:
 
    Unless the *_charset* argument is explicitly set to ``None``, the
    MIMEText object created will have both a :mailheader:`Content-Type` header
-   with a ``charset`` parameter, and a :mailheader:`Content-Transfer-Endcoding`
+   with a ``charset`` parameter, and a :mailheader:`Content-Transfer-Encoding`
    header.  This means that a subsequent ``set_payload`` call will not result
    in an encoded payload, even if a charset is passed in the ``set_payload``
    command.  You can "reset" this behavior by deleting the
diff --git a/Doc/library/email.policy.rst b/Doc/library/email.policy.rst
index 2a6047d..7010091 100644
--- a/Doc/library/email.policy.rst
+++ b/Doc/library/email.policy.rst
@@ -540,7 +540,7 @@ more closely to the RFCs relevant to their domains.
 
    The same as ``SMTP`` except that :attr:`~EmailPolicy.utf8` is ``True``.
    Useful for serializing messages to a message store without using encoded
-   words in the headers.  Should only be used for SMTP trasmission if the
+   words in the headers.  Should only be used for SMTP transmission if the
    sender or recipient addresses have non-ASCII characters (the
    :meth:`smtplib.SMTP.send_message` method handles this automatically).
 
diff --git a/Doc/library/fpectl.rst b/Doc/library/fpectl.rst
index e4b528c..9660716 100644
--- a/Doc/library/fpectl.rst
+++ b/Doc/library/fpectl.rst
@@ -89,7 +89,7 @@ The following example demonstrates how to start up and test operation of the
    >>> import math
    >>> math.exp(1000)
    Traceback (most recent call last):
-     File "<stdin>", line 1, in ?
+     File "<stdin>", line 1, in <module>
    FloatingPointError: in math_1
 
 
diff --git a/Doc/library/ftplib.rst b/Doc/library/ftplib.rst
index 1e35f37..f0e19bd 100644
--- a/Doc/library/ftplib.rst
+++ b/Doc/library/ftplib.rst
@@ -228,7 +228,7 @@ followed by ``lines`` for the text version or ``binary`` for the binary version.
 
    Retrieve a file in binary transfer mode.  *cmd* should be an appropriate
    ``RETR`` command: ``'RETR filename'``. The *callback* function is called for
-   each block of data received, with a single string argument giving the data
+   each block of data received, with a single bytes argument giving the data
    block. The optional *blocksize* argument specifies the maximum chunk size to
    read on the low-level socket object created to do the actual transfer (which
    will also be the largest size of the data blocks passed to *callback*).  A
@@ -248,9 +248,9 @@ followed by ``lines`` for the text version or ``binary`` for the binary version.
    prints the line to ``sys.stdout``.
 
 
-.. method:: FTP.set_pasv(boolean)
+.. method:: FTP.set_pasv(val)
 
-   Enable "passive" mode if *boolean* is true, other disable passive mode.
+   Enable "passive" mode if *val* is true, otherwise disable passive mode.
    Passive mode is on by default.
 
 
diff --git a/Doc/library/functions.rst b/Doc/library/functions.rst
index 2f14949..d6fa35a 100644
--- a/Doc/library/functions.rst
+++ b/Doc/library/functions.rst
@@ -604,7 +604,7 @@ are always available.  They are listed here in alphabetical order.
 
   .. note::
 
-    For object's with custom :meth:`__hash__` methods, note that :func:`hash`
+    For objects with custom :meth:`__hash__` methods, note that :func:`hash`
     truncates the return value based on the bit width of the host machine.
     See :meth:`__hash__` for details.
 
@@ -1104,7 +1104,7 @@ are always available.  They are listed here in alphabetical order.
 .. function:: print(*objects, sep=' ', end='\\n', file=sys.stdout, flush=False)
 
    Print *objects* to the text stream *file*, separated by *sep* and followed
-   by *end*.  *sep*, *end* and *file*, if present, must be given as keyword
+   by *end*.  *sep*, *end*, *file* and *flush*, if present, must be given as keyword
    arguments.
 
    All non-keyword arguments are converted to strings like :func:`str` does and
@@ -1233,17 +1233,21 @@ are always available.  They are listed here in alphabetical order.
 
 .. function:: round(number[, ndigits])
 
-   Return the floating point value *number* rounded to *ndigits* digits after
-   the decimal point.  If *ndigits* is omitted or is ``None``, it returns the
-   nearest integer to its input.  Delegates to ``number.__round__(ndigits)``.
+   Return *number* rounded to *ndigits* precision after the decimal
+   point.  If *ndigits* is omitted or is ``None``, it returns the
+   nearest integer to its input.
 
    For the built-in types supporting :func:`round`, values are rounded to the
    closest multiple of 10 to the power minus *ndigits*; if two multiples are
    equally close, rounding is done toward the even choice (so, for example,
    both ``round(0.5)`` and ``round(-0.5)`` are ``0``, and ``round(1.5)`` is
-   ``2``).  The return value is an integer if called with one argument,
+   ``2``).  Any integer value is valid for *ndigits* (positive, zero, or
+   negative).  The return value is an integer if called with one argument,
    otherwise of the same type as *number*.
 
+   For a general Python object ``number``, ``round(number, ndigits)`` delegates to
+   ``number.__round__(ndigits)``.
+
    .. note::
 
       The behavior of :func:`round` for floats can be surprising: for example,
diff --git a/Doc/library/http.server.rst b/Doc/library/http.server.rst
index ae7fb97..6e71c8a 100644
--- a/Doc/library/http.server.rst
+++ b/Doc/library/http.server.rst
@@ -105,7 +105,8 @@ of which this module provides three different variants:
 
       Contains the output stream for writing a response back to the
       client. Proper adherence to the HTTP protocol must be used when writing to
-      this stream.
+      this stream in order to achieve successful interoperation with HTTP
+      clients.
 
    :class:`BaseHTTPRequestHandler` has the following attributes:
 
diff --git a/Doc/library/idle.rst b/Doc/library/idle.rst
index a629bc5..80dd6fa 100644
--- a/Doc/library/idle.rst
+++ b/Doc/library/idle.rst
@@ -244,7 +244,7 @@ Go to File/Line
    single: stack viewer
 
 Debugger (toggle)
-   When actived, code entered in the Shell or run from an Editor will run
+   When activated, code entered in the Shell or run from an Editor will run
    under the debugger.  In the Editor, breakpoints can be set with the context
    menu.  This feature is still incomplete and somewhat experimental.
 
@@ -372,7 +372,7 @@ the :kbd:`Command` key on Mac OSX.
 
    * :kbd:`C-l` center window around the insertion point
 
-   * :kbd:`C-b` go backwards one character without deleting (usually you can
+   * :kbd:`C-b` go backward one character without deleting (usually you can
      also use the cursor key for this)
 
    * :kbd:`C-f` go forward one character without deleting (usually you can
@@ -394,7 +394,7 @@ After a block-opening statement, the next line is indented by 4 spaces (in the
 Python Shell window by one tab).  After certain keywords (break, return etc.)
 the next line is dedented.  In leading indentation, :kbd:`Backspace` deletes up
 to 4 spaces if they are there. :kbd:`Tab` inserts spaces (in the Python
-Shell window one tab), number depends on Indent width. Currently tabs
+Shell window one tab), number depends on Indent width. Currently, tabs
 are restricted to four spaces due to Tcl/Tk limitations.
 
 See also the indent/dedent region commands in the edit menu.
@@ -418,7 +418,7 @@ If there is only one possible completion for the characters entered, a
 :kbd:`C-space` will open a completions window. In an empty
 string, this will contain the files in the current directory. On a
 blank line, it will contain the built-in and user-defined functions and
-classes in the current name spaces, plus any modules imported. If some
+classes in the current namespaces, plus any modules imported. If some
 characters have been entered, the ACW will attempt to be more specific.
 
 If a string of characters is typed, the ACW selection will jump to the
@@ -557,7 +557,7 @@ IDLE-console differences
 
 As much as possible, the result of executing Python code with IDLE is the
 same as executing the same code in a console window.  However, the different
-interface and operation occasionally affects visible results.  For instance,
+interface and operation occasionally affect visible results.  For instance,
 ``sys.modules`` starts with more entries.
 
 IDLE also replaces ``sys.stdin``, ``sys.stdout``, and ``sys.stderr`` with
@@ -583,7 +583,7 @@ If firewall software complains anyway, you can ignore it.
 
 If the attempt to make the socket connection fails, Idle will notify you.
 Such failures are sometimes transient, but if persistent, the problem
-may be either a firewall blocking the connecton or misconfiguration of
+may be either a firewall blocking the connection or misconfiguration of
 a particular system.  Until the problem is fixed, one can run Idle with
 the -n command line switch.
 
@@ -619,14 +619,14 @@ Setting preferences
 
 The font preferences, highlighting, keys, and general preferences can be
 changed via Configure IDLE on the Option menu.  Keys can be user defined;
-IDLE ships with four built in key sets. In addition a user can create a
+IDLE ships with four built-in key sets. In addition, a user can create a
 custom key set in the Configure IDLE dialog under the keys tab.
 
 
 Extensions
 ^^^^^^^^^^
 
-IDLE contains an extension facility.  Peferences for extensions can be
+IDLE contains an extension facility.  Preferences for extensions can be
 changed with Configure Extensions. See the beginning of config-extensions.def
 in the idlelib directory for further information.  The default extensions
 are currently:
diff --git a/Doc/library/inspect.rst b/Doc/library/inspect.rst
index 62a3988..16e33f0 100644
--- a/Doc/library/inspect.rst
+++ b/Doc/library/inspect.rst
@@ -34,185 +34,198 @@ provided as convenient choices for the second argument to :func:`getmembers`.
 They also help you determine when you can expect to find the following special
 attributes:
 
-+-----------+-----------------+---------------------------+
-| Type      | Attribute       | Description               |
-+===========+=================+===========================+
-| module    | __doc__         | documentation string      |
-+-----------+-----------------+---------------------------+
-|           | __file__        | filename (missing for     |
-|           |                 | built-in modules)         |
-+-----------+-----------------+---------------------------+
-| class     | __doc__         | documentation string      |
-+-----------+-----------------+---------------------------+
-|           | __name__        | name with which this      |
-|           |                 | class was defined         |
-+-----------+-----------------+---------------------------+
-|           | __qualname__    | qualified name            |
-+-----------+-----------------+---------------------------+
-|           | __module__      | name of module in which   |
-|           |                 | this class was defined    |
-+-----------+-----------------+---------------------------+
-| method    | __doc__         | documentation string      |
-+-----------+-----------------+---------------------------+
-|           | __name__        | name with which this      |
-|           |                 | method was defined        |
-+-----------+-----------------+---------------------------+
-|           | __qualname__    | qualified name            |
-+-----------+-----------------+---------------------------+
-|           | __func__        | function object           |
-|           |                 | containing implementation |
-|           |                 | of method                 |
-+-----------+-----------------+---------------------------+
-|           | __self__        | instance to which this    |
-|           |                 | method is bound, or       |
-|           |                 | ``None``                  |
-+-----------+-----------------+---------------------------+
-| function  | __doc__         | documentation string      |
-+-----------+-----------------+---------------------------+
-|           | __name__        | name with which this      |
-|           |                 | function was defined      |
-+-----------+-----------------+---------------------------+
-|           | __qualname__    | qualified name            |
-+-----------+-----------------+---------------------------+
-|           | __code__        | code object containing    |
-|           |                 | compiled function         |
-|           |                 | :term:`bytecode`          |
-+-----------+-----------------+---------------------------+
-|           | __defaults__    | tuple of any default      |
-|           |                 | values for positional or  |
-|           |                 | keyword parameters        |
-+-----------+-----------------+---------------------------+
-|           | __kwdefaults__  | mapping of any default    |
-|           |                 | values for keyword-only   |
-|           |                 | parameters                |
-+-----------+-----------------+---------------------------+
-|           | __globals__     | global namespace in which |
-|           |                 | this function was defined |
-+-----------+-----------------+---------------------------+
-|           | __annotations__ | mapping of parameters     |
-|           |                 | names to annotations;     |
-|           |                 | ``"return"`` key is       |
-|           |                 | reserved for return       |
-|           |                 | annotations.              |
-+-----------+-----------------+---------------------------+
-| traceback | tb_frame        | frame object at this      |
-|           |                 | level                     |
-+-----------+-----------------+---------------------------+
-|           | tb_lasti        | index of last attempted   |
-|           |                 | instruction in bytecode   |
-+-----------+-----------------+---------------------------+
-|           | tb_lineno       | current line number in    |
-|           |                 | Python source code        |
-+-----------+-----------------+---------------------------+
-|           | tb_next         | next inner traceback      |
-|           |                 | object (called by this    |
-|           |                 | level)                    |
-+-----------+-----------------+---------------------------+
-| frame     | f_back          | next outer frame object   |
-|           |                 | (this frame's caller)     |
-+-----------+-----------------+---------------------------+
-|           | f_builtins      | builtins namespace seen   |
-|           |                 | by this frame             |
-+-----------+-----------------+---------------------------+
-|           | f_code          | code object being         |
-|           |                 | executed in this frame    |
-+-----------+-----------------+---------------------------+
-|           | f_globals       | global namespace seen by  |
-|           |                 | this frame                |
-+-----------+-----------------+---------------------------+
-|           | f_lasti         | index of last attempted   |
-|           |                 | instruction in bytecode   |
-+-----------+-----------------+---------------------------+
-|           | f_lineno        | current line number in    |
-|           |                 | Python source code        |
-+-----------+-----------------+---------------------------+
-|           | f_locals        | local namespace seen by   |
-|           |                 | this frame                |
-+-----------+-----------------+---------------------------+
-|           | f_restricted    | 0 or 1 if frame is in     |
-|           |                 | restricted execution mode |
-+-----------+-----------------+---------------------------+
-|           | f_trace         | tracing function for this |
-|           |                 | frame, or ``None``        |
-+-----------+-----------------+---------------------------+
-| code      | co_argcount     | number of arguments (not  |
-|           |                 | including \* or \*\*      |
-|           |                 | args)                     |
-+-----------+-----------------+---------------------------+
-|           | co_code         | string of raw compiled    |
-|           |                 | bytecode                  |
-+-----------+-----------------+---------------------------+
-|           | co_consts       | tuple of constants used   |
-|           |                 | in the bytecode           |
-+-----------+-----------------+---------------------------+
-|           | co_filename     | name of file in which     |
-|           |                 | this code object was      |
-|           |                 | created                   |
-+-----------+-----------------+---------------------------+
-|           | co_firstlineno  | number of first line in   |
-|           |                 | Python source code        |
-+-----------+-----------------+---------------------------+
-|           | co_flags        | bitmap of ``CO_*`` flags, |
-|           |                 | read more :ref:`here      |
-|           |                 | <inspect-module-co-flags>`|
-+-----------+-----------------+---------------------------+
-|           | co_lnotab       | encoded mapping of line   |
-|           |                 | numbers to bytecode       |
-|           |                 | indices                   |
-+-----------+-----------------+---------------------------+
-|           | co_name         | name with which this code |
-|           |                 | object was defined        |
-+-----------+-----------------+---------------------------+
-|           | co_names        | tuple of names of local   |
-|           |                 | variables                 |
-+-----------+-----------------+---------------------------+
-|           | co_nlocals      | number of local variables |
-+-----------+-----------------+---------------------------+
-|           | co_stacksize    | virtual machine stack     |
-|           |                 | space required            |
-+-----------+-----------------+---------------------------+
-|           | co_varnames     | tuple of names of         |
-|           |                 | arguments and local       |
-|           |                 | variables                 |
-+-----------+-----------------+---------------------------+
-| generator | __name__        | name                      |
-+-----------+-----------------+---------------------------+
-|           | __qualname__    | qualified name            |
-+-----------+-----------------+---------------------------+
-|           | gi_frame        | frame                     |
-+-----------+-----------------+---------------------------+
-|           | gi_running      | is the generator running? |
-+-----------+-----------------+---------------------------+
-|           | gi_code         | code                      |
-+-----------+-----------------+---------------------------+
-|           | gi_yieldfrom    | object being iterated by  |
-|           |                 | ``yield from``, or        |
-|           |                 | ``None``                  |
-+-----------+-----------------+---------------------------+
-| coroutine | __name__        | name                      |
-+-----------+-----------------+---------------------------+
-|           | __qualname__    | qualified name            |
-+-----------+-----------------+---------------------------+
-|           | cr_await        | object being awaited on,  |
-|           |                 | or ``None``               |
-+-----------+-----------------+---------------------------+
-|           | cr_frame        | frame                     |
-+-----------+-----------------+---------------------------+
-|           | cr_running      | is the coroutine running? |
-+-----------+-----------------+---------------------------+
-|           | cr_code         | code                      |
-+-----------+-----------------+---------------------------+
-| builtin   | __doc__         | documentation string      |
-+-----------+-----------------+---------------------------+
-|           | __name__        | original name of this     |
-|           |                 | function or method        |
-+-----------+-----------------+---------------------------+
-|           | __qualname__    | qualified name            |
-+-----------+-----------------+---------------------------+
-|           | __self__        | instance to which a       |
-|           |                 | method is bound, or       |
-|           |                 | ``None``                  |
-+-----------+-----------------+---------------------------+
++-----------+-------------------+---------------------------+
+| Type      | Attribute         | Description               |
++===========+===================+===========================+
+| module    | __doc__           | documentation string      |
++-----------+-------------------+---------------------------+
+|           | __file__          | filename (missing for     |
+|           |                   | built-in modules)         |
++-----------+-------------------+---------------------------+
+| class     | __doc__           | documentation string      |
++-----------+-------------------+---------------------------+
+|           | __name__          | name with which this      |
+|           |                   | class was defined         |
++-----------+-------------------+---------------------------+
+|           | __qualname__      | qualified name            |
++-----------+-------------------+---------------------------+
+|           | __module__        | name of module in which   |
+|           |                   | this class was defined    |
++-----------+-------------------+---------------------------+
+| method    | __doc__           | documentation string      |
++-----------+-------------------+---------------------------+
+|           | __name__          | name with which this      |
+|           |                   | method was defined        |
++-----------+-------------------+---------------------------+
+|           | __qualname__      | qualified name            |
++-----------+-------------------+---------------------------+
+|           | __func__          | function object           |
+|           |                   | containing implementation |
+|           |                   | of method                 |
++-----------+-------------------+---------------------------+
+|           | __self__          | instance to which this    |
+|           |                   | method is bound, or       |
+|           |                   | ``None``                  |
++-----------+-------------------+---------------------------+
+| function  | __doc__           | documentation string      |
++-----------+-------------------+---------------------------+
+|           | __name__          | name with which this      |
+|           |                   | function was defined      |
++-----------+-------------------+---------------------------+
+|           | __qualname__      | qualified name            |
++-----------+-------------------+---------------------------+
+|           | __code__          | code object containing    |
+|           |                   | compiled function         |
+|           |                   | :term:`bytecode`          |
++-----------+-------------------+---------------------------+
+|           | __defaults__      | tuple of any default      |
+|           |                   | values for positional or  |
+|           |                   | keyword parameters        |
++-----------+-------------------+---------------------------+
+|           | __kwdefaults__    | mapping of any default    |
+|           |                   | values for keyword-only   |
+|           |                   | parameters                |
++-----------+-------------------+---------------------------+
+|           | __globals__       | global namespace in which |
+|           |                   | this function was defined |
++-----------+-------------------+---------------------------+
+|           | __annotations__   | mapping of parameters     |
+|           |                   | names to annotations;     |
+|           |                   | ``"return"`` key is       |
+|           |                   | reserved for return       |
+|           |                   | annotations.              |
++-----------+-------------------+---------------------------+
+| traceback | tb_frame          | frame object at this      |
+|           |                   | level                     |
++-----------+-------------------+---------------------------+
+|           | tb_lasti          | index of last attempted   |
+|           |                   | instruction in bytecode   |
++-----------+-------------------+---------------------------+
+|           | tb_lineno         | current line number in    |
+|           |                   | Python source code        |
++-----------+-------------------+---------------------------+
+|           | tb_next           | next inner traceback      |
+|           |                   | object (called by this    |
+|           |                   | level)                    |
++-----------+-------------------+---------------------------+
+| frame     | f_back            | next outer frame object   |
+|           |                   | (this frame's caller)     |
++-----------+-------------------+---------------------------+
+|           | f_builtins        | builtins namespace seen   |
+|           |                   | by this frame             |
++-----------+-------------------+---------------------------+
+|           | f_code            | code object being         |
+|           |                   | executed in this frame    |
++-----------+-------------------+---------------------------+
+|           | f_globals         | global namespace seen by  |
+|           |                   | this frame                |
++-----------+-------------------+---------------------------+
+|           | f_lasti           | index of last attempted   |
+|           |                   | instruction in bytecode   |
++-----------+-------------------+---------------------------+
+|           | f_lineno          | current line number in    |
+|           |                   | Python source code        |
++-----------+-------------------+---------------------------+
+|           | f_locals          | local namespace seen by   |
+|           |                   | this frame                |
++-----------+-------------------+---------------------------+
+|           | f_restricted      | 0 or 1 if frame is in     |
+|           |                   | restricted execution mode |
++-----------+-------------------+---------------------------+
+|           | f_trace           | tracing function for this |
+|           |                   | frame, or ``None``        |
++-----------+-------------------+---------------------------+
+| code      | co_argcount       | number of arguments (not  |
+|           |                   | including keyword only    |
+|           |                   | arguments, \* or \*\*     |
+|           |                   | args)                     |
++-----------+-------------------+---------------------------+
+|           | co_code           | string of raw compiled    |
+|           |                   | bytecode                  |
++-----------+-------------------+---------------------------+
+|           | co_cellvars       | tuple of names of cell    |
+|           |                   | variables (referenced by  |
+|           |                   | containing scopes)        |
++-----------+-------------------+---------------------------+
+|           | co_consts         | tuple of constants used   |
+|           |                   | in the bytecode           |
++-----------+-------------------+---------------------------+
+|           | co_filename       | name of file in which     |
+|           |                   | this code object was      |
+|           |                   | created                   |
++-----------+-------------------+---------------------------+
+|           | co_firstlineno    | number of first line in   |
+|           |                   | Python source code        |
++-----------+-------------------+---------------------------+
+|           | co_flags          | bitmap of ``CO_*`` flags, |
+|           |                   | read more :ref:`here      |
+|           |                   | <inspect-module-co-flags>`|
++-----------+-------------------+---------------------------+
+|           | co_lnotab         | encoded mapping of line   |
+|           |                   | numbers to bytecode       |
+|           |                   | indices                   |
++-----------+-------------------+---------------------------+
+|           | co_freevars       | tuple of names of free    |
+|           |                   | variables (referenced via |
+|           |                   | a function's closure)     |
++-----------+-------------------+---------------------------+
+|           | co_kwonlyargcount | number of keyword only    |
+|           |                   | arguments (not including  |
+|           |                   | \*\* arg)                 |
++-----------+-------------------+---------------------------+
+|           | co_name           | name with which this code |
+|           |                   | object was defined        |
++-----------+-------------------+---------------------------+
+|           | co_names          | tuple of names of local   |
+|           |                   | variables                 |
++-----------+-------------------+---------------------------+
+|           | co_nlocals        | number of local variables |
++-----------+-------------------+---------------------------+
+|           | co_stacksize      | virtual machine stack     |
+|           |                   | space required            |
++-----------+-------------------+---------------------------+
+|           | co_varnames       | tuple of names of         |
+|           |                   | arguments and local       |
+|           |                   | variables                 |
++-----------+-------------------+---------------------------+
+| generator | __name__          | name                      |
++-----------+-------------------+---------------------------+
+|           | __qualname__      | qualified name            |
++-----------+-------------------+---------------------------+
+|           | gi_frame          | frame                     |
++-----------+-------------------+---------------------------+
+|           | gi_running        | is the generator running? |
++-----------+-------------------+---------------------------+
+|           | gi_code           | code                      |
++-----------+-------------------+---------------------------+
+|           | gi_yieldfrom      | object being iterated by  |
+|           |                   | ``yield from``, or        |
+|           |                   | ``None``                  |
++-----------+-------------------+---------------------------+
+| coroutine | __name__          | name                      |
++-----------+-------------------+---------------------------+
+|           | __qualname__      | qualified name            |
++-----------+-------------------+---------------------------+
+|           | cr_await          | object being awaited on,  |
+|           |                   | or ``None``               |
++-----------+-------------------+---------------------------+
+|           | cr_frame          | frame                     |
++-----------+-------------------+---------------------------+
+|           | cr_running        | is the coroutine running? |
++-----------+-------------------+---------------------------+
+|           | cr_code           | code                      |
++-----------+-------------------+---------------------------+
+| builtin   | __doc__           | documentation string      |
++-----------+-------------------+---------------------------+
+|           | __name__          | original name of this     |
+|           |                   | function or method        |
++-----------+-------------------+---------------------------+
+|           | __qualname__      | qualified name            |
++-----------+-------------------+---------------------------+
+|           | __self__          | instance to which a       |
+|           |                   | method is bound, or       |
+|           |                   | ``None``                  |
++-----------+-------------------+---------------------------+
 
 .. versionchanged:: 3.5
 
@@ -440,7 +453,9 @@ Retrieving source code
 
    Return in a single string any lines of comments immediately preceding the
    object's source code (for a class, function, or method), or at the top of the
-   Python source file (if the object is a module).
+   Python source file (if the object is a module).  If the object's source code
+   is unavailable, return ``None``.  This could happen if the object has been
+   defined in C or the interactive shell.
 
 
 .. function:: getfile(object)
@@ -875,10 +890,8 @@ Classes and functions
    are the names of the ``*`` and ``**`` arguments or ``None``.  *locals* is the
    locals dictionary of the given frame.
 
-   .. deprecated:: 3.5
-      Use :func:`signature` and
-      :ref:`Signature Object <inspect-signature-object>`, which provide a
-      better introspecting API for callables.
+   .. note::
+      This function was inadvertently marked as deprecated in Python 3.5.
 
 
 .. function:: formatargspec(args[, varargs, varkw, defaults, kwonlyargs, kwonlydefaults, annotations[, formatarg, formatvarargs, formatvarkw, formatvalue, formatreturns, formatannotations]])
@@ -914,10 +927,8 @@ Classes and functions
    :func:`getargvalues`.  The format\* arguments are the corresponding optional
    formatting functions that are called to turn names and values into strings.
 
-   .. deprecated:: 3.5
-      Use :func:`signature` and
-      :ref:`Signature Object <inspect-signature-object>`, which provide a
-      better introspecting API for callables.
+   .. note::
+      This function was inadvertently marked as deprecated in Python 3.5.
 
 
 .. function:: getmro(cls)
@@ -1240,6 +1251,10 @@ Code Objects Bit Flags
 Python code objects have a ``co_flags`` attribute, which is a bitmap of
 the following flags:
 
+.. data:: CO_OPTIMIZED
+
+   The code object is optimized, using fast locals.
+
 .. data:: CO_NEWLOCALS
 
    If set, a new dict will be created for the frame's ``f_locals`` when
@@ -1253,6 +1268,10 @@ the following flags:
 
    The code object has a variable keyword parameter (``**kwargs``-like).
 
+.. data:: CO_NESTED
+
+   The flag is set when the code object is a nested function.
+
 .. data:: CO_GENERATOR
 
    The flag is set when the code object is a generator function, i.e.
diff --git a/Doc/library/json.rst b/Doc/library/json.rst
index f487535..30c2911 100644
--- a/Doc/library/json.rst
+++ b/Doc/library/json.rst
@@ -485,29 +485,29 @@ Encoders and Decoders
 Exceptions
 ----------
 
-.. exception:: JSONDecodeError(msg, doc, pos, end=None)
+.. exception:: JSONDecodeError(msg, doc, pos)
 
-    Subclass of :exc:`ValueError` with the following additional attributes:
+   Subclass of :exc:`ValueError` with the following additional attributes:
 
-    .. attribute:: msg
+   .. attribute:: msg
 
-        The unformatted error message.
+      The unformatted error message.
 
-    .. attribute:: doc
+   .. attribute:: doc
 
-        The JSON document being parsed.
+      The JSON document being parsed.
 
-    .. attribute:: pos
+   .. attribute:: pos
 
-        The start index of *doc* where parsing failed.
+      The start index of *doc* where parsing failed.
 
-    .. attribute:: lineno
+   .. attribute:: lineno
 
-        The line corresponding to *pos*.
+      The line corresponding to *pos*.
 
-    .. attribute:: colno
+   .. attribute:: colno
 
-        The column corresponding to *pos*.
+      The column corresponding to *pos*.
 
    .. versionadded:: 3.5
 
diff --git a/Doc/library/logging.config.rst b/Doc/library/logging.config.rst
index a68a890..a7928a0 100644
--- a/Doc/library/logging.config.rst
+++ b/Doc/library/logging.config.rst
@@ -105,8 +105,8 @@ in :mod:`logging` itself) and defining handlers which are declared either in
    :param disable_existing_loggers: If specified as ``False``, loggers which
                                     exist when this call is made are left
                                     enabled. The default is ``True`` because this
-                                    enables old behaviour in a backward-
-                                    compatible way. This behaviour is to
+                                    enables old behaviour in a
+                                    backward-compatible way. This behaviour is to
                                     disable any existing loggers unless they or
                                     their ancestors are explicitly named in the
                                     logging configuration.
diff --git a/Doc/library/logging.handlers.rst b/Doc/library/logging.handlers.rst
index 0c02d3d..b16eef0 100644
--- a/Doc/library/logging.handlers.rst
+++ b/Doc/library/logging.handlers.rst
@@ -900,8 +900,8 @@ possible, while any potentially slow operations (such as sending an email via
 .. class:: QueueHandler(queue)
 
    Returns a new instance of the :class:`QueueHandler` class. The instance is
-   initialized with the queue to send messages to. The queue can be any queue-
-   like object; it's used as-is by the :meth:`enqueue` method, which needs
+   initialized with the queue to send messages to. The queue can be any
+   queue-like object; it's used as-is by the :meth:`enqueue` method, which needs
    to know how to send messages to it.
 
 
@@ -956,8 +956,8 @@ possible, while any potentially slow operations (such as sending an email via
 
    Returns a new instance of the :class:`QueueListener` class. The instance is
    initialized with the queue to send messages to and a list of handlers which
-   will handle entries placed on the queue. The queue can be any queue-
-   like object; it's passed as-is to the :meth:`dequeue` method, which needs
+   will handle entries placed on the queue. The queue can be any queue-like
+   object; it's passed as-is to the :meth:`dequeue` method, which needs
    to know how to get messages from it. If ``respect_handler_level`` is ``True``,
    a handler's level is respected (compared with the level for the message) when
    deciding whether to pass messages to that handler; otherwise, the behaviour
diff --git a/Doc/library/marshal.rst b/Doc/library/marshal.rst
index 1ffc6ef..d65afc2 100644
--- a/Doc/library/marshal.rst
+++ b/Doc/library/marshal.rst
@@ -49,7 +49,7 @@ For format *version* lower than 3, recursive lists, sets and dictionaries cannot
 be written (see below).
 
 There are functions that read/write files as well as functions operating on
-strings.
+bytes-like objects.
 
 The module defines these functions:
 
@@ -57,9 +57,7 @@ The module defines these functions:
 .. function:: dump(value, file[, version])
 
    Write the value on the open file.  The value must be a supported type.  The
-   file must be an open file object such as ``sys.stdout`` or returned by
-   :func:`open` or :func:`os.popen`.  It must be opened in binary mode (``'wb'``
-   or ``'w+b'``).
+   file must be a writeable :term:`binary file`.
 
    If the value has (or contains an object that has) an unsupported type, a
    :exc:`ValueError` exception is raised --- but garbage data will also be written
@@ -74,8 +72,7 @@ The module defines these functions:
    Read one value from the open file and return it.  If no valid value is read
    (e.g. because the data has a different Python version's incompatible marshal
    format), raise :exc:`EOFError`, :exc:`ValueError` or :exc:`TypeError`.  The
-   file must be an open file object opened in binary mode (``'rb'`` or
-   ``'r+b'``).
+   file must be a readable :term:`binary file`.
 
    .. note::
 
@@ -85,7 +82,7 @@ The module defines these functions:
 
 .. function:: dumps(value[, version])
 
-   Return the string that would be written to a file by ``dump(value, file)``.  The
+   Return the bytes object that would be written to a file by ``dump(value, file)``.  The
    value must be a supported type.  Raise a :exc:`ValueError` exception if value
    has (or contains an object that has) an unsupported type.
 
@@ -93,11 +90,11 @@ The module defines these functions:
    (see below).
 
 
-.. function:: loads(string)
+.. function:: loads(bytes)
 
-   Convert the string to a value.  If no valid value is found, raise
-   :exc:`EOFError`, :exc:`ValueError` or :exc:`TypeError`.  Extra characters in the
-   string are ignored.
+   Convert the :term:`bytes-like object` to a value.  If no valid value is found, raise
+   :exc:`EOFError`, :exc:`ValueError` or :exc:`TypeError`.  Extra bytes in the
+   input are ignored.
 
 
 In addition, the following constants are defined:
diff --git a/Doc/library/mimetypes.rst b/Doc/library/mimetypes.rst
index 464248c..67b7a71 100644
--- a/Doc/library/mimetypes.rst
+++ b/Doc/library/mimetypes.rst
@@ -186,78 +186,78 @@ than one MIME-type database; it provides an interface similar to the one of the
    loaded "on top" of the default database.
 
 
-.. attribute:: MimeTypes.suffix_map
+   .. attribute:: MimeTypes.suffix_map
 
-   Dictionary mapping suffixes to suffixes.  This is used to allow recognition of
-   encoded files for which the encoding and the type are indicated by the same
-   extension.  For example, the :file:`.tgz` extension is mapped to :file:`.tar.gz`
-   to allow the encoding and type to be recognized separately.  This is initially a
-   copy of the global :data:`suffix_map` defined in the module.
+      Dictionary mapping suffixes to suffixes.  This is used to allow recognition of
+      encoded files for which the encoding and the type are indicated by the same
+      extension.  For example, the :file:`.tgz` extension is mapped to :file:`.tar.gz`
+      to allow the encoding and type to be recognized separately.  This is initially a
+      copy of the global :data:`suffix_map` defined in the module.
 
 
-.. attribute:: MimeTypes.encodings_map
+   .. attribute:: MimeTypes.encodings_map
 
-   Dictionary mapping filename extensions to encoding types.  This is initially a
-   copy of the global :data:`encodings_map` defined in the module.
+      Dictionary mapping filename extensions to encoding types.  This is initially a
+      copy of the global :data:`encodings_map` defined in the module.
 
 
-.. attribute:: MimeTypes.types_map
+   .. attribute:: MimeTypes.types_map
 
-   Tuple containing two dictionaries, mapping filename extensions to MIME types:
-   the first dictionary is for the non-standards types and the second one is for
-   the standard types. They are initialized by :data:`common_types` and
-   :data:`types_map`.
+      Tuple containing two dictionaries, mapping filename extensions to MIME types:
+      the first dictionary is for the non-standards types and the second one is for
+      the standard types. They are initialized by :data:`common_types` and
+      :data:`types_map`.
 
 
-.. attribute:: MimeTypes.types_map_inv
+   .. attribute:: MimeTypes.types_map_inv
 
-   Tuple containing two dictionaries, mapping MIME types to a list of filename
-   extensions: the first dictionary is for the non-standards types and the
-   second one is for the standard types. They are initialized by
-   :data:`common_types` and :data:`types_map`.
+      Tuple containing two dictionaries, mapping MIME types to a list of filename
+      extensions: the first dictionary is for the non-standards types and the
+      second one is for the standard types. They are initialized by
+      :data:`common_types` and :data:`types_map`.
 
 
-.. method:: MimeTypes.guess_extension(type, strict=True)
+   .. method:: MimeTypes.guess_extension(type, strict=True)
 
-   Similar to the :func:`guess_extension` function, using the tables stored as part
-   of the object.
+      Similar to the :func:`guess_extension` function, using the tables stored as part
+      of the object.
 
 
-.. method:: MimeTypes.guess_type(url, strict=True)
+   .. method:: MimeTypes.guess_type(url, strict=True)
 
-   Similar to the :func:`guess_type` function, using the tables stored as part of
-   the object.
+      Similar to the :func:`guess_type` function, using the tables stored as part of
+      the object.
 
 
-.. method:: MimeTypes.guess_all_extensions(type, strict=True)
+   .. method:: MimeTypes.guess_all_extensions(type, strict=True)
 
-   Similar to the :func:`guess_all_extensions` function, using the tables stored
-   as part of the object.
+      Similar to the :func:`guess_all_extensions` function, using the tables stored
+      as part of the object.
 
 
-.. method:: MimeTypes.read(filename, strict=True)
+   .. method:: MimeTypes.read(filename, strict=True)
 
-   Load MIME information from a file named *filename*.  This uses :meth:`readfp` to
-   parse the file.
+      Load MIME information from a file named *filename*.  This uses :meth:`readfp` to
+      parse the file.
 
-   If *strict* is ``True``, information will be added to list of standard types,
-   else to the list of non-standard types.
+      If *strict* is ``True``, information will be added to list of standard types,
+      else to the list of non-standard types.
 
 
-.. method:: MimeTypes.readfp(fp, strict=True)
+   .. method:: MimeTypes.readfp(fp, strict=True)
 
-   Load MIME type information from an open file *fp*.  The file must have the format of
-   the standard :file:`mime.types` files.
+      Load MIME type information from an open file *fp*.  The file must have the format of
+      the standard :file:`mime.types` files.
 
-   If *strict* is ``True``, information will be added to the list of standard
-   types, else to the list of non-standard types.
+      If *strict* is ``True``, information will be added to the list of standard
+      types, else to the list of non-standard types.
 
 
-.. method:: MimeTypes.read_windows_registry(strict=True)
+   .. method:: MimeTypes.read_windows_registry(strict=True)
 
-   Load MIME type information from the Windows registry.  Availability: Windows.
+      Load MIME type information from the Windows registry.  Availability: Windows.
 
-   If *strict* is ``True``, information will be added to the list of standard
-   types, else to the list of non-standard types.
+      If *strict* is ``True``, information will be added to the list of standard
+      types, else to the list of non-standard types.
 
-   .. versionadded:: 3.2
+      .. versionadded:: 3.2
diff --git a/Doc/library/os.rst b/Doc/library/os.rst
index 5a67f93..3aee501 100644
--- a/Doc/library/os.rst
+++ b/Doc/library/os.rst
@@ -2068,7 +2068,7 @@ features:
 
    Get the status of a file or a file descriptor. Perform the equivalent of a
    :c:func:`stat` system call on the given path. *path* may be specified as
-   either a string or as an open file descriptor. Return a :class:`stat_result`
+   either a string, a bytes or as an open file descriptor. Return a :class:`stat_result`
    object.
 
    This function normally follows symlinks; to stat a symlink add the argument
diff --git a/Doc/library/othergui.rst b/Doc/library/othergui.rst
index ee1ce50..d40abe1 100644
--- a/Doc/library/othergui.rst
+++ b/Doc/library/othergui.rst
@@ -9,14 +9,15 @@ available for Python:
 .. seealso::
 
    `PyGObject <https://wiki.gnome.org/Projects/PyGObject>`_
-      provides introspection bindings for C libraries using
+      PyGObject provides introspection bindings for C libraries using
       `GObject <https://developer.gnome.org/gobject/stable/>`_.  One of
       these libraries is the `GTK+ 3 <http://www.gtk.org/>`_ widget set.
       GTK+ comes with many more widgets than Tkinter provides.  An online
       `Python GTK+ 3 Tutorial <https://python-gtk-3-tutorial.readthedocs.org/en/latest/>`_
       is available.
 
-      `PyGTK <http://www.pygtk.org/>`_ provides bindings for an older version
+   `PyGTK <http://www.pygtk.org/>`_
+      PyGTK provides bindings for an older version
       of the library, GTK+ 2.  It provides an object oriented interface that
       is slightly higher level than the C one.  There are also bindings to
       `GNOME <https://www.gnome.org/>`_.  An online `tutorial
@@ -27,15 +28,10 @@ available for Python:
       extensive C++ GUI application development framework that is
       available for Unix, Windows and Mac OS X. :program:`sip` is a tool
       for generating bindings for C++ libraries as Python classes, and
-      is specifically designed for Python. The *PyQt3* bindings have a
-      book, `GUI Programming with Python: QT Edition
-      <https://www.commandprompt.com/community/pyqt/>`_ by Boudewijn
-      Rempt. The *PyQt4* bindings also have a book, `Rapid GUI Programming
-      with Python and Qt <https://www.qtrac.eu/pyqtbook.html>`_, by Mark
-      Summerfield.
+      is specifically designed for Python.
 
    `PySide <https://wiki.qt.io/PySide>`_
-      is a newer binding to the Qt toolkit, provided by Nokia.
+      PySide is a newer binding to the Qt toolkit, provided by Nokia.
       Compared to PyQt, its licensing scheme is friendlier to non-open source
       applications.
 
@@ -49,9 +45,7 @@ available for Python:
       documentation and context sensitive help, printing, HTML viewing,
       low-level device context drawing, drag and drop, system clipboard access,
       an XML-based resource format and more, including an ever growing library
-      of user-contributed modules.  wxPython has a book, `wxPython in Action
-      <https://www.manning.com/books/wxpython-in-action>`_, by Noel Rappin and
-      Robin Dunn.
+      of user-contributed modules.
 
 PyGTK, PyQt, and wxPython, all have a modern look and feel and more
 widgets than Tkinter. In addition, there are many other GUI toolkits for
diff --git a/Doc/library/pdb.rst b/Doc/library/pdb.rst
index ba9e547..7bc729c 100644
--- a/Doc/library/pdb.rst
+++ b/Doc/library/pdb.rst
@@ -76,7 +76,7 @@ The typical usage to inspect a crashed program is::
    >>> import mymodule
    >>> mymodule.test()
    Traceback (most recent call last):
-     File "<stdin>", line 1, in ?
+     File "<stdin>", line 1, in <module>
      File "./mymodule.py", line 4, in test
        test2()
      File "./mymodule.py", line 3, in test2
diff --git a/Doc/library/profile.rst b/Doc/library/profile.rst
index 959d9b9..5796e3a 100644
--- a/Doc/library/profile.rst
+++ b/Doc/library/profile.rst
@@ -85,11 +85,11 @@ next line: ``Ordered by: standard name``, indicates that the text string in the
 far right column was used to sort the output. The column headings include:
 
 ncalls
-   for the number of calls,
+   for the number of calls.
 
 tottime
-    for the total time spent in the given function (and excluding time made in
-    calls to sub-functions)
+   for the total time spent in the given function (and excluding time made in
+   calls to sub-functions)
 
 percall
    is the quotient of ``tottime`` divided by ``ncalls``
@@ -215,11 +215,11 @@ functions:
 
    and gathers profiling statistics from the execution. If no file name is
    present, then this function automatically creates a :class:`~pstats.Stats`
-   instance and prints a simple profiling report. If the sort value is specified
+   instance and prints a simple profiling report. If the sort value is specified,
    it is passed to this :class:`~pstats.Stats` instance to control how the
    results are sorted.
 
-.. function:: runctx(command, globals, locals, filename=None)
+.. function:: runctx(command, globals, locals, filename=None, sort=-1)
 
    This function is similar to :func:`run`, with added arguments to supply the
    globals and locals dictionaries for the *command* string. This routine
@@ -444,9 +444,10 @@ Analysis of the profiler data is done using the :class:`~pstats.Stats` class.
       significant entries.  Initially, the list is taken to be the complete set
       of profiled functions.  Each restriction is either an integer (to select a
       count of lines), or a decimal fraction between 0.0 and 1.0 inclusive (to
-      select a percentage of lines), or a regular expression (to pattern match
-      the standard name that is printed.  If several restrictions are provided,
-      then they are applied sequentially.  For example::
+      select a percentage of lines), or a string that will interpreted as a
+      regular expression (to pattern match the standard name that is printed).
+      If several restrictions are provided, then they are applied sequentially.
+      For example::
 
          print_stats(.1, 'foo:')
 
diff --git a/Doc/library/pyexpat.rst b/Doc/library/pyexpat.rst
index 075a8b5..e43b9ae 100644
--- a/Doc/library/pyexpat.rst
+++ b/Doc/library/pyexpat.rst
@@ -869,7 +869,7 @@ The ``errors`` module has the following attributes:
 
 .. rubric:: Footnotes
 
-.. [#] The encoding string included in XML output should conform to the
+.. [1] The encoding string included in XML output should conform to the
    appropriate standards. For example, "UTF-8" is valid, but "UTF8" is
    not. See https://www.w3.org/TR/2006/REC-xml11-20060816/#NT-EncodingDecl
    and https://www.iana.org/assignments/character-sets/character-sets.xhtml.
diff --git a/Doc/library/quopri.rst b/Doc/library/quopri.rst
index ef2b5f2..a3f94a0 100644
--- a/Doc/library/quopri.rst
+++ b/Doc/library/quopri.rst
@@ -32,8 +32,8 @@ sending a graphics file.
 
 .. function:: encode(input, output, quotetabs, header=False)
 
-   Encode the contents of the *input* file and write the resulting quoted-
-   printable data to the *output* file. *input* and *output* must be
+   Encode the contents of the *input* file and write the resulting quoted-printable
+   data to the *output* file. *input* and *output* must be
    :term:`binary file objects <file object>`. *quotetabs*, a flag which controls
    whether to encode embedded spaces and tabs must be provideda and when true it
    encodes such embedded whitespace, and when false it leaves them unencoded.
diff --git a/Doc/library/re.rst b/Doc/library/re.rst
index 1ca621e..26d2558 100644
--- a/Doc/library/re.rst
+++ b/Doc/library/re.rst
@@ -42,6 +42,12 @@ module-level functions and methods on
 that don't require you to compile a regex object first, but miss some
 fine-tuning parameters.
 
+.. seealso::
+
+   The third-party `regex <https://pypi.python.org/pypi/regex/>`_ module,
+   which has an API compatible with the standard library :mod:`re` module,
+   but offers additional functionality and a more thorough Unicode support.
+
 
 .. _re-syntax:
 
@@ -765,11 +771,22 @@ form.
       Unmatched groups are replaced with an empty string.
 
 
-.. function:: escape(string)
+.. function:: escape(pattern)
 
-   Escape all the characters in pattern except ASCII letters, numbers and ``'_'``.
+   Escape all the characters in *pattern* except ASCII letters, numbers and ``'_'``.
    This is useful if you want to match an arbitrary literal string that may
-   have regular expression metacharacters in it.
+   have regular expression metacharacters in it.  For example::
+
+      >>> print(re.escape('python.exe'))
+      python\.exe
+
+      >>> legal_chars = string.ascii_lowercase + string.digits + "!#$%&'*+-.^_`|~:"
+      >>> print('[%s]+' % re.escape(legal_chars))
+      [abcdefghijklmnopqrstuvwxyz0123456789\!\#\$\%\&\'\*\+\-\.\^_\`\|\~\:]+
+
+      >>> operators = ['+', '-', '*', '/', '**']
+      >>> print('|'.join(map(re.escape, sorted(operators, reverse=True))))
+      \/|\-|\+|\*\*|\*
 
    .. versionchanged:: 3.3
       The ``'_'`` character is no longer escaped.
@@ -798,15 +815,15 @@ form.
 
    .. attribute:: pos
 
-      The index of *pattern* where compilation failed.
+      The index in *pattern* where compilation failed (may be ``None``).
 
    .. attribute:: lineno
 
-      The line corresponding to *pos*.
+      The line corresponding to *pos* (may be ``None``).
 
    .. attribute:: colno
 
-      The column corresponding to *pos*.
+      The column corresponding to *pos* (may be ``None``).
 
    .. versionchanged:: 3.5
       Added additional attributes.
diff --git a/Doc/library/selectors.rst b/Doc/library/selectors.rst
index 1624d88..6d864a8 100644
--- a/Doc/library/selectors.rst
+++ b/Doc/library/selectors.rst
@@ -68,7 +68,7 @@ constants below:
 .. class:: SelectorKey
 
    A :class:`SelectorKey` is a :class:`~collections.namedtuple` used to
-   associate a file object to its underlying file decriptor, selected event
+   associate a file object to its underlying file descriptor, selected event
    mask and attached data. It is returned by several :class:`BaseSelector`
    methods.
 
diff --git a/Doc/library/shutil.rst b/Doc/library/shutil.rst
index b020bb3..3580811 100644
--- a/Doc/library/shutil.rst
+++ b/Doc/library/shutil.rst
@@ -153,7 +153,7 @@ Directory and files operations
    is true and *src* is a symbolic link, *dst* will be a copy of
    the file *src* refers to.
 
-   :func:`copy` copies the file data and the file's permission
+   :func:`~shutil.copy` copies the file data and the file's permission
    mode (see :func:`os.chmod`).  Other metadata, like the
    file's creation and modification times, is not preserved.
    To preserve all file metadata from the original, use
@@ -302,7 +302,7 @@ Directory and files operations
    *src* and *dst*, and will be used to copy *src* to *dest* if
    :func:`os.rename` cannot be used.  If the source is a directory,
    :func:`copytree` is called, passing it the :func:`copy_function`. The
-   default *copy_function* is :func:`copy2`.  Using :func:`copy` as the
+   default *copy_function* is :func:`copy2`.  Using :func:`~shutil.copy` as the
    *copy_function* allows the move to succeed when it is not possible to also
    copy the metadata, at the expense of not copying any of the metadata.
 
diff --git a/Doc/library/smtpd.rst b/Doc/library/smtpd.rst
index a096de0..4d5a0ce 100644
--- a/Doc/library/smtpd.rst
+++ b/Doc/library/smtpd.rst
@@ -13,6 +13,12 @@
 
 This module offers several classes to implement SMTP (email) servers.
 
+.. seealso::
+
+    The `aiosmtpd <http://aiosmtpd.readthedocs.io/>`_ package is a recommended
+    replacement for this module.  It is based on :mod:`asyncio` and provides a
+    more straightforward API.  :mod:`smtpd` should be considered deprecated.
+
 Several server implementations are present; one is a generic
 do-nothing implementation, which can be overridden, while the other two offer
 specific mail-sending strategies.
diff --git a/Doc/library/socket.rst b/Doc/library/socket.rst
index 530000b..f8ba847 100644
--- a/Doc/library/socket.rst
+++ b/Doc/library/socket.rst
@@ -1288,8 +1288,8 @@ to sockets.
    to transmit as opposed to sending the file until EOF is reached. File
    position is updated on return or also in case of error in which case
    :meth:`file.tell() <io.IOBase.tell>` can be used to figure out the number of
-   bytes which were sent. The socket must be of :const:`SOCK_STREAM` type. Non-
-   blocking sockets are not supported.
+   bytes which were sent. The socket must be of :const:`SOCK_STREAM` type.
+   Non-blocking sockets are not supported.
 
    .. versionadded:: 3.5
 
diff --git a/Doc/library/sqlite3.rst b/Doc/library/sqlite3.rst
index 84a4783..1419ce0 100644
--- a/Doc/library/sqlite3.rst
+++ b/Doc/library/sqlite3.rst
@@ -633,6 +633,11 @@ Cursor Objects
       method. For operations other than ``INSERT`` or when :meth:`executemany` is
       called, :attr:`lastrowid` is set to :const:`None`.
 
+   .. attribute:: arraysize
+
+      Read/write attribute that controls the number of rows returned by :meth:`fetchmany`.
+      The default value is 1 which means a single row would be fetched per call.
+
    .. attribute:: description
 
       This read-only attribute provides the column names of the last query. To
diff --git a/Doc/library/stdtypes.rst b/Doc/library/stdtypes.rst
index 71cb7f2..c4588f2 100644
--- a/Doc/library/stdtypes.rst
+++ b/Doc/library/stdtypes.rst
@@ -108,11 +108,11 @@ Notes:
 
 (1)
    This is a short-circuit operator, so it only evaluates the second
-   argument if the first one is :const:`False`.
+   argument if the first one is false.
 
 (2)
    This is a short-circuit operator, so it only evaluates the second
-   argument if the first one is :const:`True`.
+   argument if the first one is true.
 
 (3)
    ``not`` has a lower priority than non-Boolean operators, so ``not a == b`` is
@@ -829,7 +829,7 @@ restrictions imposed by *s*.
 
 The ``in`` and ``not in`` operations have the same priorities as the
 comparison operations. The ``+`` (concatenation) and ``*`` (repetition)
-operations have the same priority as the corresponding numeric operations.
+operations have the same priority as the corresponding numeric operations. [3]_
 
 .. index::
    triple: operations on; sequence; types
@@ -1714,10 +1714,10 @@ expression support in the :mod:`re` module).
 
 .. method:: str.join(iterable)
 
-   Return a string which is the concatenation of the strings in the
-   :term:`iterable` *iterable*.  A :exc:`TypeError` will be raised if there are
-   any non-string values in *iterable*, including :class:`bytes` objects.  The
-   separator between elements is the string providing this method.
+   Return a string which is the concatenation of the strings in *iterable*.
+   A :exc:`TypeError` will be raised if there are any non-string values in
+   *iterable*, including :class:`bytes` objects.  The separator between
+   elements is the string providing this method.
 
 
 .. method:: str.ljust(width[, fillchar])
@@ -2533,11 +2533,11 @@ arbitrary binary data.
             bytearray.join(iterable)
 
    Return a bytes or bytearray object which is the concatenation of the
-   binary data sequences in the :term:`iterable` *iterable*.  A
-   :exc:`TypeError` will be raised if there are any values in *iterable*
-   that are not :term:`bytes-like objects <bytes-like object>`, including
-   :class:`str` objects.  The separator between elements is the contents
-   of the bytes or bytearray object providing this method.
+   binary data sequences in *iterable*.  A :exc:`TypeError` will be raised
+   if there are any values in *iterable* that are not :term:`bytes-like
+   objects <bytes-like object>`, including :class:`str` objects.  The
+   separator between elements is the contents of the bytes or
+   bytearray object providing this method.
 
 
 .. staticmethod:: bytes.maketrans(from, to)
@@ -3973,9 +3973,7 @@ The constructors for both classes work the same:
 
    Note, the *elem* argument to the :meth:`__contains__`, :meth:`remove`, and
    :meth:`discard` methods may be a set.  To support searching for an equivalent
-   frozenset, the *elem* set is temporarily mutated during the search and then
-   restored.  During the search, the *elem* set should not be read or mutated
-   since it does not have a meaningful value.
+   frozenset, a temporary one is created from *elem*.
 
 
 .. _typesmapping:
diff --git a/Doc/library/sunau.rst b/Doc/library/sunau.rst
index 1ecc7a7..c8357e4 100644
--- a/Doc/library/sunau.rst
+++ b/Doc/library/sunau.rst
@@ -118,7 +118,7 @@ AU_read objects, as returned by :func:`.open` above, have the following methods:
 
 .. method:: AU_read.getnchannels()
 
-   Returns number of audio channels (1 for mone, 2 for stereo).
+   Returns number of audio channels (1 for mono, 2 for stereo).
 
 
 .. method:: AU_read.getsampwidth()
diff --git a/Doc/library/sys.rst b/Doc/library/sys.rst
index d28ea5d..c2a1109 100644
--- a/Doc/library/sys.rst
+++ b/Doc/library/sys.rst
@@ -1220,7 +1220,7 @@ always available.
    |                  |  * ``None`` if this information is unknown              |
    +------------------+---------------------------------------------------------+
    | :const:`version` | Name and version of the thread library. It is a string, |
-   |                  | or ``None`` if these informations are unknown.          |
+   |                  | or ``None`` if this information is unknown.             |
    +------------------+---------------------------------------------------------+
 
    .. versionadded:: 3.3
diff --git a/Doc/library/sysconfig.rst b/Doc/library/sysconfig.rst
index 02aaab3..4cbe239 100644
--- a/Doc/library/sysconfig.rst
+++ b/Doc/library/sysconfig.rst
@@ -255,7 +255,6 @@ You can use :mod:`sysconfig` as a script with Python's *-m* option:
             AIX_GENUINE_CPLUSPLUS = "0"
             AR = "ar"
             ARFLAGS = "rc"
-            ASDLGEN = "./Parser/asdl_c.py"
             ...
 
 This call will print in the standard output the information returned by
diff --git a/Doc/library/tabnanny.rst b/Doc/library/tabnanny.rst
index 1edb0fb..dfe688a 100644
--- a/Doc/library/tabnanny.rst
+++ b/Doc/library/tabnanny.rst
@@ -48,14 +48,14 @@ described below.
 
 .. exception:: NannyNag
 
-   Raised by :func:`tokeneater` if detecting an ambiguous indent. Captured and
+   Raised by :func:`process_tokens` if detecting an ambiguous indent. Captured and
    handled in :func:`check`.
 
 
-.. function:: tokeneater(type, token, start, end, line)
+.. function:: process_tokens(tokens)
 
-   This function is used by :func:`check` as a callback parameter to the function
-   :func:`tokenize.tokenize`.
+   This function is used by :func:`check` to process tokens generated by the
+   :mod:`tokenize` module.
 
 .. XXX document errprint, format_witnesses, Whitespace, check_equal, indents,
    reset_globals
diff --git a/Doc/library/tempfile.rst b/Doc/library/tempfile.rst
index 665261f..c59aca1 100644
--- a/Doc/library/tempfile.rst
+++ b/Doc/library/tempfile.rst
@@ -245,12 +245,12 @@ The module uses a global variable to store the name of the directory
 used for temporary files returned by :func:`gettempdir`.  It can be
 set directly to override the selection process, but this is discouraged.
 All functions in this module take a *dir* argument which can be used
-to specify the directory and this is the recommend approach.
+to specify the directory and this is the recommended approach.
 
 .. data:: tempdir
 
    When set to a value other than ``None``, this variable defines the
-   default value for the *dir* argument to all the functions defined in this
+   default value for the *dir* argument to the functions defined in this
    module.
 
    If ``tempdir`` is unset or ``None`` at any call to any of the above
diff --git a/Doc/library/test.rst b/Doc/library/test.rst
index 59577f0..2777128 100644
--- a/Doc/library/test.rst
+++ b/Doc/library/test.rst
@@ -570,7 +570,8 @@ The :mod:`test.support` module defines the following functions:
       def load_tests(*args):
           return load_package_tests(os.path.dirname(__file__), *args)
 
-.. function:: detect_api_mismatch(ref_api, other_api, *, ignore=()):
+
+.. function:: detect_api_mismatch(ref_api, other_api, *, ignore=())
 
    Returns the set of attributes, functions or methods of *ref_api* not
    found on *other_api*, except for a defined list of items to be
diff --git a/Doc/library/threading.rst b/Doc/library/threading.rst
index 2792dfd..cda859f 100644
--- a/Doc/library/threading.rst
+++ b/Doc/library/threading.rst
@@ -371,8 +371,9 @@ All methods are executed atomically.
    lock, subsequent attempts to acquire it block, until it is released; any
    thread may release it.
 
-   .. versionchanged:: 3.3
-      Changed from a factory function to a class.
+   Note that ``Lock`` is actually a factory function which returns an instance
+   of the most efficient version of the concrete Lock class that is supported
+   by the platform.
 
 
    .. method:: acquire(blocking=True, timeout=-1)
diff --git a/Doc/library/time.rst b/Doc/library/time.rst
index e6626f2..92e7ce0 100644
--- a/Doc/library/time.rst
+++ b/Doc/library/time.rst
@@ -17,11 +17,23 @@ semantics of these functions varies among platforms.
 
 An explanation of some terminology and conventions is in order.
 
+.. _epoch:
+
 .. index:: single: epoch
 
-* The :dfn:`epoch` is the point where the time starts.  On January 1st of that
-  year, at 0 hours, the "time since the epoch" is zero.  For Unix, the epoch is
-  1970.  To find out what the epoch is, look at ``gmtime(0)``.
+* The :dfn:`epoch` is the point where the time starts, and is platform
+  dependent.  For Unix, the epoch is January 1, 1970, 00:00:00 (UTC).
+  To find out what the epoch is on a given platform, look at
+  ``time.gmtime(0)``.
+
+.. _leap seconds: https://en.wikipedia.org/wiki/Leap_second
+
+.. index:: seconds since the epoch
+
+* The term :dfn:`seconds since the epoch` refers to the total number
+  of elapsed seconds since the epoch, typically excluding
+  `leap seconds`_.  Leap seconds are excluded from this total on all
+  POSIX-compliant platforms.
 
 .. index:: single: Year 2038
 
@@ -463,7 +475,7 @@ The module defines the following functions and data items:
 
    (2)
       The range really is ``0`` to ``61``; value ``60`` is valid in
-      timestamps representing leap seconds and value ``61`` is supported
+      timestamps representing `leap seconds`_ and value ``61`` is supported
       for historical reasons.
 
    (3)
@@ -572,12 +584,28 @@ The module defines the following functions and data items:
 
 .. function:: time()
 
-   Return the time in seconds since the epoch as a floating point number.
+   Return the time in seconds since the epoch_ as a floating point
+   number. The specific date of the epoch and the handling of
+   `leap seconds`_ is platform dependent.
+   On Windows and most Unix systems, the epoch is January 1, 1970,
+   00:00:00 (UTC) and leap seconds are not counted towards the time
+   in seconds since the epoch. This is commonly referred to as
+   `Unix time <https://en.wikipedia.org/wiki/Unix_time>`_.
+   To find out what the epoch is on a given platform, look at
+   ``gmtime(0)``.
+
    Note that even though the time is always returned as a floating point
    number, not all systems provide time with a better precision than 1 second.
    While this function normally returns non-decreasing values, it can return a
-   lower value than a previous call if the system clock has been set back between
-   the two calls.
+   lower value than a previous call if the system clock has been set back
+   between the two calls.
+
+   The number returned by :func:`.time` may be converted into a more common
+   time format (i.e. year, month, day, hour, etc...) in UTC by passing it to
+   :func:`gmtime` function or in local time by passing it to the
+   :func:`localtime` function. In both cases a
+   :class:`struct_time` object is returned, from which the components
+   of the calendar date may be accessed as attributes.
 
 .. data:: timezone
 
diff --git a/Doc/library/traceback.rst b/Doc/library/traceback.rst
index 3c1d9bb..fc052f2 100644
--- a/Doc/library/traceback.rst
+++ b/Doc/library/traceback.rst
@@ -45,9 +45,9 @@ The module defines the following functions:
    * if *tb* is not ``None``, it prints a header ``Traceback (most recent
      call last):``
    * it prints the exception *etype* and *value* after the stack trace
-   * if *etype* is :exc:`SyntaxError` and *value* has the appropriate format, it
-     prints the line where the syntax error occurred with a caret indicating the
-     approximate position of the error.
+   * if *type(value)* is :exc:`SyntaxError` and *value* has the appropriate
+     format, it prints the line where the syntax error occurred with a caret
+     indicating the approximate position of the error.
 
    The optional *limit* argument has the same meaning as for :func:`print_tb`.
    If *chain* is true (the default), then chained exceptions (the
@@ -55,6 +55,9 @@ The module defines the following functions:
    printed as well, like the interpreter itself does when printing an unhandled
    exception.
 
+   .. versionchanged:: 3.5
+      The *etype* argument is ignored and inferred from the type of *value*.
+
 
 .. function:: print_exc(limit=None, file=None, chain=True)
 
@@ -131,6 +134,9 @@ The module defines the following functions:
    containing internal newlines.  When these lines are concatenated and printed,
    exactly the same text is printed as does :func:`print_exception`.
 
+   .. versionchanged:: 3.5
+      The *etype* argument is ignored and inferred from the type of *value*.
+
 
 .. function:: format_exc(limit=None, chain=True)
 
@@ -358,6 +364,7 @@ exception and traceback:
        print("*** print_tb:")
        traceback.print_tb(exc_traceback, limit=1, file=sys.stdout)
        print("*** print_exception:")
+       # exc_type below is ignored on 3.5 and later
        traceback.print_exception(exc_type, exc_value, exc_traceback,
                                  limit=2, file=sys.stdout)
        print("*** print_exc:")
@@ -367,6 +374,7 @@ exception and traceback:
        print(formatted_lines[0])
        print(formatted_lines[-1])
        print("*** format_exception:")
+       # exc_type below is ignored on 3.5 and later
        print(repr(traceback.format_exception(exc_type, exc_value,
                                              exc_traceback)))
        print("*** extract_tb:")
diff --git a/Doc/library/turtle.rst b/Doc/library/turtle.rst
index 1986972..31761be 100644
--- a/Doc/library/turtle.rst
+++ b/Doc/library/turtle.rst
@@ -1797,7 +1797,7 @@ Input methods
    :param prompt: string
 
    Pop up a dialog window for input of a string. Parameter title is
-   the title of the dialog window, propmt is a text mostly describing
+   the title of the dialog window, prompt is a text mostly describing
    what information to input.
    Return the string input. If the dialog is canceled, return ``None``. ::
 
diff --git a/Doc/library/typing.rst b/Doc/library/typing.rst
index 923cbb8..2ca3bcd 100644
--- a/Doc/library/typing.rst
+++ b/Doc/library/typing.rst
@@ -299,7 +299,7 @@ comparable for equality.
 
 
 The :data:`Any` type
----------------------
+--------------------
 
 A special kind of type is :data:`Any`. A static type checker will treat
 every type as being compatible with :data:`Any` and :data:`Any` as being
@@ -557,6 +557,12 @@ The module defines the following classes, functions and decorators:
    As a shorthand for this type, :class:`bytes` can be used to
    annotate arguments of any of the types mentioned above.
 
+.. class:: Deque(deque, MutableSequence[T])
+
+   A generic version of :class:`collections.deque`.
+
+   .. versionadded:: 3.5.4
+
 .. class:: List(list, MutableSequence[T])
 
    Generic version of :class:`list`.
@@ -621,7 +627,7 @@ The module defines the following classes, functions and decorators:
 
 .. class:: AsyncIterator(AsyncIterable[T_co])
 
-  A generic version of :class:`collections.abc.AsyncIterator`.
+   A generic version of :class:`collections.abc.AsyncIterator`.
 
 .. class:: Dict(dict, MutableMapping[KT, VT])
 
@@ -666,6 +672,39 @@ The module defines the following classes, functions and decorators:
               yield start
               start += 1
 
+.. class:: AsyncGenerator(AsyncIterator[T_co], Generic[T_co, T_contra])
+
+   An async generator can be annotated by the generic type
+   ``AsyncGenerator[YieldType, SendType]``. For example::
+
+      async def echo_round() -> AsyncGenerator[int, float]:
+          sent = yield 0
+          while sent >= 0.0:
+              rounded = await round(sent)
+              sent = yield rounded
+
+   Unlike normal generators, async generators cannot return a value, so there
+   is no ``ReturnType`` type parameter. As with :class:`Generator`, the
+   ``SendType`` behaves contravariantly.
+
+   If your generator will only yield values, set the ``SendType`` to
+   ``None``::
+
+      async def infinite_stream(start: int) -> AsyncGenerator[int, None]:
+          while True:
+              yield start
+              start = await increment(start)
+
+   Alternatively, annotate your generator as having a return type of
+   either ``AsyncIterable[YieldType]`` or ``AsyncIterator[YieldType]``::
+
+      async def infinite_stream(start: int) -> AsyncIterator[int]:
+          while True:
+              yield start
+              start = await increment(start)
+
+   .. versionadded:: 3.5.4
+
 .. class:: Text
 
    ``Text`` is an alias for ``str``. It is provided to supply a forward
@@ -924,5 +963,10 @@ The module defines the following classes, functions and decorators:
       if TYPE_CHECKING:
           import expensive_mod
 
-      def fun():
-          local_var: expensive_mod.some_type = other_fun()
+      def fun(arg: 'expensive_mod.SomeType') -> None:
+          local_var: expensive_mod.AnotherType = other_fun()
+
+   Note that the first type annotation must be enclosed in quotes, making it a
+   "forward reference", to hide the ``expensive_mod`` reference from the
+   interpreter runtime.  Type annotations for local variables are not
+   evaluated, so the second annotation does not need to be enclosed in quotes.
diff --git a/Doc/library/unicodedata.rst b/Doc/library/unicodedata.rst
index 6cd8132..51b0b66 100644
--- a/Doc/library/unicodedata.rst
+++ b/Doc/library/unicodedata.rst
@@ -158,7 +158,7 @@ Examples:
    9
    >>> unicodedata.decimal('a')
    Traceback (most recent call last):
-     File "<stdin>", line 1, in ?
+     File "<stdin>", line 1, in <module>
    ValueError: not a decimal
    >>> unicodedata.category('A')  # 'L'etter, 'u'ppercase
    'Lu'
diff --git a/Doc/library/unittest.mock.rst b/Doc/library/unittest.mock.rst
index ef30c01..1169f0b 100644
--- a/Doc/library/unittest.mock.rst
+++ b/Doc/library/unittest.mock.rst
@@ -275,14 +275,14 @@ the *new_callable* argument to :func:`patch`.
 
     .. method:: assert_called_once_with(*args, **kwargs)
 
-       Assert that the mock was called exactly once and with the specified
-       arguments.
+       Assert that the mock was called exactly once and that that call was
+       with the specified arguments.
 
             >>> mock = Mock(return_value=None)
             >>> mock('foo', bar='baz')
             >>> mock.assert_called_once_with('foo', bar='baz')
-            >>> mock('foo', bar='baz')
-            >>> mock.assert_called_once_with('foo', bar='baz')
+            >>> mock('other', bar='values')
+            >>> mock.assert_called_once_with('other', bar='values')
             Traceback (most recent call last):
               ...
             AssertionError: Expected 'mock' to be called once. Called 2 times.
@@ -294,7 +294,8 @@ the *new_callable* argument to :func:`patch`.
 
         The assert passes if the mock has *ever* been called, unlike
         :meth:`assert_called_with` and :meth:`assert_called_once_with` that
-        only pass if the call is the most recent one.
+        only pass if the call is the most recent one, and in the case of
+        :meth:`assert_called_once_with` it must also be the only call.
 
             >>> mock = Mock(return_value=None)
             >>> mock(1, 2, arg='thing')
@@ -1795,6 +1796,9 @@ sentinel
     the same attribute will always return the same object. The objects
     returned have a sensible repr so that test failure messages are readable.
 
+    The ``sentinel`` attributes don't preserve their identity when they are
+    :mod:`copied <copy>` or :mod:`pickled <pickle>`.
+
 Sometimes when testing you need to test that a specific object is passed as an
 argument to another method, or returned. It can be common to create named
 sentinel objects to test this. :data:`sentinel` provides a convenient way of
diff --git a/Doc/library/unittest.rst b/Doc/library/unittest.rst
index ac1224c..76008c4 100644
--- a/Doc/library/unittest.rst
+++ b/Doc/library/unittest.rst
@@ -1465,7 +1465,7 @@ Grouping tests
 
 .. class:: TestSuite(tests=())
 
-   This class represents an aggregation of individual tests cases and test suites.
+   This class represents an aggregation of individual test cases and test suites.
    The class presents the interface needed by the test runner to allow it to be run
    as any other test case.  Running a :class:`TestSuite` instance is the same as
    iterating over the suite, running each test individually.
@@ -1573,7 +1573,7 @@ Loading and running tests
 
    .. method:: loadTestsFromTestCase(testCaseClass)
 
-      Return a suite of all tests cases contained in the :class:`TestCase`\ -derived
+      Return a suite of all test cases contained in the :class:`TestCase`\ -derived
       :class:`testCaseClass`.
 
       A test case instance is created for each method named by
@@ -1585,7 +1585,7 @@ Loading and running tests
 
    .. method:: loadTestsFromModule(module, pattern=None)
 
-      Return a suite of all tests cases contained in the given module. This
+      Return a suite of all test cases contained in the given module. This
       method searches *module* for classes derived from :class:`TestCase` and
       creates an instance of the class for each test method defined for the
       class.
@@ -1615,7 +1615,7 @@ Loading and running tests
 
    .. method:: loadTestsFromName(name, module=None)
 
-      Return a suite of all tests cases given a string specifier.
+      Return a suite of all test cases given a string specifier.
 
       The specifier *name* is a "dotted name" that may resolve either to a
       module, a test case class, a test method within a test case class, a
@@ -1637,11 +1637,11 @@ Loading and running tests
 
       The method optionally resolves *name* relative to the given *module*.
 
-   .. versionchanged:: 3.5
-      If an :exc:`ImportError` or :exc:`AttributeError` occurs while traversing
-      *name* then a synthetic test that raises that error when run will be
-      returned. These errors are included in the errors accumulated by
-      self.errors.
+      .. versionchanged:: 3.5
+         If an :exc:`ImportError` or :exc:`AttributeError` occurs while traversing
+         *name* then a synthetic test that raises that error when run will be
+         returned. These errors are included in the errors accumulated by
+         self.errors.
 
 
    .. method:: loadTestsFromNames(names, module=None)
diff --git a/Doc/library/urllib.parse.rst b/Doc/library/urllib.parse.rst
index 499b211..6f722a8 100644
--- a/Doc/library/urllib.parse.rst
+++ b/Doc/library/urllib.parse.rst
@@ -117,6 +117,9 @@ or on combining URL components into a URL string.
    See section :ref:`urlparse-result-object` for more information on the result
    object.
 
+   Unmatched square brackets in the :attr:`netloc` attribute will raise a
+   :exc:`ValueError`.
+
    .. versionchanged:: 3.2
       Added IPv6 URL parsing capabilities.
 
@@ -230,6 +233,9 @@ or on combining URL components into a URL string.
    See section :ref:`urlparse-result-object` for more information on the result
    object.
 
+   Unmatched square brackets in the :attr:`netloc` attribute will raise a
+   :exc:`ValueError`.
+
 
 .. function:: urlunsplit(parts)
 
diff --git a/Doc/library/urllib.request.rst b/Doc/library/urllib.request.rst
index 618c69d..63530e1 100644
--- a/Doc/library/urllib.request.rst
+++ b/Doc/library/urllib.request.rst
@@ -173,15 +173,15 @@ The :mod:`urllib.request` module defines the following functions:
    If both lowercase and uppercase environment variables exist (and disagree),
    lowercase is preferred.
 
-    .. note::
+   .. note::
 
-       If the environment variable ``REQUEST_METHOD`` is set, which usually
-       indicates your script is running in a CGI environment, the environment
-       variable ``HTTP_PROXY`` (uppercase ``_PROXY``) will be ignored. This is
-       because that variable can be injected by a client using the "Proxy:" HTTP
-       header. If you need to use an HTTP proxy in a CGI environment, either use
-       ``ProxyHandler`` explicitly, or make sure the variable name is in
-       lowercase (or at least the ``_proxy`` suffix).
+      If the environment variable ``REQUEST_METHOD`` is set, which usually
+      indicates your script is running in a CGI environment, the environment
+      variable ``HTTP_PROXY`` (uppercase ``_PROXY``) will be ignored. This is
+      because that variable can be injected by a client using the "Proxy:" HTTP
+      header. If you need to use an HTTP proxy in a CGI environment, either use
+      ``ProxyHandler`` explicitly, or make sure the variable name is in
+      lowercase (or at least the ``_proxy`` suffix).
 
 
 The following classes are provided:
@@ -1388,48 +1388,48 @@ some point in the future.
    :class:`URLopener` objects will raise an :exc:`OSError` exception if the server
    returns an error code.
 
-    .. method:: open(fullurl, data=None)
+   .. method:: open(fullurl, data=None)
 
-       Open *fullurl* using the appropriate protocol.  This method sets up cache and
-       proxy information, then calls the appropriate open method with its input
-       arguments.  If the scheme is not recognized, :meth:`open_unknown` is called.
-       The *data* argument has the same meaning as the *data* argument of
-       :func:`urlopen`.
+      Open *fullurl* using the appropriate protocol.  This method sets up cache and
+      proxy information, then calls the appropriate open method with its input
+      arguments.  If the scheme is not recognized, :meth:`open_unknown` is called.
+      The *data* argument has the same meaning as the *data* argument of
+      :func:`urlopen`.
 
 
-    .. method:: open_unknown(fullurl, data=None)
+   .. method:: open_unknown(fullurl, data=None)
 
-       Overridable interface to open unknown URL types.
+      Overridable interface to open unknown URL types.
 
 
-    .. method:: retrieve(url, filename=None, reporthook=None, data=None)
+   .. method:: retrieve(url, filename=None, reporthook=None, data=None)
 
-       Retrieves the contents of *url* and places it in *filename*.  The return value
-       is a tuple consisting of a local filename and either an
-       :class:`email.message.Message` object containing the response headers (for remote
-       URLs) or ``None`` (for local URLs).  The caller must then open and read the
-       contents of *filename*.  If *filename* is not given and the URL refers to a
-       local file, the input filename is returned.  If the URL is non-local and
-       *filename* is not given, the filename is the output of :func:`tempfile.mktemp`
-       with a suffix that matches the suffix of the last path component of the input
-       URL.  If *reporthook* is given, it must be a function accepting three numeric
-       parameters: A chunk number, the maximum size chunks are read in and the total size of the download
-       (-1 if unknown).  It will be called once at the start and after each chunk of data is read from the
-       network.  *reporthook* is ignored for local URLs.
+      Retrieves the contents of *url* and places it in *filename*.  The return value
+      is a tuple consisting of a local filename and either an
+      :class:`email.message.Message` object containing the response headers (for remote
+      URLs) or ``None`` (for local URLs).  The caller must then open and read the
+      contents of *filename*.  If *filename* is not given and the URL refers to a
+      local file, the input filename is returned.  If the URL is non-local and
+      *filename* is not given, the filename is the output of :func:`tempfile.mktemp`
+      with a suffix that matches the suffix of the last path component of the input
+      URL.  If *reporthook* is given, it must be a function accepting three numeric
+      parameters: A chunk number, the maximum size chunks are read in and the total size of the download
+      (-1 if unknown).  It will be called once at the start and after each chunk of data is read from the
+      network.  *reporthook* is ignored for local URLs.
 
-       If the *url* uses the :file:`http:` scheme identifier, the optional *data*
-       argument may be given to specify a ``POST`` request (normally the request type
-       is ``GET``).  The *data* argument must in standard
-       :mimetype:`application/x-www-form-urlencoded` format; see the
-       :func:`urllib.parse.urlencode` function.
+      If the *url* uses the :file:`http:` scheme identifier, the optional *data*
+      argument may be given to specify a ``POST`` request (normally the request type
+      is ``GET``).  The *data* argument must in standard
+      :mimetype:`application/x-www-form-urlencoded` format; see the
+      :func:`urllib.parse.urlencode` function.
 
 
-    .. attribute:: version
+   .. attribute:: version
 
-       Variable that specifies the user agent of the opener object.  To get
-       :mod:`urllib` to tell servers that it is a particular user agent, set this in a
-       subclass as a class variable or in the constructor before calling the base
-       constructor.
+      Variable that specifies the user agent of the opener object.  To get
+      :mod:`urllib` to tell servers that it is a particular user agent, set this in a
+      subclass as a class variable or in the constructor before calling the base
+      constructor.
 
 
 .. class:: FancyURLopener(...)
diff --git a/Doc/library/uuid.rst b/Doc/library/uuid.rst
index 91dbca2..edbf832 100644
--- a/Doc/library/uuid.rst
+++ b/Doc/library/uuid.rst
@@ -111,7 +111,7 @@ random UUID.
 .. attribute:: UUID.variant
 
    The UUID variant, which determines the internal layout of the UUID. This will be
-   one of the integer constants :const:`RESERVED_NCS`, :const:`RFC_4122`,
+   one of the constants :const:`RESERVED_NCS`, :const:`RFC_4122`,
    :const:`RESERVED_MICROSOFT`, or :const:`RESERVED_FUTURE`.
 
 
diff --git a/Doc/library/weakref.rst b/Doc/library/weakref.rst
index e289b97..b02a006 100644
--- a/Doc/library/weakref.rst
+++ b/Doc/library/weakref.rst
@@ -166,8 +166,8 @@ Extension types can easily be made to support weak references; see
       performed by the program during iteration may cause items in the
       dictionary to vanish "by magic" (as a side effect of garbage collection).
 
-:class:`WeakKeyDictionary` objects have the following additional methods.  These
-expose the internal references directly.  The references are not guaranteed to
+:class:`WeakKeyDictionary` objects have an additional method that
+exposes the internal references directly.  The references are not guaranteed to
 be "live" at the time they are used, so the result of calling the references
 needs to be checked before being used.  This can be used to avoid creating
 references that will cause the garbage collector to keep the keys around longer
@@ -192,9 +192,9 @@ than needed.
       by the program during iteration may cause items in the dictionary to vanish "by
       magic" (as a side effect of garbage collection).
 
-:class:`WeakValueDictionary` objects have the following additional methods.
-These method have the same issues as the and :meth:`keyrefs` method of
-:class:`WeakKeyDictionary` objects.
+:class:`WeakValueDictionary` objects have an additional method that has the
+same issues as the :meth:`keyrefs` method of :class:`WeakKeyDictionary`
+objects.
 
 
 .. method:: WeakValueDictionary.valuerefs()
diff --git a/Doc/library/xml.dom.minidom.rst b/Doc/library/xml.dom.minidom.rst
index 2e9e814..40470e8 100644
--- a/Doc/library/xml.dom.minidom.rst
+++ b/Doc/library/xml.dom.minidom.rst
@@ -248,7 +248,7 @@ utility to most DOM users.
 
 .. rubric:: Footnotes
 
-.. [#] The encoding name included in the XML output should conform to
+.. [1] The encoding name included in the XML output should conform to
    the appropriate standards. For example, "UTF-8" is valid, but
    "UTF8" is not valid in an XML document's declaration, even though
    Python accepts it as an encoding name.
diff --git a/Doc/library/xml.dom.pulldom.rst b/Doc/library/xml.dom.pulldom.rst
index b502554..5c0f469 100644
--- a/Doc/library/xml.dom.pulldom.rst
+++ b/Doc/library/xml.dom.pulldom.rst
@@ -108,7 +108,7 @@ DOMEventStream Objects
       :class:`xml.dom.minidom.Element` if event equals :data:`START_ELEMENT` or
       :data:`END_ELEMENT` or :class:`xml.dom.minidom.Text` if event equals
       :data:`CHARACTERS`.
-      The current node does not contain informations about its children, unless
+      The current node does not contain information about its children, unless
       :func:`expandNode` is called.
 
    .. method:: expandNode(node)
diff --git a/Doc/library/xml.etree.elementtree.rst b/Doc/library/xml.etree.elementtree.rst
index b54eace..7d814ad 100644
--- a/Doc/library/xml.etree.elementtree.rst
+++ b/Doc/library/xml.etree.elementtree.rst
@@ -1192,7 +1192,7 @@ Exceptions
 
 .. rubric:: Footnotes
 
-.. [#] The encoding string included in XML output should conform to the
+.. [1] The encoding string included in XML output should conform to the
    appropriate standards.  For example, "UTF-8" is valid, but "UTF8" is
    not.  See https://www.w3.org/TR/2006/REC-xml11-20060816/#NT-EncodingDecl
    and https://www.iana.org/assignments/character-sets/character-sets.xhtml.
diff --git a/Doc/library/zipfile.rst b/Doc/library/zipfile.rst
index d144ae3..629b7ed 100644
--- a/Doc/library/zipfile.rst
+++ b/Doc/library/zipfile.rst
@@ -418,12 +418,12 @@ The :class:`PyZipFile` constructor takes the same parameters as the
       added to the archive, compiling if necessary.
 
       If *pathname* is a file, the filename must end with :file:`.py`, and
-      just the (corresponding :file:`\*.py[co]`) file is added at the top level
+      just the (corresponding :file:`\*.pyc`) file is added at the top level
       (no path information).  If *pathname* is a file that does not end with
       :file:`.py`, a :exc:`RuntimeError` will be raised.  If it is a directory,
       and the directory is not a package directory, then all the files
-      :file:`\*.py[co]` are added at the top level.  If the directory is a
-      package directory, then all :file:`\*.py[co]` are added under the package
+      :file:`\*.pyc` are added at the top level.  If the directory is a
+      package directory, then all :file:`\*.pyc` are added under the package
       name as a file path, and if any subdirectories are package directories,
       all of these are added recursively.
 
diff --git a/Doc/library/zipimport.rst b/Doc/library/zipimport.rst
index 46b8c24..eaae2bb 100644
--- a/Doc/library/zipimport.rst
+++ b/Doc/library/zipimport.rst
@@ -9,7 +9,7 @@
 --------------
 
 This module adds the ability to import Python modules (:file:`\*.py`,
-:file:`\*.py[co]`) and packages from ZIP-format archives. It is usually not
+:file:`\*.pyc`) and packages from ZIP-format archives. It is usually not
 needed to use the :mod:`zipimport` module explicitly; it is automatically used
 by the built-in :keyword:`import` mechanism for :data:`sys.path` items that are paths
 to ZIP archives.
diff --git a/Doc/make.bat b/Doc/make.bat
index 5ab8085..740f148 100644
--- a/Doc/make.bat
+++ b/Doc/make.bat
@@ -86,7 +86,7 @@ goto end
 
 :build
 if NOT "%PAPER%" == "" (
-    set SPHINXOPTS=-D latex_paper_size=%PAPER% %SPHINXOPTS%
+    set SPHINXOPTS=-D latex_elements.papersize=%PAPER% %SPHINXOPTS%
 )
 cmd /C %SPHINXBUILD% %SPHINXOPTS% -b%1 -dbuild\doctrees . %BUILDDIR%\%*
 
diff --git a/Doc/reference/datamodel.rst b/Doc/reference/datamodel.rst
index 2f5625b..d015da2 100644
--- a/Doc/reference/datamodel.rst
+++ b/Doc/reference/datamodel.rst
@@ -765,9 +765,9 @@ Custom classes
    Special attributes: :attr:`~definition.__name__` is the class name; :attr:`__module__` is
    the module name in which the class was defined; :attr:`~object.__dict__` is the
    dictionary containing the class's namespace; :attr:`~class.__bases__` is a
-   tuple (possibly a singleton) containing the base classes, in the
-   order of their occurrence in the base class list; :attr:`__doc__` is the
-   class's documentation string, or ``None`` if undefined.
+   tuple containing the base classes, in the order of their occurrence in the
+   base class list; :attr:`__doc__` is the class's documentation string, or
+   ``None`` if undefined.
 
 Class instances
    .. index::
@@ -1088,9 +1088,9 @@ Basic customization
    (usually an instance of *cls*).
 
    Typical implementations create a new instance of the class by invoking the
-   superclass's :meth:`__new__` method using ``super(currentclass,
-   cls).__new__(cls[, ...])`` with appropriate arguments and then modifying the
-   newly-created instance as necessary before returning it.
+   superclass's :meth:`__new__` method using ``super().__new__(cls[, ...])``
+   with appropriate arguments and then modifying the newly-created instance
+   as necessary before returning it.
 
    If :meth:`__new__` returns an instance of *cls*, then the new instance's
    :meth:`__init__` method will be invoked like ``__init__(self[, ...])``, where
@@ -1114,7 +1114,7 @@ Basic customization
    class constructor expression.  If a base class has an :meth:`__init__`
    method, the derived class's :meth:`__init__` method, if any, must explicitly
    call it to ensure proper initialization of the base class part of the
-   instance; for example: ``BaseClass.__init__(self, [args...])``.
+   instance; for example: ``super().__init__([args...])``.
 
    Because :meth:`__new__` and :meth:`__init__` work together in constructing
    objects (:meth:`__new__` to create it, and :meth:`__init__` to customize it),
@@ -1538,8 +1538,8 @@ Class Binding
    ``A.__dict__['x'].__get__(None, A)``.
 
 Super Binding
-   If ``a`` is an instance of :class:`super`, then the binding ``super(B,
-   obj).m()`` searches ``obj.__class__.__mro__`` for the base class ``A``
+   If ``a`` is an instance of :class:`super`, then the binding ``super(B, obj).m()``
+   searches ``obj.__class__.__mro__`` for the base class ``A``
    immediately preceding ``B`` and then invokes the descriptor with the call:
    ``A.__dict__['m'].__get__(obj, obj.__class__)``.
 
@@ -1887,6 +1887,14 @@ through the container; for mappings, :meth:`__iter__` should be the same as
    :meth:`__bool__` method and whose :meth:`__len__` method returns zero is
    considered to be false in a Boolean context.
 
+   .. impl-detail::
+
+      In CPython, the length is required to be at most :attr:`sys.maxsize`.
+      If the length is larger than :attr:`!sys.maxsize` some features (such as
+      :func:`len`) may raise :exc:`OverflowError`.  To prevent raising
+      :exc:`!OverflowError` by truth value testing, an object must define a
+      :meth:`__bool__` method.
+
 
 .. method:: object.__length_hint__(self)
 
@@ -1897,6 +1905,7 @@ through the container; for mappings, :meth:`__iter__` should be the same as
 
    .. versionadded:: 3.4
 
+
 .. note::
 
    Slicing is done exclusively with the following three methods.  A call like ::
diff --git a/Doc/reference/executionmodel.rst b/Doc/reference/executionmodel.rst
index 5f1ea92..f0dbbd1 100644
--- a/Doc/reference/executionmodel.rst
+++ b/Doc/reference/executionmodel.rst
@@ -194,12 +194,6 @@ This means that the following code will print 42::
    i = 42
    f()
 
-There are several cases where Python statements are illegal when used in
-conjunction with nested scopes that contain free variables.
-
-If a variable is referenced in an enclosing scope, it is illegal to delete the
-name.  An error will be reported at compile time.
-
 .. XXX from * also invalid with relative imports (at least currently)
 
 The :func:`eval` and :func:`exec` functions do not have access to the full
diff --git a/Doc/reference/expressions.rst b/Doc/reference/expressions.rst
index 9792399..437a350 100644
--- a/Doc/reference/expressions.rst
+++ b/Doc/reference/expressions.rst
@@ -745,7 +745,7 @@ keyword arguments (and any ``**expression`` arguments -- see below).  So::
    2 1
    >>> f(a=1, *(2,))
    Traceback (most recent call last):
-     File "<stdin>", line 1, in ?
+     File "<stdin>", line 1, in <module>
    TypeError: f() got multiple values for keyword argument 'a'
    >>> f(1, *(2,))
    1 2
@@ -1195,7 +1195,7 @@ built-in types.
     true).
 
 * Mappings (instances of :class:`dict`) compare equal if and only if they have
-  equal `(key, value)` pairs. Equality comparison of the keys and elements
+  equal `(key, value)` pairs. Equality comparison of the keys and values
   enforces reflexivity.
 
   Order comparisons (``<``, ``>``, ``<=``, and ``>=``) raise :exc:`TypeError`.
@@ -1255,6 +1255,10 @@ some consistency rules, if possible:
   sequences, but not to sets or mappings). See also the
   :func:`~functools.total_ordering` decorator.
 
+* The :func:`hash` result should be consistent with equality.
+  Objects that are equal should either have the same hash value,
+  or be marked as unhashable.
+
 Python does not enforce these consistency rules. In fact, the not-a-number
 values are an example for not following these rules.
 
@@ -1267,28 +1271,29 @@ Membership test operations
 --------------------------
 
 The operators :keyword:`in` and :keyword:`not in` test for membership.  ``x in
-s`` evaluates to true if *x* is a member of *s*, and false otherwise.  ``x not
-in s`` returns the negation of ``x in s``.  All built-in sequences and set types
-support this as well as dictionary, for which :keyword:`in` tests whether the
-dictionary has a given key. For container types such as list, tuple, set,
-frozenset, dict, or collections.deque, the expression ``x in y`` is equivalent
+s`` evaluates to ``True`` if *x* is a member of *s*, and ``False`` otherwise.
+``x not in s`` returns the negation of ``x in s``.  All built-in sequences and
+set types support this as well as dictionary, for which :keyword:`in` tests
+whether the dictionary has a given key. For container types such as list, tuple,
+set, frozenset, dict, or collections.deque, the expression ``x in y`` is equivalent
 to ``any(x is e or x == e for e in y)``.
 
-For the string and bytes types, ``x in y`` is true if and only if *x* is a
+For the string and bytes types, ``x in y`` is ``True`` if and only if *x* is a
 substring of *y*.  An equivalent test is ``y.find(x) != -1``.  Empty strings are
 always considered to be a substring of any other string, so ``"" in "abc"`` will
 return ``True``.
 
 For user-defined classes which define the :meth:`__contains__` method, ``x in
-y`` is true if and only if ``y.__contains__(x)`` is true.
+y`` returns ``True`` if ``y.__contains__(x)`` returns a true value, and
+``False`` otherwise.
 
 For user-defined classes which do not define :meth:`__contains__` but do define
-:meth:`__iter__`, ``x in y`` is true if some value ``z`` with ``x == z`` is
+:meth:`__iter__`, ``x in y`` is ``True`` if some value ``z`` with ``x == z`` is
 produced while iterating over ``y``.  If an exception is raised during the
 iteration, it is as if :keyword:`in` raised that exception.
 
 Lastly, the old-style iteration protocol is tried: if a class defines
-:meth:`__getitem__`, ``x in y`` is true if and only if there is a non-negative
+:meth:`__getitem__`, ``x in y`` is ``True`` if and only if there is a non-negative
 integer index *i* such that ``x == y[i]``, and all lower integer indices do not
 raise :exc:`IndexError` exception.  (If any other exception is raised, it is as
 if :keyword:`in` raised that exception).
diff --git a/Doc/reference/import.rst b/Doc/reference/import.rst
index 64302b8..a981b87 100644
--- a/Doc/reference/import.rst
+++ b/Doc/reference/import.rst
@@ -431,7 +431,7 @@ on the module object.  If the method returns ``None``, the
 import machinery will create the new module itself.
 
 .. versionadded:: 3.4
-   The create_module() method of loaders.
+   The :meth:`~importlib.abc.Loader.create_module` method of loaders.
 
 .. versionchanged:: 3.4
    The :meth:`~importlib.abc.Loader.load_module` method was replaced by
diff --git a/Doc/reference/simple_stmts.rst b/Doc/reference/simple_stmts.rst
index d403c4d..35c8239 100644
--- a/Doc/reference/simple_stmts.rst
+++ b/Doc/reference/simple_stmts.rst
@@ -872,7 +872,7 @@ definition, function definition, or :keyword:`import` statement.
    builtin: eval
    builtin: compile
 
-**Programmer's note:** the :keyword:`global` is a directive to the parser.  It
+**Programmer's note:** :keyword:`global` is a directive to the parser.  It
 applies only to code parsed at the same time as the :keyword:`global` statement.
 In particular, a :keyword:`global` statement contained in a string or code
 object supplied to the built-in :func:`exec` function does not affect the code
diff --git a/Doc/tools/extensions/patchlevel.py b/Doc/tools/extensions/patchlevel.py
index bca2eb8..919ba4a 100644
--- a/Doc/tools/extensions/patchlevel.py
+++ b/Doc/tools/extensions/patchlevel.py
@@ -10,6 +10,8 @@
     :license: Python license.
 """
 
+from __future__ import print_function
+
 import os
 import re
 import sys
@@ -61,8 +63,8 @@ def get_version_info():
         return get_header_version_info('.')
     except (IOError, OSError):
         version, release = get_sys_version_info()
-        print >>sys.stderr, 'Can\'t get version info from Include/patchlevel.h, ' \
-              'using version of this interpreter (%s).' % release
+        print('Can\'t get version info from Include/patchlevel.h, ' \
+              'using version of this interpreter (%s).' % release, file=sys.stderr)
         return version, release
 
 if __name__ == '__main__':
diff --git a/Doc/tools/extensions/pyspecific.py b/Doc/tools/extensions/pyspecific.py
index 6311283..00c9356 100644
--- a/Doc/tools/extensions/pyspecific.py
+++ b/Doc/tools/extensions/pyspecific.py
@@ -34,7 +34,7 @@ import suspicious
 
 
 ISSUE_URI = 'https://bugs.python.org/issue%s'
-SOURCE_URI = 'https://hg.python.org/cpython/file/3.5/%s'
+SOURCE_URI = 'https://github.com/python/cpython/tree/3.5/%s'
 
 # monkey-patch reST parser to disable alphabetic and roman enumerated lists
 from docutils.parsers.rst.states import Body
@@ -79,7 +79,7 @@ LaTeXTranslator.depart_literal_block = new_depart_literal_block
 
 def issue_role(typ, rawtext, text, lineno, inliner, options={}, content=[]):
     issue = utils.unescape(text)
-    text = 'issue ' + issue
+    text = 'bpo-' + issue
     refnode = nodes.reference(text, text, refuri=ISSUE_URI % issue)
     return [refnode], []
 
@@ -225,7 +225,7 @@ class DeprecatedRemoved(Directive):
 
 # Support for including Misc/NEWS
 
-issue_re = re.compile('([Ii])ssue #([0-9]+)')
+issue_re = re.compile('(?:[Ii]ssue #|bpo-)([0-9]+)')
 whatsnew_re = re.compile(r"(?im)^what's new in (.*?)\??$")
 
 
@@ -253,7 +253,7 @@ class MiscNews(Directive):
             text = 'The NEWS file is not available.'
             node = nodes.strong(text, text)
             return [node]
-        content = issue_re.sub(r'`\1ssue #\2 <https://bugs.python.org/\2>`__',
+        content = issue_re.sub(r'`bpo-\1 <https://bugs.python.org/issue\1>`__',
                                content)
         content = whatsnew_re.sub(r'\1', content)
         # remove first 3 lines as they are the main heading
diff --git a/Doc/tools/susp-ignored.csv b/Doc/tools/susp-ignored.csv
index dba93bf..8883f53 100644
--- a/Doc/tools/susp-ignored.csv
+++ b/Doc/tools/susp-ignored.csv
@@ -82,7 +82,7 @@ howto/pyporting,,::,Programming Language :: Python :: 2
 howto/pyporting,,::,Programming Language :: Python :: 3
 howto/regex,,::,
 howto/regex,,:foo,(?:foo)
-howto/urllib2,,:password,"for example ""joe:password@example.com"""
+howto/urllib2,,:password,"""joe:password@example.com"""
 library/audioop,,:ipos,"# factor = audioop.findfactor(in_test[ipos*2:ipos*2+len(out_test)],"
 library/bisect,32,:hi,all(val >= x for val in a[i:hi])
 library/bisect,42,:hi,all(val > x for val in a[i:hi])
@@ -272,8 +272,10 @@ whatsnew/3.2,,:feed,>>> urllib.parse.urlparse('http://[dead:beef:cafe:5417:affe:
 whatsnew/3.2,,:gz,">>> with tarfile.open(name='myarchive.tar.gz', mode='w:gz') as tf:"
 whatsnew/3.2,,:location,zope9-location = ${zope9:location}
 whatsnew/3.2,,:prefix,zope-conf = ${custom:prefix}/etc/zope.conf
-whatsnew/changelog,,:gz,": TarFile opened with external fileobj and ""w:gz"" mode didn't"
-whatsnew/changelog,,::,": Use ""127.0.0.1"" or ""::1"" instead of ""localhost"" as much as"
+whatsnew/changelog,,:gz,": TarFile opened with external fileobj and "
+whatsnew/changelog,,::,::1
+library/re,,`,!#$%&'*+-.^_`|~:
+library/re,,`,\!\#\$\%\&\'\*\+\-\.\^_\`\|\~\:
 library/tarfile,149,:xz,'x:xz'
 library/xml.etree.elementtree,290,:sometag,prefix:sometag
 library/xml.etree.elementtree,301,:fictional,"<actors xmlns:fictional=""http://characters.example.com"""
@@ -286,8 +288,8 @@ library/xml.etree.elementtree,,:actor,"for actor in root.findall('real_person:ac
 library/xml.etree.elementtree,,:name,"name = actor.find('real_person:name', ns)"
 library/xml.etree.elementtree,,:character,"for char in actor.findall('role:character', ns):"
 library/zipapp,31,:main,"$ python -m zipapp myapp -m ""myapp:main"""
-library/zipapp,82,:fn,"argument should have the form ""pkg.mod:fn"", where ""pkg.mod"" is a"
-library/zipapp,155,:callable,"""pkg.module:callable"" and the archive will be run by importing"
+library/zipapp,,:fn,"pkg.mod:fn"
+library/zipapp,,:callable,"pkg.module:callable"
 library/stdtypes,,::,>>> m[::2].tolist()
 library/sys,,`,# ``wrapper`` creates a ``wrap(coro)`` coroutine:
 tutorial/venv,77,:c7b9645a6f35,"Python 3.4.3+ (3.4:c7b9645a6f35+, May 22 2015, 09:31:25)"
diff --git a/Doc/tools/templates/customsourcelink.html b/Doc/tools/templates/customsourcelink.html
index 243d810..71d0bba 100644
--- a/Doc/tools/templates/customsourcelink.html
+++ b/Doc/tools/templates/customsourcelink.html
@@ -3,8 +3,11 @@
     <h3>{{ _('This Page') }}</h3>
     <ul class="this-page-menu">
       <li><a href="{{ pathto('bugs') }}">{% trans %}Report a Bug{% endtrans %}</a></li>
-      <li><a href="{{ pathto('_sources/' + sourcename, true)|e }}"
-            rel="nofollow">{{ _('Show Source') }}</a></li>
+      <li>
+        <a href="https://github.com/python/cpython/blob/{{ version }}/Doc/{{ sourcename|replace('txt', 'rst') }}"
+            rel="nofollow">{{ _('Show Source') }}
+        </a>
+      </li>
     </ul>
   </div>
 {%- endif %}
diff --git a/Doc/tools/templates/download.html b/Doc/tools/templates/download.html
index de84ae3..3a05cb6 100644
--- a/Doc/tools/templates/download.html
+++ b/Doc/tools/templates/download.html
@@ -42,7 +42,7 @@ in the table are the size of the download files in megabytes.</p>
 <p>These archives contain all the content in the documentation.</p>
 
 <p>HTML Help (<tt>.chm</tt>) files are made available in the "Windows" section
-on the <a href="https://www.python.org/download/releases/{{ release[:5] }}/">Python
+on the <a href="https://www.python.org/downloads/release/python-{{ release.replace('.', '') }}/">Python
 download page</a>.</p>
 
 
diff --git a/Doc/tools/templates/indexcontent.html b/Doc/tools/templates/indexcontent.html
index 1076c1f..d795c0a 100644
--- a/Doc/tools/templates/indexcontent.html
+++ b/Doc/tools/templates/indexcontent.html
@@ -1,5 +1,12 @@
-{% extends "defindex.html" %}
-{% block tables %}
+{% extends "layout.html" %}
+{%- block htmltitle -%}
+<title>{{ shorttitle }}</title>
+{%- endblock -%}
+{% block body %}
+  <h1>{{ docstitle|e }}</h1>
+  <p>
+  {% trans %}Welcome! This is the documentation for Python {{ release }}.{% endtrans %}
+  </p>
   <p><strong>{% trans %}Parts of the documentation:{% endtrans %}</strong></p>
   <table class="contentstable" align="center"><tr>
     <td width="50%">
diff --git a/Doc/tools/templates/layout.html b/Doc/tools/templates/layout.html
index 5c180e7..640d8b3 100644
--- a/Doc/tools/templates/layout.html
+++ b/Doc/tools/templates/layout.html
@@ -38,6 +38,7 @@
 {% endblock %}
 {% block extrahead %}
     <link rel="shortcut icon" type="image/png" href="{{ pathto('_static/py.png', 1) }}" />
+    <link rel="canonical" href="https://docs.python.org/3/{{pagename}}.html" />
     {% if builder != "htmlhelp" %}
     {% if not embedded %}<script type="text/javascript" src="{{ pathto('_static/copybutton.js', 1) }}"></script>{% endif %}
     {% if versionswitcher is defined and not embedded %}<script type="text/javascript" src="{{ pathto('_static/version_switch.js', 1) }}"></script>{% endif %}
diff --git a/Doc/tutorial/classes.rst b/Doc/tutorial/classes.rst
index e134d5d..073444c 100644
--- a/Doc/tutorial/classes.rst
+++ b/Doc/tutorial/classes.rst
@@ -784,7 +784,7 @@ using the :func:`next` built-in function; this example shows how it all works::
    'c'
    >>> next(it)
    Traceback (most recent call last):
-     File "<stdin>", line 1, in ?
+     File "<stdin>", line 1, in <module>
        next(it)
    StopIteration
 
diff --git a/Doc/tutorial/controlflow.rst b/Doc/tutorial/controlflow.rst
index 12989b2..fbe4e92 100644
--- a/Doc/tutorial/controlflow.rst
+++ b/Doc/tutorial/controlflow.rst
@@ -472,7 +472,7 @@ Here's an example that fails due to this restriction::
    ...
    >>> function(0, a=0)
    Traceback (most recent call last):
-     File "<stdin>", line 1, in ?
+     File "<stdin>", line 1, in <module>
    TypeError: function() got multiple values for keyword argument 'a'
 
 When a final formal parameter of the form ``**name`` is present, it receives a
diff --git a/Doc/tutorial/datastructures.rst b/Doc/tutorial/datastructures.rst
index b39bdf4..1a73ac9 100644
--- a/Doc/tutorial/datastructures.rst
+++ b/Doc/tutorial/datastructures.rst
@@ -22,11 +22,11 @@ objects:
    Add an item to the end of the list.  Equivalent to ``a[len(a):] = [x]``.
 
 
-.. method:: list.extend(L)
+.. method:: list.extend(iterable)
    :noindex:
 
-   Extend the list by appending all the items in the given list.  Equivalent to
-   ``a[len(a):] = L``.
+   Extend the list by appending all the items from the iterable.  Equivalent to
+   ``a[len(a):] = iterable``.
 
 
 .. method:: list.insert(i, x)
@@ -60,11 +60,16 @@ objects:
    Remove all items from the list.  Equivalent to ``del a[:]``.
 
 
-.. method:: list.index(x)
+.. method:: list.index(x[, start[, end]])
    :noindex:
 
-   Return the index in the list of the first item whose value is *x*. It is an
-   error if there is no such item.
+   Return zero-based index in the list of the first item whose value is *x*.
+   Raises a :exc:`ValueError` if there is no such item.
+
+   The optional arguments *start* and *end* are interpreted as in the slice
+   notation and are used to limit the search to a particular subsequence of
+   the list.  The returned index is computed relative to the beginning of the full
+   sequence rather than the *start* argument.
 
 
 .. method:: list.count(x)
@@ -94,28 +99,26 @@ objects:
 
 An example that uses most of the list methods::
 
-   >>> a = [66.25, 333, 333, 1, 1234.5]
-   >>> print(a.count(333), a.count(66.25), a.count('x'))
-   2 1 0
-   >>> a.insert(2, -1)
-   >>> a.append(333)
-   >>> a
-   [66.25, 333, -1, 333, 1, 1234.5, 333]
-   >>> a.index(333)
-   1
-   >>> a.remove(333)
-   >>> a
-   [66.25, -1, 333, 1, 1234.5, 333]
-   >>> a.reverse()
-   >>> a
-   [333, 1234.5, 1, 333, -1, 66.25]
-   >>> a.sort()
-   >>> a
-   [-1, 1, 66.25, 333, 333, 1234.5]
-   >>> a.pop()
-   1234.5
-   >>> a
-   [-1, 1, 66.25, 333, 333]
+    >>> fruits = ['orange', 'apple', 'pear', 'banana', 'kiwi', 'apple', 'banana']
+    >>> fruits.count('apple')
+    2
+    >>> fruits.count('tangerine')
+    0
+    >>> fruits.index('banana')
+    3
+    >>> fruits.index('banana', 4)  # Find next banana starting a position 4
+    6
+    >>> fruits.reverse()
+    >>> fruits
+    ['banana', 'apple', 'kiwi', 'banana', 'pear', 'apple', 'orange']
+    >>> fruits.append('grape')
+    >>> fruits
+    ['banana', 'apple', 'kiwi', 'banana', 'pear', 'apple', 'orange', 'grape']
+    >>> fruits.sort()
+    >>> fruits
+    ['apple', 'apple', 'banana', 'banana', 'grape', 'kiwi', 'orange', 'pear']
+    >>> fruits.pop()
+    'pear'
 
 You might have noticed that methods like ``insert``, ``remove`` or ``sort`` that
 only modify the list have no return value printed -- they return the default
@@ -258,7 +261,7 @@ it must be parenthesized. ::
    [(0, 0), (1, 1), (2, 4), (3, 9), (4, 16), (5, 25)]
    >>> # the tuple must be parenthesized, otherwise an error is raised
    >>> [x, x**2 for x in range(6)]
-     File "<stdin>", line 1, in ?
+     File "<stdin>", line 1, in <module>
        [x, x**2 for x in range(6)]
                   ^
    SyntaxError: invalid syntax
diff --git a/Doc/tutorial/inputoutput.rst b/Doc/tutorial/inputoutput.rst
index dd9c7cd..5add11a 100644
--- a/Doc/tutorial/inputoutput.rst
+++ b/Doc/tutorial/inputoutput.rst
@@ -361,7 +361,7 @@ attempts to use the file object will automatically fail. ::
    >>> f.close()
    >>> f.read()
    Traceback (most recent call last):
-     File "<stdin>", line 1, in ?
+     File "<stdin>", line 1, in <module>
    ValueError: I/O operation on closed file
 
 It is good practice to use the :keyword:`with` keyword when dealing with file
diff --git a/Doc/tutorial/introduction.rst b/Doc/tutorial/introduction.rst
index 2140329..85ba896 100644
--- a/Doc/tutorial/introduction.rst
+++ b/Doc/tutorial/introduction.rst
@@ -100,10 +100,8 @@ give you an error::
 There is full support for floating point; operators with mixed type operands
 convert the integer operand to floating point::
 
-   >>> 3 * 3.75 / 1.5
-   7.5
-   >>> 7.0 / 2
-   3.5
+   >>> 4 * 3.75 - 1
+   14.0
 
 In interactive mode, the last printed expression is assigned to the variable
 ``_``.  This means that when you are using Python as a desk calculator, it is
@@ -356,7 +354,7 @@ The built-in function :func:`len` returns the length of a string::
       Information about string formatting with :meth:`str.format`.
 
    :ref:`old-string-formatting`
-      The old formatting operations invoked when strings and Unicode strings are
+      The old formatting operations invoked when strings are
       the left operand of the ``%`` operator are described in more detail here.
 
 
diff --git a/Doc/using/cmdline.rst b/Doc/using/cmdline.rst
index 6117796..906d31f 100644
--- a/Doc/using/cmdline.rst
+++ b/Doc/using/cmdline.rst
@@ -518,8 +518,8 @@ conflict.
 
 .. envvar:: PYTHONDONTWRITEBYTECODE
 
-   If this is set to a non-empty string, Python won't try to write ``.pyc`` or
-   ``.pyo`` files on the import of source modules.  This is equivalent to
+   If this is set to a non-empty string, Python won't try to write ``.pyc``
+   files on the import of source modules.  This is equivalent to
    specifying the :option:`-B` option.
 
 
diff --git a/Doc/using/windows.rst b/Doc/using/windows.rst
index a4a6a30..1db8607 100644
--- a/Doc/using/windows.rst
+++ b/Doc/using/windows.rst
@@ -517,9 +517,9 @@ Shebang Lines
 
 If the first line of a script file starts with ``#!``, it is known as a
 "shebang" line.  Linux and other Unix like operating systems have native
-support for such lines and are commonly used on such systems to indicate how
-a script should be executed.  This launcher allows the same facilities to be
-using with Python scripts on Windows and the examples above demonstrate their
+support for such lines and they are commonly used on such systems to indicate
+how a script should be executed.  This launcher allows the same facilities to
+be used with Python scripts on Windows and the examples above demonstrate their
 use.
 
 To allow shebang lines in Python scripts to be portable between Unix and
diff --git a/Doc/whatsnew/2.0.rst b/Doc/whatsnew/2.0.rst
index 010a007..5cbf501 100644
--- a/Doc/whatsnew/2.0.rst
+++ b/Doc/whatsnew/2.0.rst
@@ -145,8 +145,8 @@ strings.  Unicode uses 16-bit numbers to represent characters instead of the
 8-bit number used by ASCII, meaning that 65,536 distinct characters can be
 supported.
 
-The final interface for Unicode support was arrived at through countless often-
-stormy discussions on the python-dev mailing list, and mostly implemented by
+The final interface for Unicode support was arrived at through countless
+often-stormy discussions on the python-dev mailing list, and mostly implemented by
 Marc-AndrÃ© Lemburg, based on a Unicode string type implementation by Fredrik
 Lundh.  A detailed explanation of the interface was written up as :pep:`100`,
 "Python Unicode Integration". This article will simply cover the most
@@ -885,8 +885,8 @@ interfaces for processing XML have become common: SAX2 (version 2 of the Simple
 API for XML) provides an event-driven interface with some similarities to
 :mod:`xmllib`, and the DOM (Document Object Model) provides a tree-based
 interface, transforming an XML document into a tree of nodes that can be
-traversed and modified.  Python 2.0 includes a SAX2 interface and a stripped-
-down DOM interface as part of the :mod:`xml` package. Here we will give a brief
+traversed and modified.  Python 2.0 includes a SAX2 interface and a stripped-down
+DOM interface as part of the :mod:`xml` package. Here we will give a brief
 overview of these new interfaces; consult the Python documentation or the source
 code for complete details. The Python XML SIG is also working on improved
 documentation.
diff --git a/Doc/whatsnew/2.1.rst b/Doc/whatsnew/2.1.rst
index 00151d7..ad4c6d5 100644
--- a/Doc/whatsnew/2.1.rst
+++ b/Doc/whatsnew/2.1.rst
@@ -159,8 +159,8 @@ precede any statement that will result in bytecodes being produced.
 PEP 207: Rich Comparisons
 =========================
 
-In earlier versions, Python's support for implementing comparisons on user-
-defined classes and extension types was quite simple. Classes could implement a
+In earlier versions, Python's support for implementing comparisons on user-defined
+classes and extension types was quite simple. Classes could implement a
 :meth:`__cmp__` method that was given two instances of a class, and could only
 return 0 if they were equal or +1 or -1 if they weren't; the method couldn't
 raise an exception or return anything other than a Boolean value.  Users of
@@ -465,11 +465,11 @@ Windows being the primary examples; on these systems, it's impossible to
 distinguish the filenames ``FILE.PY`` and ``file.py``, even though they do store
 the file's name  in its original case (they're case-preserving, too).
 
-In Python 2.1, the :keyword:`import` statement will work to simulate case-
-sensitivity on case-insensitive platforms.  Python will now search for the first
+In Python 2.1, the :keyword:`import` statement will work to simulate case-sensitivity
+on case-insensitive platforms.  Python will now search for the first
 case-sensitive match by default, raising an :exc:`ImportError` if no such file
-is found, so ``import file`` will not import a module named ``FILE.PY``.  Case-
-insensitive matching can be requested by setting the :envvar:`PYTHONCASEOK`
+is found, so ``import file`` will not import a module named ``FILE.PY``.
+Case-insensitive matching can be requested by setting the :envvar:`PYTHONCASEOK`
 environment variable before starting the Python interpreter.
 
 .. ======================================================================
@@ -481,8 +481,8 @@ PEP 217: Interactive Display Hook
 When using the Python interpreter interactively, the output of commands is
 displayed using the built-in :func:`repr` function. In Python 2.1, the variable
 :func:`sys.displayhook` can be set to a callable object which will be called
-instead of :func:`repr`. For example, you can set it to a special pretty-
-printing function::
+instead of :func:`repr`. For example, you can set it to a special
+pretty-printing function::
 
    >>> # Create a recursive data structure
    ... L = [1,2,3]
diff --git a/Doc/whatsnew/2.2.rst b/Doc/whatsnew/2.2.rst
index 5f28c29..a0bb81a 100644
--- a/Doc/whatsnew/2.2.rst
+++ b/Doc/whatsnew/2.2.rst
@@ -962,8 +962,8 @@ New and Improved Modules
 * The new :mod:`hmac` module implements the HMAC algorithm described by
   :rfc:`2104`. (Contributed by Gerhard HÃ¤ring.)
 
-* Several functions that originally returned lengthy tuples now return pseudo-
-  sequences that still behave like tuples but also have mnemonic attributes such
+* Several functions that originally returned lengthy tuples now return
+  pseudo-sequences that still behave like tuples but also have mnemonic attributes such
   as memberst_mtime or :attr:`tm_year`. The enhanced functions include
   :func:`stat`, :func:`fstat`, :func:`statvfs`, and :func:`fstatvfs` in the
   :mod:`os` module, and :func:`localtime`, :func:`gmtime`, and :func:`strptime` in
@@ -1141,8 +1141,8 @@ Some of the more notable changes are:
 
   The most significant change is the ability to build Python as a framework,
   enabled by supplying the :option:`!--enable-framework` option to the configure
-  script when compiling Python.  According to Jack Jansen, "This installs a self-
-  contained Python installation plus the OS X framework "glue" into
+  script when compiling Python.  According to Jack Jansen, "This installs a
+  self-contained Python installation plus the OS X framework "glue" into
   :file:`/Library/Frameworks/Python.framework` (or another location of choice).
   For now there is little immediate added benefit to this (actually, there is the
   disadvantage that you have to change your PATH to be able to find Python), but
diff --git a/Doc/whatsnew/2.3.rst b/Doc/whatsnew/2.3.rst
index 93930b8..cebfb21 100644
--- a/Doc/whatsnew/2.3.rst
+++ b/Doc/whatsnew/2.3.rst
@@ -86,8 +86,8 @@ The union and intersection of sets can be computed with the :meth:`union` and
 It's also possible to take the symmetric difference of two sets.  This is the
 set of all elements in the union that aren't in the intersection.  Another way
 of putting it is that the symmetric difference contains all elements that are in
-exactly one set.  Again, there's an alternative notation (``^``), and an in-
-place version with the ungainly name :meth:`symmetric_difference_update`. ::
+exactly one set.  Again, there's an alternative notation (``^``), and an
+in-place version with the ungainly name :meth:`symmetric_difference_update`. ::
 
    >>> S1 = sets.Set([1,2,3,4])
    >>> S2 = sets.Set([3,4,5,6])
@@ -288,8 +288,8 @@ use characters outside of the usual alphanumerics.
 PEP 273: Importing Modules from ZIP Archives
 ============================================
 
-The new :mod:`zipimport` module adds support for importing modules from a ZIP-
-format archive.  You don't need to import the module explicitly; it will be
+The new :mod:`zipimport` module adds support for importing modules from a
+ZIP-format archive.  You don't need to import the module explicitly; it will be
 automatically imported if a ZIP archive's filename is added to ``sys.path``.
 For example:
 
@@ -375,8 +375,8 @@ PEP 278: Universal Newline Support
 ==================================
 
 The three major operating systems used today are Microsoft Windows, Apple's
-Macintosh OS, and the various Unix derivatives.  A minor irritation of cross-
-platform work  is that these three platforms all use different characters to
+Macintosh OS, and the various Unix derivatives.  A minor irritation of
+cross-platform work  is that these three platforms all use different characters to
 mark the ends of lines in text files.  Unix uses the linefeed (ASCII character
 10), MacOS uses the carriage return (ASCII character 13), and Windows uses a
 two-character sequence of a carriage return plus a newline.
diff --git a/Doc/whatsnew/2.4.rst b/Doc/whatsnew/2.4.rst
index 8db90cc..7c125ff 100644
--- a/Doc/whatsnew/2.4.rst
+++ b/Doc/whatsnew/2.4.rst
@@ -517,8 +517,8 @@ Sometimes you can see this inaccuracy when the number is printed::
    >>> 1.1
    1.1000000000000001
 
-The inaccuracy isn't always visible when you print the number because the FP-to-
-decimal-string conversion is provided by the C library, and most C libraries try
+The inaccuracy isn't always visible when you print the number because the
+FP-to-decimal-string conversion is provided by the C library, and most C libraries try
 to produce sensible output.  Even if it's not displayed, however, the inaccuracy
 is still there and subsequent operations can magnify the error.
 
@@ -595,8 +595,8 @@ exponent::
      ...
    decimal.InvalidOperation: x ** (non-integer)
 
-You can combine :class:`Decimal` instances with integers, but not with floating-
-point numbers::
+You can combine :class:`Decimal` instances with integers, but not with
+floating-point numbers::
 
    >>> a + 4
    Decimal("39.72")
@@ -684,8 +684,8 @@ includes a quick-start tutorial and a reference.
       Raymond Hettinger, Aahz, and Tim Peters.
 
    http://www.lahey.com/float.htm
-      The article uses Fortran code to illustrate many of the problems that floating-
-      point inaccuracy can cause.
+      The article uses Fortran code to illustrate many of the problems that
+      floating-point inaccuracy can cause.
 
    http://speleotrove.com/decimal/
       A description of a decimal-based representation.  This representation is being
@@ -741,8 +741,8 @@ functions in Python's implementation required that the numeric locale remain set
 to the ``'C'`` locale.  Often this was because the code was using the C
 library's :c:func:`atof` function.
 
-Not setting the numeric locale caused trouble for extensions that used third-
-party C libraries, however, because they wouldn't have the correct locale set.
+Not setting the numeric locale caused trouble for extensions that used third-party
+C libraries, however, because they wouldn't have the correct locale set.
 The motivating example was GTK+, whose user interface widgets weren't displaying
 numbers in the current locale.
 
@@ -918,8 +918,8 @@ Here are all of the changes that Python 2.4 makes to the core Python language.
 
   (Contributed by Raymond Hettinger.)
 
-* Encountering a failure while importing a module no longer leaves a partially-
-  initialized module object in ``sys.modules``.  The incomplete module object left
+* Encountering a failure while importing a module no longer leaves a partially-initialized
+  module object in ``sys.modules``.  The incomplete module object left
   behind would fool further imports of the same module into succeeding, leading to
   confusing errors.   (Fixed by Tim Peters.)
 
@@ -1028,8 +1028,8 @@ complete list of changes, or look through the CVS logs for all the details.
   previous ones left off.  (Implemented by Walter DÃ¶rwald.)
 
 * There is a new :mod:`collections` module for  various specialized collection
-  datatypes.   Currently it contains just one type, :class:`deque`,  a double-
-  ended queue that supports efficiently adding and removing elements from either
+  datatypes.  Currently it contains just one type, :class:`deque`, a double-ended
+  queue that supports efficiently adding and removing elements from either
   end::
 
      >>> from collections import deque
@@ -1485,8 +1485,8 @@ Some of the changes to Python's build process and to the C API are:
   intended as an aid to people developing the Python core.  Providing
   :option:`!--enable-profiling` to the :program:`configure` script will let you
   profile the interpreter with :program:`gprof`, and providing the
-  :option:`!--with-tsc` switch enables profiling using the Pentium's Time-Stamp-
-  Counter register.  Note that the :option:`!--with-tsc` switch is slightly
+  :option:`!--with-tsc` switch enables profiling using the Pentium's
+  Time-Stamp-Counter register.  Note that the :option:`!--with-tsc` switch is slightly
   misnamed, because the profiling feature also works on the PowerPC platform,
   though that processor architecture doesn't call that register "the TSC
   register".  (Contributed by Jeremy Hylton.)
@@ -1540,8 +1540,8 @@ code:
 
 * The :mod:`tarfile` module now generates GNU-format tar files by default.
 
-* Encountering a failure while importing a module no longer leaves a partially-
-  initialized module object in ``sys.modules``.
+* Encountering a failure while importing a module no longer leaves a
+  partially-initialized module object in ``sys.modules``.
 
 * :const:`None` is now a constant; code that binds a new value to  the name
   ``None`` is now a syntax error.
diff --git a/Doc/whatsnew/2.5.rst b/Doc/whatsnew/2.5.rst
index db8f9df..4d48291 100644
--- a/Doc/whatsnew/2.5.rst
+++ b/Doc/whatsnew/2.5.rst
@@ -157,8 +157,8 @@ Here's a small but realistic example::
    server_log = functools.partial(log, subsystem='server')
    server_log('Unable to open socket')
 
-Here's another example, from a program that uses PyGTK.  Here a context-
-sensitive pop-up menu is being constructed dynamically.  The callback provided
+Here's another example, from a program that uses PyGTK.  Here a context-sensitive
+pop-up menu is being constructed dynamically.  The callback provided
 for the menu option is a partially applied version of the :meth:`open_item`
 method, where the first argument has been provided. ::
 
@@ -171,8 +171,8 @@ method, where the first argument has been provided. ::
            popup_menu.append( ("Open", open_func, 1) )
 
 Another function in the :mod:`functools` module is the
-``update_wrapper(wrapper, wrapped)`` function that helps you write well-
-behaved decorators.  :func:`update_wrapper` copies the name, module, and
+``update_wrapper(wrapper, wrapped)`` function that helps you write
+well-behaved decorators.  :func:`update_wrapper` copies the name, module, and
 docstring attribute to a wrapper function so that tracebacks inside the wrapped
 function are easier to understand.  For example, you might write::
 
@@ -297,8 +297,8 @@ can't protect against having your submodule's name being used for a new module
 added in a future version of Python.
 
 In Python 2.5, you can switch :keyword:`import`'s behaviour to  absolute imports
-using a ``from __future__ import absolute_import`` directive.  This absolute-
-import behaviour will become the default in a future version (probably Python
+using a ``from __future__ import absolute_import`` directive.  This absolute-import
+behaviour will become the default in a future version (probably Python
 2.7).  Once absolute imports  are the default, ``import string`` will always
 find the standard library's version. It's suggested that users should begin
 using absolute imports as much as possible, so it's preferable to begin writing
@@ -602,8 +602,8 @@ be used with the ':keyword:`with`' statement. File objects are one example::
            ... more processing code ...
 
 After this statement has executed, the file object in *f* will have been
-automatically closed, even if the :keyword:`for` loop raised an exception part-
-way through the block.
+automatically closed, even if the :keyword:`for` loop raised an exception
+part-way through the block.
 
 .. note::
 
@@ -1558,8 +1558,8 @@ complete list of changes, or look through the SVN logs for all the details.
 
   You can also pack and unpack data to and from buffer objects directly using the
   ``pack_into(buffer, offset, v1, v2, ...)`` and ``unpack_from(buffer,
-  offset)`` methods.  This lets you store data directly into an array or a memory-
-  mapped file.
+  offset)`` methods.  This lets you store data directly into an array or a
+  memory-mapped file.
 
   (:class:`Struct` objects were implemented by Bob Ippolito at the NeedForSpeed
   sprint.  Support for buffer objects was added by Martin Blais, also at the
@@ -2281,8 +2281,8 @@ Acknowledgements
 
 The author would like to thank the following people for offering suggestions,
 corrections and assistance with various drafts of this article: Georg Brandl,
-Nick Coghlan, Phillip J. Eby, Lars GustÃ¤bel, Raymond Hettinger, Ralf W. Grosse-
-Kunstleve, Kent Johnson, Iain Lowe, Martin von LÃ¶wis, Fredrik Lundh, Andrew
+Nick Coghlan, Phillip J. Eby, Lars GustÃ¤bel, Raymond Hettinger, Ralf W.
+Grosse-Kunstleve, Kent Johnson, Iain Lowe, Martin von LÃ¶wis, Fredrik Lundh, Andrew
 McNamara, Skip Montanaro, Gustavo Niemeyer, Paul Prescod, James Pryor, Mike
 Rovner, Scott Weikart, Barry Warsaw, Thomas Wouters.
 
diff --git a/Doc/whatsnew/2.6.rst b/Doc/whatsnew/2.6.rst
index 4fc0c36..cc2fa3d 100644
--- a/Doc/whatsnew/2.6.rst
+++ b/Doc/whatsnew/2.6.rst
@@ -290,8 +290,8 @@ be used with the ':keyword:`with`' statement. File objects are one example::
            ... more processing code ...
 
 After this statement has executed, the file object in *f* will have been
-automatically closed, even if the :keyword:`for` loop raised an exception part-
-way through the block.
+automatically closed, even if the :keyword:`for` loop raised an exception
+part-way through the block.
 
 .. note::
 
diff --git a/Doc/whatsnew/3.5.rst b/Doc/whatsnew/3.5.rst
index ab61d7a..39b6ee5 100644
--- a/Doc/whatsnew/3.5.rst
+++ b/Doc/whatsnew/3.5.rst
@@ -2327,11 +2327,12 @@ The :func:`inspect.getargspec` function is deprecated and scheduled to be
 removed in Python 3.6.  (See :issue:`20438` for details.)
 
 The :mod:`inspect` :func:`~inspect.getfullargspec`,
-:func:`~inspect.getargvalues`, :func:`~inspect.getcallargs`,
-:func:`~inspect.getargvalues`, :func:`~inspect.formatargspec`, and
-:func:`~inspect.formatargvalues` functions are deprecated in favor of
-the :func:`inspect.signature` API.
-(Contributed by Yury Selivanov in :issue:`20438`.)
+:func:`~inspect.getcallargs`, and :func:`~inspect.formatargspec` functions are
+deprecated in favor of the :func:`inspect.signature` API. (Contributed by Yury
+Selivanov in :issue:`20438`.)
+
+:func:`~inspect.getargvalues` and :func:`~inspect.formatargvalues` functions
+were inadvertently marked as deprecated with the release of Python 3.5.0.
 
 Use of :const:`re.LOCALE` flag with str patterns or :const:`re.ASCII` is now
 deprecated.  (Contributed by Serhiy Storchaka in :issue:`22407`.)
diff --git a/Include/ceval.h b/Include/ceval.h
index b5373a9..3f84b06 100644
--- a/Include/ceval.h
+++ b/Include/ceval.h
@@ -203,6 +203,7 @@ PyAPI_FUNC(unsigned long) _PyEval_GetSwitchInterval(void);
 
 #ifndef Py_LIMITED_API
 PyAPI_FUNC(int) _PyEval_SliceIndex(PyObject *, Py_ssize_t *);
+PyAPI_FUNC(int) _PyEval_SliceIndexNotNone(PyObject *, Py_ssize_t *);
 PyAPI_FUNC(void) _PyEval_SignalAsyncExc(void);
 #endif
 
diff --git a/Include/dictobject.h b/Include/dictobject.h
index e0e1c26..17e12c0 100644
--- a/Include/dictobject.h
+++ b/Include/dictobject.h
@@ -102,6 +102,7 @@ PyAPI_FUNC(int) _PyDict_HasOnlyStringKeys(PyObject *mp);
 Py_ssize_t _PyDict_KeysSize(PyDictKeysObject *keys);
 Py_ssize_t _PyDict_SizeOf(PyDictObject *);
 PyObject *_PyDict_Pop(PyDictObject *, PyObject *, PyObject *);
+PyObject *_PyDict_Pop_KnownHash(PyDictObject *, PyObject *, Py_hash_t, PyObject *);
 PyObject *_PyDict_FromKeys(PyObject *, PyObject *, PyObject *);
 #define _PyDict_HasSplitTable(d) ((d)->ma_values != NULL)
 
diff --git a/Include/modsupport.h b/Include/modsupport.h
index 829aaf8..6d4b6dc 100644
--- a/Include/modsupport.h
+++ b/Include/modsupport.h
@@ -29,18 +29,18 @@ PyAPI_FUNC(int) PyArg_Parse(PyObject *, const char *, ...);
 PyAPI_FUNC(int) PyArg_ParseTuple(PyObject *, const char *, ...);
 PyAPI_FUNC(int) PyArg_ParseTupleAndKeywords(PyObject *, PyObject *,
                                                   const char *, char **, ...);
+PyAPI_FUNC(int) PyArg_VaParse(PyObject *, const char *, va_list);
+PyAPI_FUNC(int) PyArg_VaParseTupleAndKeywords(PyObject *, PyObject *,
+                                                  const char *, char **, va_list);
+#endif
 PyAPI_FUNC(int) PyArg_ValidateKeywordArguments(PyObject *);
 PyAPI_FUNC(int) PyArg_UnpackTuple(PyObject *, const char *, Py_ssize_t, Py_ssize_t, ...);
 PyAPI_FUNC(PyObject *) Py_BuildValue(const char *, ...);
 PyAPI_FUNC(PyObject *) _Py_BuildValue_SizeT(const char *, ...);
-#endif
+
 #ifndef Py_LIMITED_API
 PyAPI_FUNC(int) _PyArg_NoKeywords(const char *funcname, PyObject *kw);
 PyAPI_FUNC(int) _PyArg_NoPositional(const char *funcname, PyObject *args);
-
-PyAPI_FUNC(int) PyArg_VaParse(PyObject *, const char *, va_list);
-PyAPI_FUNC(int) PyArg_VaParseTupleAndKeywords(PyObject *, PyObject *,
-                                                  const char *, char **, va_list);
 #endif
 PyAPI_FUNC(PyObject *) Py_VaBuildValue(const char *, va_list);
 
diff --git a/Include/patchlevel.h b/Include/patchlevel.h
index 77e7249..1ec9761 100644
--- a/Include/patchlevel.h
+++ b/Include/patchlevel.h
@@ -23,7 +23,7 @@
 #define PY_RELEASE_SERIAL	0
 
 /* Version as a string */
-#define PY_VERSION      	"3.5.3"
+#define PY_VERSION      	"3.5.3+"
 /*--end constants--*/
 
 /* Version as a single 4-byte hex number, e.g. 0x010502B2 == 1.5.2b2.
diff --git a/Include/pylifecycle.h b/Include/pylifecycle.h
index ccdebe2..1c5f7a6 100644
--- a/Include/pylifecycle.h
+++ b/Include/pylifecycle.h
@@ -69,8 +69,8 @@ PyAPI_FUNC(const char *) Py_GetCopyright(void);
 PyAPI_FUNC(const char *) Py_GetCompiler(void);
 PyAPI_FUNC(const char *) Py_GetBuildInfo(void);
 #ifndef Py_LIMITED_API
-PyAPI_FUNC(const char *) _Py_hgidentifier(void);
-PyAPI_FUNC(const char *) _Py_hgversion(void);
+PyAPI_FUNC(const char *) _Py_gitidentifier(void);
+PyAPI_FUNC(const char *) _Py_gitversion(void);
 #endif
 
 /* Internal -- various one-time initializations */
diff --git a/Include/sliceobject.h b/Include/sliceobject.h
index 26370e0..579ac07 100644
--- a/Include/sliceobject.h
+++ b/Include/sliceobject.h
@@ -41,8 +41,23 @@ PyAPI_FUNC(int) _PySlice_GetLongIndices(PySliceObject *self, PyObject *length,
 PyAPI_FUNC(int) PySlice_GetIndices(PyObject *r, Py_ssize_t length,
                                   Py_ssize_t *start, Py_ssize_t *stop, Py_ssize_t *step);
 PyAPI_FUNC(int) PySlice_GetIndicesEx(PyObject *r, Py_ssize_t length,
-				    Py_ssize_t *start, Py_ssize_t *stop,
-				    Py_ssize_t *step, Py_ssize_t *slicelength);
+                                     Py_ssize_t *start, Py_ssize_t *stop,
+                                     Py_ssize_t *step, Py_ssize_t *slicelength);
+
+#if !defined(Py_LIMITED_API) || (Py_LIMITED_API+0 >= 0x03050400 && Py_LIMITED_API+0 < 0x03060000) || Py_LIMITED_API+0 >= 0x03060100
+#ifdef Py_LIMITED_API
+#define PySlice_GetIndicesEx(slice, length, start, stop, step, slicelen) (  \
+    PySlice_Unpack((slice), (start), (stop), (step)) < 0 ?                  \
+    ((*(slicelen) = 0), -1) :                                               \
+    ((*(slicelen) = PySlice_AdjustIndices((length), (start), (stop), *(step))), \
+     0))
+#endif
+PyAPI_FUNC(int) PySlice_Unpack(PyObject *slice,
+                               Py_ssize_t *start, Py_ssize_t *stop, Py_ssize_t *step);
+PyAPI_FUNC(Py_ssize_t) PySlice_AdjustIndices(Py_ssize_t length,
+                                             Py_ssize_t *start, Py_ssize_t *stop,
+                                             Py_ssize_t step);
+#endif
 
 #ifdef __cplusplus
 }
diff --git a/Include/unicodeobject.h b/Include/unicodeobject.h
index 9308a6a..59dcf73 100644
--- a/Include/unicodeobject.h
+++ b/Include/unicodeobject.h
@@ -1570,50 +1570,41 @@ PyAPI_FUNC(PyObject*) PyUnicode_EncodeASCII(
 
    This codec uses mappings to encode and decode characters.
 
-   Decoding mappings must map single string characters to single
-   Unicode characters, integers (which are then interpreted as Unicode
-   ordinals) or None (meaning "undefined mapping" and causing an
-   error).
-
-   Encoding mappings must map single Unicode characters to single
-   string characters, integers (which are then interpreted as Latin-1
-   ordinals) or None (meaning "undefined mapping" and causing an
-   error).
-
-   If a character lookup fails with a LookupError, the character is
-   copied as-is meaning that its ordinal value will be interpreted as
-   Unicode or Latin-1 ordinal resp. Because of this mappings only need
-   to contain those mappings which map characters to different code
-   points.
+   Decoding mappings must map byte ordinals (integers in the range from 0 to
+   255) to Unicode strings, integers (which are then interpreted as Unicode
+   ordinals) or None.  Unmapped data bytes (ones which cause a LookupError)
+   as well as mapped to None, 0xFFFE or '\ufffe' are treated as "undefined
+   mapping" and cause an error.
+
+   Encoding mappings must map Unicode ordinal integers to bytes objects,
+   integers in the range from 0 to 255 or None.  Unmapped character
+   ordinals (ones which cause a LookupError) as well as mapped to
+   None are treated as "undefined mapping" and cause an error.
 
 */
 
 PyAPI_FUNC(PyObject*) PyUnicode_DecodeCharmap(
     const char *string,         /* Encoded string */
     Py_ssize_t length,          /* size of string */
-    PyObject *mapping,          /* character mapping
-                                   (char ordinal -> unicode ordinal) */
+    PyObject *mapping,          /* decoding mapping */
     const char *errors          /* error handling */
     );
 
 PyAPI_FUNC(PyObject*) PyUnicode_AsCharmapString(
     PyObject *unicode,          /* Unicode object */
-    PyObject *mapping           /* character mapping
-                                   (unicode ordinal -> char ordinal) */
+    PyObject *mapping           /* encoding mapping */
     );
 
 #ifndef Py_LIMITED_API
 PyAPI_FUNC(PyObject*) PyUnicode_EncodeCharmap(
     const Py_UNICODE *data,     /* Unicode char buffer */
     Py_ssize_t length,          /* Number of Py_UNICODE chars to encode */
-    PyObject *mapping,          /* character mapping
-                                   (unicode ordinal -> char ordinal) */
+    PyObject *mapping,          /* encoding mapping */
     const char *errors          /* error handling */
     );
 PyAPI_FUNC(PyObject*) _PyUnicode_EncodeCharmap(
     PyObject *unicode,          /* Unicode object */
-    PyObject *mapping,          /* character mapping
-                                   (unicode ordinal -> char ordinal) */
+    PyObject *mapping,          /* encoding mapping */
     const char *errors          /* error handling */
     );
 #endif
@@ -1622,8 +1613,8 @@ PyAPI_FUNC(PyObject*) _PyUnicode_EncodeCharmap(
    character mapping table to it and return the resulting Unicode
    object.
 
-   The mapping table must map Unicode ordinal integers to Unicode
-   ordinal integers or None (causing deletion of the character).
+   The mapping table must map Unicode ordinal integers to Unicode strings,
+   Unicode ordinal integers or None (causing deletion of the character).
 
    Mapping tables may be dictionaries or sequences. Unmapped character
    ordinals (ones which cause a LookupError) are left untouched and
@@ -1915,8 +1906,8 @@ PyAPI_FUNC(PyObject*) PyUnicode_RSplit(
 /* Translate a string by applying a character mapping table to it and
    return the resulting Unicode object.
 
-   The mapping table must map Unicode ordinal integers to Unicode
-   ordinal integers or None (causing deletion of the character).
+   The mapping table must map Unicode ordinal integers to Unicode strings,
+   Unicode ordinal integers or None (causing deletion of the character).
 
    Mapping tables may be dictionaries or sequences. Unmapped character
    ordinals (ones which cause a LookupError) are left untouched and
@@ -2272,6 +2263,10 @@ PyAPI_FUNC(Py_UNICODE*) PyUnicode_AsUnicodeCopy(
 PyAPI_FUNC(int) _PyUnicode_CheckConsistency(
     PyObject *op,
     int check_content);
+#elif !defined(NDEBUG)
+/* For asserts that call _PyUnicode_CheckConsistency(), which would
+ * otherwise be a problem when building with asserts but without Py_DEBUG. */
+#define _PyUnicode_CheckConsistency(op, check_content) PyUnicode_Check(op)
 #endif
 
 /* Return an interned Unicode object for an Identifier; may fail if there is no memory.*/
diff --git a/Lib/_osx_support.py b/Lib/_osx_support.py
index 13fcd8b..03d36c9 100644
--- a/Lib/_osx_support.py
+++ b/Lib/_osx_support.py
@@ -210,7 +210,7 @@ def _remove_universal_flags(_config_vars):
         # Do not alter a config var explicitly overridden by env var
         if cv in _config_vars and cv not in os.environ:
             flags = _config_vars[cv]
-            flags = re.sub('-arch\s+\w+\s', ' ', flags, re.ASCII)
+            flags = re.sub(r'-arch\s+\w+\s', ' ', flags, flags=re.ASCII)
             flags = re.sub('-isysroot [^ \t]*', ' ', flags)
             _save_modified_value(_config_vars, cv, flags)
 
diff --git a/Lib/aifc.py b/Lib/aifc.py
index 7ebdbeb..d5764a3 100644
--- a/Lib/aifc.py
+++ b/Lib/aifc.py
@@ -294,6 +294,8 @@ class Aifc_read:
     # _ssnd_chunk -- instantiation of a chunk class for the SSND chunk
     # _framesize -- size of one frame in the file
 
+    _file = None  # Set here since __del__ checks it
+
     def initfp(self, file):
         self._version = 0
         self._convert = None
@@ -335,9 +337,15 @@ class Aifc_read:
 
     def __init__(self, f):
         if isinstance(f, str):
-            f = builtins.open(f, 'rb')
-        # else, assume it is an open file object already
-        self.initfp(f)
+            file_object = builtins.open(f, 'rb')
+            try:
+                self.initfp(file_object)
+            except:
+                file_object.close()
+                raise
+        else:
+            # assume it is an open file object already
+            self.initfp(f)
 
     def __enter__(self):
         return self
@@ -532,18 +540,23 @@ class Aifc_write:
     # _datalength -- the size of the audio samples written to the header
     # _datawritten -- the size of the audio samples actually written
 
+    _file = None  # Set here since __del__ checks it
+
     def __init__(self, f):
         if isinstance(f, str):
-            filename = f
-            f = builtins.open(f, 'wb')
-        else:
-            # else, assume it is an open file object already
-            filename = '???'
-        self.initfp(f)
-        if filename[-5:] == '.aiff':
-            self._aifc = 0
+            file_object = builtins.open(f, 'wb')
+            try:
+                self.initfp(file_object)
+            except:
+                file_object.close()
+                raise
+
+            # treat .aiff file extensions as non-compressed audio
+            if f.endswith('.aiff'):
+                self._aifc = 0
         else:
-            self._aifc = 1
+            # assume it is an open file object already
+            self.initfp(f)
 
     def initfp(self, file):
         self._file = file
diff --git a/Lib/argparse.py b/Lib/argparse.py
index 9a06719..0d881b8 100644
--- a/Lib/argparse.py
+++ b/Lib/argparse.py
@@ -176,7 +176,7 @@ class HelpFormatter(object):
         self._root_section = self._Section(self, None)
         self._current_section = self._root_section
 
-        self._whitespace_matcher = _re.compile(r'\s+')
+        self._whitespace_matcher = _re.compile(r'\s+', _re.ASCII)
         self._long_break_matcher = _re.compile(r'\n\n\n+')
 
     # ===============================
diff --git a/Lib/asyncio/base_events.py b/Lib/asyncio/base_events.py
index 50153f8..26a6f1e 100644
--- a/Lib/asyncio/base_events.py
+++ b/Lib/asyncio/base_events.py
@@ -459,7 +459,8 @@ class BaseEventLoop(events.AbstractEventLoop):
                 # local task.
                 future.exception()
             raise
-        future.remove_done_callback(_run_until_complete_cb)
+        finally:
+            future.remove_done_callback(_run_until_complete_cb)
         if not future.done():
             raise RuntimeError('Event loop stopped before Future completed.')
 
diff --git a/Lib/asyncio/events.py b/Lib/asyncio/events.py
index 28a45fc..e85634e 100644
--- a/Lib/asyncio/events.py
+++ b/Lib/asyncio/events.py
@@ -11,6 +11,7 @@ __all__ = ['AbstractEventLoopPolicy',
 
 import functools
 import inspect
+import os
 import reprlib
 import socket
 import subprocess
@@ -611,6 +612,9 @@ _lock = threading.Lock()
 # A TLS for the running event loop, used by _get_running_loop.
 class _RunningLoop(threading.local):
     _loop = None
+    _pid = None
+
+
 _running_loop = _RunningLoop()
 
 
@@ -620,7 +624,9 @@ def _get_running_loop():
     This is a low-level function intended to be used by event loops.
     This function is thread-specific.
     """
-    return _running_loop._loop
+    running_loop = _running_loop._loop
+    if running_loop is not None and _running_loop._pid == os.getpid():
+        return running_loop
 
 
 def _set_running_loop(loop):
@@ -629,6 +635,7 @@ def _set_running_loop(loop):
     This is a low-level function intended to be used by event loops.
     This function is thread-specific.
     """
+    _running_loop._pid = os.getpid()
     _running_loop._loop = loop
 
 
diff --git a/Lib/asyncio/sslproto.py b/Lib/asyncio/sslproto.py
index c2c4b95..aa5e034 100644
--- a/Lib/asyncio/sslproto.py
+++ b/Lib/asyncio/sslproto.py
@@ -542,8 +542,10 @@ class SSLProtocol(protocols.Protocol):
     def _get_extra_info(self, name, default=None):
         if name in self._extra:
             return self._extra[name]
-        else:
+        elif self._transport is not None:
             return self._transport.get_extra_info(name, default)
+        else:
+            return default
 
     def _start_shutdown(self):
         if self._in_shutdown:
diff --git a/Lib/asyncio/subprocess.py b/Lib/asyncio/subprocess.py
index b2f5304..4c85466 100644
--- a/Lib/asyncio/subprocess.py
+++ b/Lib/asyncio/subprocess.py
@@ -24,6 +24,8 @@ class SubprocessStreamProtocol(streams.FlowControlMixin,
         self._limit = limit
         self.stdin = self.stdout = self.stderr = None
         self._transport = None
+        self._process_exited = False
+        self._pipe_fds = []
 
     def __repr__(self):
         info = [self.__class__.__name__]
@@ -43,12 +45,14 @@ class SubprocessStreamProtocol(streams.FlowControlMixin,
             self.stdout = streams.StreamReader(limit=self._limit,
                                                loop=self._loop)
             self.stdout.set_transport(stdout_transport)
+            self._pipe_fds.append(1)
 
         stderr_transport = transport.get_pipe_transport(2)
         if stderr_transport is not None:
             self.stderr = streams.StreamReader(limit=self._limit,
                                                loop=self._loop)
             self.stderr.set_transport(stderr_transport)
+            self._pipe_fds.append(2)
 
         stdin_transport = transport.get_pipe_transport(0)
         if stdin_transport is not None:
@@ -86,9 +90,18 @@ class SubprocessStreamProtocol(streams.FlowControlMixin,
             else:
                 reader.set_exception(exc)
 
+        if fd in self._pipe_fds:
+            self._pipe_fds.remove(fd)
+        self._maybe_close_transport()
+
     def process_exited(self):
-        self._transport.close()
-        self._transport = None
+        self._process_exited = True
+        self._maybe_close_transport()
+
+    def _maybe_close_transport(self):
+        if len(self._pipe_fds) == 0 and self._process_exited:
+            self._transport.close()
+            self._transport = None
 
 
 class Process:
diff --git a/Lib/asyncio/tasks.py b/Lib/asyncio/tasks.py
index 8852aa5..89d0989 100644
--- a/Lib/asyncio/tasks.py
+++ b/Lib/asyncio/tasks.py
@@ -240,7 +240,12 @@ class Task(futures.Future):
             else:
                 result = coro.throw(exc)
         except StopIteration as exc:
-            self.set_result(exc.value)
+            if self._must_cancel:
+                # Task is cancelled right before coro stops.
+                self._must_cancel = False
+                self.set_exception(futures.CancelledError())
+            else:
+                self.set_result(exc.value)
         except futures.CancelledError:
             super().cancel()  # I.e., Future.cancel(self).
         except Exception as exc:
@@ -535,7 +540,8 @@ def async_(coro_or_future, *, loop=None):
     """
 
     warnings.warn("asyncio.async() function is deprecated, use ensure_future()",
-                  DeprecationWarning)
+                  DeprecationWarning,
+                  stacklevel=2)
 
     return ensure_future(coro_or_future, loop=loop)
 
@@ -564,7 +570,8 @@ def ensure_future(coro_or_future, *, loop=None):
     elif compat.PY35 and inspect.isawaitable(coro_or_future):
         return ensure_future(_wrap_awaitable(coro_or_future), loop=loop)
     else:
-        raise TypeError('A Future, a coroutine or an awaitable is required')
+        raise TypeError('An asyncio.Future, a coroutine or an awaitable is '
+                        'required')
 
 
 @coroutine
diff --git a/Lib/asyncio/test_utils.py b/Lib/asyncio/test_utils.py
index 9d32822..fe90b9c 100644
--- a/Lib/asyncio/test_utils.py
+++ b/Lib/asyncio/test_utils.py
@@ -449,12 +449,15 @@ class TestCase(unittest.TestCase):
         self.set_event_loop(loop)
         return loop
 
+    def unpatch_get_running_loop(self):
+        events._get_running_loop = self._get_running_loop
+
     def setUp(self):
         self._get_running_loop = events._get_running_loop
         events._get_running_loop = lambda: None
 
     def tearDown(self):
-        events._get_running_loop = self._get_running_loop
+        self.unpatch_get_running_loop()
 
         events.set_event_loop(None)
 
diff --git a/Lib/base64.py b/Lib/base64.py
index adaec1d..0dc64cf 100755
--- a/Lib/base64.py
+++ b/Lib/base64.py
@@ -542,7 +542,8 @@ def encodebytes(s):
 def encodestring(s):
     """Legacy alias of encodebytes()."""
     import warnings
-    warnings.warn("encodestring() is a deprecated alias, use encodebytes()",
+    warnings.warn("encodestring() is a deprecated alias since 3.1, "
+                  "use encodebytes()",
                   DeprecationWarning, 2)
     return encodebytes(s)
 
@@ -555,7 +556,8 @@ def decodebytes(s):
 def decodestring(s):
     """Legacy alias of decodebytes()."""
     import warnings
-    warnings.warn("decodestring() is a deprecated alias, use decodebytes()",
+    warnings.warn("decodestring() is a deprecated alias since Python 3.1, "
+                  "use decodebytes()",
                   DeprecationWarning, 2)
     return decodebytes(s)
 
diff --git a/Lib/contextlib.py b/Lib/contextlib.py
index d44edd6..5371a9f 100644
--- a/Lib/contextlib.py
+++ b/Lib/contextlib.py
@@ -65,7 +65,7 @@ class _GeneratorContextManager(ContextDecorator):
             try:
                 next(self.gen)
             except StopIteration:
-                return
+                return False
             else:
                 raise RuntimeError("generator didn't stop")
         else:
@@ -75,20 +75,19 @@ class _GeneratorContextManager(ContextDecorator):
                 value = type()
             try:
                 self.gen.throw(type, value, traceback)
-                raise RuntimeError("generator didn't stop after throw()")
             except StopIteration as exc:
                 # Suppress StopIteration *unless* it's the same exception that
                 # was passed to throw().  This prevents a StopIteration
                 # raised inside the "with" statement from being suppressed.
                 return exc is not value
             except RuntimeError as exc:
-                # Don't re-raise the passed in exception. (issue27112)
+                # Don't re-raise the passed in exception. (issue27122)
                 if exc is value:
                     return False
                 # Likewise, avoid suppressing if a StopIteration exception
                 # was passed to throw() and later wrapped into a RuntimeError
                 # (see PEP 479).
-                if exc.__cause__ is value:
+                if type is StopIteration and exc.__cause__ is value:
                     return False
                 raise
             except:
@@ -99,8 +98,10 @@ class _GeneratorContextManager(ContextDecorator):
                 # fixes the impedance mismatch between the throw() protocol
                 # and the __exit__() protocol.
                 #
-                if sys.exc_info()[1] is not value:
-                    raise
+                if sys.exc_info()[1] is value:
+                    return False
+                raise
+            raise RuntimeError("generator didn't stop after throw()")
 
 
 def contextmanager(func):
diff --git a/Lib/ctypes/__init__.py b/Lib/ctypes/__init__.py
index 0d86078..1469b8b 100644
--- a/Lib/ctypes/__init__.py
+++ b/Lib/ctypes/__init__.py
@@ -327,6 +327,10 @@ class CDLL(object):
     """
     _func_flags_ = _FUNCFLAG_CDECL
     _func_restype_ = c_int
+    # default values for repr
+    _name = '<uninitialized>'
+    _handle = 0
+    _FuncPtr = None
 
     def __init__(self, name, mode=DEFAULT_MODE, handle=None,
                  use_errno=False,
diff --git a/Lib/ctypes/test/test_callbacks.py b/Lib/ctypes/test/test_callbacks.py
index 8eac58f..f622093 100644
--- a/Lib/ctypes/test/test_callbacks.py
+++ b/Lib/ctypes/test/test_callbacks.py
@@ -244,6 +244,7 @@ class SampleCallbacksTestCase(unittest.TestCase):
     def test_callback_large_struct(self):
         class Check: pass
 
+        # This should mirror the structure in Modules/_ctypes/_ctypes_test.c
         class X(Structure):
             _fields_ = [
                 ('first', c_ulong),
@@ -255,6 +256,11 @@ class SampleCallbacksTestCase(unittest.TestCase):
             check.first = s.first
             check.second = s.second
             check.third = s.third
+            # See issue #29565.
+            # The structure should be passed by value, so
+            # any changes to it should not be reflected in
+            # the value passed
+            s.first = s.second = s.third = 0x0badf00d
 
         check = Check()
         s = X()
@@ -275,6 +281,11 @@ class SampleCallbacksTestCase(unittest.TestCase):
         self.assertEqual(check.first, 0xdeadbeef)
         self.assertEqual(check.second, 0xcafebabe)
         self.assertEqual(check.third, 0x0bad1dea)
+        # See issue #29565.
+        # Ensure that the original struct is unchanged.
+        self.assertEqual(s.first, check.first)
+        self.assertEqual(s.second, check.second)
+        self.assertEqual(s.third, check.third)
 
 ################################################################
 
diff --git a/Lib/ctypes/test/test_structures.py b/Lib/ctypes/test/test_structures.py
index c4a651c..2e9fc7c 100644
--- a/Lib/ctypes/test/test_structures.py
+++ b/Lib/ctypes/test/test_structures.py
@@ -2,7 +2,8 @@ import unittest
 from ctypes import *
 from ctypes.test import need_symbol
 from struct import calcsize
-import _testcapi
+import _ctypes_test
+import test.support
 
 class SubclassesTest(unittest.TestCase):
     def test_subclass(self):
@@ -201,7 +202,10 @@ class StructureTestCase(unittest.TestCase):
              "_pack_": -1}
         self.assertRaises(ValueError, type(Structure), "X", (Structure,), d)
 
+    @test.support.cpython_only
+    def test_packed_c_limits(self):
         # Issue 15989
+        import _testcapi
         d = {"_fields_": [("a", c_byte)],
              "_pack_": _testcapi.INT_MAX + 1}
         self.assertRaises(ValueError, type(Structure), "X", (Structure,), d)
@@ -394,6 +398,28 @@ class StructureTestCase(unittest.TestCase):
                          (1, 0, 0, 0, 0, 0))
         self.assertRaises(TypeError, lambda: Z(1, 2, 3, 4, 5, 6, 7))
 
+    def test_pass_by_value(self):
+        # This should mirror the structure in Modules/_ctypes/_ctypes_test.c
+        class X(Structure):
+            _fields_ = [
+                ('first', c_ulong),
+                ('second', c_ulong),
+                ('third', c_ulong),
+            ]
+
+        s = X()
+        s.first = 0xdeadbeef
+        s.second = 0xcafebabe
+        s.third = 0x0bad1dea
+        dll = CDLL(_ctypes_test.__file__)
+        func = dll._testfunc_large_struct_update_value
+        func.argtypes = (X,)
+        func.restype = None
+        func(s)
+        self.assertEqual(s.first, 0xdeadbeef)
+        self.assertEqual(s.second, 0xcafebabe)
+        self.assertEqual(s.third, 0x0bad1dea)
+
 class PointerMemberTestCase(unittest.TestCase):
 
     def test(self):
diff --git a/Lib/distutils/sysconfig.py b/Lib/distutils/sysconfig.py
index 573724d..bd19ebf 100644
--- a/Lib/distutils/sysconfig.py
+++ b/Lib/distutils/sysconfig.py
@@ -93,14 +93,11 @@ def get_python_inc(plat_specific=0, prefix=None):
             # the build directory may not be the source directory, we
             # must use "srcdir" from the makefile to find the "Include"
             # directory.
-            base = _sys_home or project_base
             if plat_specific:
-                return base
-            if _sys_home:
-                incdir = os.path.join(_sys_home, get_config_var('AST_H_DIR'))
+                return _sys_home or project_base
             else:
                 incdir = os.path.join(get_config_var('srcdir'), 'Include')
-            return os.path.normpath(incdir)
+                return os.path.normpath(incdir)
         python_dir = 'python' + get_python_version() + build_flags
         return os.path.join(prefix, "include", python_dir)
     elif os.name == "nt":
diff --git a/Lib/distutils/tests/test_build_ext.py b/Lib/distutils/tests/test_build_ext.py
index f3df564..ce13227 100644
--- a/Lib/distutils/tests/test_build_ext.py
+++ b/Lib/distutils/tests/test_build_ext.py
@@ -37,6 +37,13 @@ class BuildExtTestCase(TempdirManager,
         from distutils.command import build_ext
         build_ext.USER_BASE = site.USER_BASE
 
+        # bpo-30132: On Windows, a .pdb file may be created in the current
+        # working directory. Create a temporary working directory to cleanup
+        # everything at the end of the test.
+        self.temp_cwd = support.temp_cwd()
+        self.temp_cwd.__enter__()
+        self.addCleanup(self.temp_cwd.__exit__, None, None, None)
+
     def build_ext(self, *args, **kwargs):
         return build_ext(*args, **kwargs)
 
diff --git a/Lib/email/architecture.rst b/Lib/email/architecture.rst
index 78572ae..fcd10bd 100644
--- a/Lib/email/architecture.rst
+++ b/Lib/email/architecture.rst
@@ -66,7 +66,7 @@ data payloads.
 Message Lifecycle
 -----------------
 
-The general lifecyle of a message is:
+The general lifecycle of a message is:
 
     Creation
         A `Message` object can be created by a Parser, or it can be
diff --git a/Lib/getpass.py b/Lib/getpass.py
index be51121..36e17e4 100644
--- a/Lib/getpass.py
+++ b/Lib/getpass.py
@@ -7,7 +7,6 @@ GetPassWarning - This UserWarning is issued when getpass() cannot prevent
                  echoing of the password contents while reading.
 
 On Windows, the msvcrt module will be used.
-On the Mac EasyDialogs.AskPassword is used, if available.
 
 """
 
diff --git a/Lib/idlelib/EditorWindow.py b/Lib/idlelib/EditorWindow.py
index 9944da3..8613536 100644
--- a/Lib/idlelib/EditorWindow.py
+++ b/Lib/idlelib/EditorWindow.py
@@ -25,9 +25,9 @@ from idlelib import help
 
 # The default tab setting for a Text widget, in average-width characters.
 TK_TABWIDTH_DEFAULT = 8
-
 _py_version = ' (%s)' % platform.python_version()
 
+
 def _sphinx_version():
     "Format sys.version_info to produce the Sphinx version string used to install the chm docs"
     major, minor, micro, level, serial = sys.version_info
@@ -92,11 +92,12 @@ class EditorWindow(object):
     from idlelib.Percolator import Percolator
     from idlelib.ColorDelegator import ColorDelegator, color_config
     from idlelib.UndoDelegator import UndoDelegator
-    from idlelib.IOBinding import IOBinding, filesystemencoding, encoding
+    from idlelib.IOBinding import IOBinding, encoding
     from idlelib import Bindings
     from tkinter import Toplevel
     from idlelib.MultiStatusBar import MultiStatusBar
 
+    filesystemencoding = sys.getfilesystemencoding()  # for file names
     help_url = None
 
     def __init__(self, flist=None, filename=None, key=None, root=None):
@@ -1686,5 +1687,8 @@ def _editor_window(parent):  # htest #
     # edit.text.bind("<<close-window>>", edit.close_event)
 
 if __name__ == '__main__':
+    import unittest
+    unittest.main('idlelib.idle_test.test_editor', verbosity=2, exit=False)
+
     from idlelib.idle_test.htest import run
     run(_editor_window)
diff --git a/Lib/idlelib/IOBinding.py b/Lib/idlelib/IOBinding.py
index 84f39a2..efd0d5e 100644
--- a/Lib/idlelib/IOBinding.py
+++ b/Lib/idlelib/IOBinding.py
@@ -10,57 +10,60 @@ import tkinter.filedialog as tkFileDialog
 import tkinter.messagebox as tkMessageBox
 from tkinter.simpledialog import askstring
 
+import idlelib
 from idlelib.configHandler import idleConf
 
-
-# Try setting the locale, so that we can find out
-# what encoding to use
-try:
-    import locale
-    locale.setlocale(locale.LC_CTYPE, "")
-except (ImportError, locale.Error):
-    pass
-
-# Encoding for file names
-filesystemencoding = sys.getfilesystemencoding()  ### currently unused
-
-locale_encoding = 'ascii'
-if sys.platform == 'win32':
-    # On Windows, we could use "mbcs". However, to give the user
-    # a portable encoding name, we need to find the code page
-    try:
-        locale_encoding = locale.getdefaultlocale()[1]
-        codecs.lookup(locale_encoding)
-    except LookupError:
-        pass
+if idlelib.testing:  # Set True by test.test_idle to avoid setlocale.
+    encoding = 'utf-8'
 else:
+    # Try setting the locale, so that we can find out
+    # what encoding to use
     try:
-        # Different things can fail here: the locale module may not be
-        # loaded, it may not offer nl_langinfo, or CODESET, or the
-        # resulting codeset may be unknown to Python. We ignore all
-        # these problems, falling back to ASCII
-        locale_encoding = locale.nl_langinfo(locale.CODESET)
-        if locale_encoding is None or locale_encoding is '':
-            # situation occurs on Mac OS X
-            locale_encoding = 'ascii'
-        codecs.lookup(locale_encoding)
-    except (NameError, AttributeError, LookupError):
-        # Try getdefaultlocale: it parses environment variables,
-        # which may give a clue. Unfortunately, getdefaultlocale has
-        # bugs that can cause ValueError.
+        import locale
+        locale.setlocale(locale.LC_CTYPE, "")
+    except (ImportError, locale.Error):
+        pass
+
+    locale_decode = 'ascii'
+    if sys.platform == 'win32':
+        # On Windows, we could use "mbcs". However, to give the user
+        # a portable encoding name, we need to find the code page
         try:
             locale_encoding = locale.getdefaultlocale()[1]
+            codecs.lookup(locale_encoding)
+        except LookupError:
+            pass
+    else:
+        try:
+            # Different things can fail here: the locale module may not be
+            # loaded, it may not offer nl_langinfo, or CODESET, or the
+            # resulting codeset may be unknown to Python. We ignore all
+            # these problems, falling back to ASCII
+            locale_encoding = locale.nl_langinfo(locale.CODESET)
             if locale_encoding is None or locale_encoding is '':
                 # situation occurs on Mac OS X
                 locale_encoding = 'ascii'
             codecs.lookup(locale_encoding)
-        except (ValueError, LookupError):
-            pass
+        except (NameError, AttributeError, LookupError):
+            # Try getdefaultlocale: it parses environment variables,
+            # which may give a clue. Unfortunately, getdefaultlocale has
+            # bugs that can cause ValueError.
+            try:
+                locale_encoding = locale.getdefaultlocale()[1]
+                if locale_encoding is None or locale_encoding is '':
+                    # situation occurs on Mac OS X
+                    locale_encoding = 'ascii'
+                codecs.lookup(locale_encoding)
+            except (ValueError, LookupError):
+                pass
 
-locale_encoding = locale_encoding.lower()
+    locale_encoding = locale_encoding.lower()
 
-encoding = locale_encoding  ### KBK 07Sep07  This is used all over IDLE, check!
-                            ### 'encoding' is used below in encode(), check!
+    encoding = locale_encoding
+    # Encoding is used in multiple files; locale_encoding nowhere.
+    # The only use of 'encoding' below is in _decode as initial value
+    # of deprecated block asking user for encoding.
+    # Perhaps use elsewhere should be reviewed.
 
 coding_re = re.compile(r'^[ \t\f]*#.*?coding[:=][ \t]*([-\w.]+)', re.ASCII)
 blank_re = re.compile(r'^[ \t\f]*(?:[#\r\n]|$)', re.ASCII)
@@ -301,7 +304,7 @@ class IOBinding:
                 "The file's encoding is invalid for Python 3.x.\n"
                 "IDLE will convert it to UTF-8.\n"
                 "What is the current encoding of the file?",
-                initialvalue = locale_encoding,
+                initialvalue = encoding,
                 parent = self.editwin.text)
 
             if enc:
@@ -561,5 +564,8 @@ def _io_binding(parent):  # htest #
     IOBinding(editwin)
 
 if __name__ == "__main__":
+    import unittest
+    unittest.main('idlelib.idle_test.test_iomenu', verbosity=2, exit=False)
+
     from idlelib.idle_test.htest import run
     run(_io_binding)
diff --git a/Lib/idlelib/__init__.py b/Lib/idlelib/__init__.py
index 711f61b..208ced1 100644
--- a/Lib/idlelib/__init__.py
+++ b/Lib/idlelib/__init__.py
@@ -6,3 +6,4 @@ Use the files named idle.* to start Idle.
 The other files are private implementations.  Their details are subject to
 change.  See PEP 434 for more.  Import them at your own risk.
 """
+testing = False  # Set True by test.test_idle.
diff --git a/Lib/idlelib/help.html b/Lib/idlelib/help.html
index ffc03c4..f10cd34 100644
--- a/Lib/idlelib/help.html
+++ b/Lib/idlelib/help.html
@@ -90,7 +90,7 @@
 
   <div class="section" id="idle">
 <span id="id1"></span><h1>25.5. IDLE<a class="headerlink" href="#idle" title="Permalink to this headline">Â¶</a></h1>
-<p><strong>Source code:</strong> <a class="reference external" href="https://hg.python.org/cpython/file/3.5/Lib/idlelib/">Lib/idlelib/</a></p>
+<p><strong>Source code:</strong> <a class="reference external" href="https://github.com/python/cpython/tree/3.5/Lib/idlelib">Lib/idlelib/</a></p>
 <hr class="docutils" id="index-0" />
 <p>IDLE is Python&#8217;s Integrated Development and Learning Environment.</p>
 <p>IDLE has the following features:</p>
diff --git a/Lib/imaplib.py b/Lib/imaplib.py
index 2f7e933..ef2c6f8 100644
--- a/Lib/imaplib.py
+++ b/Lib/imaplib.py
@@ -310,9 +310,12 @@ class IMAP4:
         self.file.close()
         try:
             self.sock.shutdown(socket.SHUT_RDWR)
-        except OSError as e:
-            # The server might already have closed the connection
-            if e.errno != errno.ENOTCONN:
+        except OSError as exc:
+            # The server might already have closed the connection.
+            # On Windows, this may result in WSAEINVAL (error 10022):
+            # An invalid operation was attempted.
+            if (exc.errno != errno.ENOTCONN
+               and getattr(exc, 'winerror', 0) != 10022):
                 raise
         finally:
             self.sock.close()
diff --git a/Lib/importlib/__init__.py b/Lib/importlib/__init__.py
index b6a9f82..8b11d22 100644
--- a/Lib/importlib/__init__.py
+++ b/Lib/importlib/__init__.py
@@ -136,7 +136,7 @@ def reload(module):
 
     """
     if not module or not isinstance(module, types.ModuleType):
-        raise TypeError("reload() argument must be module")
+        raise TypeError("reload() argument must be a module")
     try:
         name = module.__spec__.name
     except AttributeError:
diff --git a/Lib/importlib/_bootstrap_external.py b/Lib/importlib/_bootstrap_external.py
index e54d691..506bb33 100644
--- a/Lib/importlib/_bootstrap_external.py
+++ b/Lib/importlib/_bootstrap_external.py
@@ -230,7 +230,7 @@ _code_type = type(_write_atomic.__code__)
 #     Python 3.5b1  3330 (PEP 448: Additional Unpacking Generalizations)
 #     Python 3.5b2  3340 (fix dictionary display evaluation order #11205)
 #     Python 3.5b2  3350 (add GET_YIELD_FROM_ITER opcode #24400)
-#     Python 3.5.2  3351 (fix BUILD_MAP_UNPACK_WITH_CALL opcode #27286)
+#     Python 3.5.3  3351 (fix BUILD_MAP_UNPACK_WITH_CALL opcode #27286)
 #
 # MAGIC must change whenever the bytecode emitted by the compiler may no
 # longer be understood by older implementations of the eval loop (usually
@@ -242,6 +242,28 @@ _code_type = type(_write_atomic.__code__)
 MAGIC_NUMBER = (3351).to_bytes(2, 'little') + b'\r\n'
 _RAW_MAGIC_NUMBER = int.from_bytes(MAGIC_NUMBER, 'little')  # For import.c
 
+# Issue #29537: handle issue27286 bytecode incompatibility
+#
+# The magic number bump in Python 3.5.3 for issue27286 turned out to create
+# significant backwards compatibility problems for redistributors and
+# other folks that rely on the bytecode format remaining stable within a
+# given maintenance release series. See http://bugs.python.org/issue29514
+# for more discussion of the problems that the original change caused.
+#
+# The _BACKCOMPAT_MAGIC_NUMBER below and any other changes marked with
+# "Issue #29537" comments allow Python 3.5.4+ to load bytecode files with both
+# the original 3.5.0 magic number and those with the updated magic number used
+# since 3.5.3.
+#
+# This is expected to be a one-off change used solely to restore legacy
+# bytecode compatibility within the 3.5.x series, so it avoids any changes
+# that would prompt a rebuild of C extension modules.
+#
+if _RAW_MAGIC_NUMBER != 168627479:
+    _msg = 'Magic number mismatch (the issue27286 workaround is for 3.5 only)'
+    raise SystemError(_msg)
+_BACKCOMPAT_MAGIC_NUMBER = (3350).to_bytes(2, 'little') + b'\r\n'
+
 _PYCACHE = '__pycache__'
 _OPT = 'opt-'
 
@@ -446,7 +468,9 @@ def _validate_bytecode_header(data, source_stats=None, name=None, path=None):
     magic = data[:4]
     raw_timestamp = data[4:8]
     raw_size = data[8:12]
-    if magic != MAGIC_NUMBER:
+    if (magic != MAGIC_NUMBER
+            # Issue #29537: handle issue27286 bytecode incompatibility
+            and magic != _BACKCOMPAT_MAGIC_NUMBER):
         message = 'bad magic number in {!r}: {!r}'.format(name, magic)
         _verbose_message('{}', message)
         raise ImportError(message, **exc_details)
diff --git a/Lib/importlib/util.py b/Lib/importlib/util.py
index e1fa07a..a15cf00 100644
--- a/Lib/importlib/util.py
+++ b/Lib/importlib/util.py
@@ -4,7 +4,7 @@ from ._bootstrap import module_from_spec
 from ._bootstrap import _resolve_name
 from ._bootstrap import spec_from_loader
 from ._bootstrap import _find_spec
-from ._bootstrap_external import MAGIC_NUMBER
+from ._bootstrap_external import MAGIC_NUMBER, _BACKCOMPAT_MAGIC_NUMBER
 from ._bootstrap_external import cache_from_source
 from ._bootstrap_external import decode_source
 from ._bootstrap_external import source_from_cache
diff --git a/Lib/inspect.py b/Lib/inspect.py
index 6b9e0b0..4a11006 100644
--- a/Lib/inspect.py
+++ b/Lib/inspect.py
@@ -241,18 +241,24 @@ def iscode(object):
     """Return true if the object is a code object.
 
     Code objects provide these attributes:
-        co_argcount     number of arguments (not including * or ** args)
-        co_code         string of raw compiled bytecode
-        co_consts       tuple of constants used in the bytecode
-        co_filename     name of file in which this code object was created
-        co_firstlineno  number of first line in Python source code
-        co_flags        bitmap: 1=optimized | 2=newlocals | 4=*arg | 8=**arg
-        co_lnotab       encoded mapping of line numbers to bytecode indices
-        co_name         name with which this code object was defined
-        co_names        tuple of names of local variables
-        co_nlocals      number of local variables
-        co_stacksize    virtual machine stack space required
-        co_varnames     tuple of names of arguments and local variables"""
+        co_argcount         number of arguments (not including *, ** args
+                            or keyword only arguments)
+        co_code             string of raw compiled bytecode
+        co_cellvars         tuple of names of cell variables
+        co_consts           tuple of constants used in the bytecode
+        co_filename         name of file in which this code object was created
+        co_firstlineno      number of first line in Python source code
+        co_flags            bitmap: 1=optimized | 2=newlocals | 4=*arg | 8=**arg
+                            | 16=nested | 32=generator | 64=nofree | 128=coroutine
+                            | 256=iterable_coroutine
+        co_freevars         tuple of names of free variables
+        co_kwonlyargcount   number of keyword only arguments (not including ** arg)
+        co_lnotab           encoded mapping of line numbers to bytecode indices
+        co_name             name with which this code object was defined
+        co_names            tuple of names of local variables
+        co_nlocals          number of local variables
+        co_stacksize        virtual machine stack space required
+        co_varnames         tuple of names of arguments and local variables"""
     return isinstance(object, types.CodeType)
 
 def isbuiltin(object):
@@ -1416,7 +1422,6 @@ def getframeinfo(frame, context=1):
         except OSError:
             lines = index = None
         else:
-            start = max(start, 0)
             start = max(0, min(start, len(lines) - context))
             lines = lines[start:start+context]
             index = lineno - 1 - start
diff --git a/Lib/logging/__init__.py b/Lib/logging/__init__.py
index 22744e1..6455f39 100644
--- a/Lib/logging/__init__.py
+++ b/Lib/logging/__init__.py
@@ -129,9 +129,14 @@ def getLevelName(level):
 
     Otherwise, the string "Level %s" % level is returned.
     """
-    # See Issues #22386 and #27937 for why it's this way
-    return (_levelToName.get(level) or _nameToLevel.get(level) or
-            "Level %s" % level)
+    # See Issues #22386, #27937 and #29220 for why it's this way
+    result = _levelToName.get(level)
+    if result is not None:
+        return result
+    result = _nameToLevel.get(level)
+    if result is not None:
+        return result
+    return "Level %s" % level
 
 def addLevelName(level, levelName):
     """
diff --git a/Lib/logging/handlers.py b/Lib/logging/handlers.py
index c39a56f..b9d6e37 100644
--- a/Lib/logging/handlers.py
+++ b/Lib/logging/handlers.py
@@ -803,16 +803,38 @@ class SysLogHandler(logging.Handler):
 
         if isinstance(address, str):
             self.unixsocket = True
-            self._connect_unixsocket(address)
+            # Syslog server may be unavailable during handler initialisation.
+            # C's openlog() function also ignores connection errors.
+            # Moreover, we ignore these errors while logging, so it not worse
+            # to ignore it also here.
+            try:
+                self._connect_unixsocket(address)
+            except OSError:
+                pass
         else:
             self.unixsocket = False
             if socktype is None:
                 socktype = socket.SOCK_DGRAM
-            self.socket = socket.socket(socket.AF_INET, socktype)
-            if socktype == socket.SOCK_STREAM:
-                self.socket.connect(address)
+            host, port = address
+            ress = socket.getaddrinfo(host, port, 0, socktype)
+            if not ress:
+                raise OSError("getaddrinfo returns an empty list")
+            for res in ress:
+                af, socktype, proto, _, sa = res
+                err = sock = None
+                try:
+                    sock = socket.socket(af, socktype, proto)
+                    if socktype == socket.SOCK_STREAM:
+                        sock.connect(sa)
+                    break
+                except OSError as exc:
+                    err = exc
+                    if sock is not None:
+                        sock.close()
+            if err is not None:
+                raise err
+            self.socket = sock
             self.socktype = socktype
-        self.formatter = None
 
     def _connect_unixsocket(self, address):
         use_socktype = self.socktype
@@ -851,7 +873,7 @@ class SysLogHandler(logging.Handler):
             priority = self.priority_names[priority]
         return (facility << 3) | priority
 
-    def close (self):
+    def close(self):
         """
         Closes the socket.
         """
diff --git a/Lib/multiprocessing/forkserver.py b/Lib/multiprocessing/forkserver.py
index ad01ede..1b4c7cb 100644
--- a/Lib/multiprocessing/forkserver.py
+++ b/Lib/multiprocessing/forkserver.py
@@ -149,8 +149,15 @@ def main(listener_fd, alive_r, preload, main_path=None, sys_path=None):
 
     util._close_stdin()
 
-    # ignoring SIGCHLD means no need to reap zombie processes
-    handler = signal.signal(signal.SIGCHLD, signal.SIG_IGN)
+    # ignoring SIGCHLD means no need to reap zombie processes;
+    # letting SIGINT through avoids KeyboardInterrupt tracebacks
+    handlers = {
+        signal.SIGCHLD: signal.SIG_IGN,
+        signal.SIGINT: signal.SIG_DFL,
+        }
+    old_handlers = {sig: signal.signal(sig, val)
+                    for (sig, val) in handlers.items()}
+
     with socket.socket(socket.AF_UNIX, fileno=listener_fd) as listener, \
          selectors.DefaultSelector() as selector:
         _forkserver._forkserver_address = listener.getsockname()
@@ -175,7 +182,7 @@ def main(listener_fd, alive_r, preload, main_path=None, sys_path=None):
                     code = 1
                     if os.fork() == 0:
                         try:
-                            _serve_one(s, listener, alive_r, handler)
+                            _serve_one(s, listener, alive_r, old_handlers)
                         except Exception:
                             sys.excepthook(*sys.exc_info())
                             sys.stderr.flush()
@@ -186,11 +193,12 @@ def main(listener_fd, alive_r, preload, main_path=None, sys_path=None):
                 if e.errno != errno.ECONNABORTED:
                     raise
 
-def _serve_one(s, listener, alive_r, handler):
-    # close unnecessary stuff and reset SIGCHLD handler
+def _serve_one(s, listener, alive_r, handlers):
+    # close unnecessary stuff and reset signal handlers
     listener.close()
     os.close(alive_r)
-    signal.signal(signal.SIGCHLD, handler)
+    for sig, val in handlers.items():
+        signal.signal(sig, val)
 
     # receive fds from parent process
     fds = reduction.recvfds(s, MAXFDS_TO_SEND + 1)
diff --git a/Lib/multiprocessing/pool.py b/Lib/multiprocessing/pool.py
index 6d25469..789488f 100644
--- a/Lib/multiprocessing/pool.py
+++ b/Lib/multiprocessing/pool.py
@@ -118,7 +118,7 @@ def worker(inqueue, outqueue, initializer=None, initargs=(), maxtasks=None,
         try:
             result = (True, func(*args, **kwds))
         except Exception as e:
-            if wrap_exception:
+            if wrap_exception and func is not _helper_reraises_exception:
                 e = ExceptionWithTraceback(e, e.__traceback__)
             result = (False, e)
         try:
@@ -128,9 +128,15 @@ def worker(inqueue, outqueue, initializer=None, initargs=(), maxtasks=None,
             util.debug("Possible encoding error while sending result: %s" % (
                 wrapped))
             put((job, i, (False, wrapped)))
+
+        task = job = result = func = args = kwds = None
         completed += 1
     util.debug('worker exiting after %d tasks' % completed)
 
+def _helper_reraises_exception(ex):
+    'Pickle-able helper function for use by _guarded_task_generation.'
+    raise ex
+
 #
 # Class representing a process pool
 #
@@ -275,6 +281,17 @@ class Pool(object):
         return self._map_async(func, iterable, starmapstar, chunksize,
                                callback, error_callback)
 
+    def _guarded_task_generation(self, result_job, func, iterable):
+        '''Provides a generator of tasks for imap and imap_unordered with
+        appropriate handling for iterables which throw exceptions during
+        iteration.'''
+        try:
+            i = -1
+            for i, x in enumerate(iterable):
+                yield (result_job, i, func, (x,), {})
+        except Exception as e:
+            yield (result_job, i+1, _helper_reraises_exception, (e,), {})
+
     def imap(self, func, iterable, chunksize=1):
         '''
         Equivalent of `map()` -- can be MUCH slower than `Pool.map()`.
@@ -283,15 +300,23 @@ class Pool(object):
             raise ValueError("Pool not running")
         if chunksize == 1:
             result = IMapIterator(self._cache)
-            self._taskqueue.put((((result._job, i, func, (x,), {})
-                         for i, x in enumerate(iterable)), result._set_length))
+            self._taskqueue.put(
+                (
+                    self._guarded_task_generation(result._job, func, iterable),
+                    result._set_length
+                ))
             return result
         else:
             assert chunksize > 1
             task_batches = Pool._get_tasks(func, iterable, chunksize)
             result = IMapIterator(self._cache)
-            self._taskqueue.put((((result._job, i, mapstar, (x,), {})
-                     for i, x in enumerate(task_batches)), result._set_length))
+            self._taskqueue.put(
+                (
+                    self._guarded_task_generation(result._job,
+                                                  mapstar,
+                                                  task_batches),
+                    result._set_length
+                ))
             return (item for chunk in result for item in chunk)
 
     def imap_unordered(self, func, iterable, chunksize=1):
@@ -302,15 +327,23 @@ class Pool(object):
             raise ValueError("Pool not running")
         if chunksize == 1:
             result = IMapUnorderedIterator(self._cache)
-            self._taskqueue.put((((result._job, i, func, (x,), {})
-                         for i, x in enumerate(iterable)), result._set_length))
+            self._taskqueue.put(
+                (
+                    self._guarded_task_generation(result._job, func, iterable),
+                    result._set_length
+                ))
             return result
         else:
             assert chunksize > 1
             task_batches = Pool._get_tasks(func, iterable, chunksize)
             result = IMapUnorderedIterator(self._cache)
-            self._taskqueue.put((((result._job, i, mapstar, (x,), {})
-                     for i, x in enumerate(task_batches)), result._set_length))
+            self._taskqueue.put(
+                (
+                    self._guarded_task_generation(result._job,
+                                                  mapstar,
+                                                  task_batches),
+                    result._set_length
+                ))
             return (item for chunk in result for item in chunk)
 
     def apply_async(self, func, args=(), kwds={}, callback=None,
@@ -321,7 +354,7 @@ class Pool(object):
         if self._state != RUN:
             raise ValueError("Pool not running")
         result = ApplyResult(self._cache, callback, error_callback)
-        self._taskqueue.put(([(result._job, None, func, args, kwds)], None))
+        self._taskqueue.put(([(result._job, 0, func, args, kwds)], None))
         return result
 
     def map_async(self, func, iterable, chunksize=None, callback=None,
@@ -352,8 +385,14 @@ class Pool(object):
         task_batches = Pool._get_tasks(func, iterable, chunksize)
         result = MapResult(self._cache, chunksize, len(iterable), callback,
                            error_callback=error_callback)
-        self._taskqueue.put((((result._job, i, mapper, (x,), {})
-                              for i, x in enumerate(task_batches)), None))
+        self._taskqueue.put(
+            (
+                self._guarded_task_generation(result._job,
+                                              mapper,
+                                              task_batches),
+                None
+            )
+        )
         return result
 
     @staticmethod
@@ -375,37 +414,32 @@ class Pool(object):
 
         for taskseq, set_length in iter(taskqueue.get, None):
             task = None
-            i = -1
             try:
-                for i, task in enumerate(taskseq):
+                # iterating taskseq cannot fail
+                for task in taskseq:
                     if thread._state:
                         util.debug('task handler found thread._state != RUN')
                         break
                     try:
                         put(task)
                     except Exception as e:
-                        job, ind = task[:2]
+                        job, idx = task[:2]
                         try:
-                            cache[job]._set(ind, (False, e))
+                            cache[job]._set(idx, (False, e))
                         except KeyError:
                             pass
                 else:
                     if set_length:
                         util.debug('doing set_length()')
-                        set_length(i+1)
+                        idx = task[1] if task else -1
+                        set_length(idx + 1)
                     continue
                 break
-            except Exception as ex:
-                job, ind = task[:2] if task else (0, 0)
-                if job in cache:
-                    cache[job]._set(ind + 1, (False, ex))
-                if set_length:
-                    util.debug('doing set_length()')
-                    set_length(i+1)
+            finally:
+                task = taskseq = job = None
         else:
             util.debug('task handler got sentinel')
 
-
         try:
             # tell result handler to finish when cache is empty
             util.debug('task handler sending sentinel to result handler')
@@ -445,6 +479,7 @@ class Pool(object):
                 cache[job]._set(i, obj)
             except KeyError:
                 pass
+            task = job = obj = None
 
         while cache and thread._state != TERMINATE:
             try:
@@ -461,6 +496,7 @@ class Pool(object):
                 cache[job]._set(i, obj)
             except KeyError:
                 pass
+            task = job = obj = None
 
         if hasattr(outqueue, '_reader'):
             util.debug('ensuring that outqueue is not full')
diff --git a/Lib/multiprocessing/queues.py b/Lib/multiprocessing/queues.py
index 786a303..2c888c0 100644
--- a/Lib/multiprocessing/queues.py
+++ b/Lib/multiprocessing/queues.py
@@ -221,8 +221,8 @@ class Queue(object):
         else:
             wacquire = None
 
-        try:
-            while 1:
+        while 1:
+            try:
                 nacquire()
                 try:
                     if not buffer:
@@ -249,21 +249,19 @@ class Queue(object):
                                 wrelease()
                 except IndexError:
                     pass
-        except Exception as e:
-            if ignore_epipe and getattr(e, 'errno', 0) == errno.EPIPE:
-                return
-            # Since this runs in a daemon thread the resources it uses
-            # may be become unusable while the process is cleaning up.
-            # We ignore errors which happen after the process has
-            # started to cleanup.
-            try:
+            except Exception as e:
+                if ignore_epipe and getattr(e, 'errno', 0) == errno.EPIPE:
+                    return
+                # Since this runs in a daemon thread the resources it uses
+                # may be become unusable while the process is cleaning up.
+                # We ignore errors which happen after the process has
+                # started to cleanup.
                 if is_exiting():
                     info('error in queue thread: %s', e)
+                    return
                 else:
                     import traceback
                     traceback.print_exc()
-            except Exception:
-                pass
 
 _sentinel = object()
 
@@ -337,6 +335,7 @@ class SimpleQueue(object):
 
     def __setstate__(self, state):
         (self._reader, self._writer, self._rlock, self._wlock) = state
+        self._poll = self._reader.poll
 
     def get(self):
         with self._rlock:
diff --git a/Lib/multiprocessing/util.py b/Lib/multiprocessing/util.py
index 1a2c0db..0ce274c 100644
--- a/Lib/multiprocessing/util.py
+++ b/Lib/multiprocessing/util.py
@@ -386,7 +386,7 @@ def _close_stdin():
 
 def spawnv_passfds(path, args, passfds):
     import _posixsubprocess
-    passfds = sorted(passfds)
+    passfds = tuple(sorted(map(int, passfds)))
     errpipe_read, errpipe_write = os.pipe()
     try:
         return _posixsubprocess.fork_exec(
diff --git a/Lib/pathlib.py b/Lib/pathlib.py
index 1480e2f..29914b9 100644
--- a/Lib/pathlib.py
+++ b/Lib/pathlib.py
@@ -1207,25 +1207,23 @@ class Path(PurePath):
         os.close(fd)
 
     def mkdir(self, mode=0o777, parents=False, exist_ok=False):
+        """
+        Create a new directory at this given path.
+        """
         if self._closed:
             self._raise_closed()
-        if not parents:
-            try:
-                self._accessor.mkdir(self, mode)
-            except FileExistsError:
-                if not exist_ok or not self.is_dir():
-                    raise
-        else:
-            try:
-                self._accessor.mkdir(self, mode)
-            except FileExistsError:
-                if not exist_ok or not self.is_dir():
-                    raise
-            except OSError as e:
-                if e.errno != ENOENT:
-                    raise
-                self.parent.mkdir(parents=True)
-                self._accessor.mkdir(self, mode)
+        try:
+            self._accessor.mkdir(self, mode)
+        except FileNotFoundError:
+            if not parents or self.parent == self:
+                raise
+            self.parent.mkdir(parents=True, exist_ok=True)
+            self.mkdir(mode, parents=False, exist_ok=exist_ok)
+        except OSError:
+            # Cannot rely on checking for EEXIST, since the operating system
+            # could give priority to other errors like EACCES or EROFS
+            if not exist_ok or not self.is_dir():
+                raise
 
     def chmod(self, mode):
         """
diff --git a/Lib/pkgutil.py b/Lib/pkgutil.py
index 81d418d..9d1879a 100644
--- a/Lib/pkgutil.py
+++ b/Lib/pkgutil.py
@@ -37,7 +37,10 @@ def read_code(stream):
     import marshal
 
     magic = stream.read(4)
-    if magic != importlib.util.MAGIC_NUMBER:
+    if (magic != importlib.util.MAGIC_NUMBER
+            # Issue #29537: handle issue27286 bytecode incompatibility
+            #   See Lib/importlib/_bootstrap_external.py
+            and magic != importlib.util._BACKCOMPAT_MAGIC_NUMBER):
         return None
 
     stream.read(8) # Skip timestamp and size
diff --git a/Lib/platform.py b/Lib/platform.py
index 3e726a7..d3ed5bf 100755
--- a/Lib/platform.py
+++ b/Lib/platform.py
@@ -1199,7 +1199,9 @@ def _sys_version(sys_version=None):
         elif buildtime:
             builddate = builddate + ' ' + buildtime
 
-    if hasattr(sys, '_mercurial'):
+    if hasattr(sys, '_git'):
+        _, branch, revision = sys._git
+    elif hasattr(sys, '_mercurial'):
         _, branch, revision = sys._mercurial
     elif hasattr(sys, 'subversion'):
         # sys.subversion was added in Python 2.5
diff --git a/Lib/poplib.py b/Lib/poplib.py
index f672390..516b6f0 100644
--- a/Lib/poplib.py
+++ b/Lib/poplib.py
@@ -288,9 +288,12 @@ class POP3:
             if sock is not None:
                 try:
                     sock.shutdown(socket.SHUT_RDWR)
-                except OSError as e:
-                    # The server might already have closed the connection
-                    if e.errno != errno.ENOTCONN:
+                except OSError as exc:
+                    # The server might already have closed the connection.
+                    # On Windows, this may result in WSAEINVAL (error 10022):
+                    # An invalid operation was attempted.
+                    if (exc.errno != errno.ENOTCONN
+                       and getattr(exc, 'winerror', 0) != 10022):
                         raise
                 finally:
                     sock.close()
diff --git a/Lib/pstats.py b/Lib/pstats.py
index d861413..2c5bf98 100644
--- a/Lib/pstats.py
+++ b/Lib/pstats.py
@@ -48,11 +48,14 @@ class Stats:
     printed.
 
     The sort_stats() method now processes some additional options (i.e., in
-    addition to the old -1, 0, 1, or 2).  It takes an arbitrary number of
-    quoted strings to select the sort order.  For example sort_stats('time',
-    'name') sorts on the major key of 'internal function time', and on the
-    minor key of 'the name of the function'.  Look at the two tables in
-    sort_stats() and get_sort_arg_defs(self) for more examples.
+    addition to the old -1, 0, 1, or 2 that are respectively interpreted as
+    'stdname', 'calls', 'time', and 'cumulative').  It takes an arbitrary number
+    of quoted strings to select the sort order.
+
+    For example sort_stats('time', 'name') sorts on the major key of 'internal
+    function time', and on the minor key of 'the name of the function'.  Look at
+    the two tables in sort_stats() and get_sort_arg_defs(self) for more
+    examples.
 
     All methods return self, so you can string together commands like:
         Stats('foo', 'goo').strip_dirs().sort_stats('calls').\
diff --git a/Lib/pydoc.py b/Lib/pydoc.py
index 0d0d0ab..729efba 100755
--- a/Lib/pydoc.py
+++ b/Lib/pydoc.py
@@ -289,7 +289,12 @@ def importfile(path):
     """Import a Python source file or compiled file given its path."""
     magic = importlib.util.MAGIC_NUMBER
     with open(path, 'rb') as file:
-        is_bytecode = magic == file.read(len(magic))
+        first_bytes = file.read(len(magic))
+        is_bytecode = first_bytes in (magic,
+                                      # Issue #29537: handle issue27286
+                                      #               bytecode incompatibility
+                                      # See Lib/importlib/_bootstrap_external.py
+                                      importlib.util._BACKCOMPAT_MAGIC_NUMBER)
     filename = os.path.basename(path)
     name, ext = os.path.splitext(filename)
     if is_bytecode:
diff --git a/Lib/smtplib.py b/Lib/smtplib.py
index 5b9e665..ab3197c 100755
--- a/Lib/smtplib.py
+++ b/Lib/smtplib.py
@@ -250,6 +250,7 @@ class SMTP:
         if host:
             (code, msg) = self.connect(host, port)
             if code != 220:
+                self.close()
                 raise SMTPConnectError(code, msg)
         if local_hostname is not None:
             self.local_hostname = local_hostname
diff --git a/Lib/sre_constants.py b/Lib/sre_constants.py
index fc684ae..a6e8a1f 100644
--- a/Lib/sre_constants.py
+++ b/Lib/sre_constants.py
@@ -21,6 +21,17 @@ from _sre import MAXREPEAT, MAXGROUPS
 # should this really be here?
 
 class error(Exception):
+    """Exception raised for invalid regular expressions.
+
+    Attributes:
+
+        msg: The unformatted error message
+        pattern: The regular expression pattern
+        pos: The index in the pattern where compilation failed (may be None)
+        lineno: The line corresponding to pos (may be None)
+        colno: The column corresponding to pos (may be None)
+    """
+
     def __init__(self, msg, pattern=None, pos=None):
         self.msg = msg
         self.pattern = pattern
diff --git a/Lib/sre_parse.py b/Lib/sre_parse.py
index 4ff50d1..df94784 100644
--- a/Lib/sre_parse.py
+++ b/Lib/sre_parse.py
@@ -309,7 +309,7 @@ def isname(name):
             return False
     return True
 
-def _class_escape(source, escape):
+def _class_escape(source, escape, nested):
     # handle escape code inside character class
     code = ESCAPES.get(escape)
     if code:
@@ -353,13 +353,13 @@ def _class_escape(source, escape):
             if c in ASCIILETTERS:
                 import warnings
                 warnings.warn('bad escape %s' % escape,
-                              DeprecationWarning, stacklevel=8)
+                              DeprecationWarning, stacklevel=nested + 6)
             return LITERAL, ord(escape[1])
     except ValueError:
         pass
     raise source.error("bad escape %s" % escape, len(escape))
 
-def _escape(source, escape, state):
+def _escape(source, escape, state, nested):
     # handle escape code in expression
     code = CATEGORIES.get(escape)
     if code:
@@ -420,13 +420,13 @@ def _escape(source, escape, state):
             if c in ASCIILETTERS:
                 import warnings
                 warnings.warn('bad escape %s' % escape,
-                              DeprecationWarning, stacklevel=8)
+                              DeprecationWarning, stacklevel=nested + 6)
             return LITERAL, ord(escape[1])
     except ValueError:
         pass
     raise source.error("bad escape %s" % escape, len(escape))
 
-def _parse_sub(source, state, nested=True):
+def _parse_sub(source, state, nested):
     # parse an alternation: a|b|c
 
     items = []
@@ -434,7 +434,7 @@ def _parse_sub(source, state, nested=True):
     sourcematch = source.match
     start = source.tell()
     while True:
-        itemsappend(_parse(source, state))
+        itemsappend(_parse(source, state, nested + 1))
         if not sourcematch("|"):
             break
 
@@ -476,10 +476,10 @@ def _parse_sub(source, state, nested=True):
     subpattern.append((BRANCH, (None, items)))
     return subpattern
 
-def _parse_sub_cond(source, state, condgroup):
-    item_yes = _parse(source, state)
+def _parse_sub_cond(source, state, condgroup, nested):
+    item_yes = _parse(source, state, nested + 1)
     if source.match("|"):
-        item_no = _parse(source, state)
+        item_no = _parse(source, state, nested + 1)
         if source.next == "|":
             raise source.error("conditional backref with more than two branches")
     else:
@@ -488,7 +488,7 @@ def _parse_sub_cond(source, state, condgroup):
     subpattern.append((GROUPREF_EXISTS, (condgroup, item_yes, item_no)))
     return subpattern
 
-def _parse(source, state):
+def _parse(source, state, nested):
     # parse a simple pattern
     subpattern = SubPattern(state)
 
@@ -521,7 +521,7 @@ def _parse(source, state):
                 continue
 
         if this[0] == "\\":
-            code = _escape(source, this, state)
+            code = _escape(source, this, state, nested + 1)
             subpatternappend(code)
 
         elif this not in SPECIAL_CHARS:
@@ -546,7 +546,7 @@ def _parse(source, state):
                 if this == "]" and set != start:
                     break
                 elif this[0] == "\\":
-                    code1 = _class_escape(source, this)
+                    code1 = _class_escape(source, this, nested + 1)
                 else:
                     code1 = LITERAL, _ord(this)
                 if sourcematch("-"):
@@ -562,7 +562,7 @@ def _parse(source, state):
                         setappend((LITERAL, _ord("-")))
                         break
                     if that[0] == "\\":
-                        code2 = _class_escape(source, that)
+                        code2 = _class_escape(source, that, nested + 1)
                     else:
                         code2 = LITERAL, _ord(that)
                     if code1[0] != LITERAL or code2[0] != LITERAL:
@@ -713,7 +713,7 @@ def _parse(source, state):
                         lookbehindgroups = state.lookbehindgroups
                         if lookbehindgroups is None:
                             state.lookbehindgroups = state.groups
-                    p = _parse_sub(source, state)
+                    p = _parse_sub(source, state, nested + 1)
                     if dir < 0:
                         if lookbehindgroups is None:
                             state.lookbehindgroups = None
@@ -773,9 +773,9 @@ def _parse(source, state):
                 except error as err:
                     raise source.error(err.msg, len(name) + 1) from None
             if condgroup:
-                p = _parse_sub_cond(source, state, condgroup)
+                p = _parse_sub_cond(source, state, condgroup, nested + 1)
             else:
-                p = _parse_sub(source, state)
+                p = _parse_sub(source, state, nested + 1)
             if not source.match(")"):
                 raise source.error("missing ), unterminated subpattern",
                                    source.tell() - start)
diff --git a/Lib/subprocess.py b/Lib/subprocess.py
index 502e26b..281ea8a 100644
--- a/Lib/subprocess.py
+++ b/Lib/subprocess.py
@@ -1214,7 +1214,8 @@ class Popen(object):
                     fds_to_keep.add(errpipe_write)
                     self.pid = _posixsubprocess.fork_exec(
                             args, executable_list,
-                            close_fds, sorted(fds_to_keep), cwd, env_list,
+                            close_fds, tuple(sorted(map(int, fds_to_keep))),
+                            cwd, env_list,
                             p2cread, p2cwrite, c2pread, c2pwrite,
                             errread, errwrite,
                             errpipe_read, errpipe_write,
@@ -1285,7 +1286,8 @@ class Popen(object):
 
         def _handle_exitstatus(self, sts, _WIFSIGNALED=os.WIFSIGNALED,
                 _WTERMSIG=os.WTERMSIG, _WIFEXITED=os.WIFEXITED,
-                _WEXITSTATUS=os.WEXITSTATUS):
+                _WEXITSTATUS=os.WEXITSTATUS, _WIFSTOPPED=os.WIFSTOPPED,
+                _WSTOPSIG=os.WSTOPSIG):
             """All callers to this function MUST hold self._waitpid_lock."""
             # This method is called (indirectly) by __del__, so it cannot
             # refer to anything outside of its local scope.
@@ -1293,6 +1295,8 @@ class Popen(object):
                 self.returncode = -_WTERMSIG(sts)
             elif _WIFEXITED(sts):
                 self.returncode = _WEXITSTATUS(sts)
+            elif _WIFSTOPPED(sts):
+                self.returncode = -_WSTOPSIG(sts)
             else:
                 # Should never happen
                 raise SubprocessError("Unknown child exit status!")
diff --git a/Lib/tabnanny.py b/Lib/tabnanny.py
index 46e0f56..bfb670c 100755
--- a/Lib/tabnanny.py
+++ b/Lib/tabnanny.py
@@ -59,7 +59,7 @@ def main():
 
 class NannyNag(Exception):
     """
-    Raised by tokeneater() if detecting an ambiguous indent.
+    Raised by process_tokens() if detecting an ambiguous indent.
     Captured and handled in check().
     """
     def __init__(self, lineno, msg, line):
diff --git a/Lib/test/_test_multiprocessing.py b/Lib/test/_test_multiprocessing.py
index 9b789c2..b24e7d6 100644
--- a/Lib/test/_test_multiprocessing.py
+++ b/Lib/test/_test_multiprocessing.py
@@ -18,6 +18,7 @@ import random
 import logging
 import struct
 import operator
+import weakref
 import test.support
 import test.support.script_helper
 
@@ -751,6 +752,20 @@ class _TestQueue(BaseTestCase):
         # Windows (usually 15.6 ms)
         self.assertGreaterEqual(delta, 0.170)
 
+    def test_queue_feeder_donot_stop_onexc(self):
+        # bpo-30414: verify feeder handles exceptions correctly
+        if self.TYPE != 'processes':
+            self.skipTest('test not appropriate for {}'.format(self.TYPE))
+
+        class NotSerializable(object):
+            def __reduce__(self):
+                raise AttributeError
+        with test.support.captured_stderr():
+            q = self.Queue()
+            q.put(NotSerializable())
+            q.put(True)
+            self.assertTrue(q.get(timeout=0.1))
+
 #
 #
 #
@@ -1668,14 +1683,30 @@ def sqr(x, wait=0.0):
 def mul(x, y):
     return x*y
 
+def identity(x):
+    return x
+
+class CountedObject(object):
+    n_instances = 0
+
+    def __new__(cls):
+        cls.n_instances += 1
+        return object.__new__(cls)
+
+    def __del__(self):
+        type(self).n_instances -= 1
+
 class SayWhenError(ValueError): pass
 
 def exception_throwing_generator(total, when):
+    if when == -1:
+        raise SayWhenError("Somebody said when")
     for i in range(total):
         if i == when:
             raise SayWhenError("Somebody said when")
         yield i
 
+
 class _TestPool(BaseTestCase):
 
     @classmethod
@@ -1748,6 +1779,32 @@ class _TestPool(BaseTestCase):
         except multiprocessing.TimeoutError:
             self.fail("pool.map_async with chunksize stalled on null list")
 
+    def test_map_handle_iterable_exception(self):
+        if self.TYPE == 'manager':
+            self.skipTest('test not appropriate for {}'.format(self.TYPE))
+
+        # SayWhenError seen at the very first of the iterable
+        with self.assertRaises(SayWhenError):
+            self.pool.map(sqr, exception_throwing_generator(1, -1), 1)
+        # again, make sure it's reentrant
+        with self.assertRaises(SayWhenError):
+            self.pool.map(sqr, exception_throwing_generator(1, -1), 1)
+
+        with self.assertRaises(SayWhenError):
+            self.pool.map(sqr, exception_throwing_generator(10, 3), 1)
+
+        class SpecialIterable:
+            def __iter__(self):
+                return self
+            def __next__(self):
+                raise SayWhenError
+            def __len__(self):
+                return 1
+        with self.assertRaises(SayWhenError):
+            self.pool.map(sqr, SpecialIterable(), 1)
+        with self.assertRaises(SayWhenError):
+            self.pool.map(sqr, SpecialIterable(), 1)
+
     def test_async(self):
         res = self.pool.apply_async(sqr, (7, TIMEOUT1,))
         get = TimingWrapper(res.get)
@@ -1778,6 +1835,13 @@ class _TestPool(BaseTestCase):
         if self.TYPE == 'manager':
             self.skipTest('test not appropriate for {}'.format(self.TYPE))
 
+        # SayWhenError seen at the very first of the iterable
+        it = self.pool.imap(sqr, exception_throwing_generator(1, -1), 1)
+        self.assertRaises(SayWhenError, it.__next__)
+        # again, make sure it's reentrant
+        it = self.pool.imap(sqr, exception_throwing_generator(1, -1), 1)
+        self.assertRaises(SayWhenError, it.__next__)
+
         it = self.pool.imap(sqr, exception_throwing_generator(10, 3), 1)
         for i in range(3):
             self.assertEqual(next(it), i*i)
@@ -1804,6 +1868,17 @@ class _TestPool(BaseTestCase):
         if self.TYPE == 'manager':
             self.skipTest('test not appropriate for {}'.format(self.TYPE))
 
+        # SayWhenError seen at the very first of the iterable
+        it = self.pool.imap_unordered(sqr,
+                                      exception_throwing_generator(1, -1),
+                                      1)
+        self.assertRaises(SayWhenError, it.__next__)
+        # again, make sure it's reentrant
+        it = self.pool.imap_unordered(sqr,
+                                      exception_throwing_generator(1, -1),
+                                      1)
+        self.assertRaises(SayWhenError, it.__next__)
+
         it = self.pool.imap_unordered(sqr,
                                       exception_throwing_generator(10, 3),
                                       1)
@@ -1885,7 +1960,7 @@ class _TestPool(BaseTestCase):
                 except Exception as e:
                     exc = e
                 else:
-                    raise AssertionError('expected RuntimeError')
+                    self.fail('expected RuntimeError')
             self.assertIs(type(exc), RuntimeError)
             self.assertEqual(exc.args, (123,))
             cause = exc.__cause__
@@ -1899,6 +1974,17 @@ class _TestPool(BaseTestCase):
                     sys.excepthook(*sys.exc_info())
             self.assertIn('raise RuntimeError(123) # some comment',
                           f1.getvalue())
+            # _helper_reraises_exception should not make the error
+            # a remote exception
+            with self.Pool(1) as p:
+                try:
+                    p.map(sqr, exception_throwing_generator(1, -1), 1)
+                except Exception as e:
+                    exc = e
+                else:
+                    self.fail('expected SayWhenError')
+                self.assertIs(type(exc), SayWhenError)
+                self.assertIs(exc.__cause__, None)
 
     @classmethod
     def _test_wrapped_exception(cls):
@@ -1910,6 +1996,20 @@ class _TestPool(BaseTestCase):
             with self.assertRaises(RuntimeError):
                 p.apply(self._test_wrapped_exception)
 
+    def test_release_task_refs(self):
+        # Issue #29861: task arguments and results should not be kept
+        # alive after we are done with them.
+        objs = [CountedObject() for i in range(10)]
+        refs = [weakref.ref(o) for o in objs]
+        self.pool.map(identity, objs)
+
+        del objs
+        time.sleep(DELTA)  # let threaded cleanup code run
+        self.assertEqual(set(wr() for wr in refs), {None})
+        # With a process pool, copies of the objects are returned, check
+        # they were released too.
+        self.assertEqual(CountedObject.n_instances, 0)
+
 
 def raising():
     raise KeyError("key")
@@ -3782,6 +3882,42 @@ class TestSemaphoreTracker(unittest.TestCase):
         self.assertRegex(err, expected)
         self.assertRegex(err, 'semaphore_tracker: %r: \[Errno' % name1)
 
+class TestSimpleQueue(unittest.TestCase):
+
+    @classmethod
+    def _test_empty(cls, queue, child_can_start, parent_can_continue):
+        child_can_start.wait()
+        # issue 30301, could fail under spawn and forkserver
+        try:
+            queue.put(queue.empty())
+            queue.put(queue.empty())
+        finally:
+            parent_can_continue.set()
+
+    def test_empty(self):
+        queue = multiprocessing.SimpleQueue()
+        child_can_start = multiprocessing.Event()
+        parent_can_continue = multiprocessing.Event()
+
+        proc = multiprocessing.Process(
+            target=self._test_empty,
+            args=(queue, child_can_start, parent_can_continue)
+        )
+        proc.daemon = True
+        proc.start()
+
+        self.assertTrue(queue.empty())
+
+        child_can_start.set()
+        parent_can_continue.wait()
+
+        self.assertFalse(queue.empty())
+        self.assertEqual(queue.get(), True)
+        self.assertEqual(queue.get(), False)
+        self.assertTrue(queue.empty())
+
+        proc.join()
+
 #
 # Mixins
 #
diff --git a/Lib/test/eintrdata/eintr_tester.py b/Lib/test/eintrdata/eintr_tester.py
index e3f1aa5..ad68bd7 100644
--- a/Lib/test/eintrdata/eintr_tester.py
+++ b/Lib/test/eintrdata/eintr_tester.py
@@ -9,7 +9,7 @@ sub-second periodicity (contrarily to signal()).
 """
 
 import contextlib
-import io
+import faulthandler
 import os
 import select
 import signal
@@ -50,6 +50,10 @@ class EINTRBaseTest(unittest.TestCase):
         signal.setitimer(signal.ITIMER_REAL, cls.signal_delay,
                          cls.signal_period)
 
+        # Issue #25277: Use faulthandler to try to debug a hang on FreeBSD
+        if hasattr(faulthandler, 'dump_traceback_later'):
+            faulthandler.dump_traceback_later(10 * 60, exit=True)
+
     @classmethod
     def stop_alarm(cls):
         signal.setitimer(signal.ITIMER_REAL, 0, 0)
@@ -58,6 +62,8 @@ class EINTRBaseTest(unittest.TestCase):
     def tearDownClass(cls):
         cls.stop_alarm()
         signal.signal(signal.SIGALRM, cls.orig_handler)
+        if hasattr(faulthandler, 'cancel_dump_traceback_later'):
+            faulthandler.cancel_dump_traceback_later()
 
     def subprocess(self, *args, **kw):
         cmd_args = (sys.executable, '-c') + args
@@ -77,6 +83,9 @@ class OSEINTRTest(EINTRBaseTest):
         processes = [self.new_sleep_process() for _ in range(num)]
         for _ in range(num):
             wait_func()
+        # Call the Popen method to avoid a ResourceWarning
+        for proc in processes:
+            proc.wait()
 
     def test_wait(self):
         self._test_wait_multiple(os.wait)
@@ -88,6 +97,8 @@ class OSEINTRTest(EINTRBaseTest):
     def _test_wait_single(self, wait_func):
         proc = self.new_sleep_process()
         wait_func(proc.pid)
+        # Call the Popen method to avoid a ResourceWarning
+        proc.wait()
 
     def test_waitpid(self):
         self._test_wait_single(lambda pid: os.waitpid(pid, 0))
@@ -358,59 +369,55 @@ class TimeEINTRTest(EINTRBaseTest):
 
 
 @unittest.skipUnless(hasattr(signal, "setitimer"), "requires setitimer()")
+# bpo-30320: Need pthread_sigmask() to block the signal, otherwise the test
+# is vulnerable to a race condition between the child and the parent processes.
+@unittest.skipUnless(hasattr(signal, 'pthread_sigmask'),
+                     'need signal.pthread_sigmask()')
 class SignalEINTRTest(EINTRBaseTest):
     """ EINTR tests for the signal module. """
 
-    @unittest.skipUnless(hasattr(signal, 'sigtimedwait'),
-                         'need signal.sigtimedwait()')
-    def test_sigtimedwait(self):
-        t0 = time.monotonic()
-        signal.sigtimedwait([signal.SIGUSR1], self.sleep_time)
-        dt = time.monotonic() - t0
-        self.assertGreaterEqual(dt, self.sleep_time)
-
-    @unittest.skipUnless(hasattr(signal, 'sigwaitinfo'),
-                         'need signal.sigwaitinfo()')
-    def test_sigwaitinfo(self):
-        # Issue #25277, #25868: give a few milliseconds to the parent process
-        # between os.write() and signal.sigwaitinfo() to works around a race
-        # condition
-        self.sleep_time = 0.100
-
+    def check_sigwait(self, wait_func):
         signum = signal.SIGUSR1
         pid = os.getpid()
 
         old_handler = signal.signal(signum, lambda *args: None)
         self.addCleanup(signal.signal, signum, old_handler)
 
-        rpipe, wpipe = os.pipe()
-
         code = '\n'.join((
             'import os, time',
             'pid = %s' % os.getpid(),
             'signum = %s' % int(signum),
             'sleep_time = %r' % self.sleep_time,
-            'rpipe = %r' % rpipe,
-            'os.read(rpipe, 1)',
-            'os.close(rpipe)',
             'time.sleep(sleep_time)',
             'os.kill(pid, signum)',
         ))
 
+        old_mask = signal.pthread_sigmask(signal.SIG_BLOCK, [signum])
+        self.addCleanup(signal.pthread_sigmask, signal.SIG_UNBLOCK, [signum])
+
         t0 = time.monotonic()
-        proc = self.subprocess(code, pass_fds=(rpipe,))
-        os.close(rpipe)
+        proc = self.subprocess(code)
         with kill_on_error(proc):
-            # sync child-parent
-            os.write(wpipe, b'x')
-            os.close(wpipe)
+            wait_func(signum)
+            dt = time.monotonic() - t0
+
+        self.assertEqual(proc.wait(), 0)
 
-            # parent
+    @unittest.skipUnless(hasattr(signal, 'sigwaitinfo'),
+                         'need signal.sigwaitinfo()')
+    def test_sigwaitinfo(self):
+        def wait_func(signum):
             signal.sigwaitinfo([signum])
-            dt = time.monotonic() - t0
-            self.assertEqual(proc.wait(), 0)
 
-        self.assertGreaterEqual(dt, self.sleep_time)
+        self.check_sigwait(wait_func)
+
+    @unittest.skipUnless(hasattr(signal, 'sigtimedwait'),
+                         'need signal.sigwaitinfo()')
+    def test_sigtimedwait(self):
+        def wait_func(signum):
+            signal.sigtimedwait([signum], 120.0)
+
+        self.check_sigwait(wait_func)
 
 
 @unittest.skipUnless(hasattr(signal, "setitimer"), "requires setitimer()")
@@ -424,6 +431,8 @@ class SelectEINTRTest(EINTRBaseTest):
         self.stop_alarm()
         self.assertGreaterEqual(dt, self.sleep_time)
 
+    @unittest.skipIf(sys.platform == "darwin",
+                     "poll may fail on macOS; see issue #28087")
     @unittest.skipUnless(hasattr(select, 'poll'), 'need select.poll')
     def test_poll(self):
         poller = select.poll()
diff --git a/Lib/test/mod_generics_cache.py b/Lib/test/mod_generics_cache.py
new file mode 100644
index 0000000..d9a60b4
--- /dev/null
+++ b/Lib/test/mod_generics_cache.py
@@ -0,0 +1,14 @@
+"""Module for testing the behavior of generics across different modules."""
+
+from typing import TypeVar, Generic
+
+T = TypeVar('T')
+
+
+class A(Generic[T]):
+    pass
+
+
+class B(Generic[T]):
+    class A(Generic[T]):
+        pass
diff --git a/Lib/test/regrtest.py b/Lib/test/regrtest.py
index c1d85f6..6cb9d5a 100755
--- a/Lib/test/regrtest.py
+++ b/Lib/test/regrtest.py
@@ -425,6 +425,11 @@ def _parse_args(args, **kwargs):
                     ns.use_resources.append(r)
     if ns.random_seed is not None:
         ns.randomize = True
+    if ns.huntrleaks and ns.verbose3:
+        ns.verbose3 = False
+        print("WARNING: Disable --verbose3 because it's incompatible with "
+              "--huntrleaks: see http://bugs.python.org/issue27103",
+              file=sys.stderr)
 
     return ns
 
@@ -1267,10 +1272,9 @@ class saved_test_environment:
                     print("Warning -- {} was modified by {}".format(
                                                  name, self.testname),
                                                  file=sys.stderr)
-                    if self.verbose > 1 and not self.pgo:
-                        print("  Before: {}\n  After:  {} ".format(
-                                                  original, current),
-                                                  file=sys.stderr)
+                    print("  Before: {}\n  After:  {} ".format(
+                                              original, current),
+                                              file=sys.stderr)
         return False
 
 
@@ -1480,9 +1484,14 @@ def dash_R_cleanup(fs, ps, pic, zdc, abcs):
     sys._clear_type_cache()
 
     # Clear ABC registries, restoring previously saved ABC registries.
-    for abc in [getattr(collections.abc, a) for a in collections.abc.__all__]:
-        if not isabstract(abc):
-            continue
+    abs_classes = [getattr(collections.abc, a) for a in collections.abc.__all__]
+    abs_classes = filter(isabstract, abs_classes)
+    if 'typing' in sys.modules:
+        t = sys.modules['typing']
+        # these classes require special treatment because they do not appear
+        # in direct subclasses on collections.abc classes
+        abs_classes = list(abs_classes) + [t.ChainMap, t.Counter, t.DefaultDict]
+    for abc in abs_classes:
         for obj in abc.__subclasses__() + [abc]:
             obj._abc_registry = abcs.get(obj, WeakSet()).copy()
             obj._abc_cache.clear()
diff --git a/Lib/test/sndhdrdata/README b/Lib/test/sndhdrdata/README
index 8a17c00..b2cb664 100644
--- a/Lib/test/sndhdrdata/README
+++ b/Lib/test/sndhdrdata/README
@@ -3,10 +3,3 @@ following commands:
 
    dd if=/dev/zero of=sndhdr.raw bs=20 count=1
    sox -s -2 -c 2 -r 44100 sndhdr.raw sndhdr.<format>
-
-Sound file samples used by Lib/test/test_sndhdr.py and generated using the
-following commands:
-
-   dd if=/dev/zero of=sndhdr.raw bs=20 count=1
-   sox -s -2 -c 2 -r 44100 sndhdr.raw sndhdr.<format>
-
diff --git a/Lib/test/support/__init__.py b/Lib/test/support/__init__.py
index d0d126a..a9f8fd5 100644
--- a/Lib/test/support/__init__.py
+++ b/Lib/test/support/__init__.py
@@ -2073,12 +2073,15 @@ def swap_attr(obj, attr, new_val):
         restoring the old value at the end of the block. If `attr` doesn't
         exist on `obj`, it will be created and then deleted at the end of the
         block.
+
+        The old value (or None if it doesn't exist) will be assigned to the
+        target of the "as" clause, if there is one.
     """
     if hasattr(obj, attr):
         real_val = getattr(obj, attr)
         setattr(obj, attr, new_val)
         try:
-            yield
+            yield real_val
         finally:
             setattr(obj, attr, real_val)
     else:
@@ -2086,7 +2089,8 @@ def swap_attr(obj, attr, new_val):
         try:
             yield
         finally:
-            delattr(obj, attr)
+            if hasattr(obj, attr):
+                delattr(obj, attr)
 
 @contextlib.contextmanager
 def swap_item(obj, item, new_val):
@@ -2100,12 +2104,15 @@ def swap_item(obj, item, new_val):
         restoring the old value at the end of the block. If `item` doesn't
         exist on `obj`, it will be created and then deleted at the end of the
         block.
+
+        The old value (or None if it doesn't exist) will be assigned to the
+        target of the "as" clause, if there is one.
     """
     if item in obj:
         real_val = obj[item]
         obj[item] = new_val
         try:
-            yield
+            yield real_val
         finally:
             obj[item] = real_val
     else:
@@ -2113,7 +2120,8 @@ def swap_item(obj, item, new_val):
         try:
             yield
         finally:
-            del obj[item]
+            if item in obj:
+                del obj[item]
 
 def strip_python_stderr(stderr):
     """Strip the stderr of a Python process from potential debug output
@@ -2337,6 +2345,7 @@ class SuppressCrashReport:
                                        (0, self.old_value[1]))
                 except (ValueError, OSError):
                     pass
+
             if sys.platform == 'darwin':
                 # Check if the 'Crash Reporter' on OSX was configured
                 # in 'Developer' mode and warn that it will get triggered
@@ -2344,10 +2353,14 @@ class SuppressCrashReport:
                 #
                 # This assumes that this context manager is used in tests
                 # that might trigger the next manager.
-                value = subprocess.Popen(['/usr/bin/defaults', 'read',
-                        'com.apple.CrashReporter', 'DialogType'],
-                        stdout=subprocess.PIPE).communicate()[0]
-                if value.strip() == b'developer':
+                cmd = ['/usr/bin/defaults', 'read',
+                       'com.apple.CrashReporter', 'DialogType']
+                proc = subprocess.Popen(cmd,
+                                        stdout=subprocess.PIPE,
+                                        stderr=subprocess.PIPE)
+                with proc:
+                    stdout = proc.communicate()[0]
+                if stdout.strip() == b'developer':
                     print("this test triggers the Crash Reporter, "
                           "that is intentional", end='', flush=True)
 
diff --git a/Lib/test/support/script_helper.py b/Lib/test/support/script_helper.py
index 80889b1..ca5f9c2 100644
--- a/Lib/test/support/script_helper.py
+++ b/Lib/test/support/script_helper.py
@@ -70,17 +70,28 @@ def run_python_until_end(*args, **env_vars):
     elif not env_vars and not env_required:
         # ignore Python environment variables
         cmd_line.append('-E')
-    # Need to preserve the original environment, for in-place testing of
-    # shared library builds.
-    env = os.environ.copy()
-    # set TERM='' unless the TERM environment variable is passed explicitly
-    # see issues #11390 and #18300
-    if 'TERM' not in env_vars:
-        env['TERM'] = ''
+
     # But a special flag that can be set to override -- in this case, the
     # caller is responsible to pass the full environment.
     if env_vars.pop('__cleanenv', None):
         env = {}
+        if sys.platform == 'win32':
+            # Windows requires at least the SYSTEMROOT environment variable to
+            # start Python.
+            env['SYSTEMROOT'] = os.environ['SYSTEMROOT']
+
+        # Other interesting environment variables, not copied currently:
+        # COMSPEC, HOME, PATH, TEMP, TMPDIR, TMP.
+    else:
+        # Need to preserve the original environment, for in-place testing of
+        # shared library builds.
+        env = os.environ.copy()
+
+    # set TERM='' unless the TERM environment variable is passed explicitly
+    # see issues #11390 and #18300
+    if 'TERM' not in env_vars:
+        env['TERM'] = ''
+
     env.update(env_vars)
     cmd_line.extend(args)
     proc = subprocess.Popen(cmd_line, stdin=subprocess.PIPE,
diff --git a/Lib/test/test___all__.py b/Lib/test/test___all__.py
index e94d984..2fc5e3e 100644
--- a/Lib/test/test___all__.py
+++ b/Lib/test/test___all__.py
@@ -70,17 +70,6 @@ class AllTest(unittest.TestCase):
             # than an AttributeError somewhere deep in CGIHTTPServer.
             import _socket
 
-        # rlcompleter needs special consideration; it import readline which
-        # initializes GNU readline which calls setlocale(LC_CTYPE, "")... :-(
-        import locale
-        locale_tuple = locale.getlocale(locale.LC_CTYPE)
-        try:
-            import rlcompleter
-        except ImportError:
-            pass
-        finally:
-            locale.setlocale(locale.LC_CTYPE, locale_tuple)
-
         ignored = []
         failed_imports = []
         lib_dir = os.path.dirname(os.path.dirname(__file__))
diff --git a/Lib/test/test_aifc.py b/Lib/test/test_aifc.py
index ab51437..eaa24b6 100644
--- a/Lib/test/test_aifc.py
+++ b/Lib/test/test_aifc.py
@@ -1,5 +1,6 @@
-from test.support import findfile, TESTFN, unlink
+from test.support import check_no_resource_warning, findfile, TESTFN, unlink
 import unittest
+from unittest import mock
 from test import audiotests
 from audioop import byteswap
 import os
@@ -150,6 +151,21 @@ class AifcMiscTest(audiotests.AudioTests, unittest.TestCase):
         #This file contains chunk types aifc doesn't recognize.
         self.f = aifc.open(findfile('Sine-1000Hz-300ms.aif'))
 
+    def test_close_opened_files_on_error(self):
+        non_aifc_file = findfile('pluck-pcm8.wav', subdir='audiodata')
+        with check_no_resource_warning(self):
+            with self.assertRaises(aifc.Error):
+                # Try opening a non-AIFC file, with the expectation that
+                # `aifc.open` will fail (without raising a ResourceWarning)
+                self.f = aifc.open(non_aifc_file, 'rb')
+
+            # Aifc_write.initfp() won't raise in normal case.  But some errors
+            # (e.g. MemoryError, KeyboardInterrupt, etc..) can happen.
+            with mock.patch.object(aifc.Aifc_write, 'initfp',
+                                   side_effect=RuntimeError):
+                with self.assertRaises(RuntimeError):
+                    self.fout = aifc.open(TESTFN, 'wb')
+
     def test_params_added(self):
         f = self.f = aifc.open(TESTFN, 'wb')
         f.aiff()
diff --git a/Lib/test/test_argparse.py b/Lib/test/test_argparse.py
index 4779a13..197d576 100644
--- a/Lib/test/test_argparse.py
+++ b/Lib/test/test_argparse.py
@@ -1943,6 +1943,23 @@ class TestAddSubparsers(TestCase):
               ++foo       foo help
             '''))
 
+    def test_help_non_breaking_spaces(self):
+        parser = ErrorRaisingArgumentParser(
+            prog='PROG', description='main description')
+        parser.add_argument(
+            "--non-breaking", action='store_false',
+            help='help message containing non-breaking spaces shall not '
+            'wrap\N{NO-BREAK SPACE}at non-breaking spaces')
+        self.assertEqual(parser.format_help(), textwrap.dedent('''\
+            usage: PROG [-h] [--non-breaking]
+
+            main description
+
+            optional arguments:
+              -h, --help      show this help message and exit
+              --non-breaking  help message containing non-breaking spaces shall not
+                              wrap\N{NO-BREAK SPACE}at non-breaking spaces
+        '''))
 
     def test_help_alternate_prefix_chars(self):
         parser = self._get_parser(prefix_chars='+:/')
diff --git a/Lib/test/test_array.py b/Lib/test/test_array.py
index 2a21e74..cbc6b6d 100644
--- a/Lib/test/test_array.py
+++ b/Lib/test/test_array.py
@@ -1225,7 +1225,26 @@ class NumberTest(BaseTest):
         b = array.array(self.typecode, a)
         self.assertEqual(a, b)
 
-class SignedNumberTest(NumberTest):
+class IntegerNumberTest(NumberTest):
+    def test_type_error(self):
+        a = array.array(self.typecode)
+        a.append(42)
+        with self.assertRaises(TypeError):
+            a.append(42.0)
+        with self.assertRaises(TypeError):
+            a[0] = 42.0
+
+class Intable:
+    def __init__(self, num):
+        self._num = num
+    def __int__(self):
+        return self._num
+    def __sub__(self, other):
+        return Intable(int(self) - int(other))
+    def __add__(self, other):
+        return Intable(int(self) + int(other))
+
+class SignedNumberTest(IntegerNumberTest):
     example = [-1, 0, 1, 42, 0x7f]
     smallerexample = [-1, 0, 1, 42, 0x7e]
     biggerexample = [-1, 0, 1, 43, 0x7f]
@@ -1236,8 +1255,9 @@ class SignedNumberTest(NumberTest):
         lower = -1 * int(pow(2, a.itemsize * 8 - 1))
         upper = int(pow(2, a.itemsize * 8 - 1)) - 1
         self.check_overflow(lower, upper)
+        self.check_overflow(Intable(lower), Intable(upper))
 
-class UnsignedNumberTest(NumberTest):
+class UnsignedNumberTest(IntegerNumberTest):
     example = [0, 1, 17, 23, 42, 0xff]
     smallerexample = [0, 1, 17, 23, 42, 0xfe]
     biggerexample = [0, 1, 17, 23, 43, 0xff]
@@ -1248,6 +1268,7 @@ class UnsignedNumberTest(NumberTest):
         lower = 0
         upper = int(pow(2, a.itemsize * 8)) - 1
         self.check_overflow(lower, upper)
+        self.check_overflow(Intable(lower), Intable(upper))
 
     def test_bytes_extend(self):
         s = bytes(self.example)
diff --git a/Lib/test/test_asyncio/test_events.py b/Lib/test/test_asyncio/test_events.py
index 28d92a9..492a84a 100644
--- a/Lib/test/test_asyncio/test_events.py
+++ b/Lib/test/test_asyncio/test_events.py
@@ -1,6 +1,7 @@
 """Tests for events.py."""
 
 import collections.abc
+import concurrent.futures
 import functools
 import gc
 import io
@@ -57,6 +58,15 @@ def osx_tiger():
     return version < (10, 5)
 
 
+def _test_get_event_loop_new_process__sub_proc():
+    async def doit():
+        return 'hello'
+
+    loop = asyncio.new_event_loop()
+    asyncio.set_event_loop(loop)
+    return loop.run_until_complete(doit())
+
+
 ONLYCERT = data_file('ssl_cert.pem')
 ONLYKEY = data_file('ssl_key.pem')
 SIGNED_CERTFILE = data_file('keycert3.pem')
@@ -2181,6 +2191,20 @@ else:
             asyncio.set_child_watcher(None)
             super().tearDown()
 
+        def test_get_event_loop_new_process(self):
+            async def main():
+                pool = concurrent.futures.ProcessPoolExecutor()
+                result = await self.loop.run_in_executor(
+                    pool, _test_get_event_loop_new_process__sub_proc)
+                pool.shutdown()
+                return result
+
+            self.unpatch_get_running_loop()
+
+            self.assertEqual(
+                self.loop.run_until_complete(main()),
+                'hello')
+
     if hasattr(selectors, 'KqueueSelector'):
         class KqueueEventLoopTests(UnixEventLoopTestsMixin,
                                    SubprocessTestsMixin,
diff --git a/Lib/test/test_asyncio/test_sslproto.py b/Lib/test/test_asyncio/test_sslproto.py
index 59ff0f6..f1771c5 100644
--- a/Lib/test/test_asyncio/test_sslproto.py
+++ b/Lib/test/test_asyncio/test_sslproto.py
@@ -95,5 +95,17 @@ class SslProtoHandshakeTests(test_utils.TestCase):
         test_utils.run_briefly(self.loop)
         self.assertIsInstance(waiter.exception(), ConnectionAbortedError)
 
+    def test_get_extra_info_on_closed_connection(self):
+        waiter = asyncio.Future(loop=self.loop)
+        ssl_proto = self.ssl_protocol(waiter)
+        self.assertIsNone(ssl_proto._get_extra_info('socket'))
+        default = object()
+        self.assertIs(ssl_proto._get_extra_info('socket', default), default)
+        self.connection_made(ssl_proto)
+        self.assertIsNotNone(ssl_proto._get_extra_info('socket'))
+        ssl_proto.connection_lost(None)
+        self.assertIsNone(ssl_proto._get_extra_info('socket'))
+
+
 if __name__ == '__main__':
     unittest.main()
diff --git a/Lib/test/test_asyncio/test_subprocess.py b/Lib/test/test_asyncio/test_subprocess.py
index bba688b..2e14a8a 100644
--- a/Lib/test/test_asyncio/test_subprocess.py
+++ b/Lib/test/test_asyncio/test_subprocess.py
@@ -459,6 +459,30 @@ class SubprocessMixin:
                     self.loop.run_until_complete(create)
                 self.assertEqual(warns, [])
 
+    def test_read_stdout_after_process_exit(self):
+        @asyncio.coroutine
+        def execute():
+            code = '\n'.join(['import sys',
+                              'for _ in range(64):',
+                              '    sys.stdout.write("x" * 4096)',
+                              'sys.stdout.flush()',
+                              'sys.exit(1)'])
+
+            fut = asyncio.create_subprocess_exec(
+                sys.executable, '-c', code,
+                stdout=asyncio.subprocess.PIPE,
+                loop=self.loop)
+
+            process = yield from fut
+            while True:
+                data = yield from process.stdout.read(65536)
+                if data:
+                    yield from asyncio.sleep(0.3, loop=self.loop)
+                else:
+                    break
+
+        self.loop.run_until_complete(execute())
+
 
 if sys.platform != 'win32':
     # Unix
diff --git a/Lib/test/test_asyncio/test_tasks.py b/Lib/test/test_asyncio/test_tasks.py
index 9872926..b3d0653 100644
--- a/Lib/test/test_asyncio/test_tasks.py
+++ b/Lib/test/test_asyncio/test_tasks.py
@@ -573,6 +573,24 @@ class TaskTests(test_utils.TestCase):
         self.assertFalse(t._must_cancel)  # White-box test.
         self.assertFalse(t.cancel())
 
+    def test_cancel_at_end(self):
+        """coroutine end right after task is cancelled"""
+        loop = asyncio.new_event_loop()
+        self.set_event_loop(loop)
+
+        @asyncio.coroutine
+        def task():
+            t.cancel()
+            self.assertTrue(t._must_cancel)  # White-box test.
+            return 12
+
+        t = asyncio.Task(task(), loop=loop)
+        self.assertRaises(
+            asyncio.CancelledError, loop.run_until_complete, t)
+        self.assertTrue(t.done())
+        self.assertFalse(t._must_cancel)  # White-box test.
+        self.assertFalse(t.cancel())
+
     def test_stop_while_run_in_complete(self):
 
         def gen():
diff --git a/Lib/test/test_asyncore.py b/Lib/test/test_asyncore.py
index 3857916..18f1ea2 100644
--- a/Lib/test/test_asyncore.py
+++ b/Lib/test/test_asyncore.py
@@ -656,6 +656,9 @@ class BaseTestAPI:
         if HAS_UNIX_SOCKETS and self.family == socket.AF_UNIX:
             self.skipTest("Not applicable to AF_UNIX sockets.")
 
+        if sys.platform == "darwin" and self.use_poll:
+            self.skipTest("poll may fail on macOS; see issue #28087")
+
         class TestClient(BaseClient):
             def handle_expt(self):
                 self.socket.recv(1024, socket.MSG_OOB)
diff --git a/Lib/test/test_atexit.py b/Lib/test/test_atexit.py
index 172bd25..c761076 100644
--- a/Lib/test/test_atexit.py
+++ b/Lib/test/test_atexit.py
@@ -143,6 +143,7 @@ class GeneralTest(unittest.TestCase):
         self.assertEqual(l, [5])
 
 
+@support.cpython_only
 class SubinterpreterTest(unittest.TestCase):
 
     def test_callbacks_leak(self):
diff --git a/Lib/test/test_base64.py b/Lib/test/test_base64.py
index 4f86aaa..4754739 100644
--- a/Lib/test/test_base64.py
+++ b/Lib/test/test_base64.py
@@ -18,6 +18,14 @@ class LegacyBase64TestCase(unittest.TestCase):
         int_data = memoryview(b"1234").cast('I')
         self.assertRaises(TypeError, f, int_data)
 
+    def test_encodestring_warns(self):
+        with self.assertWarns(DeprecationWarning):
+            base64.encodestring(b"www.python.org")
+
+    def test_decodestring_warns(self):
+        with self.assertWarns(DeprecationWarning):
+            base64.decodestring(b"d3d3LnB5dGhvbi5vcmc=\n")
+
     def test_encodebytes(self):
         eq = self.assertEqual
         eq(base64.encodebytes(b"www.python.org"), b"d3d3LnB5dGhvbi5vcmc=\n")
diff --git a/Lib/test/test_capi.py b/Lib/test/test_capi.py
index 1eadd22..f404858 100644
--- a/Lib/test/test_capi.py
+++ b/Lib/test/test_capi.py
@@ -96,7 +96,7 @@ class CAPITest(unittest.TestCase):
             def __len__(self):
                 return 1
         self.assertRaises(TypeError, _posixsubprocess.fork_exec,
-                          1,Z(),3,[1, 2],5,6,7,8,9,10,11,12,13,14,15,16,17)
+                          1,Z(),3,(1, 2),5,6,7,8,9,10,11,12,13,14,15,16,17)
         # Issue #15736: overflow in _PySequence_BytesToCharpArray()
         class Z(object):
             def __len__(self):
@@ -104,7 +104,7 @@ class CAPITest(unittest.TestCase):
             def __getitem__(self, i):
                 return b'x'
         self.assertRaises(MemoryError, _posixsubprocess.fork_exec,
-                          1,Z(),3,[1, 2],5,6,7,8,9,10,11,12,13,14,15,16,17)
+                          1,Z(),3,(1, 2),5,6,7,8,9,10,11,12,13,14,15,16,17)
 
     @unittest.skipUnless(_posixsubprocess, '_posixsubprocess required for this test.')
     def test_subprocess_fork_exec(self):
@@ -114,7 +114,7 @@ class CAPITest(unittest.TestCase):
 
         # Issue #15738: crash in subprocess_fork_exec()
         self.assertRaises(TypeError, _posixsubprocess.fork_exec,
-                          Z(),[b'1'],3,[1, 2],5,6,7,8,9,10,11,12,13,14,15,16,17)
+                          Z(),[b'1'],3,(1, 2),5,6,7,8,9,10,11,12,13,14,15,16,17)
 
     @unittest.skipIf(MISSING_C_DOCSTRINGS,
                      "Signature information for builtins requires docstrings")
@@ -487,9 +487,8 @@ class SkipitemTest(unittest.TestCase):
             # test the format unit when not skipped
             format = c + "i"
             try:
-                # (note: the format string must be bytes!)
                 _testcapi.parse_tuple_and_keywords(tuple_1, dict_b,
-                    format.encode("ascii"), keywords)
+                    format, keywords)
                 when_not_skipped = False
             except TypeError as e:
                 s = "argument 1 (impossible<bad format char>)"
@@ -501,7 +500,7 @@ class SkipitemTest(unittest.TestCase):
             optional_format = "|" + format
             try:
                 _testcapi.parse_tuple_and_keywords(empty_tuple, dict_b,
-                    optional_format.encode("ascii"), keywords)
+                    optional_format, keywords)
                 when_skipped = False
             except RuntimeError as e:
                 s = "impossible<bad format char>: '{}'".format(format)
@@ -514,15 +513,36 @@ class SkipitemTest(unittest.TestCase):
             self.assertIs(when_skipped, when_not_skipped, message)
 
     def test_parse_tuple_and_keywords(self):
-        # parse_tuple_and_keywords error handling tests
+        # Test handling errors in the parse_tuple_and_keywords helper itself
         self.assertRaises(TypeError, _testcapi.parse_tuple_and_keywords,
                           (), {}, 42, [])
         self.assertRaises(ValueError, _testcapi.parse_tuple_and_keywords,
-                          (), {}, b'', 42)
+                          (), {}, '', 42)
         self.assertRaises(ValueError, _testcapi.parse_tuple_and_keywords,
-                          (), {}, b'', [''] * 42)
+                          (), {}, '', [''] * 42)
         self.assertRaises(ValueError, _testcapi.parse_tuple_and_keywords,
-                          (), {}, b'', [42])
+                          (), {}, '', [42])
+
+    def test_bad_use(self):
+        # Test handling invalid format and keywords in
+        # PyArg_ParseTupleAndKeywords()
+        self.assertRaises((TypeError, SystemError), _testcapi.parse_tuple_and_keywords,
+                          (1,), {}, '||O', ['a'])
+        self.assertRaises((RuntimeError, SystemError), _testcapi.parse_tuple_and_keywords,
+                          (1, 2), {}, '|O|O', ['a', 'b'])
+        self.assertRaises((TypeError, SystemError), _testcapi.parse_tuple_and_keywords,
+                          (), {'a': 1}, '$$O', ['a'])
+        self.assertRaises((RuntimeError, SystemError), _testcapi.parse_tuple_and_keywords,
+                          (), {'a': 1, 'b': 2}, '$O$O', ['a', 'b'])
+        self.assertRaises((TypeError, SystemError), _testcapi.parse_tuple_and_keywords,
+                          (), {'a': 1}, '$|O', ['a'])
+        self.assertRaises((RuntimeError, SystemError), _testcapi.parse_tuple_and_keywords,
+                          (), {'a': 1, 'b': 2}, '$O|O', ['a', 'b'])
+        self.assertRaises((RuntimeError, SystemError), _testcapi.parse_tuple_and_keywords,
+                          (1,), {}, '|O', ['a', 'b'])
+        self.assertRaises((RuntimeError, SystemError), _testcapi.parse_tuple_and_keywords,
+                          (1,), {}, '|OO', ['a'])
+
 
 @unittest.skipUnless(threading, 'Threading required for this test.')
 class TestThreadState(unittest.TestCase):
diff --git a/Lib/test/test_class.py b/Lib/test/test_class.py
index 4d554a3..ecc01f2 100644
--- a/Lib/test/test_class.py
+++ b/Lib/test/test_class.py
@@ -568,5 +568,32 @@ class ClassTests(unittest.TestCase):
         a = A(hash(A.f)^(-1))
         hash(a.f)
 
+    def testSetattrWrapperNameIntern(self):
+        # Issue #25794: __setattr__ should intern the attribute name
+        class A:
+            pass
+
+        def add(self, other):
+            return 'summa'
+
+        name = str(b'__add__', 'ascii')  # shouldn't be optimized
+        self.assertIsNot(name, '__add__')  # not interned
+        type.__setattr__(A, name, add)
+        self.assertEqual(A() + 1, 'summa')
+
+        name2 = str(b'__add__', 'ascii')
+        self.assertIsNot(name2, '__add__')
+        self.assertIsNot(name2, name)
+        type.__delattr__(A, name2)
+        with self.assertRaises(TypeError):
+            A() + 1
+
+    def testSetattrNonStringName(self):
+        class A:
+            pass
+
+        with self.assertRaises(TypeError):
+            type.__setattr__(A, b'x', None)
+
 if __name__ == '__main__':
     unittest.main()
diff --git a/Lib/test/test_codecencodings_cn.py b/Lib/test/test_codecencodings_cn.py
index d0e3a15..5101b5c 100644
--- a/Lib/test/test_codecencodings_cn.py
+++ b/Lib/test/test_codecencodings_cn.py
@@ -49,6 +49,12 @@ class Test_GB18030(multibytecodec_support.TestBase, unittest.TestCase):
         (b"abc\x84\x32\x80\x80def", "replace", 'abc\ufffd2\ufffd\ufffddef'),
         (b"abc\x81\x30\x81\x30def", "strict", 'abc\x80def'),
         (b"abc\x86\x30\x81\x30def", "replace", 'abc\ufffd0\ufffd0def'),
+        # issue29990
+        (b"\xff\x30\x81\x30", "strict", None),
+        (b"\x81\x30\xff\x30", "strict", None),
+        (b"abc\x81\x39\xff\x39\xc1\xc4", "replace", "abc\ufffd\x39\ufffd\x39\u804a"),
+        (b"abc\xab\x36\xff\x30def", "replace", 'abc\ufffd\x36\ufffd\x30def'),
+        (b"abc\xbf\x38\xff\x32\xc1\xc4", "ignore",  "abc\x38\x32\u804a"),
     )
     has_iso10646 = True
 
@@ -81,6 +87,10 @@ class Test_HZ(multibytecodec_support.TestBase, unittest.TestCase):
         (b'ab~{\x81\x81\x41\x44~}cd', 'replace', 'ab\uFFFD\uFFFD\u804Acd'),
         (b'ab~{\x41\x44~}cd', 'replace', 'ab\u804Acd'),
         (b"ab~{\x79\x79\x41\x44~}cd", "replace", "ab\ufffd\ufffd\u804acd"),
+        # issue 30003
+        ('ab~cd', 'strict',  b'ab~~cd'),  # escape ~
+        (b'~{Dc~~:C~}', 'strict', None),  # ~~ only in ASCII mode
+        (b'~{Dc~\n:C~}', 'strict', None), # ~\n only in ASCII mode
     )
 
 if __name__ == "__main__":
diff --git a/Lib/test/test_compile.py b/Lib/test/test_compile.py
index 824e843..4ea66a4 100644
--- a/Lib/test/test_compile.py
+++ b/Lib/test/test_compile.py
@@ -634,6 +634,7 @@ if 1:
             f1 = ns['f1']
             f2 = ns['f2']
             self.assertIsNot(f1.__code__, f2.__code__)
+            self.assertNotEqual(f1.__code__, f2.__code__)
             self.check_constant(f1, const1)
             self.check_constant(f2, const2)
             self.assertEqual(repr(f1()), repr(const1))
@@ -642,6 +643,8 @@ if 1:
         check_different_constants(0, 0.0)
         check_different_constants(+0.0, -0.0)
         check_different_constants((0,), (0.0,))
+        check_different_constants('a', b'a')
+        check_different_constants(('a',), (b'a',))
 
         # check_different_constants() cannot be used because repr(-0j) is
         # '(-0-0j)', but when '(-0-0j)' is evaluated to 0j: we loose the sign.
diff --git a/Lib/test/test_complex.py b/Lib/test/test_complex.py
index 403ee3b..8d551a4 100644
--- a/Lib/test/test_complex.py
+++ b/Lib/test/test_complex.py
@@ -385,6 +385,29 @@ class ComplexTest(unittest.TestCase):
         self.assertAlmostEqual(complex(complex1(1j)), 2j)
         self.assertRaises(TypeError, complex, complex2(1j))
 
+    @support.requires_IEEE_754
+    def test_constructor_special_numbers(self):
+        class complex2(complex):
+            pass
+        for x in 0.0, -0.0, INF, -INF, NAN:
+            for y in 0.0, -0.0, INF, -INF, NAN:
+                with self.subTest(x=x, y=y):
+                    z = complex(x, y)
+                    self.assertFloatsAreIdentical(z.real, x)
+                    self.assertFloatsAreIdentical(z.imag, y)
+                    z = complex2(x, y)
+                    self.assertIs(type(z), complex2)
+                    self.assertFloatsAreIdentical(z.real, x)
+                    self.assertFloatsAreIdentical(z.imag, y)
+                    z = complex(complex2(x, y))
+                    self.assertIs(type(z), complex)
+                    self.assertFloatsAreIdentical(z.real, x)
+                    self.assertFloatsAreIdentical(z.imag, y)
+                    z = complex2(complex(x, y))
+                    self.assertIs(type(z), complex2)
+                    self.assertFloatsAreIdentical(z.real, x)
+                    self.assertFloatsAreIdentical(z.imag, y)
+
     def test_hash(self):
         for x in range(-30, 30):
             self.assertEqual(hash(x), hash(complex(x, 0)))
diff --git a/Lib/test/test_contextlib.py b/Lib/test/test_contextlib.py
index 516403e..ad1b6cd 100644
--- a/Lib/test/test_contextlib.py
+++ b/Lib/test/test_contextlib.py
@@ -119,6 +119,29 @@ def woohoo():
         else:
             self.fail('StopIteration was suppressed')
 
+    def test_contextmanager_do_not_unchain_non_stopiteration_exceptions(self):
+        @contextmanager
+        def test_issue29692():
+            try:
+                yield
+            except Exception as exc:
+                raise RuntimeError('issue29692:Chained') from exc
+        try:
+            with test_issue29692():
+                raise ZeroDivisionError
+        except Exception as ex:
+            self.assertIs(type(ex), RuntimeError)
+            self.assertEqual(ex.args[0], 'issue29692:Chained')
+            self.assertIsInstance(ex.__cause__, ZeroDivisionError)
+
+        try:
+            with test_issue29692():
+                raise StopIteration('issue29692:Unchained')
+        except Exception as ex:
+            self.assertIs(type(ex), StopIteration)
+            self.assertEqual(ex.args[0], 'issue29692:Unchained')
+            self.assertIsNone(ex.__cause__)
+
     def _create_contextmanager_attribs(self):
         def attribs(**kw):
             def decorate(func):
diff --git a/Lib/test/test_coroutines.py b/Lib/test/test_coroutines.py
index 4a327b5..402fbe8 100644
--- a/Lib/test/test_coroutines.py
+++ b/Lib/test/test_coroutines.py
@@ -975,6 +975,21 @@ class CoroutineTest(unittest.TestCase):
                                     "coroutine is being awaited already"):
             waiter(coro).send(None)
 
+    def test_await_16(self):
+        # See https://bugs.python.org/issue29600 for details.
+
+        async def f():
+            return ValueError()
+
+        async def g():
+            try:
+                raise KeyError
+            except:
+                return await f()
+
+        _, result = run_async(g())
+        self.assertIsNone(result.__context__)
+
     def test_with_1(self):
         class Manager:
             def __init__(self, name):
@@ -1757,6 +1772,7 @@ class SysSetCoroWrapperTest(unittest.TestCase):
             sys.set_coroutine_wrapper(None)
 
 
+@support.cpython_only
 class CAPITest(unittest.TestCase):
 
     def test_tp_await_1(self):
diff --git a/Lib/test/test_curses.py b/Lib/test/test_curses.py
index 14ba87f..3d8c50b 100644
--- a/Lib/test/test_curses.py
+++ b/Lib/test/test_curses.py
@@ -244,7 +244,7 @@ class TestCurses(unittest.TestCase):
     # Functions only available on a few platforms
     def test_colors_funcs(self):
         if not curses.has_colors():
-            self.skip('requires colors support')
+            self.skipTest('requires colors support')
         curses.start_color()
         curses.init_pair(2, 1,1)
         curses.color_content(1)
@@ -267,7 +267,7 @@ class TestCurses(unittest.TestCase):
     def test_getmouse(self):
         (availmask, oldmask) = curses.mousemask(curses.BUTTON1_PRESSED)
         if availmask == 0:
-            self.skip('mouse stuff not available')
+            self.skipTest('mouse stuff not available')
         curses.mouseinterval(10)
         # just verify these don't cause errors
         curses.ungetmouse(0, 0, 0, 0, curses.BUTTON1_PRESSED)
diff --git a/Lib/test/test_dict.py b/Lib/test/test_dict.py
index b85d333..f59490a 100644
--- a/Lib/test/test_dict.py
+++ b/Lib/test/test_dict.py
@@ -976,6 +976,92 @@ class DictTest(unittest.TestCase):
         support.check_free_after_iterating(self, lambda d: iter(d.values()), dict)
         support.check_free_after_iterating(self, lambda d: iter(d.items()), dict)
 
+    def test_equal_operator_modifying_operand(self):
+        # test fix for seg fault reported in issue 27945 part 3.
+        class X():
+            def __del__(self):
+                dict_b.clear()
+
+            def __eq__(self, other):
+                dict_a.clear()
+                return True
+
+            def __hash__(self):
+                return 13
+
+        dict_a = {X(): 0}
+        dict_b = {X(): X()}
+        self.assertTrue(dict_a == dict_b)
+
+    def test_fromkeys_operator_modifying_dict_operand(self):
+        # test fix for seg fault reported in issue 27945 part 4a.
+        class X(int):
+            def __hash__(self):
+                return 13
+
+            def __eq__(self, other):
+                if len(d) > 1:
+                    d.clear()
+                return False
+
+        d = {}  # this is required to exist so that d can be constructed!
+        d = {X(1): 1, X(2): 2}
+        try:
+            dict.fromkeys(d)  # shouldn't crash
+        except RuntimeError:  # implementation defined
+            pass
+
+    def test_fromkeys_operator_modifying_set_operand(self):
+        # test fix for seg fault reported in issue 27945 part 4b.
+        class X(int):
+            def __hash__(self):
+                return 13
+
+            def __eq__(self, other):
+                if len(d) > 1:
+                    d.clear()
+                return False
+
+        d = {}  # this is required to exist so that d can be constructed!
+        d = {X(1), X(2)}
+        try:
+            dict.fromkeys(d)  # shouldn't crash
+        except RuntimeError:  # implementation defined
+            pass
+
+    def test_dictitems_contains_use_after_free(self):
+        class X:
+            def __eq__(self, other):
+                d.clear()
+                return NotImplemented
+
+        d = {0: set()}
+        (0, X()) in d.items()
+
+    def test_init_use_after_free(self):
+        class X:
+            def __hash__(self):
+                pair[:] = []
+                return 13
+
+        pair = [X(), 123]
+        dict([pair])
+
+    def test_oob_indexing_dictiter_iternextitem(self):
+        class X(int):
+            def __del__(self):
+                d.clear()
+
+        d = {i: X(i) for i in range(8)}
+
+        def iter_and_mutate():
+            for result in d.items():
+                if result[0] == 2:
+                    d[2] = None # free d[2] --> X(2).__del__ was called
+
+        self.assertRaises(RuntimeError, iter_and_mutate)
+
+
 from test import mapping_tests
 
 class GeneralMappingTests(mapping_tests.BasicTestMappingProtocol):
diff --git a/Lib/test/test_eintr.py b/Lib/test/test_eintr.py
index aabad83..25f86d3 100644
--- a/Lib/test/test_eintr.py
+++ b/Lib/test/test_eintr.py
@@ -1,7 +1,5 @@
 import os
 import signal
-import subprocess
-import sys
 import unittest
 
 from test import support
@@ -16,14 +14,8 @@ class EINTRTests(unittest.TestCase):
         # Run the tester in a sub-process, to make sure there is only one
         # thread (for reliable signal delivery).
         tester = support.findfile("eintr_tester.py", subdir="eintrdata")
-
-        if support.verbose:
-            args = [sys.executable, tester]
-            with subprocess.Popen(args) as proc:
-                exitcode = proc.wait()
-            self.assertEqual(exitcode, 0)
-        else:
-            script_helper.assert_python_ok(tester)
+        # use -u to try to get the full output if the test hangs or crash
+        script_helper.assert_python_ok("-u", tester)
 
 
 if __name__ == "__main__":
diff --git a/Lib/test/test_exceptions.py b/Lib/test/test_exceptions.py
index 96c3a48..12cf7b8 100644
--- a/Lib/test/test_exceptions.py
+++ b/Lib/test/test_exceptions.py
@@ -1,5 +1,6 @@
 # Python test set -- part 5, built-in exceptions
 
+import copy
 import os
 import sys
 import unittest
@@ -1120,6 +1121,25 @@ class ImportErrorTests(unittest.TestCase):
             exc = ImportError(arg)
             self.assertEqual(str(arg), str(exc))
 
+    def test_copy_pickle(self):
+        for kwargs in (dict(),
+                       dict(name='somename'),
+                       dict(path='somepath'),
+                       dict(name='somename', path='somepath')):
+            orig = ImportError('test', **kwargs)
+            for proto in range(pickle.HIGHEST_PROTOCOL + 1):
+                exc = pickle.loads(pickle.dumps(orig, proto))
+                self.assertEqual(exc.args, ('test',))
+                self.assertEqual(exc.msg, 'test')
+                self.assertEqual(exc.name, orig.name)
+                self.assertEqual(exc.path, orig.path)
+            for c in copy.copy, copy.deepcopy:
+                exc = c(orig)
+                self.assertEqual(exc.args, ('test',))
+                self.assertEqual(exc.msg, 'test')
+                self.assertEqual(exc.name, orig.name)
+                self.assertEqual(exc.path, orig.path)
+
 
 if __name__ == '__main__':
     unittest.main()
diff --git a/Lib/test/test_extcall.py b/Lib/test/test_extcall.py
index 9cb0d38..94501de 100644
--- a/Lib/test/test_extcall.py
+++ b/Lib/test/test_extcall.py
@@ -52,15 +52,15 @@ Here we add keyword arguments
     >>> f(1, 2, **{'a': -1, 'b': 5}, **{'a': 4, 'c': 6})
     Traceback (most recent call last):
         ...
-    TypeError: f() got multiple values for keyword argument 'a'
+    TypeError: function got multiple values for keyword argument 'a'
     >>> f(1, 2, **{'a': -1, 'b': 5}, a=4, c=6)
     Traceback (most recent call last):
         ...
-    TypeError: f() got multiple values for keyword argument 'a'
+    TypeError: function got multiple values for keyword argument 'a'
     >>> f(1, 2, a=3, **{'a': 4}, **{'a': 5})
     Traceback (most recent call last):
         ...
-    TypeError: f() got multiple values for keyword argument 'a'
+    TypeError: function got multiple values for keyword argument 'a'
     >>> f(1, 2, 3, *[4, 5], **{'a':6, 'b':7})
     (1, 2, 3, 4, 5) {'a': 6, 'b': 7}
     >>> f(1, 2, 3, x=4, y=5, *(6, 7), **{'a':8, 'b': 9})
diff --git a/Lib/test/test_fileio.py b/Lib/test/test_fileio.py
index 12f2f11..1bc1847 100644
--- a/Lib/test/test_fileio.py
+++ b/Lib/test/test_fileio.py
@@ -9,7 +9,8 @@ from array import array
 from weakref import proxy
 from functools import wraps
 
-from test.support import TESTFN, check_warnings, run_unittest, make_bad_fd, cpython_only
+from test.support import (TESTFN, check_warnings, run_unittest,
+                          make_bad_fd, cpython_only, swap_attr)
 from collections import UserList
 
 import _io  # C implementation of io
@@ -175,6 +176,12 @@ class AutoFileTests:
         finally:
             os.close(fd)
 
+    def testRecursiveRepr(self):
+        # Issue #25455
+        with swap_attr(self.f, 'name', self.f):
+            with self.assertRaises(RuntimeError):
+                repr(self.f)  # Should not crash
+
     def testErrors(self):
         f = self.f
         self.assertFalse(f.isatty())
diff --git a/Lib/test/test_float.py b/Lib/test/test_float.py
index cb1f6db..28b6954 100644
--- a/Lib/test/test_float.py
+++ b/Lib/test/test_float.py
@@ -98,15 +98,27 @@ class GeneralFloatCases(unittest.TestCase):
         self.assertEqual(float(memoryview(b'12.34')[1:4]), 2.3)
 
     def test_error_message(self):
-        testlist = ('\xbd', '123\xbd', '  123 456  ')
-        for s in testlist:
-            try:
+        def check(s):
+            with self.assertRaises(ValueError, msg='float(%r)' % (s,)) as cm:
                 float(s)
-            except ValueError as e:
-                self.assertIn(s.strip(), e.args[0])
-            else:
-                self.fail("Expected int(%r) to raise a ValueError", s)
-
+            self.assertEqual(str(cm.exception),
+                'could not convert string to float: %r' % (s,))
+
+        check('\xbd')
+        check('123\xbd')
+        check('  123 456  ')
+        check(b'  123 456  ')
+
+        # non-ascii digits (error came from non-digit '!')
+        check('\u0663\u0661\u0664!')
+        # embedded NUL
+        check('123\x00')
+        check('123\x00 245')
+        check('123\x00245')
+        # byte string with embedded NUL
+        check(b'123\x00')
+        # non-UTF-8 byte string
+        check(b'123\xa0')
 
     @support.run_with_locale('LC_NUMERIC', 'fr_FR', 'de_DE')
     def test_float_with_comma(self):
diff --git a/Lib/test/test_fnmatch.py b/Lib/test/test_fnmatch.py
index fa37f90..e37e4f5 100644
--- a/Lib/test/test_fnmatch.py
+++ b/Lib/test/test_fnmatch.py
@@ -1,18 +1,19 @@
 """Test cases for the fnmatch module."""
 
 import unittest
+import os
 
 from fnmatch import fnmatch, fnmatchcase, translate, filter
 
 class FnmatchTestCase(unittest.TestCase):
 
-    def check_match(self, filename, pattern, should_match=1, fn=fnmatch):
+    def check_match(self, filename, pattern, should_match=True, fn=fnmatch):
         if should_match:
             self.assertTrue(fn(filename, pattern),
                          "expected %r to match pattern %r"
                          % (filename, pattern))
         else:
-            self.assertTrue(not fn(filename, pattern),
+            self.assertFalse(fn(filename, pattern),
                          "expected %r not to match pattern %r"
                          % (filename, pattern))
 
@@ -26,15 +27,15 @@ class FnmatchTestCase(unittest.TestCase):
         check('abc', '*')
         check('abc', 'ab[cd]')
         check('abc', 'ab[!de]')
-        check('abc', 'ab[de]', 0)
-        check('a', '??', 0)
-        check('a', 'b', 0)
+        check('abc', 'ab[de]', False)
+        check('a', '??', False)
+        check('a', 'b', False)
 
         # these test that '\' is handled correctly in character sets;
         # see SF bug #409651
         check('\\', r'[\]')
         check('a', r'[!\]')
-        check('\\', r'[!\]', 0)
+        check('\\', r'[!\]', False)
 
         # test that filenames with newlines in them are handled correctly.
         # http://bugs.python.org/issue6665
@@ -51,14 +52,38 @@ class FnmatchTestCase(unittest.TestCase):
 
     def test_fnmatchcase(self):
         check = self.check_match
-        check('AbC', 'abc', 0, fnmatchcase)
-        check('abc', 'AbC', 0, fnmatchcase)
+        check('abc', 'abc', True, fnmatchcase)
+        check('AbC', 'abc', False, fnmatchcase)
+        check('abc', 'AbC', False, fnmatchcase)
+        check('AbC', 'AbC', True, fnmatchcase)
+
+        check('usr/bin', 'usr/bin', True, fnmatchcase)
+        check('usr\\bin', 'usr/bin', False, fnmatchcase)
+        check('usr/bin', 'usr\\bin', False, fnmatchcase)
+        check('usr\\bin', 'usr\\bin', True, fnmatchcase)
 
     def test_bytes(self):
         self.check_match(b'test', b'te*')
         self.check_match(b'test\xff', b'te*\xff')
         self.check_match(b'foo\nbar', b'foo*')
 
+    def test_case(self):
+        ignorecase = os.path.normcase('ABC') == os.path.normcase('abc')
+        check = self.check_match
+        check('abc', 'abc')
+        check('AbC', 'abc', ignorecase)
+        check('abc', 'AbC', ignorecase)
+        check('AbC', 'AbC')
+
+    def test_sep(self):
+        normsep = os.path.normcase('\\') == os.path.normcase('/')
+        check = self.check_match
+        check('usr/bin', 'usr/bin')
+        check('usr\\bin', 'usr/bin', normsep)
+        check('usr/bin', 'usr\\bin', normsep)
+        check('usr\\bin', 'usr\\bin')
+
+
 class TranslateTestCase(unittest.TestCase):
 
     def test_translate(self):
@@ -75,7 +100,28 @@ class TranslateTestCase(unittest.TestCase):
 class FilterTestCase(unittest.TestCase):
 
     def test_filter(self):
-        self.assertEqual(filter(['a', 'b'], 'a'), ['a'])
+        self.assertEqual(filter(['Python', 'Ruby', 'Perl', 'Tcl'], 'P*'),
+                         ['Python', 'Perl'])
+        self.assertEqual(filter([b'Python', b'Ruby', b'Perl', b'Tcl'], b'P*'),
+                         [b'Python', b'Perl'])
+
+    def test_mix_bytes_str(self):
+        self.assertRaises(TypeError, filter, ['test'], b'*')
+        self.assertRaises(TypeError, filter, [b'test'], '*')
+
+    def test_case(self):
+        ignorecase = os.path.normcase('P') == os.path.normcase('p')
+        self.assertEqual(filter(['Test.py', 'Test.rb', 'Test.PL'], '*.p*'),
+                         ['Test.py', 'Test.PL'] if ignorecase else ['Test.py'])
+        self.assertEqual(filter(['Test.py', 'Test.rb', 'Test.PL'], '*.P*'),
+                         ['Test.py', 'Test.PL'] if ignorecase else ['Test.PL'])
+
+    def test_sep(self):
+        normsep = os.path.normcase('\\') == os.path.normcase('/')
+        self.assertEqual(filter(['usr/bin', 'usr', 'usr\\lib'], 'usr/*'),
+                         ['usr/bin', 'usr\\lib'] if normsep else ['usr/bin'])
+        self.assertEqual(filter(['usr/bin', 'usr', 'usr\\lib'], 'usr\\*'),
+                         ['usr/bin', 'usr\\lib'] if normsep else ['usr\\lib'])
 
 
 if __name__ == "__main__":
diff --git a/Lib/test/test_functools.py b/Lib/test/test_functools.py
index b431e05..04ffab9 100644
--- a/Lib/test/test_functools.py
+++ b/Lib/test/test_functools.py
@@ -7,6 +7,7 @@ import pickle
 from random import choice
 import sys
 from test import support
+import time
 import unittest
 from weakref import proxy
 try:
@@ -79,6 +80,15 @@ class TestPartial:
         p(b=7)
         self.assertEqual(d, {'a':3})
 
+    def test_kwargs_copy(self):
+        # Issue #29532: Altering a kwarg dictionary passed to a constructor
+        # should not affect a partial object after creation
+        d = {'a': 3}
+        p = self.partial(capture, **d)
+        self.assertEqual(p(), ((), {'a': 3}))
+        d['a'] = 5
+        self.assertEqual(p(), ((), {'a': 3}))
+
     def test_arg_combinations(self):
         # exercise special code paths for zero args in either partial
         # object or the caller
@@ -377,6 +387,32 @@ class TestPartialC(TestPartial, unittest.TestCase):
         self.assertRaises(TypeError, f.__setstate__, BadSequence())
 
 
+    def test_manually_adding_non_string_keyword(self):
+        p = self.partial(capture)
+        # Adding a non-string/unicode keyword to partial kwargs
+        p.keywords[1234] = 'value'
+        r = repr(p)
+        self.assertIn('1234', r)
+        self.assertIn("'value'", r)
+        with self.assertRaises(TypeError):
+            p()
+
+    def test_keystr_replaces_value(self):
+        p = self.partial(capture)
+
+        class MutatesYourDict(object):
+            def __str__(self):
+                p.keywords[self] = ['sth2']
+                return 'astr'
+
+        # Raplacing the value during key formatting should keep the original
+        # value alive (at least long enough).
+        p.keywords[MutatesYourDict()] = ['sth']
+        r = repr(p)
+        self.assertIn('astr', r)
+        self.assertIn("['sth']", r)
+
+
 class TestPartialPy(TestPartial, unittest.TestCase):
     partial = staticmethod(py_functools.partial)
 
@@ -1364,6 +1400,20 @@ class TestLRU:
                 pause.reset()
                 self.assertEqual(f.cache_info(), (0, (i+1)*n, m*n, i+1))
 
+    @unittest.skipUnless(threading, 'This test requires threading.')
+    def test_lru_cache_threaded3(self):
+        @self.module.lru_cache(maxsize=2)
+        def f(x):
+            time.sleep(.01)
+            return 3 * x
+        def test(i, x):
+            with self.subTest(thread=i):
+                self.assertEqual(f(x), 3 * x, i)
+        threads = [threading.Thread(target=test, args=(i, v))
+                   for i, v in enumerate([1, 2, 2, 3, 2])]
+        with support.start_threads(threads):
+            pass
+
     def test_need_for_rlock(self):
         # This will deadlock on an LRU cache that uses a regular lock
 
diff --git a/Lib/test/test_idle.py b/Lib/test/test_idle.py
index 141e89e..7df98ff 100644
--- a/Lib/test/test_idle.py
+++ b/Lib/test/test_idle.py
@@ -2,15 +2,18 @@ import unittest
 from test import support
 from test.support import import_module
 
-# Skip test if _thread or _tkinter wasn't built or idlelib was deleted.
+# Skip test if _thread or _tkinter wasn't built, or idlelib is missing,
+# or if tcl/tk version before 8.5, which is needed for ttk widgets.
+
 import_module('threading')  # imported by PyShell, imports _thread
 tk = import_module('tkinter')  # imports _tkinter
-idletest = import_module('idlelib.idle_test')
+idlelib = import_module('idlelib')
+idlelib.testing = True  # Avoid locale-changed test error
 
-# Without test_main present, regrtest.runtest_inner (line1219) calls
-# unittest.TestLoader().loadTestsFromModule(this_module) which calls
-# load_tests() if it finds it. (Unittest.main does the same.)
-load_tests = idletest.load_tests
+# Without test_main present, test.libregrtest.runtest.runtest_inner
+# calls (line 173) unittest.TestLoader().loadTestsFromModule(module)
+# which calls load_tests() if it finds it. (Unittest.main does the same.)
+from idlelib.idle_test import load_tests
 
 if __name__ == '__main__':
     unittest.main(verbosity=2, exit=False)
diff --git a/Lib/test/test_imaplib.py b/Lib/test/test_imaplib.py
index 6e4a90f..7a821f3 100644
--- a/Lib/test/test_imaplib.py
+++ b/Lib/test/test_imaplib.py
@@ -477,7 +477,7 @@ class NewIMAPTests(NewIMAPTestsMixin, unittest.TestCase):
 
 @unittest.skipUnless(ssl, "SSL not available")
 class NewIMAPSSLTests(NewIMAPTestsMixin, unittest.TestCase):
-    imap_class = imaplib.IMAP4_SSL
+    imap_class = IMAP4_SSL
     server_class = SecureTCPServer
 
     def test_ssl_raises(self):
@@ -917,11 +917,17 @@ class RemoteIMAP_SSLTest(RemoteIMAPTest):
             _server = self.imap_class(self.host, self.port)
             self.check_logincapa(_server)
 
+    @unittest.skipIf(True,
+                     "bpo-30175: FIXME: cyrus.andrew.cmu.edu doesn't accept "
+                     "our randomly generated client x509 certificate anymore")
     def test_logincapa_with_client_certfile(self):
         with transient_internet(self.host):
             _server = self.imap_class(self.host, self.port, certfile=CERTFILE)
             self.check_logincapa(_server)
 
+    @unittest.skipIf(True,
+                     "bpo-30175: FIXME: cyrus.andrew.cmu.edu doesn't accept "
+                     "our randomly generated client x509 certificate anymore")
     def test_logincapa_with_client_ssl_context(self):
         with transient_internet(self.host):
             _server = self.imap_class(
diff --git a/Lib/test/test_import/__init__.py b/Lib/test/test_import/__init__.py
index 1e33274..5d8b562 100644
--- a/Lib/test/test_import/__init__.py
+++ b/Lib/test/test_import/__init__.py
@@ -555,7 +555,7 @@ class PathsTests(unittest.TestCase):
         try:
             os.listdir(unc)
         except OSError as e:
-            if e.errno in (errno.EPERM, errno.EACCES):
+            if e.errno in (errno.EPERM, errno.EACCES, errno.ENOENT):
                 # See issue #15338
                 self.skipTest("cannot access administrative share %r" % (unc,))
             raise
diff --git a/Lib/test/test_importlib/source/test_file_loader.py b/Lib/test/test_importlib/source/test_file_loader.py
index 73f4c62..6d5a886 100644
--- a/Lib/test/test_importlib/source/test_file_loader.py
+++ b/Lib/test/test_importlib/source/test_file_loader.py
@@ -603,5 +603,109 @@ class SourcelessLoaderBadBytecodeTestPEP302(SourcelessLoaderBadBytecodeTest,
                     util=importlib_util)
 
 
+###########################################################################
+# Issue #29537: Test backwards compatibility with legacy 3.5.0/1/2 bytecode
+###########################################################################
+
+class LegacyBytecodeTest:
+
+    def _test_legacy_magic(self, test, *, del_source=False):
+        # Replace the default magic number with one copied from a pyc file
+        # generated by Python 3.5.2
+        with util.create_modules('_temp') as mapping:
+            bc_path = self.manipulate_bytecode('_temp', mapping,
+                                    lambda bc: b'\x16\r\r\n' + bc[4:])
+            test('_temp', mapping, bc_path)
+
+LegacyBytecodeTestPEP451 = BadBytecodeTestPEP451
+LegacyBytecodeTestPEP302 = BadBytecodeTestPEP302
+
+# SourceLoader via both PEP 451 and 302 hooks
+
+class SourceLoaderLegacyBytecodeTest(LegacyBytecodeTest):
+
+    @classmethod
+    def setUpClass(cls):
+        cls.loader = cls.machinery.SourceFileLoader
+
+    @util.writes_bytecode_files
+    def test_legacy_magic(self):
+        # The magic number from 3.5.0/1/2 should be accepted as is
+        def test(name, mapping, bytecode_path):
+            self.import_(mapping[name], name)
+            with open(bytecode_path, 'rb') as bytecode_file:
+                self.assertEqual(bytecode_file.read(4),
+                                 self.util._BACKCOMPAT_MAGIC_NUMBER)
+
+        self._test_legacy_magic(test)
+
+
+class SourceLoaderLegacyBytecodeTestPEP451(
+        SourceLoaderLegacyBytecodeTest, LegacyBytecodeTestPEP451):
+    pass
+
+
+(Frozen_SourceLegacyBytecodePEP451,
+ Source_SourceLegacyBytecodePEP451
+ ) = util.test_both(SourceLoaderLegacyBytecodeTestPEP451, importlib=importlib,
+                    machinery=machinery, abc=importlib_abc,
+                    util=importlib_util)
+
+
+class SourceLoaderLegacyBytecodeTestPEP302(
+        SourceLoaderLegacyBytecodeTest, LegacyBytecodeTestPEP302):
+    pass
+
+
+(Frozen_SourceLegacyBytecodePEP302,
+ Source_SourceLegacyBytecodePEP302
+ ) = util.test_both(SourceLoaderLegacyBytecodeTestPEP302, importlib=importlib,
+                    machinery=machinery, abc=importlib_abc,
+                    util=importlib_util)
+
+# SourcelessLoader via both PEP 451 and 302 hooks
+
+class SourcelessLoaderLegacyBytecodeTest(LegacyBytecodeTest):
+
+    @classmethod
+    def setUpClass(cls):
+        cls.loader = cls.machinery.SourcelessFileLoader
+
+
+    @util.writes_bytecode_files
+    def test_legacy_magic(self):
+        # The magic number from 3.5.0/1/2 should be accepted as is
+        def test(name, mapping, bytecode_path):
+            self.import_(bytecode_path, name)
+            with open(bytecode_path, 'rb') as bytecode_file:
+                self.assertEqual(bytecode_file.read(4),
+                                 self.util._BACKCOMPAT_MAGIC_NUMBER)
+
+        self._test_legacy_magic(test)
+
+class SourcelessLoaderLegacyBytecodeTestPEP451(
+        SourcelessLoaderLegacyBytecodeTest, LegacyBytecodeTestPEP451):
+    pass
+
+(Frozen_SourcelessLegacyBytecodePEP451,
+ Source_SourcelessLegacyBytecodePEP451
+ ) = util.test_both(SourcelessLoaderLegacyBytecodeTestPEP451, importlib=importlib,
+                    machinery=machinery, abc=importlib_abc,
+                    util=importlib_util)
+
+
+class SourcelessLoaderLegacyBytecodeTestPEP302(SourcelessLoaderLegacyBytecodeTest,
+        LegacyBytecodeTestPEP302):
+    pass
+
+
+(Frozen_SourcelessLegacyBytecodePEP302,
+ Source_SourcelessLegacyBytecodePEP302
+ ) = util.test_both(SourcelessLoaderLegacyBytecodeTestPEP302, importlib=importlib,
+                    machinery=machinery, abc=importlib_abc,
+                    util=importlib_util)
+
+# End of Issue #29537 legacy bytecode compatibility tests
+
 if __name__ == '__main__':
     unittest.main()
diff --git a/Lib/test/test_inspect.py b/Lib/test/test_inspect.py
index d33de9e..2283000 100644
--- a/Lib/test/test_inspect.py
+++ b/Lib/test/test_inspect.py
@@ -376,6 +376,11 @@ class TestRetrievingSourceCode(GetSourceBase):
     def test_getcomments(self):
         self.assertEqual(inspect.getcomments(mod), '# line 1\n')
         self.assertEqual(inspect.getcomments(mod.StupidGit), '# line 20\n')
+        # If the object source file is not available, return None.
+        co = compile('x=1', '_non_existing_filename.py', 'exec')
+        self.assertIsNone(inspect.getcomments(co))
+        # If the object has been defined in C, return None.
+        self.assertIsNone(inspect.getcomments(list))
 
     def test_getmodule(self):
         # Check actual module
diff --git a/Lib/test/test_io.py b/Lib/test/test_io.py
index 5111882..8b4892b 100644
--- a/Lib/test/test_io.py
+++ b/Lib/test/test_io.py
@@ -536,6 +536,22 @@ class IOTest(unittest.TestCase):
         with self.open(support.TESTFN, "r") as f:
             self.assertRaises(TypeError, f.readline, 5.3)
 
+    def test_readline_nonsizeable(self):
+        # Issue #30061
+        # Crash when readline() returns an object without __len__
+        class R(self.IOBase):
+            def readline(self):
+                return None
+        self.assertRaises((TypeError, StopIteration), next, R())
+
+    def test_next_nonsizeable(self):
+        # Issue #30061
+        # Crash when __next__() returns an object without __len__
+        class R(self.IOBase):
+            def __next__(self):
+                return None
+        self.assertRaises(TypeError, R().readlines, 1)
+
     def test_raw_bytes_io(self):
         f = self.BytesIO()
         self.write_ops(f)
@@ -981,6 +997,16 @@ class CommonBufferedTests:
         raw.name = b"dummy"
         self.assertEqual(repr(b), "<%s name=b'dummy'>" % clsname)
 
+    def test_recursive_repr(self):
+        # Issue #25455
+        raw = self.MockRawIO()
+        b = self.tp(raw)
+        with support.swap_attr(raw, 'name', b):
+            try:
+                repr(b)  # Should not crash
+            except RuntimeError:
+                pass
+
     def test_flush_error_on_close(self):
         # Test that buffered file is closed despite failed flush
         # and that flush() is called before file closed.
@@ -2391,6 +2417,16 @@ class TextIOWrapperTest(unittest.TestCase):
         t.buffer.detach()
         repr(t)  # Should not raise an exception
 
+    def test_recursive_repr(self):
+        # Issue #25455
+        raw = self.BytesIO()
+        t = self.TextIOWrapper(raw)
+        with support.swap_attr(raw, 'name', t):
+            try:
+                repr(t)  # Should not crash
+            except RuntimeError:
+                pass
+
     def test_line_buffering(self):
         r = self.BytesIO()
         b = self.BufferedWriter(r, 1000)
@@ -3446,6 +3482,7 @@ class MiscIOTest(unittest.TestCase):
                 self.assertRaises(ValueError, f.readinto1, bytearray(1024))
             self.assertRaises(ValueError, f.readline)
             self.assertRaises(ValueError, f.readlines)
+            self.assertRaises(ValueError, f.readlines, 1)
             self.assertRaises(ValueError, f.seek, 0)
             self.assertRaises(ValueError, f.tell)
             self.assertRaises(ValueError, f.truncate)
@@ -3651,6 +3688,7 @@ class CMiscIOTest(MiscIOTest):
             import sys
             import time
             import threading
+            from test.support import SuppressCrashReport
 
             file = sys.{stream_name}
 
@@ -3659,6 +3697,10 @@ class CMiscIOTest(MiscIOTest):
                     file.write('.')
                     file.flush()
 
+            crash = SuppressCrashReport()
+            crash.__enter__()
+            # don't call __exit__(): the crash occurs at Python shutdown
+
             thread = threading.Thread(target=run)
             thread.daemon = True
             thread.start()
diff --git a/Lib/test/test_itertools.py b/Lib/test/test_itertools.py
index e054303..b8399fc 100644
--- a/Lib/test/test_itertools.py
+++ b/Lib/test/test_itertools.py
@@ -1943,6 +1943,14 @@ class RegressionTests(unittest.TestCase):
         self.assertRaises(AssertionError, list, cycle(gen1()))
         self.assertEqual(hist, [0,1])
 
+    def test_long_chain_of_empty_iterables(self):
+        # Make sure itertools.chain doesn't run into recursion limits when
+        # dealing with long chains of empty iterables. Even with a high
+        # number this would probably only fail in Py_DEBUG mode.
+        it = chain.from_iterable(() for unused in range(10000000))
+        with self.assertRaises(StopIteration):
+            next(it)
+
 class SubclassWithKwargsTest(unittest.TestCase):
     def test_keywords_in_subclass(self):
         # count is not subclassable...
diff --git a/Lib/test/test_logging.py b/Lib/test/test_logging.py
index 0e70ccd..382714f 100644
--- a/Lib/test/test_logging.py
+++ b/Lib/test/test_logging.py
@@ -308,6 +308,14 @@ class BuiltinLevelsTest(BaseTest):
         self.assertEqual(logging.getLevelName('INFO'), logging.INFO)
         self.assertEqual(logging.getLevelName(logging.INFO), 'INFO')
 
+    def test_regression_29220(self):
+        """See issue #29220 for more information."""
+        logging.addLevelName(logging.INFO, '')
+        self.addCleanup(logging.addLevelName, logging.INFO, 'INFO')
+        self.assertEqual(logging.getLevelName(logging.INFO), '')
+        self.assertEqual(logging.getLevelName(logging.NOTSET), 'NOTSET')
+        self.assertEqual(logging.getLevelName('NOTSET'), logging.NOTSET)
+
 class BasicFilterTest(BaseTest):
 
     """Test the bundled Filter class."""
@@ -1563,7 +1571,7 @@ class SysLogHandlerTest(BaseTest):
         server.ready.wait()
         hcls = logging.handlers.SysLogHandler
         if isinstance(server.server_address, tuple):
-            self.sl_hdlr = hcls(('localhost', server.port))
+            self.sl_hdlr = hcls((server.server_address[0], server.port))
         else:
             self.sl_hdlr = hcls(server.server_address)
         self.log_output = ''
@@ -1619,6 +1627,24 @@ class UnixSysLogHandlerTest(SysLogHandlerTest):
         SysLogHandlerTest.tearDown(self)
         os.remove(self.address)
 
+@unittest.skipUnless(support.IPV6_ENABLED,
+                     'IPv6 support required for this test.')
+@unittest.skipUnless(threading, 'Threading required for this test.')
+class IPv6SysLogHandlerTest(SysLogHandlerTest):
+
+    """Test for SysLogHandler with IPv6 host."""
+
+    server_class = TestUDPServer
+    address = ('::1', 0)
+
+    def setUp(self):
+        self.server_class.address_family = socket.AF_INET6
+        super(IPv6SysLogHandlerTest, self).setUp()
+
+    def tearDown(self):
+        self.server_class.address_family = socket.AF_INET
+        super(IPv6SysLogHandlerTest, self).tearDown()
+
 @unittest.skipUnless(threading, 'Threading required for this test.')
 class HTTPHandlerTest(BaseTest):
     """Test for HTTPHandler."""
@@ -3059,6 +3085,7 @@ if hasattr(logging.handlers, 'QueueListener'):
             handler.close()
 
         @patch.object(logging.handlers.QueueListener, 'handle')
+        @support.reap_threads
         def test_handle_called_with_queue_queue(self, mock_handle):
             for i in range(self.repeat):
                 log_queue = queue.Queue()
@@ -3068,10 +3095,13 @@ if hasattr(logging.handlers, 'QueueListener'):
 
         @support.requires_multiprocessing_queue
         @patch.object(logging.handlers.QueueListener, 'handle')
+        @support.reap_threads
         def test_handle_called_with_mp_queue(self, mock_handle):
             for i in range(self.repeat):
                 log_queue = multiprocessing.Queue()
                 self.setup_and_log(log_queue, '%s_%s' % (self.id(), i))
+                log_queue.close()
+                log_queue.join_thread()
             self.assertEqual(mock_handle.call_count, 5 * self.repeat,
                              'correct number of handled log messages')
 
@@ -3084,6 +3114,7 @@ if hasattr(logging.handlers, 'QueueListener'):
                 return []
 
         @support.requires_multiprocessing_queue
+        @support.reap_threads
         def test_no_messages_in_queue_after_stop(self):
             """
             Five messages are logged then the QueueListener is stopped. This
@@ -3096,6 +3127,9 @@ if hasattr(logging.handlers, 'QueueListener'):
                 self.setup_and_log(queue, '%s_%s' %(self.id(), i))
                 # time.sleep(1)
                 items = list(self.get_all_from_queue(queue))
+                queue.close()
+                queue.join_thread()
+
                 expected = [[], [logging.handlers.QueueListener._sentinel]]
                 self.assertIn(items, expected,
                               'Found unexpected messages in queue: %s' % (
@@ -4255,7 +4289,7 @@ def test_main():
         QueueHandlerTest, ShutdownTest, ModuleLevelMiscTest, BasicConfigTest,
         LoggerAdapterTest, LoggerTest, SMTPHandlerTest, FileHandlerTest,
         RotatingFileHandlerTest,  LastResortTest, LogRecordTest,
-        ExceptionTest, SysLogHandlerTest, HTTPHandlerTest,
+        ExceptionTest, SysLogHandlerTest, IPv6SysLogHandlerTest, HTTPHandlerTest,
         NTEventLogHandlerTest, TimedRotatingFileHandlerTest,
         UnixSocketHandlerTest, UnixDatagramHandlerTest, UnixSysLogHandlerTest,
     ]
diff --git a/Lib/test/test_nntplib.py b/Lib/test/test_nntplib.py
index 66ef930..22fb45a 100644
--- a/Lib/test/test_nntplib.py
+++ b/Lib/test/test_nntplib.py
@@ -286,7 +286,12 @@ class NetworkedNNTPTests(NetworkedNNTPTestsMixin, unittest.TestCase):
     def setUpClass(cls):
         support.requires("network")
         with support.transient_internet(cls.NNTP_HOST):
-            cls.server = cls.NNTP_CLASS(cls.NNTP_HOST, timeout=TIMEOUT, usenetrc=False)
+            try:
+                cls.server = cls.NNTP_CLASS(cls.NNTP_HOST, timeout=TIMEOUT,
+                                            usenetrc=False)
+            except EOFError:
+                raise unittest.SkipTest("%s got EOF error on connecting "
+                                        "to %r" % (cls, cls.NNTP_HOST))
 
     @classmethod
     def tearDownClass(cls):
diff --git a/Lib/test/test_parser.py b/Lib/test/test_parser.py
index ab6577f..42ce6b0 100644
--- a/Lib/test/test_parser.py
+++ b/Lib/test/test_parser.py
@@ -1,4 +1,6 @@
+import copy
 import parser
+import pickle
 import unittest
 import sys
 import operator
@@ -386,6 +388,52 @@ class IllegalSyntaxTestCase(unittest.TestCase):
         # not even remotely valid:
         self.check_bad_tree((1, 2, 3), "<junk>")
 
+    def test_illegal_terminal(self):
+        tree = \
+            (257,
+             (269,
+              (270,
+               (271,
+                (277,
+                 (1,))),
+               (4, ''))),
+             (4, ''),
+             (0, ''))
+        self.check_bad_tree(tree, "too small items in terminal node")
+        tree = \
+            (257,
+             (269,
+              (270,
+               (271,
+                (277,
+                 (1, b'pass'))),
+               (4, ''))),
+             (4, ''),
+             (0, ''))
+        self.check_bad_tree(tree, "non-string second item in terminal node")
+        tree = \
+            (257,
+             (269,
+              (270,
+               (271,
+                (277,
+                 (1, 'pass', '0', 0))),
+               (4, ''))),
+             (4, ''),
+             (0, ''))
+        self.check_bad_tree(tree, "non-integer third item in terminal node")
+        tree = \
+            (257,
+             (269,
+              (270,
+               (271,
+                (277,
+                 (1, 'pass', 0, 0))),
+               (4, ''))),
+             (4, ''),
+             (0, ''))
+        self.check_bad_tree(tree, "too many items in terminal node")
+
     def test_illegal_yield_1(self):
         # Illegal yield statement: def f(): return 1; yield 1
         tree = \
@@ -590,6 +638,24 @@ class IllegalSyntaxTestCase(unittest.TestCase):
              (4, ''), (0, ''))
         self.check_bad_tree(tree, "from import fred")
 
+    def test_illegal_encoding(self):
+        # Illegal encoding declaration
+        tree = \
+            (338,
+             (257, (0, '')))
+        self.check_bad_tree(tree, "missed encoding")
+        tree = \
+            (338,
+             (257, (0, '')),
+              b'iso-8859-1')
+        self.check_bad_tree(tree, "non-string encoding")
+        tree = \
+            (338,
+             (257, (0, '')),
+              '\udcff')
+        with self.assertRaises(UnicodeEncodeError):
+            parser.sequence2st(tree)
+
 
 class CompileTestCase(unittest.TestCase):
 
@@ -728,6 +794,21 @@ class STObjectTestCase(unittest.TestCase):
         self.assertRaises(TypeError, operator.lt, st1, 1815)
         self.assertRaises(TypeError, operator.gt, b'waterloo', st2)
 
+    def test_copy_pickle(self):
+        sts = [
+            parser.expr('2 + 3'),
+            parser.suite('x = 2; y = x + 3'),
+            parser.expr('list(x**3 for x in range(20))')
+        ]
+        for st in sts:
+            st_copy = copy.copy(st)
+            self.assertEqual(st_copy.totuple(), st.totuple())
+            st_copy = copy.deepcopy(st)
+            self.assertEqual(st_copy.totuple(), st.totuple())
+            for proto in range(pickle.HIGHEST_PROTOCOL+1):
+                st_copy = pickle.loads(pickle.dumps(st, proto))
+                self.assertEqual(st_copy.totuple(), st.totuple())
+
     check_sizeof = support.check_sizeof
 
     @support.cpython_only
diff --git a/Lib/test/test_pathlib.py b/Lib/test/test_pathlib.py
index fa96d9f..5e0708a 100644
--- a/Lib/test/test_pathlib.py
+++ b/Lib/test/test_pathlib.py
@@ -8,6 +8,7 @@ import socket
 import stat
 import tempfile
 import unittest
+from unittest import mock
 
 from test import support
 TESTFN = support.TESTFN
@@ -1727,6 +1728,22 @@ class _BasePathTest(object):
         self.assertTrue(p.exists())
         self.assertEqual(p.stat().st_ctime, st_ctime_first)
 
+    def test_mkdir_exist_ok_root(self):
+        # Issue #25803: A drive root could raise PermissionError on Windows
+        self.cls('/').resolve().mkdir(exist_ok=True)
+        self.cls('/').resolve().mkdir(parents=True, exist_ok=True)
+
+    @only_nt    # XXX: not sure how to test this on POSIX
+    def test_mkdir_with_unknown_drive(self):
+        for d in 'ZYXWVUTSRQPONMLKJIHGFEDCBA':
+            p = self.cls(d + ':\\')
+            if not p.is_dir():
+                break
+        else:
+            self.skipTest("cannot find a drive that doesn't exist")
+        with self.assertRaises(OSError):
+            (p / 'child' / 'path').mkdir(parents=True)
+
     def test_mkdir_with_child_file(self):
         p = self.cls(BASE, 'dirB', 'fileB')
         self.assertTrue(p.exists())
@@ -1751,6 +1768,35 @@ class _BasePathTest(object):
             p.mkdir(exist_ok=True)
         self.assertEqual(cm.exception.errno, errno.EEXIST)
 
+    def test_mkdir_concurrent_parent_creation(self):
+        for pattern_num in range(32):
+            p = self.cls(BASE, 'dirCPC%d' % pattern_num)
+            self.assertFalse(p.exists())
+
+            def my_mkdir(path, mode=0o777):
+                path = str(path)
+                # Emulate another process that would create the directory
+                # just before we try to create it ourselves.  We do it
+                # in all possible pattern combinations, assuming that this
+                # function is called at most 5 times (dirCPC/dir1/dir2,
+                # dirCPC/dir1, dirCPC, dirCPC/dir1, dirCPC/dir1/dir2).
+                if pattern.pop():
+                    os.mkdir(path, mode)      # from another process
+                    concurrently_created.add(path)
+                os.mkdir(path, mode)          # our real call
+
+            pattern = [bool(pattern_num & (1 << n)) for n in range(5)]
+            concurrently_created = set()
+            p12 = p / 'dir1' / 'dir2'
+            try:
+                with mock.patch("pathlib._normal_accessor.mkdir", my_mkdir):
+                    p12.mkdir(parents=True, exist_ok=False)
+            except FileExistsError:
+                self.assertIn(str(p12), concurrently_created)
+            else:
+                self.assertNotIn(str(p12), concurrently_created)
+            self.assertTrue(p.exists())
+
     @with_symlinks
     def test_symlink_to(self):
         P = self.cls(BASE)
diff --git a/Lib/test/test_platform.py b/Lib/test/test_platform.py
index 18de110..e16b9fa 100644
--- a/Lib/test/test_platform.py
+++ b/Lib/test/test_platform.py
@@ -66,12 +66,12 @@ class PlatformTest(unittest.TestCase):
 
     def setUp(self):
         self.save_version = sys.version
-        self.save_mercurial = sys._mercurial
+        self.save_git = sys._git
         self.save_platform = sys.platform
 
     def tearDown(self):
         sys.version = self.save_version
-        sys._mercurial = self.save_mercurial
+        sys._git = self.save_git
         sys.platform = self.save_platform
 
     def test_sys_version(self):
@@ -101,7 +101,7 @@ class PlatformTest(unittest.TestCase):
              ('CPython', '2.4.3', '', '', 'truncation', '', 'GCC')),
             ):
             # branch and revision are not "parsed", but fetched
-            # from sys._mercurial.  Ignore them
+            # from sys._git.  Ignore them
             (name, version, branch, revision, buildno, builddate, compiler) \
                    = platform._sys_version(input)
             self.assertEqual(
@@ -148,10 +148,10 @@ class PlatformTest(unittest.TestCase):
                 sys_versions.items():
             sys.version = version_tag
             if subversion is None:
-                if hasattr(sys, "_mercurial"):
-                    del sys._mercurial
+                if hasattr(sys, "_git"):
+                    del sys._git
             else:
-                sys._mercurial = subversion
+                sys._git = subversion
             if sys_platform is not None:
                 sys.platform = sys_platform
             self.assertEqual(platform.python_implementation(), info[0])
diff --git a/Lib/test/test_pow.py b/Lib/test/test_pow.py
index 6feac40..ba608fb 100644
--- a/Lib/test/test_pow.py
+++ b/Lib/test/test_pow.py
@@ -59,9 +59,6 @@ class PowTest(unittest.TestCase):
     def test_powint(self):
         self.powtest(int)
 
-    def test_powlong(self):
-        self.powtest(int)
-
     def test_powfloat(self):
         self.powtest(float)
 
diff --git a/Lib/test/test_random.py b/Lib/test/test_random.py
index e80ed17..83a663f 100644
--- a/Lib/test/test_random.py
+++ b/Lib/test/test_random.py
@@ -348,6 +348,7 @@ class MersenneTwister_TestBasicOps(TestBasicOps, unittest.TestCase):
         self.assertRaises(ValueError, self.gen.setstate, (1, None, None))
 
     def test_setstate_middle_arg(self):
+        start_state = self.gen.getstate()
         # Wrong type, s/b tuple
         self.assertRaises(TypeError, self.gen.setstate, (2, None, None))
         # Wrong length, s/b 625
@@ -361,6 +362,10 @@ class MersenneTwister_TestBasicOps(TestBasicOps, unittest.TestCase):
             self.gen.setstate((2, (1,)*624+(625,), None))
         with self.assertRaises((ValueError, OverflowError)):
             self.gen.setstate((2, (1,)*624+(-1,), None))
+        # Failed calls to setstate() should not have changed the state.
+        bits100 = self.gen.getrandbits(100)
+        self.gen.setstate(start_state)
+        self.assertEqual(self.gen.getrandbits(100), bits100)
 
         # Little trick to make "tuple(x % (2**32) for x in internalstate)"
         # raise ValueError. I cannot think of a simple way to achieve this, so
diff --git a/Lib/test/test_range.py b/Lib/test/test_range.py
index c022f07..90efa1a 100644
--- a/Lib/test/test_range.py
+++ b/Lib/test/test_range.py
@@ -98,20 +98,24 @@ class RangeTest(unittest.TestCase):
         x = range(10**20+10, 10**20, 3)
         self.assertEqual(len(x), 0)
         self.assertEqual(len(list(x)), 0)
+        self.assertFalse(x)
 
         x = range(10**20, 10**20+10, -3)
         self.assertEqual(len(x), 0)
         self.assertEqual(len(list(x)), 0)
+        self.assertFalse(x)
 
         x = range(10**20+10, 10**20, -3)
         self.assertEqual(len(x), 4)
         self.assertEqual(len(list(x)), 4)
+        self.assertTrue(x)
 
         # Now test range() with longs
-        self.assertEqual(list(range(-2**100)), [])
-        self.assertEqual(list(range(0, -2**100)), [])
-        self.assertEqual(list(range(0, 2**100, -1)), [])
-        self.assertEqual(list(range(0, 2**100, -1)), [])
+        for x in [range(-2**100),
+                  range(0, -2**100),
+                  range(0, 2**100, -1)]:
+            self.assertEqual(list(x), [])
+            self.assertFalse(x)
 
         a = int(10 * sys.maxsize)
         b = int(100 * sys.maxsize)
@@ -152,6 +156,7 @@ class RangeTest(unittest.TestCase):
                 step = x[1] - x[0]
                 length = 1 + ((x[-1] - x[0]) // step)
             return length
+
         a = -sys.maxsize
         b = sys.maxsize
         expected_len = b - a
@@ -159,6 +164,7 @@ class RangeTest(unittest.TestCase):
         self.assertIn(a, x)
         self.assertNotIn(b, x)
         self.assertRaises(OverflowError, len, x)
+        self.assertTrue(x)
         self.assertEqual(_range_len(x), expected_len)
         self.assertEqual(x[0], a)
         idx = sys.maxsize+1
@@ -176,6 +182,7 @@ class RangeTest(unittest.TestCase):
         self.assertIn(a, x)
         self.assertNotIn(b, x)
         self.assertRaises(OverflowError, len, x)
+        self.assertTrue(x)
         self.assertEqual(_range_len(x), expected_len)
         self.assertEqual(x[0], a)
         idx = sys.maxsize+1
@@ -194,6 +201,7 @@ class RangeTest(unittest.TestCase):
         self.assertIn(a, x)
         self.assertNotIn(b, x)
         self.assertRaises(OverflowError, len, x)
+        self.assertTrue(x)
         self.assertEqual(_range_len(x), expected_len)
         self.assertEqual(x[0], a)
         idx = sys.maxsize+1
@@ -212,6 +220,7 @@ class RangeTest(unittest.TestCase):
         self.assertIn(a, x)
         self.assertNotIn(b, x)
         self.assertRaises(OverflowError, len, x)
+        self.assertTrue(x)
         self.assertEqual(_range_len(x), expected_len)
         self.assertEqual(x[0], a)
         idx = sys.maxsize+1
diff --git a/Lib/test/test_re.py b/Lib/test/test_re.py
index 0834fe0..839bf27 100644
--- a/Lib/test/test_re.py
+++ b/Lib/test/test_re.py
@@ -638,14 +638,18 @@ class ReTests(unittest.TestCase):
         re.purge()  # for warnings
         for c in 'ceghijklmopqyzCEFGHIJKLMNOPQRTVXY':
             with self.subTest(c):
-                with self.assertWarns(DeprecationWarning):
+                with self.assertWarns(DeprecationWarning) as warns:
                     self.assertEqual(re.fullmatch('\\%c' % c, c).group(), c)
                     self.assertIsNone(re.match('\\%c' % c, 'a'))
+                self.assertRegex(str(warns.warnings[0].message), 'bad escape')
+                self.assertEqual(warns.warnings[0].filename, __file__)
         for c in 'ceghijklmopqyzABCEFGHIJKLMNOPQRTVXYZ':
             with self.subTest(c):
-                with self.assertWarns(DeprecationWarning):
+                with self.assertWarns(DeprecationWarning) as warns:
                     self.assertEqual(re.fullmatch('[\\%c]' % c, c).group(), c)
                     self.assertIsNone(re.match('[\\%c]' % c, 'a'))
+                self.assertRegex(str(warns.warnings[0].message), 'bad escape')
+                self.assertEqual(warns.warnings[0].filename, __file__)
 
     def test_string_boundaries(self):
         # See http://bugs.python.org/issue10713
@@ -1679,6 +1683,16 @@ SUBPATTERN None
         self.checkPatternError(r'(?<>)', 'unknown extension ?<>', 1)
         self.checkPatternError(r'(?', 'unexpected end of pattern', 2)
 
+    def test_bug_29444(self):
+        s = bytearray(b'abcdefgh')
+        m = re.search(b'[a-h]+', s)
+        m2 = re.search(b'[e-h]+', s)
+        self.assertEqual(m.group(), b'abcdefgh')
+        self.assertEqual(m2.group(), b'efgh')
+        s[:] = b'xyz'
+        self.assertEqual(m.group(), b'xyz')
+        self.assertEqual(m2.group(), b'')
+
 
 class PatternReprTests(unittest.TestCase):
     def check(self, pattern, expected):
diff --git a/Lib/test/test_sax.py b/Lib/test/test_sax.py
index 2411895..2eb6290 100644
--- a/Lib/test/test_sax.py
+++ b/Lib/test/test_sax.py
@@ -4,6 +4,7 @@
 from xml.sax import make_parser, ContentHandler, \
                     SAXException, SAXReaderNotAvailable, SAXParseException
 import unittest
+from unittest import mock
 try:
     make_parser()
 except SAXReaderNotAvailable:
@@ -175,12 +176,8 @@ class ParseTest(unittest.TestCase):
         with self.assertRaises(SAXException):
             self.check_parse(BytesIO(xml_bytes(self.data, 'iso-8859-1', None)))
         make_xml_file(self.data, 'iso-8859-1', None)
-        with support.check_warnings(('unclosed file', ResourceWarning)):
-            # XXX Failed parser leaks an opened file.
-            with self.assertRaises(SAXException):
-                self.check_parse(TESTFN)
-            # Collect leaked file.
-            gc.collect()
+        with self.assertRaises(SAXException):
+            self.check_parse(TESTFN)
         with open(TESTFN, 'rb') as f:
             with self.assertRaises(SAXException):
                 self.check_parse(f)
@@ -194,6 +191,21 @@ class ParseTest(unittest.TestCase):
             input.setEncoding('iso-8859-1')
             self.check_parse(input)
 
+    def test_parse_close_source(self):
+        builtin_open = open
+        fileobj = None
+
+        def mock_open(*args):
+            nonlocal fileobj
+            fileobj = builtin_open(*args)
+            return fileobj
+
+        with mock.patch('xml.sax.saxutils.open', side_effect=mock_open):
+            make_xml_file(self.data, 'iso-8859-1', None)
+            with self.assertRaises(SAXException):
+                self.check_parse(TESTFN)
+            self.assertTrue(fileobj.closed)
+
     def check_parseString(self, s):
         from xml.sax import parseString
         result = StringIO()
diff --git a/Lib/test/test_site.py b/Lib/test/test_site.py
index da20a3d..755eb9c 100644
--- a/Lib/test/test_site.py
+++ b/Lib/test/test_site.py
@@ -26,14 +26,27 @@ if sys.flags.no_site:
 
 import site
 
-if site.ENABLE_USER_SITE and not os.path.isdir(site.USER_SITE):
-    # need to add user site directory for tests
-    try:
-        os.makedirs(site.USER_SITE)
-        site.addsitedir(site.USER_SITE)
-    except PermissionError as exc:
-        raise unittest.SkipTest('unable to create user site directory (%r): %s'
-                                % (site.USER_SITE, exc))
+
+OLD_SYS_PATH = None
+
+
+def setUpModule():
+    global OLD_SYS_PATH
+    OLD_SYS_PATH = sys.path[:]
+
+    if site.ENABLE_USER_SITE and not os.path.isdir(site.USER_SITE):
+        # need to add user site directory for tests
+        try:
+            os.makedirs(site.USER_SITE)
+            # modify sys.path: will be restored by tearDownModule()
+            site.addsitedir(site.USER_SITE)
+        except PermissionError as exc:
+            raise unittest.SkipTest('unable to create user site directory (%r): %s'
+                                    % (site.USER_SITE, exc))
+
+
+def tearDownModule():
+    sys.path[:] = OLD_SYS_PATH
 
 
 class HelperFunctionsTests(unittest.TestCase):
diff --git a/Lib/test/test_socket.py b/Lib/test/test_socket.py
index ea3ca28..58c04d7 100644
--- a/Lib/test/test_socket.py
+++ b/Lib/test/test_socket.py
@@ -876,6 +876,7 @@ class GeneralModuleTests(unittest.TestCase):
             self.assertEqual(swapped & mask, mask)
             self.assertRaises(OverflowError, func, 1<<34)
 
+    @support.cpython_only
     def testNtoHErrors(self):
         good_values = [ 1, 2, 3, 1, 2, 3 ]
         bad_values = [ -1, -2, -3, -1, -2, -3 ]
@@ -2843,6 +2844,7 @@ class SCMRightsTest(SendrecvmsgServerTimeoutBase):
             nbytes = self.sendmsgToServer([msg])
         self.assertEqual(nbytes, len(msg))
 
+    @unittest.skipIf(sys.platform == "darwin", "skipping, see issue #24725")
     def testFDPassEmpty(self):
         # Try to pass an empty FD array.  Can receive either no array
         # or an empty array.
@@ -4588,6 +4590,10 @@ class TestUnixDomain(unittest.TestCase):
             else:
                 raise
 
+    def testUnbound(self):
+        # Issue #30205
+        self.assertIn(self.sock.getsockname(), (None, ''))
+
     def testStrAddr(self):
         # Test binding to and retrieving a normal string pathname.
         path = os.path.abspath(support.TESTFN)
@@ -4719,14 +4725,10 @@ def isTipcAvailable():
         return False
     try:
         f = open("/proc/modules")
-    except IOError as e:
+    except (FileNotFoundError, IsADirectoryError, PermissionError):
         # It's ok if the file does not exist, is a directory or if we
-        # have not the permission to read it. In any other case it's a
-        # real error, so raise it again.
-        if e.errno in (errno.ENOENT, errno.EISDIR, errno.EACCES):
-            return False
-        else:
-            raise
+        # have not the permission to read it.
+        return False
     with f:
         for line in f:
             if line.startswith("tipc "):
diff --git a/Lib/test/test_ssl.py b/Lib/test/test_ssl.py
index 5515583..ffb7314 100644
--- a/Lib/test/test_ssl.py
+++ b/Lib/test/test_ssl.py
@@ -2034,7 +2034,7 @@ else:
 
         class EchoServer (asyncore.dispatcher):
 
-            class ConnectionHandler (asyncore.dispatcher_with_send):
+            class ConnectionHandler(asyncore.dispatcher_with_send):
 
                 def __init__(self, conn, certfile):
                     self.socket = ssl.wrap_socket(conn, server_side=True,
@@ -2125,6 +2125,8 @@ else:
             self.join()
             if support.verbose:
                 sys.stdout.write(" cleanup: successfully joined.\n")
+            # make sure that ConnectionHandler is removed from socket_map
+            asyncore.close_all(ignore_all=True)
 
         def start (self, flag=None):
             self.flag = flag
diff --git a/Lib/test/test_struct.py b/Lib/test/test_struct.py
index efbdbfc..9b8178f 100644
--- a/Lib/test/test_struct.py
+++ b/Lib/test/test_struct.py
@@ -428,6 +428,10 @@ class StructTest(unittest.TestCase):
             for i in range(6, len(test_string) + 1):
                 self.assertRaises(struct.error, struct.unpack_from, fmt, data, i)
 
+        # keyword arguments
+        self.assertEqual(s.unpack_from(buffer=test_string, offset=2),
+                         (b'cd01',))
+
     def test_pack_into(self):
         test_string = b'Reykjavik rocks, eow!'
         writable_buf = array.array('b', b' '*100)
diff --git a/Lib/test/test_subprocess.py b/Lib/test/test_subprocess.py
index 758e094..03a06e0 100644
--- a/Lib/test/test_subprocess.py
+++ b/Lib/test/test_subprocess.py
@@ -4,6 +4,7 @@ from test.support import script_helper
 from test import support
 import subprocess
 import sys
+import platform
 import signal
 import io
 import locale
@@ -21,6 +22,11 @@ import gc
 import textwrap
 
 try:
+    import ctypes
+except ImportError:
+    ctypes = None
+
+try:
     import threading
 except ImportError:
     threading = None
@@ -2365,7 +2371,7 @@ class POSIXProcessTestCase(BaseTestCase):
                 with self.assertRaises(TypeError):
                     _posixsubprocess.fork_exec(
                         args, exe_list,
-                        True, [], cwd, env_list,
+                        True, (), cwd, env_list,
                         -1, -1, -1, -1,
                         1, 2, 3, 4,
                         True, True, func)
@@ -2377,6 +2383,16 @@ class POSIXProcessTestCase(BaseTestCase):
     def test_fork_exec_sorted_fd_sanity_check(self):
         # Issue #23564: sanity check the fork_exec() fds_to_keep sanity check.
         import _posixsubprocess
+        class BadInt:
+            first = True
+            def __init__(self, value):
+                self.value = value
+            def __int__(self):
+                if self.first:
+                    self.first = False
+                    return self.value
+                raise ValueError
+
         gc_enabled = gc.isenabled()
         try:
             gc.enable()
@@ -2387,6 +2403,7 @@ class POSIXProcessTestCase(BaseTestCase):
                 (18, 23, 42, 2**63),  # Out of range.
                 (5, 4),  # Not sorted.
                 (6, 7, 7, 8),  # Duplicate.
+                (BadInt(1), BadInt(2)),
             ):
                 with self.assertRaises(
                         ValueError,
@@ -2448,6 +2465,46 @@ class POSIXProcessTestCase(BaseTestCase):
             proc.communicate(timeout=999)
             mock_proc_stdin.close.assert_called_once_with()
 
+    _libc_file_extensions = {
+      'Linux': 'so.6',
+      'Darwin': 'dylib',
+    }
+    @unittest.skipIf(not ctypes, 'ctypes module required.')
+    @unittest.skipIf(platform.uname()[0] not in _libc_file_extensions,
+                     'Test requires a libc this code can load with ctypes.')
+    @unittest.skipIf(not sys.executable, 'Test requires sys.executable.')
+    def test_child_terminated_in_stopped_state(self):
+        """Test wait() behavior when waitpid returns WIFSTOPPED; issue29335."""
+        PTRACE_TRACEME = 0  # From glibc and MacOS (PT_TRACE_ME).
+        libc_name = 'libc.' + self._libc_file_extensions[platform.uname()[0]]
+        libc = ctypes.CDLL(libc_name)
+        if not hasattr(libc, 'ptrace'):
+            raise unittest.SkipTest('ptrace() required.')
+        test_ptrace = subprocess.Popen(
+            [sys.executable, '-c', """if True:
+             import ctypes
+             libc = ctypes.CDLL({libc_name!r})
+             libc.ptrace({PTRACE_TRACEME}, 0, 0)
+             """.format(libc_name=libc_name, PTRACE_TRACEME=PTRACE_TRACEME)
+            ])
+        if test_ptrace.wait() != 0:
+            raise unittest.SkipTest('ptrace() failed - unable to test.')
+        child = subprocess.Popen(
+            [sys.executable, '-c', """if True:
+             import ctypes
+             libc = ctypes.CDLL({libc_name!r})
+             libc.ptrace({PTRACE_TRACEME}, 0, 0)
+             libc.printf(ctypes.c_char_p(0xdeadbeef))  # Crash the process.
+             """.format(libc_name=libc_name, PTRACE_TRACEME=PTRACE_TRACEME)
+            ])
+        try:
+            returncode = child.wait()
+        except Exception as e:
+            child.kill()  # Clean up the hung stopped process.
+            raise e
+        self.assertNotEqual(0, returncode)
+        self.assertLess(returncode, 0)  # signal death, likely SIGSEGV.
+
 
 @unittest.skipUnless(mswindows, "Windows specific tests")
 class Win32ProcessTestCase(BaseTestCase):
diff --git a/Lib/test/test_support.py b/Lib/test/test_support.py
index 5e0f990..70137e1 100644
--- a/Lib/test/test_support.py
+++ b/Lib/test/test_support.py
@@ -283,17 +283,34 @@ class TestSupport(unittest.TestCase):
 
     def test_swap_attr(self):
         class Obj:
-            x = 1
+            pass
         obj = Obj()
-        with support.swap_attr(obj, "x", 5):
+        obj.x = 1
+        with support.swap_attr(obj, "x", 5) as x:
             self.assertEqual(obj.x, 5)
+            self.assertEqual(x, 1)
         self.assertEqual(obj.x, 1)
+        with support.swap_attr(obj, "y", 5) as y:
+            self.assertEqual(obj.y, 5)
+            self.assertIsNone(y)
+        self.assertFalse(hasattr(obj, 'y'))
+        with support.swap_attr(obj, "y", 5):
+            del obj.y
+        self.assertFalse(hasattr(obj, 'y'))
 
     def test_swap_item(self):
-        D = {"item":1}
-        with support.swap_item(D, "item", 5):
-            self.assertEqual(D["item"], 5)
-        self.assertEqual(D["item"], 1)
+        D = {"x":1}
+        with support.swap_item(D, "x", 5) as x:
+            self.assertEqual(D["x"], 5)
+            self.assertEqual(x, 1)
+        self.assertEqual(D["x"], 1)
+        with support.swap_item(D, "y", 5) as y:
+            self.assertEqual(D["y"], 5)
+            self.assertIsNone(y)
+        self.assertNotIn("y", D)
+        with support.swap_item(D, "y", 5):
+            del D["y"]
+        self.assertNotIn("y", D)
 
     class RefClass:
         attribute1 = None
diff --git a/Lib/test/test_sysconfig.py b/Lib/test/test_sysconfig.py
index a23bf06a..3830679 100644
--- a/Lib/test/test_sysconfig.py
+++ b/Lib/test/test_sysconfig.py
@@ -5,7 +5,8 @@ import subprocess
 import shutil
 from copy import copy
 
-from test.support import (run_unittest, TESTFN, unlink, check_warnings,
+from test.support import (run_unittest,
+                          import_module, TESTFN, unlink, check_warnings,
                           captured_stdout, skip_unless_symlink, change_cwd)
 
 import sysconfig
@@ -387,7 +388,8 @@ class TestSysConfig(unittest.TestCase):
 
     @unittest.skipUnless(sys.platform == 'linux', 'Linux-specific test')
     def test_triplet_in_ext_suffix(self):
-        import ctypes, platform, re
+        ctypes = import_module('ctypes')
+        import platform, re
         machine = platform.machine()
         suffix = sysconfig.get_config_var('EXT_SUFFIX')
         if re.match('(aarch64|arm|mips|ppc|powerpc|s390|sparc)', machine):
diff --git a/Lib/test/test_tempfile.py b/Lib/test/test_tempfile.py
index 51df1ec..d0cf04b 100644
--- a/Lib/test/test_tempfile.py
+++ b/Lib/test/test_tempfile.py
@@ -273,13 +273,12 @@ class TestGetDefaultTempdir(BaseTestCase):
                         tempfile._get_default_tempdir()
                     self.assertEqual(os.listdir(our_temp_directory), [])
 
-                open = io.open
                 def bad_writer(*args, **kwargs):
-                    fp = open(*args, **kwargs)
+                    fp = orig_open(*args, **kwargs)
                     fp.write = raise_OSError
                     return fp
 
-                with support.swap_attr(io, "open", bad_writer):
+                with support.swap_attr(io, "open", bad_writer) as orig_open:
                     # test again with failing write()
                     with self.assertRaises(FileNotFoundError):
                         tempfile._get_default_tempdir()
diff --git a/Lib/test/test_thread.py b/Lib/test/test_thread.py
index ef3059b..3909b75 100644
--- a/Lib/test/test_thread.py
+++ b/Lib/test/test_thread.py
@@ -20,6 +20,7 @@ def verbose_print(arg):
         with _print_mutex:
             print(arg)
 
+
 class BasicThreadTest(unittest.TestCase):
 
     def setUp(self):
@@ -31,6 +32,9 @@ class BasicThreadTest(unittest.TestCase):
         self.running = 0
         self.next_ident = 0
 
+        key = support.threading_setup()
+        self.addCleanup(support.threading_cleanup, *key)
+
 
 class ThreadRunningTests(BasicThreadTest):
 
diff --git a/Lib/test/test_threading.py b/Lib/test/test_threading.py
index b630509..edae526 100644
--- a/Lib/test/test_threading.py
+++ b/Lib/test/test_threading.py
@@ -170,6 +170,9 @@ class ThreadTests(BaseTestCase):
         mutex.acquire()
         self.assertIn(tid, threading._active)
         self.assertIsInstance(threading._active[tid], threading._DummyThread)
+        #Issue 29376
+        self.assertTrue(threading._active[tid].is_alive())
+        self.assertRegex(repr(threading._active[tid]), '_DummyThread')
         del threading._active[tid]
 
     # PyThreadState_SetAsyncExc() is a CPython-only gimmick, not (currently)
@@ -467,13 +470,15 @@ class ThreadTests(BaseTestCase):
         for i in range(20):
             t = threading.Thread(target=lambda: None)
             t.start()
-            self.addCleanup(t.join)
             pid = os.fork()
             if pid == 0:
-                os._exit(1 if t.is_alive() else 0)
+                os._exit(11 if t.is_alive() else 10)
             else:
+                t.join()
+
                 pid, status = os.waitpid(pid, 0)
-                self.assertEqual(0, status)
+                self.assertTrue(os.WIFEXITED(status))
+                self.assertEqual(10, os.WEXITSTATUS(status))
 
     def test_main_thread(self):
         main = threading.main_thread()
diff --git a/Lib/test/test_tools/test_reindent.py b/Lib/test/test_tools/test_reindent.py
index d7c20e1..34df0c5 100644
--- a/Lib/test/test_tools/test_reindent.py
+++ b/Lib/test/test_tools/test_reindent.py
@@ -7,6 +7,7 @@ Tools directory of a Python checkout or tarball, such as reindent.py.
 import os
 import unittest
 from test.support.script_helper import assert_python_ok
+from test.support import findfile
 
 from test.test_tools import scriptsdir, skip_if_missing
 
@@ -23,6 +24,12 @@ class ReindentTests(unittest.TestCase):
         self.assertEqual(out, b'')
         self.assertGreater(err, b'')
 
+    def test_reindent_file_with_bad_encoding(self):
+        bad_coding_path = findfile('bad_coding.py')
+        rc, out, err = assert_python_ok(self.script, '-r', bad_coding_path)
+        self.assertEqual(out, b'')
+        self.assertNotEqual(err, b'')
+
 
 if __name__ == '__main__':
     unittest.main()
diff --git a/Lib/test/test_tracemalloc.py b/Lib/test/test_tracemalloc.py
index da89a9a..2d1a9b3 100644
--- a/Lib/test/test_tracemalloc.py
+++ b/Lib/test/test_tracemalloc.py
@@ -809,6 +809,7 @@ class TestCommandLine(unittest.TestCase):
                                   b'number of frames',
                                   stderr)
 
+    @support.cpython_only
     def test_pymem_alloc0(self):
         # Issue #21639: Check that PyMem_Malloc(0) with tracemalloc enabled
         # does not crash.
diff --git a/Lib/test/test_typing.py b/Lib/test/test_typing.py
index d203ce3..b3cabda 100644
--- a/Lib/test/test_typing.py
+++ b/Lib/test/test_typing.py
@@ -6,13 +6,13 @@ import sys
 from unittest import TestCase, main, skipUnless, SkipTest
 from copy import copy, deepcopy
 
-from typing import Any
+from typing import Any, NoReturn
 from typing import TypeVar, AnyStr
 from typing import T, KT, VT  # Not in __all__.
 from typing import Union, Optional
 from typing import Tuple, List, MutableMapping
 from typing import Callable
-from typing import Generic, ClassVar
+from typing import Generic, ClassVar, GenericMeta
 from typing import cast
 from typing import get_type_hints
 from typing import no_type_check, no_type_check_decorator
@@ -23,6 +23,7 @@ from typing import IO, TextIO, BinaryIO
 from typing import Pattern, Match
 import abc
 import typing
+import weakref
 try:
     import collections.abc as collections_abc
 except ImportError:
@@ -101,10 +102,6 @@ class AnyTests(BaseTestCase):
         with self.assertRaises(TypeError):
             type(Any)()
 
-    def test_cannot_subscript(self):
-        with self.assertRaises(TypeError):
-            Any[int]
-
     def test_any_works_with_alias(self):
         # These expressions must simply not fail.
         typing.Match[Any]
@@ -112,6 +109,40 @@ class AnyTests(BaseTestCase):
         typing.IO[Any]
 
 
+class NoReturnTests(BaseTestCase):
+
+    def test_noreturn_instance_type_error(self):
+        with self.assertRaises(TypeError):
+            isinstance(42, NoReturn)
+
+    def test_noreturn_subclass_type_error(self):
+        with self.assertRaises(TypeError):
+            issubclass(Employee, NoReturn)
+        with self.assertRaises(TypeError):
+            issubclass(NoReturn, Employee)
+
+    def test_repr(self):
+        self.assertEqual(repr(NoReturn), 'typing.NoReturn')
+
+    def test_not_generic(self):
+        with self.assertRaises(TypeError):
+            NoReturn[int]
+
+    def test_cannot_subclass(self):
+        with self.assertRaises(TypeError):
+            class A(NoReturn):
+                pass
+        with self.assertRaises(TypeError):
+            class A(type(NoReturn)):
+                pass
+
+    def test_cannot_instantiate(self):
+        with self.assertRaises(TypeError):
+            NoReturn()
+        with self.assertRaises(TypeError):
+            type(NoReturn)()
+
+
 class TypeVarTests(BaseTestCase):
 
     def test_basic_plain(self):
@@ -189,6 +220,10 @@ class TypeVarTests(BaseTestCase):
         with self.assertRaises(TypeError):
             TypeVar('X', str, float, bound=Employee)
 
+    def test_no_bivariant(self):
+        with self.assertRaises(ValueError):
+            TypeVar('T', covariant=True, contravariant=True)
+
 
 class UnionTests(BaseTestCase):
 
@@ -253,6 +288,11 @@ class UnionTests(BaseTestCase):
         self.assertEqual(repr(u), 'typing.Union[%s.Employee, int]' % __name__)
         u = Union[int, Employee]
         self.assertEqual(repr(u), 'typing.Union[int, %s.Employee]' % __name__)
+        T = TypeVar('T')
+        u = Union[T, int][int]
+        self.assertEqual(repr(u), repr(int))
+        u = Union[List[int], int]
+        self.assertEqual(repr(u), 'typing.Union[typing.List[int], int]')
 
     def test_cannot_subclass(self):
         with self.assertRaises(TypeError):
@@ -281,6 +321,15 @@ class UnionTests(BaseTestCase):
         self.assertFalse(Union[str, typing.Iterable[int]] == typing.Iterable[int])
         self.assertTrue(Union[str, typing.Iterable] == typing.Iterable)
 
+    def test_union_compare_other(self):
+        self.assertNotEqual(Union, object)
+        self.assertNotEqual(Union, Any)
+        self.assertNotEqual(ClassVar, Union)
+        self.assertNotEqual(Optional, Union)
+        self.assertNotEqual([None], Optional)
+        self.assertNotEqual(Optional, typing.Mapping)
+        self.assertNotEqual(Optional[typing.MutableMapping], Union)
+
     def test_optional(self):
         o = Optional[int]
         u = Union[int, None]
@@ -294,6 +343,15 @@ class UnionTests(BaseTestCase):
         with self.assertRaises(TypeError):
             isinstance(42, Union[int, str])
 
+    def test_no_eval_union(self):
+        u = Union[int, str]
+        def f(x: u): ...
+        self.assertIs(get_type_hints(f)['x'], u)
+
+    def test_function_repr_union(self):
+        def fun() -> int: ...
+        self.assertEqual(repr(Union[fun, int]), 'typing.Union[fun, int]')
+
     def test_union_str_pattern(self):
         # Shouldn't crash; see http://bugs.python.org/issue25390
         A = Union[str, Pattern]
@@ -391,6 +449,8 @@ class CallableTests(BaseTestCase):
             Callable[[()], int]
         with self.assertRaises(TypeError):
             Callable[[int, 1], 2]
+        with self.assertRaises(TypeError):
+            Callable[int]
 
     def test_callable_instance_works(self):
         def f():
@@ -536,15 +596,27 @@ class GenericTests(BaseTestCase):
         Y[str]
         with self.assertRaises(TypeError):
             Y[str, str]
+        self.assertIsSubclass(SimpleMapping[str, int], SimpleMapping)
 
     def test_generic_errors(self):
         T = TypeVar('T')
+        S = TypeVar('S')
         with self.assertRaises(TypeError):
             Generic[T]()
         with self.assertRaises(TypeError):
+            Generic[T][T]
+        with self.assertRaises(TypeError):
+            Generic[T][S]
+        with self.assertRaises(TypeError):
             isinstance([], List[int])
         with self.assertRaises(TypeError):
             issubclass(list, List[int])
+        with self.assertRaises(TypeError):
+            class NewGeneric(Generic): ...
+        with self.assertRaises(TypeError):
+            class MyGeneric(Generic[T], Generic[S]): ...
+        with self.assertRaises(TypeError):
+            class MyGeneric(List[T], Generic[S]): ...
 
     def test_init(self):
         T = TypeVar('T')
@@ -602,8 +674,10 @@ class GenericTests(BaseTestCase):
         self.assertEqual(repr(typing.Mapping[T, TS][TS, T]), 'typing.Mapping[~TS, ~T]')
         self.assertEqual(repr(List[Tuple[T, TS]][int, T]),
                          'typing.List[typing.Tuple[int, ~T]]')
-        self.assertEqual(repr(List[Tuple[T, T]][List[int]]),
-                 'typing.List[typing.Tuple[typing.List[int], typing.List[int]]]')
+        self.assertEqual(
+            repr(List[Tuple[T, T]][List[int]]),
+            'typing.List[typing.Tuple[typing.List[int], typing.List[int]]]'
+        )
 
     def test_new_repr_bare(self):
         T = TypeVar('T')
@@ -630,6 +704,41 @@ class GenericTests(BaseTestCase):
         c.bar = 'abc'
         self.assertEqual(c.__dict__, {'bar': 'abc'})
 
+    def test_subscripted_generics_as_proxies(self):
+        T = TypeVar('T')
+        class C(Generic[T]):
+            x = 'def'
+        self.assertEqual(C[int].x, 'def')
+        self.assertEqual(C[C[int]].x, 'def')
+        C[C[int]].x = 'changed'
+        self.assertEqual(C.x, 'changed')
+        self.assertEqual(C[str].x, 'changed')
+        C[List[str]].z = 'new'
+        self.assertEqual(C.z, 'new')
+        self.assertEqual(C[Tuple[int]].z, 'new')
+
+        self.assertEqual(C().x, 'changed')
+        self.assertEqual(C[Tuple[str]]().z, 'new')
+
+        class D(C[T]):
+            pass
+        self.assertEqual(D[int].x, 'changed')
+        self.assertEqual(D.z, 'new')
+        D.z = 'from derived z'
+        D[int].x = 'from derived x'
+        self.assertEqual(C.x, 'changed')
+        self.assertEqual(C[int].z, 'new')
+        self.assertEqual(D.x, 'from derived x')
+        self.assertEqual(D[str].z, 'from derived z')
+
+    def test_abc_registry_kept(self):
+        T = TypeVar('T')
+        class C(Generic[T]): ...
+        C.register(int)
+        self.assertIsInstance(1, C)
+        C[int]
+        self.assertIsInstance(1, C)
+
     def test_false_subclasses(self):
         class MyMapping(MutableMapping[str, str]): pass
         self.assertNotIsInstance({}, MyMapping)
@@ -674,8 +783,10 @@ class GenericTests(BaseTestCase):
                 raise NotImplementedError
             if tp.__args__:
                 KT, VT = tp.__args__
-                return all(isinstance(k, KT) and isinstance(v, VT)
-                   for k, v in obj.items())
+                return all(
+                    isinstance(k, KT) and isinstance(v, VT)
+                    for k, v in obj.items()
+                )
         self.assertTrue(naive_dict_check({'x': 1}, typing.Dict[str, int]))
         self.assertFalse(naive_dict_check({1: 'x'}, typing.Dict[str, int]))
         with self.assertRaises(NotImplementedError):
@@ -691,7 +802,7 @@ class GenericTests(BaseTestCase):
         self.assertFalse(naive_generic_check(Node[str](), Node[int]))
         self.assertFalse(naive_generic_check(Node[str](), List))
         with self.assertRaises(NotImplementedError):
-            naive_generic_check([1,2,3], Node[int])
+            naive_generic_check([1, 2, 3], Node[int])
 
         def naive_list_base_check(obj, tp):
             # Check if list conforms to a List subclass
@@ -718,6 +829,59 @@ class GenericTests(BaseTestCase):
         self.assertEqual(C.__orig_bases__, (List[T][U][V],))
         self.assertEqual(D.__orig_bases__, (C, List[T][U][V]))
 
+    def test_subscript_meta(self):
+        T = TypeVar('T')
+        self.assertEqual(Type[GenericMeta], Type[GenericMeta])
+        self.assertEqual(Union[T, int][GenericMeta], Union[GenericMeta, int])
+        self.assertEqual(Callable[..., GenericMeta].__args__, (Ellipsis, GenericMeta))
+
+    def test_generic_hashes(self):
+        try:
+            from test import mod_generics_cache
+        except ImportError:  # for Python 3.4 and previous versions
+            import mod_generics_cache
+        class A(Generic[T]):
+            ...
+
+        class B(Generic[T]):
+            class A(Generic[T]):
+                ...
+
+        self.assertEqual(A, A)
+        self.assertEqual(mod_generics_cache.A[str], mod_generics_cache.A[str])
+        self.assertEqual(B.A, B.A)
+        self.assertEqual(mod_generics_cache.B.A[B.A[str]],
+                         mod_generics_cache.B.A[B.A[str]])
+
+        self.assertNotEqual(A, B.A)
+        self.assertNotEqual(A, mod_generics_cache.A)
+        self.assertNotEqual(A, mod_generics_cache.B.A)
+        self.assertNotEqual(B.A, mod_generics_cache.A)
+        self.assertNotEqual(B.A, mod_generics_cache.B.A)
+
+        self.assertNotEqual(A[str], B.A[str])
+        self.assertNotEqual(A[List[Any]], B.A[List[Any]])
+        self.assertNotEqual(A[str], mod_generics_cache.A[str])
+        self.assertNotEqual(A[str], mod_generics_cache.B.A[str])
+        self.assertNotEqual(B.A[int], mod_generics_cache.A[int])
+        self.assertNotEqual(B.A[List[Any]], mod_generics_cache.B.A[List[Any]])
+
+        self.assertNotEqual(Tuple[A[str]], Tuple[B.A[str]])
+        self.assertNotEqual(Tuple[A[List[Any]]], Tuple[B.A[List[Any]]])
+        self.assertNotEqual(Union[str, A[str]], Union[str, mod_generics_cache.A[str]])
+        self.assertNotEqual(Union[A[str], A[str]],
+                            Union[A[str], mod_generics_cache.A[str]])
+        self.assertNotEqual(typing.FrozenSet[A[str]],
+                            typing.FrozenSet[mod_generics_cache.B.A[str]])
+
+        if sys.version_info[:2] > (3, 2):
+            self.assertTrue(repr(Tuple[A[str]]).endswith('<locals>.A[str]]'))
+            self.assertTrue(repr(Tuple[B.A[str]]).endswith('<locals>.B.A[str]]'))
+            self.assertTrue(repr(Tuple[mod_generics_cache.A[str]])
+                            .endswith('mod_generics_cache.A[str]]'))
+            self.assertTrue(repr(Tuple[mod_generics_cache.B.A[str]])
+                            .endswith('mod_generics_cache.B.A[str]]'))
+
     def test_extended_generic_rules_eq(self):
         T = TypeVar('T')
         U = TypeVar('U')
@@ -757,7 +921,10 @@ class GenericTests(BaseTestCase):
     def test_generic_forward_ref(self):
         def foobar(x: List[List['CC']]): ...
         class CC: ...
-        self.assertEqual(get_type_hints(foobar, globals(), locals()), {'x': List[List[CC]]})
+        self.assertEqual(
+            get_type_hints(foobar, globals(), locals()),
+            {'x': List[List[CC]]}
+        )
         T = TypeVar('T')
         AT = Tuple[T, ...]
         def barfoo(x: AT): ...
@@ -812,6 +979,8 @@ class GenericTests(BaseTestCase):
             Tuple[Generic[T]]
         with self.assertRaises(TypeError):
             List[typing._Protocol]
+        with self.assertRaises(TypeError):
+            isinstance(1, Generic)
 
     def test_type_erasure_special(self):
         T = TypeVar('T')
@@ -830,6 +999,11 @@ class GenericTests(BaseTestCase):
         class MyDef(typing.DefaultDict[str, T]): ...
         self.assertIs(MyDef[int]().__class__, MyDef)
         self.assertIs(MyDef[int]().__orig_class__, MyDef[int])
+        # ChainMap was added in 3.3
+        if sys.version_info >= (3, 3):
+            class MyChain(typing.ChainMap[str, T]): ...
+            self.assertIs(MyChain[int]().__class__, MyChain)
+            self.assertIs(MyChain[int]().__orig_class__, MyChain[int])
 
     def test_all_repr_eq_any(self):
         objs = (getattr(typing, el) for el in typing.__all__)
@@ -896,6 +1070,14 @@ class GenericTests(BaseTestCase):
             self.assertEqual(t, copy(t))
             self.assertEqual(t, deepcopy(t))
 
+    def test_weakref_all(self):
+        T = TypeVar('T')
+        things = [Any, Union[T, int], Callable[..., T], Tuple[Any, Any],
+                  Optional[List[int]], typing.Mapping[int, str],
+                  typing.re.Match[bytes], typing.Iterable['whatever']]
+        for t in things:
+            self.assertEqual(weakref.ref(t)(), t)
+
     def test_parameterized_slots(self):
         T = TypeVar('T')
         class C(Generic[T]):
@@ -1070,6 +1252,7 @@ class GenericTests(BaseTestCase):
         with self.assertRaises(Exception):
             D[T]
 
+
 class ClassVarTests(BaseTestCase):
 
     def test_basics(self):
@@ -1171,6 +1354,19 @@ class ForwardRefTests(BaseTestCase):
         with self.assertRaises(TypeError):
             isinstance(42, fr)
 
+    def test_forwardref_subclass_type_error(self):
+        fr = typing._ForwardRef('int')
+        with self.assertRaises(TypeError):
+            issubclass(int, fr)
+
+    def test_forward_equality(self):
+        fr = typing._ForwardRef('int')
+        self.assertEqual(fr, typing._ForwardRef('int'))
+        self.assertNotEqual(List['int'], List[int])
+
+    def test_forward_repr(self):
+        self.assertEqual(repr(List['int']), "typing.List[_ForwardRef('int')]")
+
     def test_union_forward(self):
 
         def foo(a: Union['T']):
@@ -1253,6 +1449,15 @@ class ForwardRefTests(BaseTestCase):
         ith = get_type_hints(C().foo)
         self.assertEqual(ith, {})
 
+    def test_no_type_check_no_bases(self):
+        class C:
+            def meth(self, x: int): ...
+        @no_type_check
+        class D(C):
+            c = C
+        # verify that @no_type_check never affects bases
+        self.assertEqual(get_type_hints(C.meth), {'x': int})
+
     def test_meta_no_type_check(self):
 
         @no_type_check_decorator
@@ -1292,9 +1497,6 @@ class ForwardRefTests(BaseTestCase):
 
 class OverloadTests(BaseTestCase):
 
-    def test_overload_exists(self):
-        from typing import overload
-
     def test_overload_fails(self):
         from typing import overload
 
@@ -1357,6 +1559,10 @@ if ASYNCIO:
         exec(ASYNCIO_TESTS)
     except ImportError:
         ASYNCIO = False
+else:
+    # fake names for the sake of static analysis
+    asyncio = None
+    AwaitableWrapper = AsyncIteratorWrapper = object
 
 PY36 = sys.version_info[:2] >= (3, 6)
 
@@ -1368,21 +1574,49 @@ class A:
 class B(A):
     x: ClassVar[Optional['B']] = None
     y: int
+    b: int
 class CSub(B):
     z: ClassVar['CSub'] = B()
 class G(Generic[T]):
     lst: ClassVar[List[T]] = []
 
+class NoneAndForward:
+    parent: 'NoneAndForward'
+    meaning: None
+
 class CoolEmployee(NamedTuple):
     name: str
     cool: int
+
+class CoolEmployeeWithDefault(NamedTuple):
+    name: str
+    cool: int = 0
+
+class XMeth(NamedTuple):
+    x: int
+    def double(self):
+        return 2 * self.x
+
+class XRepr(NamedTuple):
+    x: int
+    y: int = 1
+    def __str__(self):
+        return f'{self.x} -> {self.y}'
+    def __add__(self, other):
+        return 0
 """
 
 if PY36:
     exec(PY36_TESTS)
+else:
+    # fake names for the sake of static analysis
+    ann_module = ann_module2 = ann_module3 = None
+    A = B = CSub = G = CoolEmployee = CoolEmployeeWithDefault = object
+    XMeth = XRepr = NoneAndForward = object
 
 gth = get_type_hints
 
+
 class GetTypeHintTests(BaseTestCase):
     def test_get_type_hints_from_various_objects(self):
         # For invalid objects should fail with TypeError (not AttributeError etc).
@@ -1395,7 +1629,8 @@ class GetTypeHintTests(BaseTestCase):
 
     @skipUnless(PY36, 'Python 3.6 required')
     def test_get_type_hints_modules(self):
-        self.assertEqual(gth(ann_module), {1: 2, 'f': Tuple[int, int], 'x': int, 'y': str})
+        ann_module_type_hints = {1: 2, 'f': Tuple[int, int], 'x': int, 'y': str}
+        self.assertEqual(gth(ann_module), ann_module_type_hints)
         self.assertEqual(gth(ann_module2), {})
         self.assertEqual(gth(ann_module3), {})
 
@@ -1412,6 +1647,8 @@ class GetTypeHintTests(BaseTestCase):
                          {'y': Optional[ann_module.C]})
         self.assertEqual(gth(ann_module.S), {'x': str, 'y': str})
         self.assertEqual(gth(ann_module.foo), {'x': int})
+        self.assertEqual(gth(NoneAndForward, globals()),
+                         {'parent': NoneAndForward, 'meaning': type(None)})
 
     @skipUnless(PY36, 'Python 3.6 required')
     def test_respect_no_type_check(self):
@@ -1428,17 +1665,22 @@ class GetTypeHintTests(BaseTestCase):
         class Der(ABase): ...
         self.assertEqual(gth(ABase.meth), {'x': int})
 
-    def test_get_type_hints_for_builins(self):
+    def test_get_type_hints_for_builtins(self):
         # Should not fail for built-in classes and functions.
         self.assertEqual(gth(int), {})
         self.assertEqual(gth(type), {})
         self.assertEqual(gth(dir), {})
         self.assertEqual(gth(len), {})
+        self.assertEqual(gth(object.__str__), {})
+        self.assertEqual(gth(object().__str__), {})
+        self.assertEqual(gth(str.join), {})
 
     def test_previous_behavior(self):
         def testf(x, y): ...
         testf.__annotations__['x'] = 'int'
         self.assertEqual(gth(testf), {'x': int})
+        def testg(x: None): ...
+        self.assertEqual(gth(testg), {'x': type(None)})
 
     def test_get_type_hints_for_object_with_annotations(self):
         class A: ...
@@ -1452,9 +1694,10 @@ class GetTypeHintTests(BaseTestCase):
         self.assertEqual(gth(ann_module2.CV, ann_module2.__dict__),
                          {'var': typing.ClassVar[ann_module2.CV]})
         self.assertEqual(gth(B, globals()),
-                         {'y': int, 'x': ClassVar[Optional[B]]})
+                         {'y': int, 'x': ClassVar[Optional[B]], 'b': int})
         self.assertEqual(gth(CSub, globals()),
-                         {'z': ClassVar[CSub], 'y': int, 'x': ClassVar[Optional[B]]})
+                         {'z': ClassVar[CSub], 'y': int, 'b': int,
+                          'x': ClassVar[Optional[B]]})
         self.assertEqual(gth(G), {'lst': ClassVar[List[T]]})
 
 
@@ -1572,6 +1815,14 @@ class CollectionsAbcTests(BaseTestCase):
     def test_list(self):
         self.assertIsSubclass(list, typing.List)
 
+    def test_deque(self):
+        self.assertIsSubclass(collections.deque, typing.Deque)
+        class MyDeque(typing.Deque[int]): ...
+        self.assertIsInstance(MyDeque(), collections.deque)
+
+    def test_counter(self):
+        self.assertIsSubclass(collections.Counter, typing.Counter)
+
     def test_set(self):
         self.assertIsSubclass(set, typing.Set)
         self.assertNotIsSubclass(frozenset, typing.Set)
@@ -1623,13 +1874,10 @@ class CollectionsAbcTests(BaseTestCase):
         self.assertIsSubclass(MyDict, dict)
         self.assertNotIsSubclass(dict, MyDict)
 
-    def test_no_defaultdict_instantiation(self):
-        with self.assertRaises(TypeError):
-            typing.DefaultDict()
-        with self.assertRaises(TypeError):
-            typing.DefaultDict[KT, VT]()
-        with self.assertRaises(TypeError):
-            typing.DefaultDict[str, int]()
+    def test_defaultdict_instantiation(self):
+        self.assertIs(type(typing.DefaultDict()), collections.defaultdict)
+        self.assertIs(type(typing.DefaultDict[KT, VT]()), collections.defaultdict)
+        self.assertIs(type(typing.DefaultDict[str, int]()), collections.defaultdict)
 
     def test_defaultdict_subclass(self):
 
@@ -1642,6 +1890,50 @@ class CollectionsAbcTests(BaseTestCase):
         self.assertIsSubclass(MyDefDict, collections.defaultdict)
         self.assertNotIsSubclass(collections.defaultdict, MyDefDict)
 
+    @skipUnless(sys.version_info >= (3, 3), 'ChainMap was added in 3.3')
+    def test_chainmap_instantiation(self):
+        self.assertIs(type(typing.ChainMap()), collections.ChainMap)
+        self.assertIs(type(typing.ChainMap[KT, VT]()), collections.ChainMap)
+        self.assertIs(type(typing.ChainMap[str, int]()), collections.ChainMap)
+        class CM(typing.ChainMap[KT, VT]): ...
+        self.assertIs(type(CM[int, str]()), CM)
+
+    @skipUnless(sys.version_info >= (3, 3), 'ChainMap was added in 3.3')
+    def test_chainmap_subclass(self):
+
+        class MyChainMap(typing.ChainMap[str, int]):
+            pass
+
+        cm = MyChainMap()
+        self.assertIsInstance(cm, MyChainMap)
+
+        self.assertIsSubclass(MyChainMap, collections.ChainMap)
+        self.assertNotIsSubclass(collections.ChainMap, MyChainMap)
+
+    def test_deque_instantiation(self):
+        self.assertIs(type(typing.Deque()), collections.deque)
+        self.assertIs(type(typing.Deque[T]()), collections.deque)
+        self.assertIs(type(typing.Deque[int]()), collections.deque)
+        class D(typing.Deque[T]): ...
+        self.assertIs(type(D[int]()), D)
+
+    def test_counter_instantiation(self):
+        self.assertIs(type(typing.Counter()), collections.Counter)
+        self.assertIs(type(typing.Counter[T]()), collections.Counter)
+        self.assertIs(type(typing.Counter[int]()), collections.Counter)
+        class C(typing.Counter[T]): ...
+        self.assertIs(type(C[int]()), C)
+
+    def test_counter_subclass_instantiation(self):
+
+        class MyCounter(typing.Counter[int]):
+            pass
+
+        d = MyCounter()
+        self.assertIsInstance(d, MyCounter)
+        self.assertIsInstance(d, typing.Counter)
+        self.assertIsInstance(d, collections.Counter)
+
     def test_no_set_instantiation(self):
         with self.assertRaises(TypeError):
             typing.Set()
@@ -1696,6 +1988,23 @@ class CollectionsAbcTests(BaseTestCase):
         with self.assertRaises(TypeError):
             typing.Generator[int, int, int]()
 
+    @skipUnless(PY36, 'Python 3.6 required')
+    def test_async_generator(self):
+        ns = {}
+        exec("async def f():\n"
+             "    yield 42\n", globals(), ns)
+        g = ns['f']()
+        self.assertIsSubclass(type(g), typing.AsyncGenerator)
+
+    @skipUnless(PY36, 'Python 3.6 required')
+    def test_no_async_generator_instantiation(self):
+        with self.assertRaises(TypeError):
+            typing.AsyncGenerator()
+        with self.assertRaises(TypeError):
+            typing.AsyncGenerator[T, T]()
+        with self.assertRaises(TypeError):
+            typing.AsyncGenerator[int, int]()
+
     def test_subclassing(self):
 
         class MMA(typing.MutableMapping):
@@ -1765,6 +2074,31 @@ class CollectionsAbcTests(BaseTestCase):
         self.assertIsSubclass(G, collections.Iterable)
         self.assertNotIsSubclass(type(g), G)
 
+    @skipUnless(PY36, 'Python 3.6 required')
+    def test_subclassing_async_generator(self):
+        class G(typing.AsyncGenerator[int, int]):
+            def asend(self, value):
+                pass
+            def athrow(self, typ, val=None, tb=None):
+                pass
+
+        ns = {}
+        exec('async def g(): yield 0', globals(), ns)
+        g = ns['g']
+        self.assertIsSubclass(G, typing.AsyncGenerator)
+        self.assertIsSubclass(G, typing.AsyncIterable)
+        self.assertIsSubclass(G, collections.AsyncGenerator)
+        self.assertIsSubclass(G, collections.AsyncIterable)
+        self.assertNotIsSubclass(type(g), G)
+
+        instance = G()
+        self.assertIsInstance(instance, typing.AsyncGenerator)
+        self.assertIsInstance(instance, typing.AsyncIterable)
+        self.assertIsInstance(instance, collections.AsyncGenerator)
+        self.assertIsInstance(instance, collections.AsyncIterable)
+        self.assertNotIsInstance(type(g), G)
+        self.assertNotIsInstance(g, G)
+
     def test_subclassing_subclasshook(self):
 
         class Base(typing.Iterable):
@@ -1845,7 +2179,7 @@ class TypeTests(BaseTestCase):
         def new_user(user_class: Type[User]) -> User:
             return user_class()
 
-        joe = new_user(BasicUser)
+        new_user(BasicUser)
 
     def test_type_typevar(self):
 
@@ -1858,7 +2192,7 @@ class TypeTests(BaseTestCase):
         def new_user(user_class: Type[U]) -> U:
             return user_class()
 
-        joe = new_user(BasicUser)
+        new_user(BasicUser)
 
     def test_type_optional(self):
         A = Optional[Type[BaseException]]
@@ -1907,7 +2241,17 @@ class NamedTupleTests(BaseTestCase):
         self.assertEqual(jim.id, 1)
         self.assertEqual(Emp.__name__, 'Emp')
         self.assertEqual(Emp._fields, ('name', 'id'))
-        self.assertEqual(Emp._field_types, dict(name=str, id=int))
+        self.assertEqual(Emp.__annotations__,
+                         collections.OrderedDict([('name', str), ('id', int)]))
+        self.assertIs(Emp._field_types, Emp.__annotations__)
+
+    def test_namedtuple_pyversion(self):
+        if sys.version_info[:2] < (3, 6):
+            with self.assertRaises(TypeError):
+                NamedTuple('Name', one=int, other=str)
+            with self.assertRaises(TypeError):
+                class NotYet(NamedTuple):
+                    whatever = 0
 
     @skipUnless(PY36, 'Python 3.6 required')
     def test_annotation_usage(self):
@@ -1918,7 +2262,54 @@ class NamedTupleTests(BaseTestCase):
         self.assertEqual(tim.cool, 9000)
         self.assertEqual(CoolEmployee.__name__, 'CoolEmployee')
         self.assertEqual(CoolEmployee._fields, ('name', 'cool'))
-        self.assertEqual(CoolEmployee._field_types, dict(name=str, cool=int))
+        self.assertEqual(CoolEmployee.__annotations__,
+                         collections.OrderedDict(name=str, cool=int))
+        self.assertIs(CoolEmployee._field_types, CoolEmployee.__annotations__)
+
+    @skipUnless(PY36, 'Python 3.6 required')
+    def test_annotation_usage_with_default(self):
+        jelle = CoolEmployeeWithDefault('Jelle')
+        self.assertIsInstance(jelle, CoolEmployeeWithDefault)
+        self.assertIsInstance(jelle, tuple)
+        self.assertEqual(jelle.name, 'Jelle')
+        self.assertEqual(jelle.cool, 0)
+        cooler_employee = CoolEmployeeWithDefault('Sjoerd', 1)
+        self.assertEqual(cooler_employee.cool, 1)
+
+        self.assertEqual(CoolEmployeeWithDefault.__name__, 'CoolEmployeeWithDefault')
+        self.assertEqual(CoolEmployeeWithDefault._fields, ('name', 'cool'))
+        self.assertEqual(CoolEmployeeWithDefault._field_types, dict(name=str, cool=int))
+        self.assertEqual(CoolEmployeeWithDefault._field_defaults, dict(cool=0))
+
+        with self.assertRaises(TypeError):
+            exec("""
+class NonDefaultAfterDefault(NamedTuple):
+    x: int = 3
+    y: int
+""")
+
+    @skipUnless(PY36, 'Python 3.6 required')
+    def test_annotation_usage_with_methods(self):
+        self.assertEqual(XMeth(1).double(), 2)
+        self.assertEqual(XMeth(42).x, XMeth(42)[0])
+        self.assertEqual(str(XRepr(42)), '42 -> 1')
+        self.assertEqual(XRepr(1, 2) + XRepr(3), 0)
+
+        with self.assertRaises(AttributeError):
+            exec("""
+class XMethBad(NamedTuple):
+    x: int
+    def _fields(self):
+        return 'no chance for this'
+""")
+
+        with self.assertRaises(AttributeError):
+            exec("""
+class XMethBad2(NamedTuple):
+    x: int
+    def _source(self):
+        return 'no chance for this as well'
+""")
 
     @skipUnless(PY36, 'Python 3.6 required')
     def test_namedtuple_keyword_usage(self):
@@ -1928,7 +2319,8 @@ class NamedTupleTests(BaseTestCase):
         self.assertEqual(nick.name, 'Nick')
         self.assertEqual(LocalEmployee.__name__, 'LocalEmployee')
         self.assertEqual(LocalEmployee._fields, ('name', 'age'))
-        self.assertEqual(LocalEmployee._field_types, dict(name=str, age=int))
+        self.assertEqual(LocalEmployee.__annotations__, dict(name=str, age=int))
+        self.assertIs(LocalEmployee._field_types, LocalEmployee.__annotations__)
         with self.assertRaises(TypeError):
             NamedTuple('Name', [('x', int)], y=str)
         with self.assertRaises(TypeError):
@@ -1994,8 +2386,14 @@ class RETests(BaseTestCase):
         self.assertIsInstance(mat, Match)
 
         # these should just work
-        p = Pattern[Union[str, bytes]]
-        m = Match[Union[bytes, str]]
+        Pattern[Union[str, bytes]]
+        Match[Union[bytes, str]]
+
+    def test_alias_equality(self):
+        self.assertEqual(Pattern[str], Pattern[str])
+        self.assertNotEqual(Pattern[str], Pattern[bytes])
+        self.assertNotEqual(Pattern[str], Match[str])
+        self.assertNotEqual(Pattern[str], str)
 
     def test_errors(self):
         with self.assertRaises(TypeError):
@@ -2011,6 +2409,9 @@ class RETests(BaseTestCase):
         with self.assertRaises(TypeError):
             # We don't support isinstance().
             isinstance(42, Pattern[str])
+        with self.assertRaises(TypeError):
+            # We don't support issubclass().
+            issubclass(Pattern[bytes], Pattern[str])
 
     def test_repr(self):
         self.assertEqual(repr(Pattern), 'Pattern[~AnyStr]')
@@ -2057,6 +2458,9 @@ class AllTests(BaseTestCase):
         self.assertNotIn('sys', a)
         # Check that Text is defined.
         self.assertIn('Text', a)
+        # Check previously missing classes.
+        self.assertIn('SupportsBytes', a)
+        self.assertIn('SupportsComplex', a)
 
 
 if __name__ == '__main__':
diff --git a/Lib/test/test_unicode.py b/Lib/test/test_unicode.py
index f696a5b..9dbded2 100644
--- a/Lib/test/test_unicode.py
+++ b/Lib/test/test_unicode.py
@@ -464,6 +464,13 @@ class UnicodeTest(string_tests.CommonTest,
         self.checkraises(TypeError, ' ', 'join', [1, 2, 3])
         self.checkraises(TypeError, ' ', 'join', ['1', '2', 3])
 
+    @unittest.skipIf(sys.maxsize > 2**32,
+        'needs too much memory on a 64-bit platform')
+    def test_join_overflow(self):
+        size = int(sys.maxsize**0.5) + 1
+        seq = ('A' * size,) * size
+        self.assertRaises(OverflowError, ''.join, seq)
+
     def test_replace(self):
         string_tests.CommonTest.test_replace(self)
 
@@ -1417,6 +1424,15 @@ class UnicodeTest(string_tests.CommonTest,
         with self.assertRaises(ValueError):
             result = format_string % 2.34
 
+    def test_issue28598_strsubclass_rhs(self):
+        # A subclass of str with an __rmod__ method should be able to hook
+        # into the % operator
+        class SubclassedStr(str):
+            def __rmod__(self, other):
+                return 'Success, self.__rmod__({!r}) was called'.format(other)
+        self.assertEqual('lhs %% %r' % SubclassedStr('rhs'),
+                         "Success, self.__rmod__('lhs %% %r') was called")
+
     @support.cpython_only
     def test_formatting_huge_precision_c_limits(self):
         from _testcapi import INT_MAX
diff --git a/Lib/test/test_unpack_ex.py b/Lib/test/test_unpack_ex.py
index 74346b4..43cf638 100644
--- a/Lib/test/test_unpack_ex.py
+++ b/Lib/test/test_unpack_ex.py
@@ -251,7 +251,7 @@ Overridden parameters
     >>> f(x=5, **{'x': 3}, **{'x': 2})
     Traceback (most recent call last):
       ...
-    TypeError: f() got multiple values for keyword argument 'x'
+    TypeError: function got multiple values for keyword argument 'x'
 
     >>> f(**{1: 3}, **{1: 5})
     Traceback (most recent call last):
diff --git a/Lib/test/test_urllib.py b/Lib/test/test_urllib.py
index 247598a..1a28c9a 100644
--- a/Lib/test/test_urllib.py
+++ b/Lib/test/test_urllib.py
@@ -206,6 +206,7 @@ class urlopen_FileTests(unittest.TestCase):
     def test_relativelocalfile(self):
         self.assertRaises(ValueError,urllib.request.urlopen,'./' + self.pathname)
 
+
 class ProxyTests(unittest.TestCase):
 
     def setUp(self):
@@ -247,17 +248,19 @@ class ProxyTests(unittest.TestCase):
     def test_proxy_bypass_environment_host_match(self):
         bypass = urllib.request.proxy_bypass_environment
         self.env.set('NO_PROXY',
-            'localhost, anotherdomain.com, newdomain.com:1234')
+                     'localhost, anotherdomain.com, newdomain.com:1234, .d.o.t')
         self.assertTrue(bypass('localhost'))
         self.assertTrue(bypass('LocalHost'))                 # MixedCase
         self.assertTrue(bypass('LOCALHOST'))                 # UPPERCASE
         self.assertTrue(bypass('newdomain.com:1234'))
+        self.assertTrue(bypass('foo.d.o.t'))                 # issue 29142
         self.assertTrue(bypass('anotherdomain.com:8888'))
         self.assertTrue(bypass('www.newdomain.com:1234'))
         self.assertFalse(bypass('prelocalhost'))
         self.assertFalse(bypass('newdomain.com'))            # no port
         self.assertFalse(bypass('newdomain.com:1235'))       # wrong port
 
+
 class ProxyTests_withOrderedEnv(unittest.TestCase):
 
     def setUp(self):
@@ -293,6 +296,7 @@ class ProxyTests_withOrderedEnv(unittest.TestCase):
         proxies = urllib.request.getproxies_environment()
         self.assertEqual('http://somewhere:3128', proxies['http'])
 
+
 class urlopen_HttpTests(unittest.TestCase, FakeHTTPMixin, FakeFTPMixin):
     """Test urlopen() opening a fake http connection."""
 
@@ -431,7 +435,6 @@ Connection: close
         finally:
             self.unfakeftp()
 
-
     def test_userpass_inurl(self):
         self.fakehttp(b"HTTP/1.0 200 OK\r\n\r\nHello!")
         try:
@@ -474,6 +477,7 @@ Connection: close
                 "https://localhost", cafile="/nonexistent/path", context=context
             )
 
+
 class urlopen_DataTests(unittest.TestCase):
     """Test urlopen() opening a data URL."""
 
@@ -547,6 +551,7 @@ class urlopen_DataTests(unittest.TestCase):
         # missing padding character
         self.assertRaises(ValueError,urllib.request.urlopen,'data:;base64,Cg=')
 
+
 class urlretrieve_FileTests(unittest.TestCase):
     """Test urllib.urlretrieve() on local files"""
 
diff --git a/Lib/test/test_urllib2.py b/Lib/test/test_urllib2.py
index eda7ccc..3ed81ce 100644
--- a/Lib/test/test_urllib2.py
+++ b/Lib/test/test_urllib2.py
@@ -826,7 +826,6 @@ class HandlerTests(unittest.TestCase):
         for url, ftp in [
             ("file://ftp.example.com//foo.txt", False),
             ("file://ftp.example.com///foo.txt", False),
-# XXXX bug: fails with OSError, should be URLError
             ("file://ftp.example.com/foo.txt", False),
             ("file://somehost//foo/something.txt", False),
             ("file://localhost//foo/something.txt", False),
@@ -834,8 +833,7 @@ class HandlerTests(unittest.TestCase):
             req = Request(url)
             try:
                 h.file_open(req)
-            # XXXX remove OSError when bug fixed
-            except (urllib.error.URLError, OSError):
+            except urllib.error.URLError:
                 self.assertFalse(ftp)
             else:
                 self.assertIs(o.req, req)
@@ -1341,7 +1339,6 @@ class HandlerTests(unittest.TestCase):
         self.assertEqual(req.host, "proxy.example.com:3128")
         self.assertEqual(req.get_header("Proxy-authorization"), "FooBar")
 
-    # TODO: This should be only for OSX
     @unittest.skipUnless(sys.platform == 'darwin', "only relevant for OSX")
     def test_osx_proxy_bypass(self):
         bypass = {
@@ -1617,7 +1614,6 @@ class HandlerTests(unittest.TestCase):
         self.assertTrue(conn.fakesock.closed, "Connection not closed")
 
 
-
 class MiscTests(unittest.TestCase):
 
     def opener_has_handler(self, opener, handler_class):
diff --git a/Lib/test/test_urllibnet.py b/Lib/test/test_urllibnet.py
index b811930..b9b1eaa 100644
--- a/Lib/test/test_urllibnet.py
+++ b/Lib/test/test_urllibnet.py
@@ -12,6 +12,7 @@ import time
 
 support.requires('network')
 
+
 class URLTimeoutTest(unittest.TestCase):
     # XXX this test doesn't seem to test anything useful.
 
@@ -26,11 +27,11 @@ class URLTimeoutTest(unittest.TestCase):
     def testURLread(self):
         with support.transient_internet("www.example.com"):
             f = urllib.request.urlopen("http://www.example.com/")
-            x = f.read()
+            f.read()
 
 
 class urlopenNetworkTests(unittest.TestCase):
-    """Tests urllib.reqest.urlopen using the network.
+    """Tests urllib.request.urlopen using the network.
 
     These tests are not exhaustive.  Assuming that testing using files does a
     good job overall of some of the basic interface features.  There are no
@@ -189,6 +190,7 @@ class urlretrieveNetworkTests(unittest.TestCase):
 
     def test_reporthook(self):
         records = []
+
         def recording_reporthook(blocks, block_size, total_size):
             records.append((blocks, block_size, total_size))
 
diff --git a/Lib/test/test_urlparse.py b/Lib/test/test_urlparse.py
index 71abc14..8dac4b1 100644
--- a/Lib/test/test_urlparse.py
+++ b/Lib/test/test_urlparse.py
@@ -6,8 +6,8 @@ RFC2396_BASE = "http://a/b/c/d;p?q"
 RFC3986_BASE = 'http://a/b/c/d;p?q'
 SIMPLE_BASE  = 'http://a/b/c/d'
 
-# A list of test cases.  Each test case is a two-tuple that contains
-# a string with the query and a dictionary with the expected result.
+# Each parse_qsl testcase is a two-tuple that contains
+# a string with the query and a list with the expected result.
 
 parse_qsl_test_cases = [
     ("", []),
@@ -42,6 +42,9 @@ parse_qsl_test_cases = [
     (b"a=1;a=2", [(b'a', b'1'), (b'a', b'2')]),
 ]
 
+# Each parse_qs testcase is a two-tuple that contains
+# a string with the query and a dictionary with the expected result.
+
 parse_qs_test_cases = [
     ("", {}),
     ("&", {}),
@@ -290,7 +293,6 @@ class UrlParseTestCase(unittest.TestCase):
     def test_RFC2396(self):
         # cases from RFC 2396
 
-
         self.checkJoin(RFC2396_BASE, 'g:h', 'g:h')
         self.checkJoin(RFC2396_BASE, 'g', 'http://a/b/c/g')
         self.checkJoin(RFC2396_BASE, './g', 'http://a/b/c/g')
@@ -333,9 +335,7 @@ class UrlParseTestCase(unittest.TestCase):
         # self.checkJoin(RFC2396_BASE, '/./g', 'http://a/./g')
         # self.checkJoin(RFC2396_BASE, '/../g', 'http://a/../g')
 
-
     def test_RFC3986(self):
-        # Test cases from RFC3986
         self.checkJoin(RFC3986_BASE, '?y','http://a/b/c/d;p?y')
         self.checkJoin(RFC3986_BASE, ';x', 'http://a/b/c/;x')
         self.checkJoin(RFC3986_BASE, 'g:h','g:h')
@@ -363,7 +363,7 @@ class UrlParseTestCase(unittest.TestCase):
         self.checkJoin(RFC3986_BASE, '../../g','http://a/g')
         self.checkJoin(RFC3986_BASE, '../../../g', 'http://a/g')
 
-        #Abnormal Examples
+        # Abnormal Examples
 
         # The 'abnormal scenarios' are incompatible with RFC2986 parsing
         # Tests are here for reference.
diff --git a/Lib/test/test_venv.py b/Lib/test/test_venv.py
index 3999d1f..c1e6566 100644
--- a/Lib/test/test_venv.py
+++ b/Lib/test/test_venv.py
@@ -328,13 +328,7 @@ class EnsurePipTest(BaseTest):
         with open(os.devnull, "rb") as f:
             self.assertEqual(f.read(), b"")
 
-    # Requesting pip fails without SSL (http://bugs.python.org/issue19744)
-    @unittest.skipIf(ssl is None, ensurepip._MISSING_SSL_MESSAGE)
-    @unittest.skipUnless(threading, 'some dependencies of pip import threading'
-                                    ' module unconditionally')
-    # Issue #26610: pip/pep425tags.py requires ctypes
-    @unittest.skipUnless(ctypes, 'pip requires ctypes')
-    def test_with_pip(self):
+    def do_test_with_pip(self, system_site_packages):
         rmtree(self.env_dir)
         with EnvironmentVarGuard() as envvars:
             # pip's cross-version compatibility may trigger deprecation
@@ -368,6 +362,7 @@ class EnsurePipTest(BaseTest):
                 # config in place to ensure we ignore it
                 try:
                     self.run_with_capture(venv.create, self.env_dir,
+                                          system_site_packages=system_site_packages,
                                           with_pip=True)
                 except subprocess.CalledProcessError as exc:
                     # The output this produces can be a little hard to read,
@@ -417,9 +412,21 @@ class EnsurePipTest(BaseTest):
         out = out.decode("latin-1") # Force to text, prevent decoding errors
         self.assertIn("Successfully uninstalled pip", out)
         self.assertIn("Successfully uninstalled setuptools", out)
-        # Check pip is now gone from the virtual environment
-        self.assert_pip_not_installed()
+        # Check pip is now gone from the virtual environment. This only
+        # applies in the system_site_packages=False case, because in the
+        # other case, pip may still be available in the system site-packages
+        if not system_site_packages:
+            self.assert_pip_not_installed()
 
+    # Requesting pip fails without SSL (http://bugs.python.org/issue19744)
+    @unittest.skipIf(ssl is None, ensurepip._MISSING_SSL_MESSAGE)
+    @unittest.skipUnless(threading, 'some dependencies of pip import threading'
+                                    ' module unconditionally')
+    # Issue #26610: pip/pep425tags.py requires ctypes
+    @unittest.skipUnless(ctypes, 'pip requires ctypes')
+    def test_with_pip(self):
+        self.do_test_with_pip(False)
+        self.do_test_with_pip(True)
 
 if __name__ == "__main__":
     unittest.main()
diff --git a/Lib/test/test_xml_etree.py b/Lib/test/test_xml_etree.py
index 6c7616b..5d0166a 100644
--- a/Lib/test/test_xml_etree.py
+++ b/Lib/test/test_xml_etree.py
@@ -1875,6 +1875,118 @@ class BadElementTest(ElementTestCase, unittest.TestCase):
             with self.assertRaises(RuntimeError):
                 repr(e)  # Should not crash
 
+    def test_element_get_text(self):
+        # Issue #27863
+        class X(str):
+            def __del__(self):
+                try:
+                    elem.text
+                except NameError:
+                    pass
+
+        b = ET.TreeBuilder()
+        b.start('tag', {})
+        b.data('ABCD')
+        b.data(X('EFGH'))
+        b.data('IJKL')
+        b.end('tag')
+
+        elem = b.close()
+        self.assertEqual(elem.text, 'ABCDEFGHIJKL')
+
+    def test_element_get_tail(self):
+        # Issue #27863
+        class X(str):
+            def __del__(self):
+                try:
+                    elem[0].tail
+                except NameError:
+                    pass
+
+        b = ET.TreeBuilder()
+        b.start('root', {})
+        b.start('tag', {})
+        b.end('tag')
+        b.data('ABCD')
+        b.data(X('EFGH'))
+        b.data('IJKL')
+        b.end('root')
+
+        elem = b.close()
+        self.assertEqual(elem[0].tail, 'ABCDEFGHIJKL')
+
+    def test_element_iter(self):
+        # Issue #27863
+        state = {
+            'tag': 'tag',
+            '_children': [None],  # non-Element
+            'attrib': 'attr',
+            'tail': 'tail',
+            'text': 'text',
+        }
+
+        e = ET.Element('tag')
+        try:
+            e.__setstate__(state)
+        except AttributeError:
+            e.__dict__ = state
+
+        it = e.iter()
+        self.assertIs(next(it), e)
+        self.assertRaises(AttributeError, next, it)
+
+    def test_subscr(self):
+        # Issue #27863
+        class X:
+            def __index__(self):
+                del e[:]
+                return 1
+
+        e = ET.Element('elem')
+        e.append(ET.Element('child'))
+        e[:X()]  # shouldn't crash
+
+        e.append(ET.Element('child'))
+        e[0:10:X()]  # shouldn't crash
+
+    def test_ass_subscr(self):
+        # Issue #27863
+        class X:
+            def __index__(self):
+                e[:] = []
+                return 1
+
+        e = ET.Element('elem')
+        for _ in range(10):
+            e.insert(0, ET.Element('child'))
+
+        e[0:10:X()] = []  # shouldn't crash
+
+    def test_treebuilder_start(self):
+        # Issue #27863
+        def element_factory(x, y):
+            return []
+        b = ET.TreeBuilder(element_factory=element_factory)
+
+        b.start('tag', {})
+        b.data('ABCD')
+        self.assertRaises(AttributeError, b.start, 'tag2', {})
+        del b
+        gc_collect()
+
+    def test_treebuilder_end(self):
+        # Issue #27863
+        def element_factory(x, y):
+            return []
+        b = ET.TreeBuilder(element_factory=element_factory)
+
+        b.start('tag', {})
+        b.data('ABCD')
+        self.assertRaises(AttributeError, b.end, 'tag')
+        del b
+        gc_collect()
+
+
 class MutatingElementPath(str):
     def __new__(cls, elem, *args):
         self = str.__new__(cls, *args)
diff --git a/Lib/test/test_xmlrpc.py b/Lib/test/test_xmlrpc.py
index 02d9f5c..c2de057 100644
--- a/Lib/test/test_xmlrpc.py
+++ b/Lib/test/test_xmlrpc.py
@@ -295,6 +295,94 @@ class XMLRPCTestCase(unittest.TestCase):
             self.assertEqual(p.method(), 5)
             self.assertEqual(p.method(), 5)
 
+
+class SimpleXMLRPCDispatcherTestCase(unittest.TestCase):
+    class DispatchExc(Exception):
+        """Raised inside the dispatched functions when checking for
+        chained exceptions"""
+
+    def test_call_registered_func(self):
+        """Calls explicitly registered function"""
+        # Makes sure any exception raised inside the function has no other
+        # exception chained to it
+
+        exp_params = 1, 2, 3
+
+        def dispatched_func(*params):
+            raise self.DispatchExc(params)
+
+        dispatcher = xmlrpc.server.SimpleXMLRPCDispatcher()
+        dispatcher.register_function(dispatched_func)
+        with self.assertRaises(self.DispatchExc) as exc_ctx:
+            dispatcher._dispatch('dispatched_func', exp_params)
+        self.assertEqual(exc_ctx.exception.args, (exp_params,))
+        self.assertIsNone(exc_ctx.exception.__cause__)
+        self.assertIsNone(exc_ctx.exception.__context__)
+
+    def test_call_instance_func(self):
+        """Calls a registered instance attribute as a function"""
+        # Makes sure any exception raised inside the function has no other
+        # exception chained to it
+
+        exp_params = 1, 2, 3
+
+        class DispatchedClass:
+            def dispatched_func(self, *params):
+                raise SimpleXMLRPCDispatcherTestCase.DispatchExc(params)
+
+        dispatcher = xmlrpc.server.SimpleXMLRPCDispatcher()
+        dispatcher.register_instance(DispatchedClass())
+        with self.assertRaises(self.DispatchExc) as exc_ctx:
+            dispatcher._dispatch('dispatched_func', exp_params)
+        self.assertEqual(exc_ctx.exception.args, (exp_params,))
+        self.assertIsNone(exc_ctx.exception.__cause__)
+        self.assertIsNone(exc_ctx.exception.__context__)
+
+    def test_call_dispatch_func(self):
+        """Calls the registered instance's `_dispatch` function"""
+        # Makes sure any exception raised inside the function has no other
+        # exception chained to it
+
+        exp_method = 'method'
+        exp_params = 1, 2, 3
+
+        class TestInstance:
+            def _dispatch(self, method, params):
+                raise SimpleXMLRPCDispatcherTestCase.DispatchExc(
+                    method, params)
+
+        dispatcher = xmlrpc.server.SimpleXMLRPCDispatcher()
+        dispatcher.register_instance(TestInstance())
+        with self.assertRaises(self.DispatchExc) as exc_ctx:
+            dispatcher._dispatch(exp_method, exp_params)
+        self.assertEqual(exc_ctx.exception.args, (exp_method, exp_params))
+        self.assertIsNone(exc_ctx.exception.__cause__)
+        self.assertIsNone(exc_ctx.exception.__context__)
+
+    def test_registered_func_is_none(self):
+        """Calls explicitly registered function which is None"""
+
+        dispatcher = xmlrpc.server.SimpleXMLRPCDispatcher()
+        dispatcher.register_function(None, name='method')
+        with self.assertRaisesRegex(Exception, 'method'):
+            dispatcher._dispatch('method', ('param',))
+
+    def test_instance_has_no_func(self):
+        """Attempts to call nonexistent function on a registered instance"""
+
+        dispatcher = xmlrpc.server.SimpleXMLRPCDispatcher()
+        dispatcher.register_instance(object())
+        with self.assertRaisesRegex(Exception, 'method'):
+            dispatcher._dispatch('method', ('param',))
+
+    def test_cannot_locate_func(self):
+        """Calls a function that the dispatcher cannot locate"""
+
+        dispatcher = xmlrpc.server.SimpleXMLRPCDispatcher()
+        with self.assertRaisesRegex(Exception, 'method'):
+            dispatcher._dispatch('method', ('param',))
+
+
 class HelperTestCase(unittest.TestCase):
     def test_escape(self):
         self.assertEqual(xmlrpclib.escape("a&b"), "a&amp;b")
@@ -1265,7 +1353,7 @@ def test_main():
             KeepaliveServerTestCase1, KeepaliveServerTestCase2,
             GzipServerTestCase, GzipUtilTestCase,
             MultiPathServerTestCase, ServerProxyTestCase, FailingServerTestCase,
-            CGIHandlerTestCase)
+            CGIHandlerTestCase, SimpleXMLRPCDispatcherTestCase)
 
 
 if __name__ == "__main__":
diff --git a/Lib/threading.py b/Lib/threading.py
index 06b7b9b..c40d330 100644
--- a/Lib/threading.py
+++ b/Lib/threading.py
@@ -1215,6 +1215,10 @@ class _DummyThread(Thread):
     def _stop(self):
         pass
 
+    def is_alive(self):
+        assert not self._is_stopped and self._started.is_set()
+        return True
+
     def join(self, timeout=None):
         assert False, "cannot join a dummy thread"
 
diff --git a/Lib/tkinter/__init__.py b/Lib/tkinter/__init__.py
index 1eaab44..1a3bf88 100644
--- a/Lib/tkinter/__init__.py
+++ b/Lib/tkinter/__init__.py
@@ -865,7 +865,7 @@ class Misc:
         return self.tk.getint(
             self.tk.call('winfo', 'ismapped', self._w))
     def winfo_manager(self):
-        """Return the window mananger name for this widget."""
+        """Return the window manager name for this widget."""
         return self.tk.call('winfo', 'manager', self._w)
     def winfo_name(self):
         """Return the name of this widget."""
@@ -1539,7 +1539,7 @@ class Misc:
         return self.tk.splitlist(self.tk.call('image', 'names'))
 
     def image_types(self):
-        """Return a list of all available image types (e.g. phote bitmap)."""
+        """Return a list of all available image types (e.g. photo bitmap)."""
         return self.tk.splitlist(self.tk.call('image', 'types'))
 
 
@@ -1678,7 +1678,7 @@ class Wm:
         return self.tk.call('wm', 'focusmodel', self._w, model)
     focusmodel = wm_focusmodel
     def wm_forget(self, window): # new in Tk 8.5
-        """The window will be unmappend from the screen and will no longer
+        """The window will be unmapped from the screen and will no longer
         be managed by wm. toplevel windows will be treated like frame
         windows once they are no longer managed by wm, however, the menu
         option configuration will be remembered and the menus will return
@@ -2382,7 +2382,7 @@ class Canvas(Widget, XView, YView):
         """Return item which is closest to pixel at X, Y.
         If several match take the top-most.
         All items closer than HALO are considered overlapping (all are
-        closests). If START is specified the next below this tag is taken."""
+        closest). If START is specified the next below this tag is taken."""
         return self.find('closest', x, y, halo, start)
     def find_enclosed(self, x1, y1, x2, y2):
         """Return all items in rectangle defined
@@ -2442,7 +2442,7 @@ class Canvas(Widget, XView, YView):
         """Print the contents of the canvas to a postscript
         file. Valid options: colormap, colormode, file, fontmap,
         height, pageanchor, pageheight, pagewidth, pagex, pagey,
-        rotate, witdh, x, y."""
+        rotate, width, x, y."""
         return self.tk.call((self._w, 'postscript') +
                     self._options(cnf, kw))
     def tag_raise(self, *args):
@@ -3386,7 +3386,7 @@ class Image:
         return self.tk.getint(
             self.tk.call('image', 'height', self.name))
     def type(self):
-        """Return the type of the imgage, e.g. "photo" or "bitmap"."""
+        """Return the type of the image, e.g. "photo" or "bitmap"."""
         return self.tk.call('image', 'type', self.name)
     def width(self):
         """Return the width of the image."""
diff --git a/Lib/typing.py b/Lib/typing.py
index 34845b7..645bc6f 100644
--- a/Lib/typing.py
+++ b/Lib/typing.py
@@ -10,6 +10,12 @@ try:
     import collections.abc as collections_abc
 except ImportError:
     import collections as collections_abc  # Fallback for PY3.2.
+try:
+    from types import WrapperDescriptorType, MethodWrapperType, MethodDescriptorType
+except ImportError:
+    WrapperDescriptorType = type(object.__init__)
+    MethodWrapperType = type(object().__str__)
+    MethodDescriptorType = type(str.join)
 
 
 # Please keep __all__ alphabetized within each category.
@@ -27,6 +33,8 @@ __all__ = [
 
     # ABCs (from collections.abc).
     'AbstractSet',  # collections.abc.Set.
+    'GenericMeta',  # subclass of abc.ABCMeta and a metaclass
+                    # for 'Generic' and ABCs below.
     'ByteString',
     'Container',
     'Hashable',
@@ -49,16 +57,21 @@ __all__ = [
     # AsyncIterable,
     # Coroutine,
     # Collection,
-    # ContextManager
+    # ContextManager,
+    # AsyncGenerator,
 
     # Structural checks, a.k.a. protocols.
     'Reversible',
     'SupportsAbs',
+    'SupportsBytes',
+    'SupportsComplex',
     'SupportsFloat',
     'SupportsInt',
     'SupportsRound',
 
     # Concrete collection types.
+    'Counter',
+    'Deque',
     'Dict',
     'DefaultDict',
     'List',
@@ -93,8 +106,8 @@ def _qualname(x):
 
 
 def _trim_name(nm):
-    if nm.startswith('_') and nm not in ('_TypeAlias',
-                    '_ForwardRef', '_TypingBase', '_FinalTypingBase'):
+    whitelist = ('_TypeAlias', '_ForwardRef', '_TypingBase', '_FinalTypingBase')
+    if nm.startswith('_') and nm not in whitelist:
         nm = nm[1:]
     return nm
 
@@ -144,7 +157,7 @@ class TypingMeta(type):
 class _TypingBase(metaclass=TypingMeta, _root=True):
     """Internal indicator of special typing constructs."""
 
-    __slots__ = ()
+    __slots__ = ('__weakref__',)
 
     def __init__(self, *args, **kwds):
         pass
@@ -351,13 +364,17 @@ def _type_check(arg, msg):
         return type(None)
     if isinstance(arg, str):
         arg = _ForwardRef(arg)
-    if (isinstance(arg, _TypingBase) and type(arg).__name__ == '_ClassVar' or
-        not isinstance(arg, (type, _TypingBase)) and not callable(arg)):
+    if (
+        isinstance(arg, _TypingBase) and type(arg).__name__ == '_ClassVar' or
+        not isinstance(arg, (type, _TypingBase)) and not callable(arg)
+    ):
         raise TypeError(msg + " Got %.100r." % (arg,))
     # Bare Union etc. are not valid as type arguments
-    if (type(arg).__name__ in ('_Union', '_Optional')
-        and not getattr(arg, '__origin__', None)
-        or isinstance(arg, TypingMeta) and _gorg(arg) in (Generic, _Protocol)):
+    if (
+        type(arg).__name__ in ('_Union', '_Optional') and
+        not getattr(arg, '__origin__', None) or
+        isinstance(arg, TypingMeta) and _gorg(arg) in (Generic, _Protocol)
+    ):
         raise TypeError("Plain %s is not valid as type argument" % arg)
     return arg
 
@@ -405,6 +422,31 @@ class _Any(_FinalTypingBase, _root=True):
 Any = _Any(_root=True)
 
 
+class _NoReturn(_FinalTypingBase, _root=True):
+    """Special type indicating functions that never return.
+    Example::
+
+      from typing import NoReturn
+
+      def stop() -> NoReturn:
+          raise Exception('no way')
+
+    This type is invalid in other positions, e.g., ``List[NoReturn]``
+    will fail in static type checkers.
+    """
+
+    __slots__ = ()
+
+    def __instancecheck__(self, obj):
+        raise TypeError("NoReturn cannot be used with isinstance().")
+
+    def __subclasscheck__(self, cls):
+        raise TypeError("NoReturn cannot be used with issubclass().")
+
+
+NoReturn = _NoReturn(_root=True)
+
+
 class TypeVar(_TypingBase, _root=True):
     """Type variable.
 
@@ -451,7 +493,7 @@ class TypeVar(_TypingBase, _root=True):
                  '__covariant__', '__contravariant__')
 
     def __init__(self, name, *constraints, bound=None,
-                covariant=False, contravariant=False):
+                 covariant=False, contravariant=False):
         super().__init__(name, *constraints, bound=bound,
                          covariant=covariant, contravariant=contravariant)
         self.__name__ = name
@@ -513,7 +555,7 @@ def _replace_arg(arg, tvars, args):
 
     if tvars is None:
         tvars = []
-    if hasattr(arg, '_subs_tree'):
+    if hasattr(arg, '_subs_tree') and isinstance(arg, (GenericMeta, _TypingBase)):
         return arg._subs_tree(tvars, args)
     if isinstance(arg, TypeVar):
         for i, tvar in enumerate(tvars):
@@ -522,6 +564,16 @@ def _replace_arg(arg, tvars, args):
     return arg
 
 
+# Special typing constructs Union, Optional, Generic, Callable and Tuple
+# use three special attributes for internal bookkeeping of generic types:
+# * __parameters__ is a tuple of unique free type parameters of a generic
+#   type, for example, Dict[T, T].__parameters__ == (T,);
+# * __origin__ keeps a reference to a type that was subscripted,
+#   e.g., Union[T, int].__origin__ == Union;
+# * __args__ is a tuple of all arguments used in subscripting,
+#   e.g., Dict[T, int].__args__ == (T, int).
+
+
 def _subs_tree(cls, tvars=None, args=None):
     """An internal helper function: calculate substitution tree
     for generic cls after replacing its type parameters with
@@ -549,7 +601,7 @@ def _subs_tree(cls, tvars=None, args=None):
     # ... then continue replacing down the origin chain.
     for ocls in orig_chain:
         new_tree_args = []
-        for i, arg in enumerate(ocls.__args__):
+        for arg in ocls.__args__:
             new_tree_args.append(_replace_arg(arg, ocls.__parameters__, tree_args))
         tree_args = new_tree_args
     return tree_args
@@ -617,6 +669,7 @@ def _tp_cache(func):
 
     cached = functools.lru_cache()(func)
     _cleanups.append(cached.cache_clear)
+
     @functools.wraps(func)
     def inner(*args, **kwds):
         try:
@@ -756,9 +809,12 @@ class _Union(_FinalTypingBase, _root=True):
         return (Union,) + tree_args
 
     def __eq__(self, other):
-        if not isinstance(other, _Union):
+        if isinstance(other, _Union):
+            return self.__tree_hash__ == other.__tree_hash__
+        elif self is not Union:
             return self._subs_tree() == other
-        return self.__tree_hash__ == other.__tree_hash__
+        else:
+            return self is other
 
     def __hash__(self):
         return self.__tree_hash__
@@ -823,21 +879,10 @@ def _next_in_mro(cls):
     # Look for the last occurrence of Generic or Generic[...].
     for i, c in enumerate(cls.__mro__[:-1]):
         if isinstance(c, GenericMeta) and _gorg(c) is Generic:
-            next_in_mro = cls.__mro__[i+1]
+            next_in_mro = cls.__mro__[i + 1]
     return next_in_mro
 
 
-def _valid_for_check(cls):
-    """An internal helper to prohibit isinstance([1], List[str]) etc."""
-    if cls is Generic:
-        raise TypeError("Class %r cannot be used with class "
-                        "or instance checks" % cls)
-    if (cls.__origin__ is not None and
-        sys._getframe(3).f_globals['__name__'] not in ['abc', 'functools']):
-        raise TypeError("Parameterized generics cannot be used with class "
-                        "or instance checks")
-
-
 def _make_subclasshook(cls):
     """Construct a __subclasshook__ callable that incorporates
     the associated __extra__ class in subclass checks performed
@@ -848,7 +893,6 @@ def _make_subclasshook(cls):
         # Registered classes need not be checked here because
         # cls and its extra share the same _abc_registry.
         def __extrahook__(subclass):
-            _valid_for_check(cls)
             res = cls.__extra__.__subclasshook__(subclass)
             if res is not NotImplemented:
                 return res
@@ -863,7 +907,6 @@ def _make_subclasshook(cls):
     else:
         # For non-ABC extras we'll just call issubclass().
         def __extrahook__(subclass):
-            _valid_for_check(cls)
             if cls.__extra__ and issubclass(subclass, cls.__extra__):
                 return True
             return NotImplemented
@@ -882,10 +925,26 @@ def _no_slots_copy(dct):
 
 
 class GenericMeta(TypingMeta, abc.ABCMeta):
-    """Metaclass for generic types."""
+    """Metaclass for generic types.
+
+    This is a metaclass for typing.Generic and generic ABCs defined in
+    typing module. User defined subclasses of GenericMeta can override
+    __new__ and invoke super().__new__. Note that GenericMeta.__new__
+    has strict rules on what is allowed in its bases argument:
+    * plain Generic is disallowed in bases;
+    * Generic[...] should appear in bases at most once;
+    * if Generic[...] is present, then it should list all type variables
+      that appear in other bases.
+    In addition, type of all generic bases is erased, e.g., C[int] is
+    stripped to plain C.
+    """
 
     def __new__(cls, name, bases, namespace,
                 tvars=None, args=None, origin=None, extra=None, orig_bases=None):
+        """Create a new generic class. GenericMeta.__new__ accepts
+        keyword arguments that are used for internal bookkeeping, therefore
+        an override should pass unused keyword arguments to super().
+        """
         if tvars is not None:
             # Called from __getitem__() below.
             assert origin is not None
@@ -934,6 +993,7 @@ class GenericMeta(TypingMeta, abc.ABCMeta):
         # remove bare Generic from bases if there are other generic bases
         if any(isinstance(b, GenericMeta) and b is not Generic for b in bases):
             bases = tuple(b for b in bases if b is not Generic)
+        namespace.update({'__origin__': origin, '__extra__': extra})
         self = super().__new__(cls, name, bases, namespace, _root=True)
 
         self.__parameters__ = tvars
@@ -942,8 +1002,6 @@ class GenericMeta(TypingMeta, abc.ABCMeta):
         self.__args__ = tuple(... if a is _TypingEllipsis else
                               () if a is _TypingEmpty else
                               a for a in args) if args else None
-        self.__origin__ = origin
-        self.__extra__ = extra
         # Speed hack (https://github.com/python/typing/issues/196).
         self.__next_in_mro__ = _next_in_mro(self)
         # Preserve base classes on subclassing (__bases__ are type erased now).
@@ -953,18 +1011,57 @@ class GenericMeta(TypingMeta, abc.ABCMeta):
         # This allows unparameterized generic collections to be used
         # with issubclass() and isinstance() in the same way as their
         # collections.abc counterparts (e.g., isinstance([], Iterable)).
-        if ('__subclasshook__' not in namespace and extra  # allow overriding
-            or hasattr(self.__subclasshook__, '__name__') and
-            self.__subclasshook__.__name__ == '__extrahook__'):
+        if (
+            '__subclasshook__' not in namespace and extra or
+            # allow overriding
+            getattr(self.__subclasshook__, '__name__', '') == '__extrahook__'
+        ):
             self.__subclasshook__ = _make_subclasshook(self)
         if isinstance(extra, abc.ABCMeta):
             self._abc_registry = extra._abc_registry
+            self._abc_cache = extra._abc_cache
+        elif origin is not None:
+            self._abc_registry = origin._abc_registry
+            self._abc_cache = origin._abc_cache
 
         if origin and hasattr(origin, '__qualname__'):  # Fix for Python 3.2.
             self.__qualname__ = origin.__qualname__
-        self.__tree_hash__ = hash(self._subs_tree()) if origin else hash((self.__name__,))
+        self.__tree_hash__ = (hash(self._subs_tree()) if origin else
+                              super(GenericMeta, self).__hash__())
         return self
 
+    # _abc_negative_cache and _abc_negative_cache_version
+    # realised as descriptors, since GenClass[t1, t2, ...] always
+    # share subclass info with GenClass.
+    # This is an important memory optimization.
+    @property
+    def _abc_negative_cache(self):
+        if isinstance(self.__extra__, abc.ABCMeta):
+            return self.__extra__._abc_negative_cache
+        return _gorg(self)._abc_generic_negative_cache
+
+    @_abc_negative_cache.setter
+    def _abc_negative_cache(self, value):
+        if self.__origin__ is None:
+            if isinstance(self.__extra__, abc.ABCMeta):
+                self.__extra__._abc_negative_cache = value
+            else:
+                self._abc_generic_negative_cache = value
+
+    @property
+    def _abc_negative_cache_version(self):
+        if isinstance(self.__extra__, abc.ABCMeta):
+            return self.__extra__._abc_negative_cache_version
+        return _gorg(self)._abc_generic_negative_cache_version
+
+    @_abc_negative_cache_version.setter
+    def _abc_negative_cache_version(self, value):
+        if self.__origin__ is None:
+            if isinstance(self.__extra__, abc.ABCMeta):
+                self.__extra__._abc_negative_cache_version = value
+            else:
+                self._abc_generic_negative_cache_version = value
+
     def _get_type_vars(self, tvars):
         if self.__origin__ and self.__parameters__:
             _get_type_vars(self.__parameters__, tvars)
@@ -1052,8 +1149,10 @@ class GenericMeta(TypingMeta, abc.ABCMeta):
             _check_generic(self, params)
             tvars = _type_vars(params)
             args = params
+
+        prepend = (self,) if self.__origin__ is None else ()
         return self.__class__(self.__name__,
-                              self.__bases__,
+                              prepend + self.__bases__,
                               _no_slots_copy(self.__dict__),
                               tvars=tvars,
                               args=args,
@@ -1061,6 +1160,17 @@ class GenericMeta(TypingMeta, abc.ABCMeta):
                               extra=self.__extra__,
                               orig_bases=self.__orig_bases__)
 
+    def __subclasscheck__(self, cls):
+        if self.__origin__ is not None:
+            if sys._getframe(1).f_globals['__name__'] not in ['abc', 'functools']:
+                raise TypeError("Parameterized generics cannot be used with class "
+                                "or instance checks")
+            return False
+        if self is Generic:
+            raise TypeError("Class %r cannot be used with class "
+                            "or instance checks" % self)
+        return super().__subclasscheck__(cls)
+
     def __instancecheck__(self, instance):
         # Since we extend ABC.__subclasscheck__ and
         # ABC.__instancecheck__ inlines the cache checking done by the
@@ -1075,6 +1185,16 @@ class GenericMeta(TypingMeta, abc.ABCMeta):
                               self.__parameters__, self.__args__, self.__origin__,
                               self.__extra__, self.__orig_bases__)
 
+    def __setattr__(self, attr, value):
+        # We consider all the subscripted genrics as proxies for original class
+        if (
+            attr.startswith('__') and attr.endswith('__') or
+            attr.startswith('_abc_')
+        ):
+            super(GenericMeta, self).__setattr__(attr, value)
+        else:
+            super(GenericMeta, _gorg(self)).__setattr__(attr, value)
+
 
 # Prevent checks for Generic to crash when defining Generic.
 Generic = None
@@ -1159,13 +1279,13 @@ class TupleMeta(GenericMeta):
         return super().__getitem__(parameters)
 
     def __instancecheck__(self, obj):
-        if self.__args__ == None:
+        if self.__args__ is None:
             return isinstance(obj, tuple)
         raise TypeError("Parameterized Tuple cannot be used "
                         "with isinstance().")
 
     def __subclasscheck__(self, cls):
-        if self.__args__ == None:
+        if self.__args__ is None:
             return issubclass(cls, tuple)
         raise TypeError("Parameterized Tuple cannot be used "
                         "with issubclass().")
@@ -1219,7 +1339,7 @@ class CallableMeta(GenericMeta):
         with hashable arguments to improve speed.
         """
 
-        if  self.__origin__ is not None or not _geqv(self, Callable):
+        if self.__origin__ is not None or not _geqv(self, Callable):
             return super().__getitem__(parameters)
         if not isinstance(parameters, tuple) or len(parameters) != 2:
             raise TypeError("Callable must be used as "
@@ -1247,7 +1367,7 @@ class CallableMeta(GenericMeta):
         return super().__getitem__(parameters)
 
 
-class Callable(extra=collections_abc.Callable, metaclass = CallableMeta):
+class Callable(extra=collections_abc.Callable, metaclass=CallableMeta):
     """Callable type; Callable[[int], str] is a function of (int) -> str.
 
     The subscription syntax must always be used with exactly two
@@ -1355,6 +1475,11 @@ def _get_defaults(func):
     return res
 
 
+_allowed_types = (types.FunctionType, types.BuiltinFunctionType,
+                  types.MethodType, types.ModuleType,
+                  WrapperDescriptorType, MethodWrapperType, MethodDescriptorType)
+
+
 def get_type_hints(obj, globalns=None, localns=None):
     """Return type hints for an object.
 
@@ -1409,10 +1534,7 @@ def get_type_hints(obj, globalns=None, localns=None):
     hints = getattr(obj, '__annotations__', None)
     if hints is None:
         # Return empty annotations for something that _could_ have them.
-        if (isinstance(obj, types.FunctionType) or
-            isinstance(obj, types.BuiltinFunctionType) or
-            isinstance(obj, types.MethodType) or
-            isinstance(obj, types.ModuleType)):
+        if isinstance(obj, _allowed_types):
             return {}
         else:
             raise TypeError('{!r} is not a module, class, method, '
@@ -1452,7 +1574,7 @@ def no_type_check(arg):
                 no_type_check(obj)
     try:
         arg.__no_type_check__ = True
-    except TypeError: # built-in classes
+    except TypeError:  # built-in classes
         pass
     return arg
 
@@ -1738,14 +1860,15 @@ else:
 class MutableMapping(Mapping[KT, VT], extra=collections_abc.MutableMapping):
     __slots__ = ()
 
+
 if hasattr(collections_abc, 'Reversible'):
     if hasattr(collections_abc, 'Collection'):
         class Sequence(Reversible[T_co], Collection[T_co],
-                   extra=collections_abc.Sequence):
+                       extra=collections_abc.Sequence):
             __slots__ = ()
     else:
         class Sequence(Sized, Reversible[T_co], Container[T_co],
-                   extra=collections_abc.Sequence):
+                       extra=collections_abc.Sequence):
             __slots__ = ()
 else:
     class Sequence(Sized, Iterable[T_co], Container[T_co],
@@ -1772,6 +1895,16 @@ class List(list, MutableSequence[T], extra=list):
         return _generic_new(list, cls, *args, **kwds)
 
 
+class Deque(collections.deque, MutableSequence[T], extra=collections.deque):
+
+    __slots__ = ()
+
+    def __new__(cls, *args, **kwds):
+        if _geqv(cls, Deque):
+            return collections.deque(*args, **kwds)
+        return _generic_new(collections.deque, cls, *args, **kwds)
+
+
 class Set(set, MutableSet[T], extra=set):
 
     __slots__ = ()
@@ -1829,6 +1962,7 @@ class Dict(dict, MutableMapping[KT, VT], extra=dict):
                             "use dict() instead")
         return _generic_new(dict, cls, *args, **kwds)
 
+
 class DefaultDict(collections.defaultdict, MutableMapping[KT, VT],
                   extra=collections.defaultdict):
 
@@ -1836,10 +1970,35 @@ class DefaultDict(collections.defaultdict, MutableMapping[KT, VT],
 
     def __new__(cls, *args, **kwds):
         if _geqv(cls, DefaultDict):
-            raise TypeError("Type DefaultDict cannot be instantiated; "
-                            "use collections.defaultdict() instead")
+            return collections.defaultdict(*args, **kwds)
         return _generic_new(collections.defaultdict, cls, *args, **kwds)
 
+
+class Counter(collections.Counter, Dict[T, int], extra=collections.Counter):
+
+    __slots__ = ()
+
+    def __new__(cls, *args, **kwds):
+        if _geqv(cls, Counter):
+            return collections.Counter(*args, **kwds)
+        return _generic_new(collections.Counter, cls, *args, **kwds)
+
+
+if hasattr(collections, 'ChainMap'):
+    # ChainMap only exists in 3.3+
+    __all__.append('ChainMap')
+
+    class ChainMap(collections.ChainMap, MutableMapping[KT, VT],
+                   extra=collections.ChainMap):
+
+        __slots__ = ()
+
+        def __new__(cls, *args, **kwds):
+            if _geqv(cls, ChainMap):
+                return collections.ChainMap(*args, **kwds)
+            return _generic_new(collections.ChainMap, cls, *args, **kwds)
+
+
 # Determine what base class to use for Generator.
 if hasattr(collections_abc, 'Generator'):
     # Sufficiently recent versions of 3.5 have a Generator ABC.
@@ -1860,6 +2019,14 @@ class Generator(Iterator[T_co], Generic[T_co, T_contra, V_co],
         return _generic_new(_G_base, cls, *args, **kwds)
 
 
+if hasattr(collections_abc, 'AsyncGenerator'):
+    class AsyncGenerator(AsyncIterator[T_co], Generic[T_co, T_contra],
+                         extra=collections_abc.AsyncGenerator):
+        __slots__ = ()
+
+    __all__.append('AsyncGenerator')
+
+
 # Internal type variable used for Type[].
 CT_co = TypeVar('CT_co', covariant=True, bound=type)
 
@@ -1896,7 +2063,9 @@ def _make_nmtuple(name, types):
     msg = "NamedTuple('Name', [(f0, t0), (f1, t1), ...]); each t must be a type"
     types = [(n, _type_check(t, msg)) for n, t in types]
     nm_tpl = collections.namedtuple(name, [n for n, t in types])
-    nm_tpl._field_types = dict(types)
+    # Prior to PEP 526, only _field_types attribute was assigned.
+    # Now, both __annotations__ and _field_types are used to maintain compatibility.
+    nm_tpl.__annotations__ = nm_tpl._field_types = collections.OrderedDict(types)
     try:
         nm_tpl.__module__ = sys._getframe(2).f_globals.get('__name__', '__main__')
     except (AttributeError, ValueError):
@@ -1906,6 +2075,13 @@ def _make_nmtuple(name, types):
 
 _PY36 = sys.version_info[:2] >= (3, 6)
 
+# attributes prohibited to set in NamedTuple class syntax
+_prohibited = ('__new__', '__init__', '__slots__', '__getnewargs__',
+               '_fields', '_field_defaults', '_field_types',
+               '_make', '_replace', '_asdict', '_source')
+
+_special = ('__module__', '__name__', '__qualname__', '__annotations__')
+
 
 class NamedTupleMeta(type):
 
@@ -1916,7 +2092,29 @@ class NamedTupleMeta(type):
             raise TypeError("Class syntax for NamedTuple is only supported"
                             " in Python 3.6+")
         types = ns.get('__annotations__', {})
-        return _make_nmtuple(typename, types.items())
+        nm_tpl = _make_nmtuple(typename, types.items())
+        defaults = []
+        defaults_dict = {}
+        for field_name in types:
+            if field_name in ns:
+                default_value = ns[field_name]
+                defaults.append(default_value)
+                defaults_dict[field_name] = default_value
+            elif defaults:
+                raise TypeError("Non-default namedtuple field {field_name} cannot "
+                                "follow default field(s) {default_names}"
+                                .format(field_name=field_name,
+                                        default_names=', '.join(defaults_dict.keys())))
+        nm_tpl.__new__.__defaults__ = tuple(defaults)
+        nm_tpl._field_defaults = defaults_dict
+        # update from user namespace without overriding special namedtuple attributes
+        for key in ns:
+            if key in _prohibited:
+                raise AttributeError("Cannot overwrite NamedTuple attribute " + key)
+            elif key not in _special and key not in nm_tpl._fields:
+                setattr(nm_tpl, key, ns[key])
+        return nm_tpl
+
 
 class NamedTuple(metaclass=NamedTupleMeta):
     """Typed version of namedtuple.
@@ -1931,8 +2129,10 @@ class NamedTuple(metaclass=NamedTupleMeta):
 
         Employee = collections.namedtuple('Employee', ['name', 'id'])
 
-    The resulting class has one extra attribute: _field_types,
-    giving a dict mapping field names to types.  (The field names
+    The resulting class has extra __annotations__ and _field_types
+    attributes, giving an ordered dict mapping field names to types.
+    __annotations__ should be preferred, while _field_types
+    is kept to maintain pre PEP 526 compatibility. (The field names
     are in the _fields attribute, which is part of the namedtuple
     API.) Alternative equivalent keyword syntax is also accepted::
 
@@ -2139,6 +2339,7 @@ class io:
     TextIO = TextIO
     BinaryIO = BinaryIO
 
+
 io.__name__ = __name__ + '.io'
 sys.modules[io.__name__] = io
 
@@ -2156,5 +2357,6 @@ class re:
     Pattern = Pattern
     Match = Match
 
+
 re.__name__ = __name__ + '.re'
 sys.modules[re.__name__] = re
diff --git a/Lib/unittest/loader.py b/Lib/unittest/loader.py
index eb447d7..e860deb 100644
--- a/Lib/unittest/loader.py
+++ b/Lib/unittest/loader.py
@@ -81,7 +81,7 @@ class TestLoader(object):
         self._loading_packages = set()
 
     def loadTestsFromTestCase(self, testCaseClass):
-        """Return a suite of all tests cases contained in testCaseClass"""
+        """Return a suite of all test cases contained in testCaseClass"""
         if issubclass(testCaseClass, suite.TestSuite):
             raise TypeError("Test cases should not be derived from "
                             "TestSuite. Maybe you meant to derive from "
@@ -95,7 +95,7 @@ class TestLoader(object):
     # XXX After Python 3.5, remove backward compatibility hacks for
     # use_load_tests deprecation via *args and **kws.  See issue 16662.
     def loadTestsFromModule(self, module, *args, pattern=None, **kws):
-        """Return a suite of all tests cases contained in the given module"""
+        """Return a suite of all test cases contained in the given module"""
         # This method used to take an undocumented and unofficial
         # use_load_tests argument.  For backward compatibility, we still
         # accept the argument (which can also be the first position) but we
@@ -135,7 +135,7 @@ class TestLoader(object):
         return tests
 
     def loadTestsFromName(self, name, module=None):
-        """Return a suite of all tests cases given a string specifier.
+        """Return a suite of all test cases given a string specifier.
 
         The name may resolve either to a module, a test case class, a
         test method within a test case class, or a callable object which
@@ -213,7 +213,7 @@ class TestLoader(object):
             raise TypeError("don't know how to make test from: %s" % obj)
 
     def loadTestsFromNames(self, names, module=None):
-        """Return a suite of all tests cases found using the given sequence
+        """Return a suite of all test cases found using the given sequence
         of string specifiers. See 'loadTestsFromName()'.
         """
         suites = [self.loadTestsFromName(name, module) for name in names]
diff --git a/Lib/unittest/main.py b/Lib/unittest/main.py
index 09fefe1..807604f 100644
--- a/Lib/unittest/main.py
+++ b/Lib/unittest/main.py
@@ -14,6 +14,7 @@ Examples:
   %(prog)s test_module               - run tests from test_module
   %(prog)s module.TestClass          - run tests from module.TestClass
   %(prog)s module.Class.test_method  - run specified test method
+  %(prog)s path/to/test_file.py      - run tests from test_file.py
 """
 
 MODULE_EXAMPLES = """\
diff --git a/Lib/unittest/mock.py b/Lib/unittest/mock.py
index 669890a..99658d4 100644
--- a/Lib/unittest/mock.py
+++ b/Lib/unittest/mock.py
@@ -795,8 +795,8 @@ class NonCallableMock(Base):
 
 
     def assert_called_once_with(_mock_self, *args, **kwargs):
-        """assert that the mock was called exactly once and with the specified
-        arguments."""
+        """assert that the mock was called exactly once and that that call was
+        with the specified arguments."""
         self = _mock_self
         if not self.call_count == 1:
             msg = ("Expected '%s' to be called once. Called %s times." %
@@ -1749,14 +1749,18 @@ def _get_eq(self):
         ret_val = self.__eq__._mock_return_value
         if ret_val is not DEFAULT:
             return ret_val
-        return self is other
+        if self is other:
+            return True
+        return NotImplemented
     return __eq__
 
 def _get_ne(self):
     def __ne__(other):
         if self.__ne__._mock_return_value is not DEFAULT:
             return DEFAULT
-        return self is not other
+        if self is other:
+            return False
+        return NotImplemented
     return __ne__
 
 def _get_iter(self):
@@ -1941,9 +1945,8 @@ class _Call(tuple):
 
     If the _Call has no name then it will match any name.
     """
-    def __new__(cls, value=(), name=None, parent=None, two=False,
+    def __new__(cls, value=(), name='', parent=None, two=False,
                 from_kall=True):
-        name = ''
         args = ()
         kwargs = {}
         _len = len(value)
diff --git a/Lib/unittest/test/test_loader.py b/Lib/unittest/test/test_loader.py
index 4b97882..31e2f0f 100644
--- a/Lib/unittest/test/test_loader.py
+++ b/Lib/unittest/test/test_loader.py
@@ -35,7 +35,7 @@ class Test_TestLoader(unittest.TestCase):
     ### Tests for TestLoader.loadTestsFromTestCase
     ################################################################
 
-    # "Return a suite of all tests cases contained in the TestCase-derived
+    # "Return a suite of all test cases contained in the TestCase-derived
     # class testCaseClass"
     def test_loadTestsFromTestCase(self):
         class Foo(unittest.TestCase):
@@ -48,7 +48,7 @@ class Test_TestLoader(unittest.TestCase):
         loader = unittest.TestLoader()
         self.assertEqual(loader.loadTestsFromTestCase(Foo), tests)
 
-    # "Return a suite of all tests cases contained in the TestCase-derived
+    # "Return a suite of all test cases contained in the TestCase-derived
     # class testCaseClass"
     #
     # Make sure it does the right thing even if no tests were found
@@ -61,7 +61,7 @@ class Test_TestLoader(unittest.TestCase):
         loader = unittest.TestLoader()
         self.assertEqual(loader.loadTestsFromTestCase(Foo), empty_suite)
 
-    # "Return a suite of all tests cases contained in the TestCase-derived
+    # "Return a suite of all test cases contained in the TestCase-derived
     # class testCaseClass"
     #
     # What happens if loadTestsFromTestCase() is given an object
@@ -82,7 +82,7 @@ class Test_TestLoader(unittest.TestCase):
         else:
             self.fail('Should raise TypeError')
 
-    # "Return a suite of all tests cases contained in the TestCase-derived
+    # "Return a suite of all test cases contained in the TestCase-derived
     # class testCaseClass"
     #
     # Make sure loadTestsFromTestCase() picks up the default test method
diff --git a/Lib/unittest/test/testmock/testhelpers.py b/Lib/unittest/test/testmock/testhelpers.py
index 3477634..d2202a7 100644
--- a/Lib/unittest/test/testmock/testhelpers.py
+++ b/Lib/unittest/test/testmock/testhelpers.py
@@ -306,6 +306,11 @@ class CallTest(unittest.TestCase):
         other_args = _Call(((1, 2), {'a': 3}))
         self.assertEqual(args, other_args)
 
+    def test_call_with_name(self):
+        self.assertEqual(_Call((), 'foo')[0], 'foo')
+        self.assertEqual(_Call((('bar', 'barz'),),)[0], '')
+        self.assertEqual(_Call((('bar', 'barz'), {'hello': 'world'}),)[0], '')
+
 
 class SpecSignatureTest(unittest.TestCase):
 
diff --git a/Lib/unittest/test/testmock/testmock.py b/Lib/unittest/test/testmock/testmock.py
index 5f82b82..a96ec68 100644
--- a/Lib/unittest/test/testmock/testmock.py
+++ b/Lib/unittest/test/testmock/testmock.py
@@ -306,13 +306,24 @@ class MockTest(unittest.TestCase):
 
 
     def test_calls_equal_with_any(self):
-        call1 = mock.call(mock.MagicMock())
-        call2 = mock.call(mock.ANY)
-
         # Check that equality and non-equality is consistent even when
         # comparing with mock.ANY
+        mm = mock.MagicMock()
+        self.assertTrue(mm == mm)
+        self.assertFalse(mm != mm)
+        self.assertFalse(mm == mock.MagicMock())
+        self.assertTrue(mm != mock.MagicMock())
+        self.assertTrue(mm == mock.ANY)
+        self.assertFalse(mm != mock.ANY)
+        self.assertTrue(mock.ANY == mm)
+        self.assertFalse(mock.ANY != mm)
+
+        call1 = mock.call(mock.MagicMock())
+        call2 = mock.call(mock.ANY)
         self.assertTrue(call1 == call2)
         self.assertFalse(call1 != call2)
+        self.assertTrue(call2 == call1)
+        self.assertFalse(call2 != call1)
 
 
     def test_assert_called_with(self):
diff --git a/Lib/urllib/error.py b/Lib/urllib/error.py
index c5b675d..851515b 100644
--- a/Lib/urllib/error.py
+++ b/Lib/urllib/error.py
@@ -16,10 +16,6 @@ import urllib.response
 __all__ = ['URLError', 'HTTPError', 'ContentTooShortError']
 
 
-# do these error classes make sense?
-# make sure all of the OSError stuff is overridden.  we just want to be
-# subtypes.
-
 class URLError(OSError):
     # URLError is a sub-type of OSError, but it doesn't share any of
     # the implementation.  need to override __init__ and __str__.
diff --git a/Lib/urllib/parse.py b/Lib/urllib/parse.py
index 566fbf7..5746a4e 100644
--- a/Lib/urllib/parse.py
+++ b/Lib/urllib/parse.py
@@ -38,29 +38,37 @@ __all__ = ["urlparse", "urlunparse", "urljoin", "urldefrag",
            "DefragResult", "ParseResult", "SplitResult",
            "DefragResultBytes", "ParseResultBytes", "SplitResultBytes"]
 
-# A classification of schemes ('' means apply by default)
-uses_relative = ['ftp', 'http', 'gopher', 'nntp', 'imap',
+# A classification of schemes.
+# The empty string classifies URLs with no scheme specified,
+# being the default value returned by â€œurlsplitâ€ and â€œurlparseâ€.
+
+uses_relative = ['', 'ftp', 'http', 'gopher', 'nntp', 'imap',
                  'wais', 'file', 'https', 'shttp', 'mms',
-                 'prospero', 'rtsp', 'rtspu', '', 'sftp',
+                 'prospero', 'rtsp', 'rtspu', 'sftp',
                  'svn', 'svn+ssh', 'ws', 'wss']
-uses_netloc = ['ftp', 'http', 'gopher', 'nntp', 'telnet',
+
+uses_netloc = ['', 'ftp', 'http', 'gopher', 'nntp', 'telnet',
                'imap', 'wais', 'file', 'mms', 'https', 'shttp',
-               'snews', 'prospero', 'rtsp', 'rtspu', 'rsync', '',
+               'snews', 'prospero', 'rtsp', 'rtspu', 'rsync',
                'svn', 'svn+ssh', 'sftp', 'nfs', 'git', 'git+ssh',
                'ws', 'wss']
-uses_params = ['ftp', 'hdl', 'prospero', 'http', 'imap',
+
+uses_params = ['', 'ftp', 'hdl', 'prospero', 'http', 'imap',
                'https', 'shttp', 'rtsp', 'rtspu', 'sip', 'sips',
-               'mms', '', 'sftp', 'tel']
+               'mms', 'sftp', 'tel']
 
 # These are not actually used anymore, but should stay for backwards
 # compatibility.  (They are undocumented, but have a public-looking name.)
+
 non_hierarchical = ['gopher', 'hdl', 'mailto', 'news',
                     'telnet', 'wais', 'imap', 'snews', 'sip', 'sips']
-uses_query = ['http', 'wais', 'imap', 'https', 'shttp', 'mms',
-              'gopher', 'rtsp', 'rtspu', 'sip', 'sips', '']
-uses_fragment = ['ftp', 'hdl', 'http', 'gopher', 'news',
+
+uses_query = ['', 'http', 'wais', 'imap', 'https', 'shttp', 'mms',
+              'gopher', 'rtsp', 'rtspu', 'sip', 'sips']
+
+uses_fragment = ['', 'ftp', 'hdl', 'http', 'gopher', 'news',
                  'nntp', 'wais', 'https', 'shttp', 'snews',
-                 'file', 'prospero', '']
+                 'file', 'prospero']
 
 # Characters valid in scheme names
 scheme_chars = ('abcdefghijklmnopqrstuvwxyz'
@@ -550,6 +558,7 @@ def unquote(string, encoding='utf-8', errors='replace'):
         append(bits[i + 1])
     return ''.join(res)
 
+
 def parse_qs(qs, keep_blank_values=False, strict_parsing=False,
              encoding='utf-8', errors='replace'):
     """Parse a query given as a string argument.
@@ -571,6 +580,8 @@ def parse_qs(qs, keep_blank_values=False, strict_parsing=False,
 
         encoding and errors: specify how to decode percent-encoded sequences
             into Unicode characters, as accepted by the bytes.decode() method.
+
+        Returns a dictionary.
     """
     parsed_result = {}
     pairs = parse_qsl(qs, keep_blank_values, strict_parsing,
@@ -582,28 +593,29 @@ def parse_qs(qs, keep_blank_values=False, strict_parsing=False,
             parsed_result[name] = [value]
     return parsed_result
 
+
 def parse_qsl(qs, keep_blank_values=False, strict_parsing=False,
               encoding='utf-8', errors='replace'):
     """Parse a query given as a string argument.
 
-    Arguments:
+        Arguments:
 
-    qs: percent-encoded query string to be parsed
+        qs: percent-encoded query string to be parsed
 
-    keep_blank_values: flag indicating whether blank values in
-        percent-encoded queries should be treated as blank strings.  A
-        true value indicates that blanks should be retained as blank
-        strings.  The default false value indicates that blank values
-        are to be ignored and treated as if they were  not included.
+        keep_blank_values: flag indicating whether blank values in
+            percent-encoded queries should be treated as blank strings.
+            A true value indicates that blanks should be retained as blank
+            strings.  The default false value indicates that blank values
+            are to be ignored and treated as if they were  not included.
 
-    strict_parsing: flag indicating what to do with parsing errors. If
-        false (the default), errors are silently ignored. If true,
-        errors raise a ValueError exception.
+        strict_parsing: flag indicating what to do with parsing errors. If
+            false (the default), errors are silently ignored. If true,
+            errors raise a ValueError exception.
 
-    encoding and errors: specify how to decode percent-encoded sequences
-        into Unicode characters, as accepted by the bytes.decode() method.
+        encoding and errors: specify how to decode percent-encoded sequences
+            into Unicode characters, as accepted by the bytes.decode() method.
 
-    Returns a list, as G-d intended.
+        Returns a list, as G-d intended.
     """
     qs, _coerce_result = _coerce_args(qs)
     pairs = [s2 for s1 in qs.split('&') for s2 in s1.split(';')]
diff --git a/Lib/urllib/request.py b/Lib/urllib/request.py
index a4bf97d..e98be0c 100644
--- a/Lib/urllib/request.py
+++ b/Lib/urllib/request.py
@@ -1424,7 +1424,6 @@ class FileHandler(BaseHandler):
                     origurl = 'file://' + filename
                 return addinfourl(open(localfile, 'rb'), headers, origurl)
         except OSError as exp:
-            # users shouldn't expect OSErrors coming from urlopen()
             raise URLError(exp)
         raise URLError('file not on local host')
 
@@ -1594,14 +1593,10 @@ else:
         of the 'file' scheme; not recommended for general use."""
         return quote(pathname)
 
-# This really consists of two pieces:
-# (1) a class which handles opening of all sorts of URLs
-#     (plus assorted utilities etc.)
-# (2) a set of functions for parsing URLs
-# XXX Should these be separated out into different modules?
-
 
 ftpcache = {}
+
+
 class URLopener:
     """Class to open URLs.
     This is a class rather than just a subroutine because we may need
@@ -2450,6 +2445,7 @@ def proxy_bypass_environment(host, proxies=None):
     no_proxy_list = [proxy.strip() for proxy in no_proxy.split(',')]
     for name in no_proxy_list:
         if name:
+            name = name.lstrip('.')  # ignore leading dots
             name = re.escape(name)
             pattern = r'(.+\.)?%s$' % name
             if (re.match(pattern, hostonly, re.I)
diff --git a/Lib/venv/__init__.py b/Lib/venv/__init__.py
index 74245ab..6bb99cb 100644
--- a/Lib/venv/__init__.py
+++ b/Lib/venv/__init__.py
@@ -77,6 +77,10 @@ class EnvBuilder:
         """
         env_dir = os.path.abspath(env_dir)
         context = self.ensure_directories(env_dir)
+        # See issue 24875. We need system_site_packages to be False
+        # until after pip is installed.
+        true_system_site_packages = self.system_site_packages
+        self.system_site_packages = False
         self.create_configuration(context)
         self.setup_python(context)
         if self.with_pip:
@@ -84,6 +88,11 @@ class EnvBuilder:
         if not self.upgrade:
             self.setup_scripts(context)
             self.post_setup(context)
+        if true_system_site_packages:
+            # We had set it to False before, now
+            # restore it and rewrite the configuration
+            self.system_site_packages = True
+            self.create_configuration(context)
 
     def clear_directory(self, path):
         for fn in os.listdir(path):
@@ -330,19 +339,17 @@ class EnvBuilder:
                 dstfile = os.path.join(dstdir, f)
                 with open(srcfile, 'rb') as f:
                     data = f.read()
-                if srcfile.endswith('.exe'):
-                    mode = 'wb'
-                else:
-                    mode = 'w'
+                if not srcfile.endswith('.exe'):
                     try:
                         data = data.decode('utf-8')
                         data = self.replace_variables(data, context)
-                    except UnicodeDecodeError as e:
+                        data = data.encode('utf-8')
+                    except UnicodeError as e:
                         data = None
                         logger.warning('unable to copy script %r, '
                                        'may be binary: %s', srcfile, e)
                 if data is not None:
-                    with open(dstfile, mode) as f:
+                    with open(dstfile, 'wb') as f:
                         f.write(data)
                     shutil.copymode(srcfile, dstfile)
 
diff --git a/Lib/venv/scripts/common/activate b/Lib/venv/scripts/common/activate
new file mode 100644
index 0000000..c78a4ef
--- /dev/null
+++ b/Lib/venv/scripts/common/activate
@@ -0,0 +1,76 @@
+# This file must be used with "source bin/activate" *from bash*
+# you cannot run it directly
+
+deactivate () {
+    # reset old environment variables
+    if [ -n "$_OLD_VIRTUAL_PATH" ] ; then
+        PATH="$_OLD_VIRTUAL_PATH"
+        export PATH
+        unset _OLD_VIRTUAL_PATH
+    fi
+    if [ -n "$_OLD_VIRTUAL_PYTHONHOME" ] ; then
+        PYTHONHOME="$_OLD_VIRTUAL_PYTHONHOME"
+        export PYTHONHOME
+        unset _OLD_VIRTUAL_PYTHONHOME
+    fi
+
+    # This should detect bash and zsh, which have a hash command that must
+    # be called to get it to forget past commands.  Without forgetting
+    # past commands the $PATH changes we made may not be respected
+    if [ -n "$BASH" -o -n "$ZSH_VERSION" ] ; then
+        hash -r
+    fi
+
+    if [ -n "$_OLD_VIRTUAL_PS1" ] ; then
+        PS1="$_OLD_VIRTUAL_PS1"
+        export PS1
+        unset _OLD_VIRTUAL_PS1
+    fi
+
+    unset VIRTUAL_ENV
+    if [ ! "$1" = "nondestructive" ] ; then
+    # Self destruct!
+        unset -f deactivate
+    fi
+}
+
+# unset irrelevant variables
+deactivate nondestructive
+
+VIRTUAL_ENV="__VENV_DIR__"
+export VIRTUAL_ENV
+
+_OLD_VIRTUAL_PATH="$PATH"
+PATH="$VIRTUAL_ENV/__VENV_BIN_NAME__:$PATH"
+export PATH
+
+# unset PYTHONHOME if set
+# this will fail if PYTHONHOME is set to the empty string (which is bad anyway)
+# could use `if (set -u; : $PYTHONHOME) ;` in bash
+if [ -n "$PYTHONHOME" ] ; then
+    _OLD_VIRTUAL_PYTHONHOME="$PYTHONHOME"
+    unset PYTHONHOME
+fi
+
+if [ -z "$VIRTUAL_ENV_DISABLE_PROMPT" ] ; then
+    _OLD_VIRTUAL_PS1="$PS1"
+    if [ "x__VENV_PROMPT__" != x ] ; then
+	PS1="__VENV_PROMPT__$PS1"
+    else
+    if [ "`basename \"$VIRTUAL_ENV\"`" = "__" ] ; then
+        # special case for Aspen magic directories
+        # see http://www.zetadev.com/software/aspen/
+        PS1="[`basename \`dirname \"$VIRTUAL_ENV\"\``] $PS1"
+    else
+        PS1="(`basename \"$VIRTUAL_ENV\"`)$PS1"
+    fi
+    fi
+    export PS1
+fi
+
+# This should detect bash and zsh, which have a hash command that must
+# be called to get it to forget past commands.  Without forgetting
+# past commands the $PATH changes we made may not be respected
+if [ -n "$BASH" -o -n "$ZSH_VERSION" ] ; then
+    hash -r
+fi
diff --git a/Lib/weakref.py b/Lib/weakref.py
index aaebd0c..787e33a 100644
--- a/Lib/weakref.py
+++ b/Lib/weakref.py
@@ -106,7 +106,7 @@ class WeakValueDictionary(collections.MutableMapping):
         self, *args = args
         if len(args) > 1:
             raise TypeError('expected at most 1 arguments, got %d' % len(args))
-        def remove(wr, selfref=ref(self)):
+        def remove(wr, selfref=ref(self), _atomic_removal=_remove_dead_weakref):
             self = selfref()
             if self is not None:
                 if self._iterating:
@@ -114,7 +114,7 @@ class WeakValueDictionary(collections.MutableMapping):
                 else:
                     # Atomic removal is necessary since this function
                     # can be called asynchronously by the GC
-                    _remove_dead_weakref(d, wr.key)
+                    _atomic_removal(d, wr.key)
         self._remove = remove
         # A list of keys to be removed
         self._pending_removals = []
diff --git a/Lib/xml/sax/expatreader.py b/Lib/xml/sax/expatreader.py
index 98b5ca9..421358f 100644
--- a/Lib/xml/sax/expatreader.py
+++ b/Lib/xml/sax/expatreader.py
@@ -105,9 +105,16 @@ class ExpatParser(xmlreader.IncrementalParser, xmlreader.Locator):
         source = saxutils.prepare_input_source(source)
 
         self._source = source
-        self.reset()
-        self._cont_handler.setDocumentLocator(ExpatLocator(self))
-        xmlreader.IncrementalParser.parse(self, source)
+        try:
+            self.reset()
+            self._cont_handler.setDocumentLocator(ExpatLocator(self))
+            xmlreader.IncrementalParser.parse(self, source)
+        except:
+            # bpo-30264: Close the source on error to not leak resources:
+            # xml.sax.parse() doesn't give access to the underlying parser
+            # to the caller
+            self._close_source()
+            raise
 
     def prepareParser(self, source):
         if source.getSystemId() is not None:
@@ -213,6 +220,17 @@ class ExpatParser(xmlreader.IncrementalParser, xmlreader.Locator):
             # FIXME: when to invoke error()?
             self._err_handler.fatalError(exc)
 
+    def _close_source(self):
+        source = self._source
+        try:
+            file = source.getCharacterStream()
+            if file is not None:
+                file.close()
+        finally:
+            file = source.getByteStream()
+            if file is not None:
+                file.close()
+
     def close(self):
         if (self._entity_stack or self._parser is None or
             isinstance(self._parser, _ClosedParser)):
@@ -232,14 +250,7 @@ class ExpatParser(xmlreader.IncrementalParser, xmlreader.Locator):
                 parser.ErrorColumnNumber = self._parser.ErrorColumnNumber
                 parser.ErrorLineNumber = self._parser.ErrorLineNumber
                 self._parser = parser
-            try:
-                file = self._source.getCharacterStream()
-                if file is not None:
-                    file.close()
-            finally:
-                file = self._source.getByteStream()
-                if file is not None:
-                    file.close()
+            self._close_source()
 
     def _reset_cont_handler(self):
         self._parser.ProcessingInstructionHandler = \
diff --git a/Lib/xmlrpc/server.py b/Lib/xmlrpc/server.py
index 7817693..276394d 100644
--- a/Lib/xmlrpc/server.py
+++ b/Lib/xmlrpc/server.py
@@ -386,31 +386,36 @@ class SimpleXMLRPCDispatcher:
         not be called.
         """
 
-        func = None
         try:
-            # check to see if a matching function has been registered
+            # call the matching registered function
             func = self.funcs[method]
         except KeyError:
-            if self.instance is not None:
-                # check for a _dispatch method
-                if hasattr(self.instance, '_dispatch'):
-                    return self.instance._dispatch(method, params)
-                else:
-                    # call instance method directly
-                    try:
-                        func = resolve_dotted_attribute(
-                            self.instance,
-                            method,
-                            self.allow_dotted_names
-                            )
-                    except AttributeError:
-                        pass
-
-        if func is not None:
-            return func(*params)
+            pass
         else:
+            if func is not None:
+                return func(*params)
             raise Exception('method "%s" is not supported' % method)
 
+        if self.instance is not None:
+            if hasattr(self.instance, '_dispatch'):
+                # call the `_dispatch` method on the instance
+                return self.instance._dispatch(method, params)
+
+            # call the instance's method directly
+            try:
+                func = resolve_dotted_attribute(
+                    self.instance,
+                    method,
+                    self.allow_dotted_names
+                )
+            except AttributeError:
+                pass
+            else:
+                if func is not None:
+                    return func(*params)
+
+        raise Exception('method "%s" is not supported' % method)
+
 class SimpleXMLRPCRequestHandler(BaseHTTPRequestHandler):
     """Simple XML-RPC request handler class.
 
diff --git a/Lib/zipfile.py b/Lib/zipfile.py
index 048f60a..56a2479 100644
--- a/Lib/zipfile.py
+++ b/Lib/zipfile.py
@@ -1028,7 +1028,6 @@ class ZipFile:
                 # set the modified flag so central directory gets written
                 # even if no files are added to the archive
                 self._didModify = True
-                self._start_disk = 0
                 try:
                     self.start_dir = self.fp.tell()
                 except (AttributeError, OSError):
@@ -1054,7 +1053,7 @@ class ZipFile:
                     # set the modified flag so central directory gets written
                     # even if no files are added to the archive
                     self._didModify = True
-                    self.start_dir = self._start_disk = self.fp.tell()
+                    self.start_dir = self.fp.tell()
             else:
                 raise RuntimeError("Mode must be 'r', 'w', 'x', or 'a'")
         except:
@@ -1098,18 +1097,17 @@ class ZipFile:
         offset_cd = endrec[_ECD_OFFSET]         # offset of central directory
         self._comment = endrec[_ECD_COMMENT]    # archive comment
 
-        # self._start_disk:  Position of the start of ZIP archive
-        # It is zero, unless ZIP was concatenated to another file
-        self._start_disk = endrec[_ECD_LOCATION] - size_cd - offset_cd
+        # "concat" is zero, unless zip was concatenated to another file
+        concat = endrec[_ECD_LOCATION] - size_cd - offset_cd
         if endrec[_ECD_SIGNATURE] == stringEndArchive64:
             # If Zip64 extension structures are present, account for them
-            self._start_disk -= (sizeEndCentDir64 + sizeEndCentDir64Locator)
+            concat -= (sizeEndCentDir64 + sizeEndCentDir64Locator)
 
         if self.debug > 2:
-            inferred = self._start_disk + offset_cd
-            print("given, inferred, offset", offset_cd, inferred, self._start_disk)
+            inferred = concat + offset_cd
+            print("given, inferred, offset", offset_cd, inferred, concat)
         # self.start_dir:  Position of start of central directory
-        self.start_dir = offset_cd + self._start_disk
+        self.start_dir = offset_cd + concat
         fp.seek(self.start_dir, 0)
         data = fp.read(size_cd)
         fp = io.BytesIO(data)
@@ -1149,7 +1147,7 @@ class ZipFile:
                             t>>11, (t>>5)&0x3F, (t&0x1F) * 2 )
 
             x._decodeExtra()
-            x.header_offset = x.header_offset + self._start_disk
+            x.header_offset = x.header_offset + concat
             self.filelist.append(x)
             self.NameToInfo[x.filename] = x
 
@@ -1629,10 +1627,11 @@ class ZipFile:
                 file_size = zinfo.file_size
                 compress_size = zinfo.compress_size
 
-            header_offset = zinfo.header_offset - self._start_disk
-            if header_offset > ZIP64_LIMIT:
-                extra.append(header_offset)
+            if zinfo.header_offset > ZIP64_LIMIT:
+                extra.append(zinfo.header_offset)
                 header_offset = 0xffffffff
+            else:
+                header_offset = zinfo.header_offset
 
             extra_data = zinfo.extra
             min_version = 0
@@ -1679,7 +1678,7 @@ class ZipFile:
         # Write end-of-zip-archive record
         centDirCount = len(self.filelist)
         centDirSize = pos2 - self.start_dir
-        centDirOffset = self.start_dir - self._start_disk
+        centDirOffset = self.start_dir
         requires_zip64 = None
         if centDirCount > ZIP_FILECOUNT_LIMIT:
             requires_zip64 = "Files count"
diff --git a/Mac/BuildScript/build-installer.py b/Mac/BuildScript/build-installer.py
index c76c4f1..fb11274 100755
--- a/Mac/BuildScript/build-installer.py
+++ b/Mac/BuildScript/build-installer.py
@@ -1168,9 +1168,6 @@ def buildPython():
         shellQuote(WORKDIR)[1:-1],
         shellQuote(WORKDIR)[1:-1]))
 
-    print("Running make touch")
-    runCommand("make touch")
-
     print("Running make")
     runCommand("make")
 
diff --git a/Makefile.pre.in b/Makefile.pre.in
index a88b7d5..144c1f8 100644
--- a/Makefile.pre.in
+++ b/Makefile.pre.in
@@ -41,9 +41,9 @@ RANLIB=		@RANLIB@
 READELF=	@READELF@
 SOABI=		@SOABI@
 LDVERSION=	@LDVERSION@
-HGVERSION=	@HGVERSION@
-HGTAG=		@HGTAG@
-HGBRANCH=	@HGBRANCH@
+GITVERSION=	@GITVERSION@
+GITTAG=		@GITTAG@
+GITBRANCH=	@GITBRANCH@
 PGO_PROF_GEN_FLAG=@PGO_PROF_GEN_FLAG@
 PGO_PROF_USE_FLAG=@PGO_PROF_USE_FLAG@
 LLVM_PROF_MERGER=@LLVM_PROF_MERGER@
@@ -103,6 +103,8 @@ ARFLAGS=	@ARFLAGS@
 CFLAGSFORSHARED=@CFLAGSFORSHARED@
 # C flags used for building the interpreter object files
 PY_CORE_CFLAGS=	$(PY_CFLAGS) $(PY_CFLAGS_NODIST) $(PY_CPPFLAGS) $(CFLAGSFORSHARED) -DPy_BUILD_CORE
+# Strict or non-strict aliasing flags used to compile dtoa.c, see above
+CFLAGS_ALIASING=@CFLAGS_ALIASING@
 
 
 # Machine-dependent subdirectories
@@ -222,7 +224,7 @@ LIBOBJS=	@LIBOBJS@
 PYTHON=		python$(EXE)
 BUILDPYTHON=	python$(BUILDEXE)
 
-PYTHON_FOR_GEN=@PYTHON_FOR_GEN@
+PYTHON_FOR_REGEN=@PYTHON_FOR_REGEN@
 PYTHON_FOR_BUILD=@PYTHON_FOR_BUILD@
 _PYTHON_HOST_PLATFORM=@_PYTHON_HOST_PLATFORM@
 BUILD_GNU_TYPE=	@build@
@@ -269,11 +271,6 @@ IO_OBJS=	\
 		Modules/_io/stringio.o
 
 ##########################################################################
-# Grammar
-GRAMMAR_H=	Include/graminit.h
-GRAMMAR_C=	Python/graminit.c
-GRAMMAR_INPUT=	$(srcdir)/Grammar/Grammar
-
 
 LIBFFI_INCLUDEDIR=	@LIBFFI_INCLUDEDIR@
 
@@ -336,37 +333,8 @@ PGENSRCS=	$(PSRCS) $(PGSRCS)
 PGENOBJS=	$(POBJS) $(PGOBJS)
 
 ##########################################################################
-# opcode.h generation
-OPCODE_H_DIR= 	$(srcdir)/Include
-OPCODE_H_SCRIPT= $(srcdir)/Tools/scripts/generate_opcode_h.py
-OPCODE_H=	$(OPCODE_H_DIR)/opcode.h
-OPCODE_H_GEN=	$(PYTHON_FOR_GEN) $(OPCODE_H_SCRIPT) $(srcdir)/Lib/opcode.py $(OPCODE_H)
-#
-##########################################################################
-# AST
-AST_H_DIR=	Include
-AST_H=		$(AST_H_DIR)/Python-ast.h
-AST_C_DIR=	Python
-AST_C=		$(AST_C_DIR)/Python-ast.c
-AST_ASDL=	$(srcdir)/Parser/Python.asdl
-
-ASDLGEN_FILES=	$(srcdir)/Parser/asdl.py $(srcdir)/Parser/asdl_c.py
-# Note that a build now requires Python to exist before the build starts.
-# Use "hg touch" to fix up screwed up file mtimes in a checkout.
-ASDLGEN=	$(PYTHON_FOR_GEN) $(srcdir)/Parser/asdl_c.py
-
-##########################################################################
 # Python
 
-OPCODETARGETS_H= \
-		Python/opcode_targets.h
-
-OPCODETARGETGEN= \
-		$(srcdir)/Python/makeopcodetargets.py
-
-OPCODETARGETGEN_FILES= \
-		$(OPCODETARGETGEN) $(srcdir)/Lib/opcode.py
-
 PYTHON_OBJS=	\
 		Python/_warnings.o \
 		Python/Python-ast.o \
@@ -549,7 +517,8 @@ coverage-lcov:
 	@echo "lcov report at $(COVERAGE_REPORT)/index.html"
 	@echo
 
-coverage-report:
+# Force regeneration of parser and importlib
+coverage-report: regen-grammar regen-importlib
 	: # force rebuilding of parser and importlib
 	@touch $(GRAMMAR_INPUT)
 	@touch $(srcdir)/Lib/importlib/_bootstrap.py
@@ -719,14 +688,24 @@ Programs/_freeze_importlib.o: Programs/_freeze_importlib.c Makefile
 Programs/_freeze_importlib: Programs/_freeze_importlib.o $(LIBRARY_OBJS_OMIT_FROZEN)
 	$(LINKCC) $(PY_LDFLAGS) -o $@ Programs/_freeze_importlib.o $(LIBRARY_OBJS_OMIT_FROZEN) $(LIBS) $(MODLIBS) $(SYSLIBS) $(LDLAST)
 
-Python/importlib_external.h: @GENERATED_COMMENT@ $(srcdir)/Lib/importlib/_bootstrap_external.py Programs/_freeze_importlib
+.PHONY: regen-importlib
+regen-importlib: Programs/_freeze_importlib
+	# Regenerate Python/importlib_external.h
+	# from Lib/importlib/_bootstrap_external.py using _freeze_importlib
 	./Programs/_freeze_importlib \
-	    $(srcdir)/Lib/importlib/_bootstrap_external.py Python/importlib_external.h
-
-Python/importlib.h: @GENERATED_COMMENT@ $(srcdir)/Lib/importlib/_bootstrap.py Programs/_freeze_importlib
+	    $(srcdir)/Lib/importlib/_bootstrap_external.py \
+	    $(srcdir)/Python/importlib_external.h
+	# Regenerate Python/importlib.h from Lib/importlib/_bootstrap.py
+	# using _freeze_importlib
 	./Programs/_freeze_importlib \
-	    $(srcdir)/Lib/importlib/_bootstrap.py Python/importlib.h
+	    $(srcdir)/Lib/importlib/_bootstrap.py \
+	    $(srcdir)/Python/importlib.h
+
+
+############################################################################
+# Regenerate all generated files
 
+regen-all: regen-opcode regen-opcode-targets regen-typeslots regen-grammar regen-ast regen-importlib
 
 ############################################################################
 # Special rules for object files
@@ -739,9 +718,9 @@ Modules/getbuildinfo.o: $(PARSER_OBJS) \
 		$(MODOBJS) \
 		$(srcdir)/Modules/getbuildinfo.c
 	$(CC) -c $(PY_CORE_CFLAGS) \
-	      -DHGVERSION="\"`LC_ALL=C $(HGVERSION)`\"" \
-	      -DHGTAG="\"`LC_ALL=C $(HGTAG)`\"" \
-	      -DHGBRANCH="\"`LC_ALL=C $(HGBRANCH)`\"" \
+	      -DGITVERSION="\"`LC_ALL=C $(GITVERSION)`\"" \
+	      -DGITTAG="\"`LC_ALL=C $(GITTAG)`\"" \
+	      -DGITBRANCH="\"`LC_ALL=C $(GITBRANCH)`\"" \
 	      -o $@ $(srcdir)/Modules/getbuildinfo.c
 
 Modules/getpath.o: $(srcdir)/Modules/getpath.c Makefile
@@ -785,15 +764,18 @@ Python/sysmodule.o: $(srcdir)/Python/sysmodule.c Makefile
 
 $(IO_OBJS): $(IO_H)
 
-$(GRAMMAR_H): @GENERATED_COMMENT@ $(GRAMMAR_INPUT) $(PGEN)
-	@$(MKDIR_P) Include
-	$(PGEN) $(GRAMMAR_INPUT) $(GRAMMAR_H) $(GRAMMAR_C)
-$(GRAMMAR_C): @GENERATED_COMMENT@ $(GRAMMAR_H)
-	touch $(GRAMMAR_C)
-
 $(PGEN): $(PGENOBJS)
 		$(CC) $(OPT) $(PY_LDFLAGS) $(PGENOBJS) $(LIBS) -o $(PGEN)
 
+.PHONY: regen-grammar
+regen-grammar: $(PGEN)
+	# Regenerate Include/graminit.h and Python/graminit.c
+	# from Grammar/Grammar using pgen
+	@$(MKDIR_P) Include
+	$(PGEN) $(srcdir)/Grammar/Grammar \
+		$(srcdir)/Include/graminit.h \
+		$(srcdir)/Python/graminit.c
+
 Parser/grammar.o:	$(srcdir)/Parser/grammar.c \
 				$(srcdir)/Include/token.h \
 				$(srcdir)/Include/grammar.h
@@ -805,18 +787,28 @@ Parser/printgrammar.o: $(srcdir)/Parser/printgrammar.c
 
 Parser/pgenmain.o:	$(srcdir)/Include/parsetok.h
 
-$(AST_H): $(AST_ASDL) $(ASDLGEN_FILES)
-	$(MKDIR_P) $(AST_H_DIR)
-	$(ASDLGEN) -h $(AST_H_DIR) $(AST_ASDL)
-
-$(AST_C): $(AST_H) $(AST_ASDL) $(ASDLGEN_FILES)
-	$(MKDIR_P) $(AST_C_DIR)
-	$(ASDLGEN) -c $(AST_C_DIR) $(AST_ASDL)
-
-$(OPCODE_H): $(srcdir)/Lib/opcode.py $(OPCODE_H_SCRIPT)
-	$(OPCODE_H_GEN)
-
-Python/compile.o Python/symtable.o Python/ast.o: $(GRAMMAR_H) $(AST_H)
+.PHONY=regen-ast
+regen-ast:
+	# Regenerate Include/Python-ast.h using Parser/asdl_c.py -h
+	$(MKDIR_P) $(srcdir)/Include
+	$(PYTHON_FOR_REGEN) $(srcdir)/Parser/asdl_c.py \
+		-h $(srcdir)/Include \
+		$(srcdir)/Parser/Python.asdl
+	# Regenerate Python/Python-ast.c using Parser/asdl_c.py -c
+	$(MKDIR_P) $(srcdir)/Python
+	$(PYTHON_FOR_REGEN) $(srcdir)/Parser/asdl_c.py \
+		-c $(srcdir)/Python \
+		$(srcdir)/Parser/Python.asdl
+
+.PHONY: regen-opcode
+regen-opcode:
+	# Regenerate Include/opcode.h from Lib/opcode.py
+	# using Tools/scripts/generate_opcode_h.py
+	$(PYTHON_FOR_REGEN) $(srcdir)/Tools/scripts/generate_opcode_h.py \
+		$(srcdir)/Lib/opcode.py \
+		$(srcdir)/Include/opcode.h
+
+Python/compile.o Python/symtable.o Python/ast.o: $(srcdir)/Include/graminit.h $(srcdir)/Include/Python-ast.h
 
 Python/getplatform.o: $(srcdir)/Python/getplatform.c
 		$(CC) -c $(PY_CORE_CFLAGS) -DPLATFORM='"$(MACHDEP)"' -o $@ $(srcdir)/Python/getplatform.c
@@ -865,16 +857,26 @@ Objects/unicodeobject.o: $(srcdir)/Objects/unicodeobject.c $(UNICODE_DEPS)
 Objects/dictobject.o: $(srcdir)/Objects/stringlib/eq.h
 Objects/setobject.o: $(srcdir)/Objects/stringlib/eq.h
 
-$(OPCODETARGETS_H): $(OPCODETARGETGEN_FILES)
-	$(PYTHON_FOR_GEN) $(OPCODETARGETGEN) $(OPCODETARGETS_H)
+.PHONY: regen-opcode-targets
+regen-opcode-targets:
+	# Regenerate Python/opcode_targets.h from Lib/opcode.py
+	# using Python/makeopcodetargets.py
+	$(PYTHON_FOR_REGEN) $(srcdir)/Python/makeopcodetargets.py \
+		$(srcdir)/Python/opcode_targets.h
 
-Python/ceval.o: $(OPCODETARGETS_H) $(srcdir)/Python/ceval_gil.h
+Python/ceval.o: $(srcdir)/Python/opcode_targets.h $(srcdir)/Python/ceval_gil.h
 
-Python/frozen.o: Python/importlib.h Python/importlib_external.h
+Python/frozen.o: $(srcdir)/Python/importlib.h $(srcdir)/Python/importlib_external.h
 
 Objects/typeobject.o: Objects/typeslots.inc
-Objects/typeslots.inc: $(srcdir)/Include/typeslots.h $(srcdir)/Objects/typeslots.py
-	$(PYTHON_FOR_GEN) $(srcdir)/Objects/typeslots.py < $(srcdir)/Include/typeslots.h Objects/typeslots.inc
+
+.PHONY: regen-typeslots
+regen-typeslots:
+	# Regenerate Objects/typeslots.inc from Include/typeslotsh
+	# using Objects/typeslots.py
+	$(PYTHON_FOR_REGEN) $(srcdir)/Objects/typeslots.py \
+		< $(srcdir)/Include/typeslots.h \
+		$(srcdir)/Objects/typeslots.inc
 
 ############################################################################
 # Header files
@@ -927,7 +929,7 @@ PYTHON_HEADERS= \
 		$(srcdir)/Include/node.h \
 		$(srcdir)/Include/object.h \
 		$(srcdir)/Include/objimpl.h \
-		$(OPCODE_H) \
+		$(srcdir)/Include/opcode.h \
 		$(srcdir)/Include/osdefs.h \
 		$(srcdir)/Include/patchlevel.h \
 		$(srcdir)/Include/pgen.h \
@@ -968,7 +970,7 @@ PYTHON_HEADERS= \
 		$(srcdir)/Include/weakrefobject.h \
 		pyconfig.h \
 		$(PARSER_HEADERS) \
-		$(AST_H)
+		$(srcdir)/Include/Python-ast.h
 
 $(LIBRARY_OBJS) $(MODOBJS) Programs/python.o: $(PYTHON_HEADERS)
 
@@ -982,7 +984,7 @@ TESTTIMEOUT=	3600
 
 # Run a basic set of regression tests.
 # This excludes some tests that are particularly resource-intensive.
-test:		all platform
+test:		@DEF_MAKE_RULE@ platform
 		$(TESTRUNNER) $(TESTOPTS)
 
 # Run the full test suite twice - once without .pyc files, and once with.
@@ -992,7 +994,7 @@ test:		all platform
 # the bytecode read from a .pyc file had the bug, sometimes the directly
 # generated bytecode.  This is sometimes a very shy bug needing a lot of
 # sample data.
-testall:	all platform
+testall:	@DEF_MAKE_RULE@ platform
 		-find $(srcdir)/Lib -name '*.py[co]' -print | xargs rm -f
 		$(TESTPYTHON) -E $(srcdir)/Lib/compileall.py
 		-find $(srcdir)/Lib -name '*.py[co]' -print | xargs rm -f
@@ -1001,7 +1003,7 @@ testall:	all platform
 
 # Run the test suite for both architectures in a Universal build on OSX.
 # Must be run on an Intel box.
-testuniversal:	all platform
+testuniversal:	@DEF_MAKE_RULE@ platform
 		if [ `arch` != 'i386' ];then \
 			echo "This can only be used on OSX/i386" ;\
 			exit 1 ;\
@@ -1024,7 +1026,7 @@ QUICKTESTOPTS=	$(TESTOPTS) -x test_subprocess test_io test_lib2to3 \
 		test_multiprocessing_forkserver \
 		test_mailbox test_socket test_poll \
 		test_select test_zipfile test_concurrent_futures
-quicktest:	all platform
+quicktest:	@DEF_MAKE_RULE@ platform
 		$(TESTRUNNER) $(QUICKTESTOPTS)
 
 
@@ -1226,7 +1228,7 @@ LIBSUBDIRS=	tkinter tkinter/test tkinter/test/test_tkinter \
 		turtledemo \
 		multiprocessing multiprocessing/dummy \
 		unittest unittest/test unittest/test/testmock \
-		venv venv/scripts venv/scripts/posix \
+		venv venv/scripts venv/scripts/common venv/scripts/posix \
 		curses pydoc_data $(MACHDEPS)
 libinstall:	build_all $(srcdir)/Lib/$(PLATDIR) $(srcdir)/Modules/xxmodule.c
 	@for i in $(SCRIPTDIR) $(LIBDEST); \
@@ -1376,7 +1378,7 @@ LIBPL=		@LIBPL@
 # pkgconfig directory
 LIBPC=		$(LIBDIR)/pkgconfig
 
-libainstall:	all python-config
+libainstall:	@DEF_MAKE_RULE@ python-config
 	@for i in $(LIBDIR) $(LIBPL) $(LIBPC); \
 	do \
 		if test ! -d $(DESTDIR)$$i; then \
@@ -1532,6 +1534,13 @@ config.status:	$(srcdir)/configure
 .c.o:
 	$(CC) -c $(PY_CORE_CFLAGS) -o $@ $<
 
+# bpo-30104: dtoa.c uses union to cast double to unsigned long[2]. clang 4.0
+# with -O2 or higher and strict aliasing miscompiles the ratio() function
+# causing rounding issues. Compile dtoa.c using -fno-strict-aliasing on clang.
+# https://bugs.llvm.org//show_bug.cgi?id=31928
+Python/dtoa.o: Python/dtoa.c
+	$(CC) -c $(PY_CORE_CFLAGS) $(CFLAGS_ALIASING) -o $@ $<
+
 # Run reindent on the library
 reindent:
 	./$(BUILDPYTHON) $(srcdir)/Tools/scripts/reindent.py -r $(srcdir)/Lib
@@ -1542,9 +1551,12 @@ recheck:
 	$(SHELL) config.status --recheck
 	$(SHELL) config.status
 
-# Rebuild the configure script from configure.ac; also rebuild pyconfig.h.in
+# Regenerate configure and pyconfig.h.in
+.PHONY: autoconf
 autoconf:
+	# Regenerate the configure script from configure.ac using autoconf
 	(cd $(srcdir); autoconf -Wall)
+	# Regenerate pyconfig.h.in from configure.ac using autoheader
 	(cd $(srcdir); autoheader -Wall)
 
 # Create a tags file for vi
@@ -1561,14 +1573,6 @@ TAGS::
 	etags Include/*.h; \
 	for i in $(SRCDIRS); do etags -a $$i/*.[ch]; done
 
-# This fixes up the mtimes of checked-in generated files, assuming that they
-# only *appear* to be outdated because of checkout order.
-# This is run while preparing a source release tarball, and can be run manually
-# to avoid bootstrap issues.
-touch:
-	cd $(srcdir); \
-	hg --config extensions.touch=Tools/hg/hgtouch.py touch -v
-
 # Sanitation targets -- clean leaves libraries, executables and tags
 # files, which clobber removes as well
 pycremoval:
@@ -1635,7 +1639,7 @@ distclean: clobber
 				     -exec rm -f {} ';'
 
 # Check for smelly exported symbols (not starting with Py/_Py)
-smelly: all
+smelly: @DEF_MAKE_RULE@
 	nm -p $(LIBRARY) | \
 		sed -n "/ [TDB] /s/.* //p" | grep -v "^_*Py" | sort -u; \
 
@@ -1673,7 +1677,7 @@ funny:
 		-o -print
 
 # Perform some verification checks on any modified files.
-patchcheck: all
+patchcheck: @DEF_MAKE_RULE@
 	$(RUNSHARED) ./$(BUILDPYTHON) $(srcdir)/Tools/scripts/patchcheck.py
 
 # Dependencies
@@ -1686,7 +1690,7 @@ Python/thread.o: @THREADHEADERS@
 .PHONY: maninstall libinstall inclinstall libainstall sharedinstall
 .PHONY: frameworkinstall frameworkinstallframework frameworkinstallstructure
 .PHONY: frameworkinstallmaclib frameworkinstallapps frameworkinstallunixtools
-.PHONY: frameworkaltinstallunixtools recheck autoconf clean clobber distclean
+.PHONY: frameworkaltinstallunixtools recheck clean clobber distclean
 .PHONY: smelly funny patchcheck touch altmaninstall commoninstall
 .PHONY: gdbhooks
 
diff --git a/Misc/ACKS b/Misc/ACKS
index 59b7704..53f6879 100644
--- a/Misc/ACKS
+++ b/Misc/ACKS
@@ -218,6 +218,7 @@ Alastair Burt
 Tarn Weisner Burton
 Lee Busby
 Katherine Busch
+Matthias Bussonnier
 Ralph Butler
 Laurent De Buyst
 Zach Byrne
@@ -340,6 +341,7 @@ A. Jesse Jiryu Davis
 Merlijn van Deen
 John DeGood
 Ned Deily
+Jim DeLaHunt
 Vincent Delft
 Arnaud Delobelle
 Konrad Delong
@@ -532,6 +534,7 @@ Tim Graham
 Kim GrÃ¤sman
 Nathaniel Gray
 Eddy De Greef
+Duane Griffin
 Grant Griffin
 Andrea Griffini
 Duncan Grisby
@@ -541,6 +544,7 @@ Eric Groo
 Daniel Andrade Groppe
 Dag Gruneau
 Filip GruszczyÅ„ski
+Grzegorz Grzywacz
 Thomas Guettler
 Yuyang Guo
 Anuj Gupta
@@ -757,11 +761,13 @@ Lawrence Kesteloot
 Vivek Khera
 Dhiru Kholia
 Akshit Khurana
+Sanyam Khurana
 Mads Kiilerich
 Jason Killen
 Jan Kim
 Taek Joo Kim
 Sam Kimbrel
+Tomohiko Kinebuchi
 James King
 W. Trevor King
 Paul Kippes
@@ -1084,6 +1090,7 @@ Milan Oberkirch
 Pascal Oberndoerfer
 Jeffrey Ollie
 Adam Olsen
+Bryan Olson
 Grant Olson
 Koray Oner
 Piet van Oostrum
@@ -1092,6 +1099,7 @@ Jason Orendorff
 Douglas Orr
 William Orr
 Michele OrrÃ¹
+TomÃ¡Å¡ Orsava
 Oleg Oshmyan
 Denis S. Otkidach
 Peter Otten
@@ -1346,6 +1354,7 @@ Federico Schwindt
 Barry Scott
 Steven Scott
 Nick Seidenman
+Michael Seifert
 Å½iga Seilnacht
 Yury Selivanov
 Fred Sells
@@ -1676,6 +1685,7 @@ Artur Zaprzala
 Mike Zarnstorff
 Yury V. Zaytsev
 Siebren van der Zee
+Christophe Zeitouny
 Nickolai Zeldovich
 Yuxiao Zeng
 Uwe Zessin
diff --git a/Misc/HISTORY b/Misc/HISTORY
index 9655d4c..38f3db5 100644
--- a/Misc/HISTORY
+++ b/Misc/HISTORY
@@ -3285,7 +3285,7 @@ Library
 - Issue #11382: Trivial system calls, such as dup() or pipe(), needn't
   release the GIL.  Patch by Charles-FranÃ§ois Natali.
 
-- Issue #11223: Add threading._info() function providing informations about
+- Issue #11223: Add threading._info() function providing information about
   the thread implementation.
 
 - Issue #11731: simplify/enhance email parser/generator API by introducing
diff --git a/Misc/NEWS b/Misc/NEWS
index 41cfdba..997058b 100644
--- a/Misc/NEWS
+++ b/Misc/NEWS
@@ -2,10 +2,286 @@
 Python News
 +++++++++++
 
+What's New in Python 3.5.4 release candidate 1?
+===============================================
+
+Release date: XXXX-XX-XX
+
+Core and Builtins
+-----------------
+
+- bpo-27945: Fixed various segfaults with dict when input collections are
+  mutated during searching, inserting or comparing.  Based on patches by
+  Duane Griffin and Tim Mitchell.
+
+- bpo-25794: Fixed type.__setattr__() and type.__delattr__() for
+  non-interned attribute names.  Based on patch by Eryk Sun.
+
+- bpo-29935: Fixed error messages in the index() method of tuple, list and deque
+  when pass indices of wrong type.
+
+- bpo-28876: ``bool(range)`` works even if ``len(range)``
+  raises :exc:`OverflowError`.
+
+- bpo-29600: Fix wrapping coroutine return values in StopIteration.
+
+- Issue #29537: Restore runtime compatibility with bytecode files generated by
+  CPython 3.5.0 to 3.5.2, and adjust the eval loop to avoid the problems that
+  could be caused by the malformed variant of the BUILD_MAP_UNPACK_WITH_CALL
+  opcode that they may contain. Patch by Petr Viktorin, Serhiy Storchaka,
+  and Nick Coghlan.
+
+- Issue #28598: Support __rmod__ for subclasses of str being called before
+  str.__mod__.  Patch by Martijn Pieters.
+
+- bpo-29602: Fix incorrect handling of signed zeros in complex constructor for
+  complex subclasses and for inputs having a __complex__ method. Patch
+  by Serhiy Storchaka.
+
+- bpo-29347: Fixed possibly dereferencing undefined pointers
+  when creating weakref objects.
+
+- bpo-29438: Fixed use-after-free problem in key sharing dict.
+
+- Issue #29319: Prevent RunMainFromImporter overwriting sys.path[0].
+
+- Issue #29337: Fixed possible BytesWarning when compare the code objects.
+  Warnings could be emitted at compile time.
+
+Extension Modules
+-----------------
+
+- Issue #29169: Update zlib to 1.2.11.
+
+Library
+-------
+
+- bpo-30378: Fix the problem that logging.handlers.SysLogHandler cannot
+  handle IPv6 addresses.
+
+- bpo-29960: Preserve generator state when _random.Random.setstate()
+  raises an exception.  Patch by Bryan Olson.
+
+- bpo-30414: multiprocessing.Queue._feed background running
+  thread do not break from main loop on exception.
+
+- bpo-30003: Fix handling escape characters in HZ codec.  Based on patch
+  by Ma Lin.
+
+- bpo-30301: Fix AttributeError when using SimpleQueue.empty() under
+  *spawn* and *forkserver* start methods.
+
+- bpo-30329: imaplib and poplib now catch the Windows socket WSAEINVAL error
+  (code 10022) on shutdown(SHUT_RDWR): An invalid operation was attempted.
+  This error occurs sometimes on SSL connections.
+
+- bpo-30375: Warnings emitted when compile a regular expression now always
+  point to the line in the user code.  Previously they could point into inners
+  of the re module if emitted from inside of groups or conditionals.
+
+- bpo-30048: Fixed ``Task.cancel()`` can be ignored when the task is
+  running coroutine and the coroutine returned without any more ``await``.
+
+- bpo-29990: Fix range checking in GB18030 decoder.  Original patch by Ma Lin.
+
+- Revert bpo-26293 for zipfile breakage. See also bpo-29094.
+
+- bpo-30243: Removed the __init__ methods of _json's scanner and encoder.
+  Misusing them could cause memory leaks or crashes.  Now scanner and encoder
+  objects are completely initialized in the __new__ methods.
+
+- bpo-30185: Avoid KeyboardInterrupt tracebacks in forkserver helper process
+  when Ctrl-C is received.
+
+- bpo-28556: Various updates to typing module: add typing.NoReturn type, use
+  WrapperDescriptorType, minor bug-fixes.  Original PRs by
+  Jim Fasarakis-Hilliard and Ivan Levkivskyi.
+
+- bpo-30205: Fix getsockname() for unbound AF_UNIX sockets on Linux.
+
+- bpo-30070: Fixed leaks and crashes in errors handling in the parser module.
+
+- bpo-30061: Fixed crashes in IOBase methods __next__() and readlines() when
+  readline() or __next__() respectively return non-sizeable object.
+  Fixed possible other errors caused by not checking results of PyObject_Size(),
+  PySequence_Size(), or PyMapping_Size().
+
+- bpo-30068: _io._IOBase.readlines will check if it's closed first when
+  hint is present.
+
+- bpo-29694: Fixed race condition in pathlib mkdir with flags
+  parents=True.  Patch by Armin Rigo.
+
+- bpo-29692: Fixed arbitrary unchaining of RuntimeError exceptions in
+  contextlib.contextmanager.  Patch by Siddharth Velankar.
+
+- bpo-29998: Pickling and copying ImportError now preserves name and path
+  attributes.
+
+- bpo-29942: Fix a crash in itertools.chain.from_iterable when encountering
+  long runs of empty iterables.
+
+- bpo-27863: Fixed multiple crashes in ElementTree caused by race conditions
+  and wrong types.
+
+- bpo-28699: Fixed a bug in pools in multiprocessing.pool that raising an
+  exception at the very first of an iterable may swallow the exception or
+  make the program hang. Patch by Davin Potts and Xiang Zhang.
+
+- bpo-25803: Avoid incorrect errors raised by Path.mkdir(exist_ok=True)
+  when the OS gives priority to errors such as EACCES over EEXIST.
+
+- bpo-29861: Release references to tasks, their arguments and their results
+  as soon as they are finished in multiprocessing.Pool.
+
+- bpo-29884: faulthandler: Restore the old sigaltstack during teardown.
+  Patch by Christophe Zeitouny.
+
+- bpo-25455: Fixed crashes in repr of recursive buffered file-like objects.
+
+- bpo-29800: Fix crashes in partial.__repr__ if the keys of partial.keywords
+  are not strings.  Patch by Michael Seifert.
+
+- bpo-29742: get_extra_info() raises exception if get called on closed ssl transport.
+  Patch by Nikolay Kim.
+
+- bpo-8256: Fixed possible failing or crashing input() if attributes "encoding"
+  or "errors" of sys.stdin or sys.stdout are not set or are not strings.
+
+- bpo-28298: Fix a bug that prevented array 'Q', 'L' and 'I' from accepting big
+  intables (objects that have __int__) as elements.  Patch by Oren Milman.
+
+- bpo-29615: SimpleXMLRPCDispatcher no longer chains KeyError (or any other
+  exception) to exception(s) raised in the dispatched methods.
+  Patch by Petr Motejlek.
+
+- bpo-29704: asyncio.subprocess.SubprocessStreamProtocol no longer closes before
+  all pipes are closed.
+
+- bpo-29703: Fix asyncio to support instantiation of new event loops
+  in child processes.
+
+- bpo-29376: Fix assertion error in threading._DummyThread.is_alive().
+
+- bpo-29110: Fix file object leak in aifc.open() when file is given as a
+  filesystem path and is not in valid AIFF format. Patch by Anthony Zhang.
+
+- Issue #28961: Fix unittest.mock._Call helper: don't ignore the name parameter
+  anymore. Patch written by Jiajun Huang.
+
+- bpo-29532: Altering a kwarg dictionary passed to functools.partial()
+  no longer affects a partial object after creation.
+
+- Issue #28556: Various updates to typing module: typing.Counter, typing.ChainMap,
+  improved ABC caching, etc. Original PRs by Jelle Zijlstra, Ivan Levkivskyi,
+  Manuel Krebber, and Åukasz Langa.
+
+- Issue #29100: Fix datetime.fromtimestamp() regression introduced in Python
+  3.6.0: check minimum and maximum years.
+
+- Issue #29519: Fix weakref spewing exceptions during interpreter shutdown
+  when used with a rare combination of multiprocessing and custom codecs.
+
+- Issue #29416: Prevent infinite loop in pathlib.Path.mkdir
+
+- Issue #29444: Fixed out-of-bounds buffer access in the group() method of
+  the match object.  Based on patch by WGH.
+
+- Issue #29335: Fix subprocess.Popen.wait() when the child process has
+  exited to a stopped instead of terminated state (ex: when under ptrace).
+
+- Issue #29290: Fix a regression in argparse that help messages would wrap at
+  non-breaking spaces.
+
+- Issue #28735: Fixed the comparison of mock.MagickMock with mock.ANY.
+
+- Issue #29011: Fix an important omission by adding Deque to the typing module.
+
+- Issue #29219: Fixed infinite recursion in the repr of uninitialized
+  ctypes.CDLL instances.
+
+- Issue #28969: Fixed race condition in C implementation of functools.lru_cache.
+  KeyError could be raised when cached function with full cache was
+  simultaneously called from differen threads with the same uncached arguments.
+
+- Issue #29142: In urllib.request, suffixes in no_proxy environment variable with
+  leading dots could match related hostnames again (e.g. .b.c matches a.b.c).
+  Patch by Milan Oberkirch.
+
+Windows
+-------
+
+- Issue #29392: Prevent crash when passing invalid arguments into msvcrt module.
+
+C API
+-----
+
+- Issue #27867: Function PySlice_GetIndicesEx() is replaced with a macro if
+  Py_LIMITED_API is set to the value between 0x03050400 and 0x03060000 (not
+  including) or 0x03060100 or higher.
+
+- Issue #29083: Fixed the declaration of some public API functions.
+  PyArg_VaParse() and PyArg_VaParseTupleAndKeywords() were not available in
+  limited API.  PyArg_ValidateKeywordArguments(), PyArg_UnpackTuple() and
+  Py_BuildValue() were not available in limited API of version < 3.3 when
+  PY_SSIZE_T_CLEAN is defined.
+
+Documentation
+-------------
+
+- bpo-26985: Add missing info of code object in inspect documentation.
+
+- bpo-28929: Link the documentation to its source file on GitHub.
+
+- bpo-25008: Document smtpd.py as effectively deprecated and add a pointer to
+  aiosmtpd, a third-party asyncio-based replacement.
+
+- Issue #26355: Add canonical header link on each page to corresponding major
+  version of the documentation. Patch by Matthias Bussonnier.
+
+- Issue #29349: Fix Python 2 syntax in code for building the documentation.
+
+Build
+-----
+
+- bpo-29243: Prevent unnecessary rebuilding of Python during ``make test``,
+  ``make install`` and some other make targets when configured with
+  ``--enable-optimizations``.
+
+- bpo-23404: Don't regenerate generated files based on file modification time
+  anymore: the action is now explicit. Replace ``make touch`` with
+  ``make regen-all``.
+
+- bpo-29643: Fix ``--enable-optimization`` didn't work.
+
+Tests
+-----
+
+- bpo-30357: test_thread: setUp() now uses support.threading_setup() and
+  support.threading_cleanup() to wait until threads complete to avoid
+  random side effects on following tests. Initial patch written by Grzegorz
+  Grzywacz.
+
+- bpo-28087: Skip test_asyncore and test_eintr poll failures on macOS.
+  Skip some tests of select.poll when running on macOS due to unresolved
+  issues with the underlying system poll function on some macOS versions.
+
+- bpo-30197: Enhanced functions swap_attr() and swap_item() in the
+  test.support module.  They now work when delete replaced attribute or item
+  inside the with statement.  The old value of the attribute or item (or None
+  if it doesn't exist) now will be assigned to the target of the "as" clause,
+  if there is one.
+
+- Issue #29571: to match the behaviour of the ``re.LOCALE`` flag,
+  test_re.test_locale_flag now uses ``locale.getpreferredencoding(False)`` to
+  determine the candidate encoding for the test regex (allowing it to correctly
+  skip the test when the default locale encoding is a multi-byte encoding)
+
+
 What's New in Python 3.5.3?
 ===========================
 
-Release date: 2017-01-16
+Release date: 2017-01-17
 
 There were no code changes between 3.5.3rc1 and 3.5.3 final.
 
@@ -167,7 +443,7 @@ Library
 - Issue #28427: old keys should not remove new values from
   WeakValueDictionary when collecting from another thread.
 
-- Issue 28923: Remove editor artifacts from Tix.py.
+- Issue #28923: Remove editor artifacts from Tix.py.
 
 - Issue #28871: Fixed a crash when deallocate deep ElementTree.
 
@@ -290,7 +566,7 @@ Library
 
 - Issue #27599: Fixed buffer overrun in binascii.b2a_qp() and binascii.a2b_qp().
 
-- Issue #19003:m email.generator now replaces only \r and/or \n line
+- Issue #19003:m email.generator now replaces only ``\r`` and/or ``\n`` line
   endings, per the RFC, instead of all unicode line endings.
 
 - Issue #28019: itertools.count() no longer rounds non-integer step in range
@@ -313,7 +589,7 @@ Library
 - Issue #27445: Don't pass str(_charset) to MIMEText.set_payload().
   Patch by Claude Paroz.
 
-- Issue #22450: urllib now includes an "Accept: */*" header among the
+- Issue #22450: urllib now includes an ``Accept: */*`` header among the
   default headers.  This makes the results of REST API requests more
   consistent and predictable especially when proxy servers are involved.
 
@@ -328,7 +604,7 @@ Library
   characters, not on arbitrary unicode line breaks.  This also fixes a bug in
   HTTP header parsing.
 
-- Issue 27988: Fix email iter_attachments incorrect mutation of payload list.
+- Issue #27988: Fix email iter_attachments incorrect mutation of payload list.
 
 - Issue #27691: Fix ssl module's parsing of GEN_RID subject alternative name
   fields in X.509 certs.
@@ -514,17 +790,17 @@ Library
 
 - Issue #27972: Prohibit Tasks to await on themselves.
 
-- Issue #26923: Fix asyncio.Gather to refuse being cancelled once all 
+- Issue #26923: Fix asyncio.Gather to refuse being cancelled once all
   children are done.
   Patch by Johannes Ebke.
 
-- Issue #26796: Don't configure the number of workers for default 
+- Issue #26796: Don't configure the number of workers for default
   threadpool executor.
   Initial patch by Hans Lawrenz.
 
 - Issue #28600: Optimize loop.call_soon().
 
-- Issue #28613: Fix get_event_loop() return the current loop if 
+- Issue #28613: Fix get_event_loop() return the current loop if
   called from coroutines/callbacks.
 
 - Issue #28639: Fix inspect.isawaitable to always return bool
@@ -539,7 +815,7 @@ Library
 - Issue #24142: Reading a corrupt config file left the parser in an
   invalid state.  Original patch by Florian HÃ¶ch.
 
-- Issue #28990: Fix SSL hanging if connection is closed before handshake 
+- Issue #28990: Fix SSL hanging if connection is closed before handshake
   completed.
   (Patch by HoHo-Ho)
 
@@ -779,7 +1055,7 @@ Core and Builtins
   cookie names.
 
 - Issue #4806: Avoid masking the original TypeError exception when using star
-  (*) unpacking in function calls.  Based on patch by Hagen FÃ¼rstenau and
+  (``*``) unpacking in function calls.  Based on patch by Hagen FÃ¼rstenau and
   Daniel Urban.
 
 - Issue #27138: Fix the doc comment for FileFinder.find_spec().
@@ -1159,7 +1435,7 @@ Library
 - Issue #25672: In the ssl module, enable the SSL_MODE_RELEASE_BUFFERS mode
   option if it is safe to do so.
 
-- Issue #26012: Don't traverse into symlinks for ** pattern in
+- Issue #26012: Don't traverse into symlinks for ``**`` pattern in
   pathlib.Path.[r]glob().
 
 - Issue #24120: Ignore PermissionError when traversing a tree with
@@ -1569,7 +1845,7 @@ Library
 
 - Issue #25584: Added "escape" to the __all__ list in the glob module.
 
-- Issue #25584: Fixed recursive glob() with patterns starting with '\*\*'.
+- Issue #25584: Fixed recursive glob() with patterns starting with ``**``.
 
 - Issue #25446: Fix regression in smtplib's AUTH LOGIN support.
 
@@ -3112,7 +3388,7 @@ Library
 
 - Issue #23521: Corrected pure python implementation of timedelta division.
 
- * Eliminated OverflowError from timedelta * float for some floats;
+ * Eliminated OverflowError from ``timedelta * float`` for some floats;
  * Corrected rounding in timedlta true division.
 
 - Issue #21619: Popen objects no longer leave a zombie after exit in the with
@@ -3911,7 +4187,7 @@ Library
   character instead of truncating it.  Based on patch by Victor Stinner.
 
 - Issue #13968: The glob module now supports recursive search in
-  subdirectories using the "**" pattern.
+  subdirectories using the ``**`` pattern.
 
 - Issue #21951: Fixed a crash in Tkinter on AIX when called Tcl command with
   empty string or tuple argument.
@@ -6981,7 +7257,7 @@ Library
 - Issue #17702: On error, os.environb now suppresses the exception context
   when raising a new KeyError with the original key.
 
-- Issue #16809: Fixed some tkinter incompabilities with Tcl/Tk 8.6.
+- Issue #16809: Fixed some tkinter incompatibilities with Tcl/Tk 8.6.
 
 - Issue #16809: Tkinter's splitlist() and split() methods now accept Tcl_Obj
   argument.
diff --git a/Modules/_collectionsmodule.c b/Modules/_collectionsmodule.c
index 10fbcfe..08fceca 100644
--- a/Modules/_collectionsmodule.c
+++ b/Modules/_collectionsmodule.c
@@ -913,8 +913,8 @@ deque_index(dequeobject *deque, PyObject *args)
     size_t start_state = deque->state;
 
     if (!PyArg_ParseTuple(args, "O|O&O&:index", &v,
-                                _PyEval_SliceIndex, &start,
-                                _PyEval_SliceIndex, &stop))
+                                _PyEval_SliceIndexNotNone, &start,
+                                _PyEval_SliceIndexNotNone, &stop))
         return NULL;
     if (start < 0) {
         start += Py_SIZE(deque);
@@ -2169,7 +2169,7 @@ static PyTypeObject defdict_type = {
 PyDoc_STRVAR(_count_elements_doc,
 "_count_elements(mapping, iterable) -> None\n\
 \n\
-Count elements in the iterable, updating the mappping");
+Count elements in the iterable, updating the mapping");
 
 static PyObject *
 _count_elements(PyObject *self, PyObject *args)
diff --git a/Modules/_ctypes/_ctypes.c b/Modules/_ctypes/_ctypes.c
index b32a0ce..33fe659 100644
--- a/Modules/_ctypes/_ctypes.c
+++ b/Modules/_ctypes/_ctypes.c
@@ -4279,11 +4279,10 @@ Array_subscript(PyObject *myself, PyObject *item)
         PyObject *np;
         Py_ssize_t start, stop, step, slicelen, cur, i;
 
-        if (PySlice_GetIndicesEx(item,
-                                 self->b_length, &start, &stop,
-                                 &step, &slicelen) < 0) {
+        if (PySlice_Unpack(item, &start, &stop, &step) < 0) {
             return NULL;
         }
+        slicelen = PySlice_AdjustIndices(self->b_length, &start, &stop, step);
 
         stgdict = PyObject_stgdict((PyObject *)self);
         assert(stgdict); /* Cannot be NULL for array object instances */
@@ -4420,11 +4419,10 @@ Array_ass_subscript(PyObject *myself, PyObject *item, PyObject *value)
     else if (PySlice_Check(item)) {
         Py_ssize_t start, stop, step, slicelen, otherlen, i, cur;
 
-        if (PySlice_GetIndicesEx(item,
-                                 self->b_length, &start, &stop,
-                                 &step, &slicelen) < 0) {
+        if (PySlice_Unpack(item, &start, &stop, &step) < 0) {
             return -1;
         }
+        slicelen = PySlice_AdjustIndices(self->b_length, &start, &stop, step);
         if ((step < 0 && start < stop) ||
             (step > 0 && start > stop))
             stop = start;
diff --git a/Modules/_ctypes/_ctypes_test.c b/Modules/_ctypes/_ctypes_test.c
index 3c7f892..e3240c5 100644
--- a/Modules/_ctypes/_ctypes_test.c
+++ b/Modules/_ctypes/_ctypes_test.c
@@ -44,6 +44,19 @@ _testfunc_cbk_large_struct(Test in, void (*func)(Test))
     func(in);
 }
 
+/*
+ * See issue 29565. Update a structure passed by value;
+ * the caller should not see any change.
+ */
+
+EXPORT(void)
+_testfunc_large_struct_update_value(Test in)
+{
+    ((volatile Test *)&in)->first = 0x0badf00d;
+    ((volatile Test *)&in)->second = 0x0badf00d;
+    ((volatile Test *)&in)->third = 0x0badf00d;
+}
+
 EXPORT(void)testfunc_array(int values[4])
 {
     printf("testfunc_array %d %d %d %d\n",
diff --git a/Modules/_ctypes/libffi_msvc/ffi.c b/Modules/_ctypes/libffi_msvc/ffi.c
index 1d82929..91a27dc 100644
--- a/Modules/_ctypes/libffi_msvc/ffi.c
+++ b/Modules/_ctypes/libffi_msvc/ffi.c
@@ -239,6 +239,16 @@ ffi_call(/*@dependent@*/ ffi_cif *cif,
       break;
 #else
     case FFI_SYSV:
+      /* If a single argument takes more than 8 bytes,
+         then a copy is passed by reference. */
+      for (unsigned i = 0; i < cif->nargs; i++) {
+          size_t z = cif->arg_types[i]->size;
+          if (z > 8) {
+              void *temp = alloca(z);
+              memcpy(temp, avalue[i], z);
+              avalue[i] = temp;
+          }
+      }
       /*@-usedef@*/
       return ffi_call_AMD64(ffi_prep_args, &ecif, cif->bytes,
 			   cif->flags, ecif.rvalue, fn);
diff --git a/Modules/_decimal/_decimal.c b/Modules/_decimal/_decimal.c
index 6efdc91..e15941a 100644
--- a/Modules/_decimal/_decimal.c
+++ b/Modules/_decimal/_decimal.c
@@ -1119,12 +1119,12 @@ context_getattr(PyObject *self, PyObject *name)
     PyObject *retval;
 
     if (PyUnicode_Check(name)) {
-        if (_PyUnicode_EqualToASCIIString(name, "traps")) {
+        if (PyUnicode_CompareWithASCIIString(name, "traps") == 0) {
             retval = ((PyDecContextObject *)self)->traps;
             Py_INCREF(retval);
             return retval;
         }
-        if (_PyUnicode_EqualToASCIIString(name, "flags")) {
+        if (PyUnicode_CompareWithASCIIString(name, "flags") == 0) {
             retval = ((PyDecContextObject *)self)->flags;
             Py_INCREF(retval);
             return retval;
@@ -1144,10 +1144,10 @@ context_setattr(PyObject *self, PyObject *name, PyObject *value)
     }
 
     if (PyUnicode_Check(name)) {
-        if (_PyUnicode_EqualToASCIIString(name, "traps")) {
+        if (PyUnicode_CompareWithASCIIString(name, "traps") == 0) {
             return context_settraps_dict(self, value);
         }
-        if (_PyUnicode_EqualToASCIIString(name, "flags")) {
+        if (PyUnicode_CompareWithASCIIString(name, "flags") == 0) {
             return context_setstatus_dict(self, value);
         }
     }
@@ -2446,14 +2446,14 @@ dectuple_as_str(PyObject *dectuple)
     tmp = PyTuple_GET_ITEM(dectuple, 2);
     if (PyUnicode_Check(tmp)) {
         /* special */
-        if (_PyUnicode_EqualToASCIIString(tmp, "F")) {
+        if (PyUnicode_CompareWithASCIIString(tmp, "F") == 0) {
             strcat(sign_special, "Inf");
             is_infinite = 1;
         }
-        else if (_PyUnicode_EqualToASCIIString(tmp, "n")) {
+        else if (PyUnicode_CompareWithASCIIString(tmp, "n") == 0) {
             strcat(sign_special, "NaN");
         }
-        else if (_PyUnicode_EqualToASCIIString(tmp, "N")) {
+        else if (PyUnicode_CompareWithASCIIString(tmp, "N") == 0) {
             strcat(sign_special, "sNaN");
         }
         else {
diff --git a/Modules/_elementtree.c b/Modules/_elementtree.c
index 7d50dd0..0276452 100644
--- a/Modules/_elementtree.c
+++ b/Modules/_elementtree.c
@@ -155,7 +155,7 @@ deepcopy(PyObject* object, PyObject* memo)
 LOCAL(PyObject*)
 list_join(PyObject* list)
 {
-    /* join list elements (destroying the list in the process) */
+    /* join list elements */
     PyObject* joiner;
     PyObject* result;
 
@@ -164,8 +164,6 @@ list_join(PyObject* list)
         return NULL;
     result = PyUnicode_Join(joiner, list);
     Py_DECREF(joiner);
-    if (result)
-        Py_DECREF(list);
     return result;
 }
 
@@ -534,15 +532,17 @@ element_get_text(ElementObject* self)
 {
     /* return borrowed reference to text attribute */
 
-    PyObject* res = self->text;
+    PyObject *res = self->text;
 
     if (JOIN_GET(res)) {
         res = JOIN_OBJ(res);
         if (PyList_CheckExact(res)) {
-            res = list_join(res);
-            if (!res)
+            PyObject *tmp = list_join(res);
+            if (!tmp)
                 return NULL;
-            self->text = res;
+            self->text = tmp;
+            Py_DECREF(res);
+            res = tmp;
         }
     }
 
@@ -554,15 +554,17 @@ element_get_tail(ElementObject* self)
 {
     /* return borrowed reference to text attribute */
 
-    PyObject* res = self->tail;
+    PyObject *res = self->tail;
 
     if (JOIN_GET(res)) {
         res = JOIN_OBJ(res);
         if (PyList_CheckExact(res)) {
-            res = list_join(res);
-            if (!res)
+            PyObject *tmp = list_join(res);
+            if (!tmp)
                 return NULL;
-            self->tail = res;
+            self->tail = tmp;
+            Py_DECREF(res);
+            res = tmp;
         }
     }
 
@@ -1686,11 +1688,11 @@ element_subscr(PyObject* self_, PyObject* item)
         if (!self->extra)
             return PyList_New(0);
 
-        if (PySlice_GetIndicesEx(item,
-                self->extra->length,
-                &start, &stop, &step, &slicelen) < 0) {
+        if (PySlice_Unpack(item, &start, &stop, &step) < 0) {
             return NULL;
         }
+        slicelen = PySlice_AdjustIndices(self->extra->length, &start, &stop,
+                                         step);
 
         if (slicelen <= 0)
             return PyList_New(0);
@@ -1742,11 +1744,11 @@ element_ass_subscr(PyObject* self_, PyObject* item, PyObject* value)
                 return -1;
         }
 
-        if (PySlice_GetIndicesEx(item,
-                self->extra->length,
-                &start, &stop, &step, &slicelen) < 0) {
+        if (PySlice_Unpack(item, &start, &stop, &step) < 0) {
             return -1;
         }
+        slicelen = PySlice_AdjustIndices(self->extra->length, &start, &stop,
+                                         step);
 
         if (value == NULL) {
             /* Delete slice */
@@ -2147,6 +2149,12 @@ elementiter_next(ElementIterObject *it)
         cur_parent = it->parent_stack->parent;
         child_index = it->parent_stack->child_index;
         if (cur_parent->extra && child_index < cur_parent->extra->length) {
+            if (!PyObject_TypeCheck(cur_parent->extra->children[child_index], &Element_Type)) {
+                PyErr_Format(PyExc_AttributeError,
+                             "'%.100s' object has no attribute 'iter'",
+                             Py_TYPE(cur_parent->extra->children[child_index])->tp_name);
+                return NULL;
+            }
             elem = (ElementObject *)cur_parent->extra->children[child_index];
             it->parent_stack->child_index++;
             it->parent_stack = parent_stack_push_new(it->parent_stack,
@@ -2435,40 +2443,51 @@ treebuilder_dealloc(TreeBuilderObject *self)
 /* helpers for handling of arbitrary element-like objects */
 
 static int
-treebuilder_set_element_text_or_tail(PyObject *element, PyObject *data,
+treebuilder_set_element_text_or_tail(PyObject *element, PyObject **data,
                                      PyObject **dest, _Py_Identifier *name)
 {
     if (Element_CheckExact(element)) {
-        Py_DECREF(JOIN_OBJ(*dest));
-        *dest = JOIN_SET(data, PyList_CheckExact(data));
+        PyObject *tmp = JOIN_OBJ(*dest);
+        *dest = JOIN_SET(*data, PyList_CheckExact(*data));
+        *data = NULL;
+        Py_DECREF(tmp);
         return 0;
     }
     else {
-        PyObject *joined = list_join(data);
+        PyObject *joined = list_join(*data);
         int r;
         if (joined == NULL)
             return -1;
         r = _PyObject_SetAttrId(element, name, joined);
         Py_DECREF(joined);
-        return r;
+        if (r < 0)
+            return -1;
+        Py_CLEAR(*data);
+        return 0;
     }
 }
 
-/* These two functions steal a reference to data */
-static int
-treebuilder_set_element_text(PyObject *element, PyObject *data)
+LOCAL(int)
+treebuilder_flush_data(TreeBuilderObject* self)
 {
-    _Py_IDENTIFIER(text);
-    return treebuilder_set_element_text_or_tail(
-        element, data, &((ElementObject *) element)->text, &PyId_text);
-}
+    PyObject *element = self->last;
 
-static int
-treebuilder_set_element_tail(PyObject *element, PyObject *data)
-{
-    _Py_IDENTIFIER(tail);
-    return treebuilder_set_element_text_or_tail(
-        element, data, &((ElementObject *) element)->tail, &PyId_tail);
+    if (!self->data) {
+        return 0;
+    }
+
+    if (self->this == element) {
+        _Py_IDENTIFIER(text);
+        return treebuilder_set_element_text_or_tail(
+                element, &self->data,
+                &((ElementObject *) element)->text, &PyId_text);
+    }
+    else {
+        _Py_IDENTIFIER(tail);
+        return treebuilder_set_element_text_or_tail(
+                element, &self->data,
+                &((ElementObject *) element)->tail, &PyId_tail);
+    }
 }
 
 static int
@@ -2517,16 +2536,8 @@ treebuilder_handle_start(TreeBuilderObject* self, PyObject* tag,
     PyObject* this;
     elementtreestate *st = ET_STATE_GLOBAL;
 
-    if (self->data) {
-        if (self->this == self->last) {
-            if (treebuilder_set_element_text(self->last, self->data))
-                return NULL;
-        }
-        else {
-            if (treebuilder_set_element_tail(self->last, self->data))
-                return NULL;
-        }
-        self->data = NULL;
+    if (treebuilder_flush_data(self) < 0) {
+        return NULL;
     }
 
     if (self->element_factory && self->element_factory != Py_None) {
@@ -2622,15 +2633,8 @@ treebuilder_handle_end(TreeBuilderObject* self, PyObject* tag)
 {
     PyObject* item;
 
-    if (self->data) {
-        if (self->this == self->last) {
-            if (treebuilder_set_element_text(self->last, self->data))
-                return NULL;
-        } else {
-            if (treebuilder_set_element_tail(self->last, self->data))
-                return NULL;
-        }
-        self->data = NULL;
+    if (treebuilder_flush_data(self) < 0) {
+        return NULL;
     }
 
     if (self->index == 0) {
diff --git a/Modules/_functoolsmodule.c b/Modules/_functoolsmodule.c
index 9c9ab5f..985bcb6 100644
--- a/Modules/_functoolsmodule.c
+++ b/Modules/_functoolsmodule.c
@@ -88,10 +88,13 @@ partial_new(PyTypeObject *type, PyObject *args, PyObject *kw)
         if (kw == NULL) {
             pto->kw = PyDict_New();
         }
-        else {
+        else if (Py_REFCNT(kw) == 1) {
             Py_INCREF(kw);
             pto->kw = kw;
         }
+        else {
+            pto->kw = PyDict_Copy(kw);
+        }
     }
     else {
         pto->kw = PyDict_Copy(pkw);
@@ -231,8 +234,11 @@ partial_repr(partialobject *pto)
     /* Pack keyword arguments */
     assert (PyDict_Check(pto->kw));
     for (i = 0; PyDict_Next(pto->kw, &i, &key, &value);) {
-        Py_SETREF(arglist, PyUnicode_FromFormat("%U, %U=%R", arglist,
+        /* Prevent key.__str__ from deleting the value. */
+        Py_INCREF(value);
+        Py_SETREF(arglist, PyUnicode_FromFormat("%U, %S=%R", arglist,
                                                 key, value));
+        Py_DECREF(value);
         if (arglist == NULL)
             goto done;
     }
@@ -864,42 +870,56 @@ bounded_lru_cache_wrapper(lru_cache_object *self, PyObject *args, PyObject *kwds
     }
     if (self->full && self->root.next != &self->root) {
         /* Use the oldest item to store the new key and result. */
-        PyObject *oldkey, *oldresult;
+        PyObject *oldkey, *oldresult, *popresult;
         /* Extricate the oldest item. */
         link = self->root.next;
         lru_cache_extricate_link(link);
         /* Remove it from the cache.
            The cache dict holds one reference to the link,
            and the linked list holds yet one reference to it. */
-        if (_PyDict_DelItem_KnownHash(self->cache, link->key,
-                                      link->hash) < 0) {
+        popresult = _PyDict_Pop_KnownHash((PyDictObject *)self->cache,
+                                          link->key, link->hash,
+                                          Py_None);
+        if (popresult == Py_None) {
+            /* Getting here means that this same key was added to the
+               cache while the lock was released.  Since the link
+               update is already done, we need only return the
+               computed result and update the count of misses. */
+            Py_DECREF(popresult);
+            Py_DECREF(link);
+            Py_DECREF(key);
+        }
+        else if (popresult == NULL) {
             lru_cache_append_link(self, link);
             Py_DECREF(key);
             Py_DECREF(result);
             return NULL;
         }
-        /* Keep a reference to the old key and old result to
-           prevent their ref counts from going to zero during the
-           update. That will prevent potentially arbitrary object
-           clean-up code (i.e. __del__) from running while we're
-           still adjusting the links. */
-        oldkey = link->key;
-        oldresult = link->result;
-
-        link->hash = hash;
-        link->key = key;
-        link->result = result;
-        if (_PyDict_SetItem_KnownHash(self->cache, key, (PyObject *)link,
-                                      hash) < 0) {
-            Py_DECREF(link);
+        else {
+            Py_DECREF(popresult);
+            /* Keep a reference to the old key and old result to
+               prevent their ref counts from going to zero during the
+               update. That will prevent potentially arbitrary object
+               clean-up code (i.e. __del__) from running while we're
+               still adjusting the links. */
+            oldkey = link->key;
+            oldresult = link->result;
+
+            link->hash = hash;
+            link->key = key;
+            link->result = result;
+            if (_PyDict_SetItem_KnownHash(self->cache, key, (PyObject *)link,
+                                          hash) < 0) {
+                Py_DECREF(link);
+                Py_DECREF(oldkey);
+                Py_DECREF(oldresult);
+                return NULL;
+            }
+            lru_cache_append_link(self, link);
+            Py_INCREF(result); /* for return */
             Py_DECREF(oldkey);
             Py_DECREF(oldresult);
-            return NULL;
         }
-        lru_cache_append_link(self, link);
-        Py_INCREF(result); /* for return */
-        Py_DECREF(oldkey);
-        Py_DECREF(oldresult);
     } else {
         /* Put result in a new link at the front of the queue. */
         link = (lru_list_elem *)PyObject_GC_New(lru_list_elem,
diff --git a/Modules/_io/bufferedio.c b/Modules/_io/bufferedio.c
index 6d67751..909c4fa 100644
--- a/Modules/_io/bufferedio.c
+++ b/Modules/_io/bufferedio.c
@@ -1416,8 +1416,18 @@ buffered_repr(buffered *self)
         res = PyUnicode_FromFormat("<%s>", Py_TYPE(self)->tp_name);
     }
     else {
-        res = PyUnicode_FromFormat("<%s name=%R>",
-                                   Py_TYPE(self)->tp_name, nameobj);
+        int status = Py_ReprEnter((PyObject *)self);
+        res = NULL;
+        if (status == 0) {
+            res = PyUnicode_FromFormat("<%s name=%R>",
+                                       Py_TYPE(self)->tp_name, nameobj);
+            Py_ReprLeave((PyObject *)self);
+        }
+        else if (status > 0) {
+            PyErr_Format(PyExc_RuntimeError,
+                         "reentrant call inside %s.__repr__",
+                         Py_TYPE(self)->tp_name);
+        }
         Py_DECREF(nameobj);
     }
     return res;
diff --git a/Modules/_io/fileio.c b/Modules/_io/fileio.c
index 919cf50..c77f055 100644
--- a/Modules/_io/fileio.c
+++ b/Modules/_io/fileio.c
@@ -1093,9 +1093,19 @@ fileio_repr(fileio *self)
             self->fd, mode_string(self), self->closefd ? "True" : "False");
     }
     else {
-        res = PyUnicode_FromFormat(
-            "<_io.FileIO name=%R mode='%s' closefd=%s>",
-            nameobj, mode_string(self), self->closefd ? "True" : "False");
+        int status = Py_ReprEnter((PyObject *)self);
+        res = NULL;
+        if (status == 0) {
+            res = PyUnicode_FromFormat(
+                "<_io.FileIO name=%R mode='%s' closefd=%s>",
+                nameobj, mode_string(self), self->closefd ? "True" : "False");
+            Py_ReprLeave((PyObject *)self);
+        }
+        else if (status > 0) {
+            PyErr_Format(PyExc_RuntimeError,
+                         "reentrant call inside %s.__repr__",
+                         Py_TYPE(self)->tp_name);
+        }
         Py_DECREF(nameobj);
     }
     return res;
diff --git a/Modules/_io/iobase.c b/Modules/_io/iobase.c
index 57541a8..9acd146 100644
--- a/Modules/_io/iobase.c
+++ b/Modules/_io/iobase.c
@@ -625,7 +625,8 @@ iobase_iternext(PyObject *self)
     if (line == NULL)
         return NULL;
 
-    if (PyObject_Size(line) == 0) {
+    if (PyObject_Size(line) <= 0) {
+        /* Error or empty */
         Py_DECREF(line);
         return NULL;
     }
@@ -650,7 +651,7 @@ _io__IOBase_readlines_impl(PyObject *self, Py_ssize_t hint)
 /*[clinic end generated code: output=2f50421677fa3dea input=1961c4a95e96e661]*/
 {
     Py_ssize_t length = 0;
-    PyObject *result;
+    PyObject *result, *it = NULL;
 
     result = PyList_New(0);
     if (result == NULL)
@@ -664,19 +665,23 @@ _io__IOBase_readlines_impl(PyObject *self, Py_ssize_t hint)
         PyObject *ret = _PyObject_CallMethodId(result, &PyId_extend, "O", self);
 
         if (ret == NULL) {
-            Py_DECREF(result);
-            return NULL;
+            goto error;
         }
         Py_DECREF(ret);
         return result;
     }
 
+    it = PyObject_GetIter(self);
+    if (it == NULL) {
+        goto error;
+    }
+
     while (1) {
-        PyObject *line = PyIter_Next(self);
+        Py_ssize_t line_length;
+        PyObject *line = PyIter_Next(it);
         if (line == NULL) {
             if (PyErr_Occurred()) {
-                Py_DECREF(result);
-                return NULL;
+                goto error;
             }
             else
                 break; /* StopIteration raised */
@@ -684,16 +689,25 @@ _io__IOBase_readlines_impl(PyObject *self, Py_ssize_t hint)
 
         if (PyList_Append(result, line) < 0) {
             Py_DECREF(line);
-            Py_DECREF(result);
-            return NULL;
+            goto error;
         }
-        length += PyObject_Size(line);
+        line_length = PyObject_Size(line);
         Py_DECREF(line);
-
-        if (length > hint)
+        if (line_length < 0) {
+            goto error;
+        }
+        if (line_length > hint - length)
             break;
+        length += line_length;
     }
+
+    Py_DECREF(it);
     return result;
+
+ error:
+    Py_XDECREF(it);
+    Py_DECREF(result);
+    return NULL;
 }
 
 /*[clinic input]
diff --git a/Modules/_io/textio.c b/Modules/_io/textio.c
index 46c99b5..3ab1138 100644
--- a/Modules/_io/textio.c
+++ b/Modules/_io/textio.c
@@ -1012,7 +1012,7 @@ _io_TextIOWrapper___init___impl(textio *self, PyObject *buffer,
                                                            errors);
         if (self->encoder == NULL)
             goto error;
-        /* Get the normalized named of the codec */
+        /* Get the normalized name of the codec */
         res = _PyObject_GetAttrId(codec_info, &PyId_name);
         if (res == NULL) {
             if (PyErr_ExceptionMatches(PyExc_AttributeError))
@@ -2483,6 +2483,7 @@ static PyObject *
 textiowrapper_repr(textio *self)
 {
     PyObject *nameobj, *modeobj, *res, *s;
+    int status;
 
     CHECK_INITIALIZED(self);
 
@@ -2490,6 +2491,15 @@ textiowrapper_repr(textio *self)
     if (res == NULL)
         return NULL;
 
+    status = Py_ReprEnter((PyObject *)self);
+    if (status != 0) {
+        if (status > 0) {
+            PyErr_Format(PyExc_RuntimeError,
+                         "reentrant call inside %s.__repr__",
+                         Py_TYPE(self)->tp_name);
+        }
+        goto error;
+    }
     nameobj = _PyObject_GetAttrId((PyObject *) self, &PyId_name);
     if (nameobj == NULL) {
         if (PyErr_ExceptionMatches(PyExc_Exception))
@@ -2504,7 +2514,7 @@ textiowrapper_repr(textio *self)
             goto error;
         PyUnicode_AppendAndDel(&res, s);
         if (res == NULL)
-            return NULL;
+            goto error;
     }
     modeobj = _PyObject_GetAttrId((PyObject *) self, &PyId_mode);
     if (modeobj == NULL) {
@@ -2520,14 +2530,21 @@ textiowrapper_repr(textio *self)
             goto error;
         PyUnicode_AppendAndDel(&res, s);
         if (res == NULL)
-            return NULL;
+            goto error;
     }
     s = PyUnicode_FromFormat("%U encoding=%R>",
                              res, self->encoding);
     Py_DECREF(res);
+    if (status == 0) {
+        Py_ReprLeave((PyObject *)self);
+    }
     return s;
-error:
+
+  error:
     Py_XDECREF(res);
+    if (status == 0) {
+        Py_ReprLeave((PyObject *)self);
+    }
     return NULL;
 }
 
diff --git a/Modules/_json.c b/Modules/_json.c
index f82af34..446795e 100644
--- a/Modules/_json.c
+++ b/Modules/_json.c
@@ -89,16 +89,12 @@ static PyObject *
 _build_rval_index_tuple(PyObject *rval, Py_ssize_t idx);
 static PyObject *
 scanner_new(PyTypeObject *type, PyObject *args, PyObject *kwds);
-static int
-scanner_init(PyObject *self, PyObject *args, PyObject *kwds);
 static void
 scanner_dealloc(PyObject *self);
 static int
 scanner_clear(PyObject *self);
 static PyObject *
 encoder_new(PyTypeObject *type, PyObject *args, PyObject *kwds);
-static int
-encoder_init(PyObject *self, PyObject *args, PyObject *kwds);
 static void
 encoder_dealloc(PyObject *self);
 static int
@@ -845,14 +841,16 @@ _parse_array_unicode(PyScannerObject *s, PyObject *pystr, Py_ssize_t idx, Py_ssi
     int kind;
     Py_ssize_t end_idx;
     PyObject *val = NULL;
-    PyObject *rval = PyList_New(0);
+    PyObject *rval;
     Py_ssize_t next_idx;
-    if (rval == NULL)
-        return NULL;
 
     if (PyUnicode_READY(pystr) == -1)
         return NULL;
 
+    rval = PyList_New(0);
+    if (rval == NULL)
+        return NULL;
+
     str = PyUnicode_DATA(pystr);
     kind = PyUnicode_KIND(pystr);
     end_idx = PyUnicode_GET_LENGTH(pystr) - 1;
@@ -1201,38 +1199,21 @@ static PyObject *
 scanner_new(PyTypeObject *type, PyObject *args, PyObject *kwds)
 {
     PyScannerObject *s;
-    s = (PyScannerObject *)type->tp_alloc(type, 0);
-    if (s != NULL) {
-        s->strict = NULL;
-        s->object_hook = NULL;
-        s->object_pairs_hook = NULL;
-        s->parse_float = NULL;
-        s->parse_int = NULL;
-        s->parse_constant = NULL;
-    }
-    return (PyObject *)s;
-}
-
-static int
-scanner_init(PyObject *self, PyObject *args, PyObject *kwds)
-{
-    /* Initialize Scanner object */
     PyObject *ctx;
     static char *kwlist[] = {"context", NULL};
-    PyScannerObject *s;
-
-    assert(PyScanner_Check(self));
-    s = (PyScannerObject *)self;
 
     if (!PyArg_ParseTupleAndKeywords(args, kwds, "O:make_scanner", kwlist, &ctx))
-        return -1;
+        return NULL;
 
-    if (s->memo == NULL) {
-        s->memo = PyDict_New();
-        if (s->memo == NULL)
-            goto bail;
+    s = (PyScannerObject *)type->tp_alloc(type, 0);
+    if (s == NULL) {
+        return NULL;
     }
 
+    s->memo = PyDict_New();
+    if (s->memo == NULL)
+        goto bail;
+
     /* All of these will fail "gracefully" so we don't need to verify them */
     s->strict = PyObject_GetAttrString(ctx, "strict");
     if (s->strict == NULL)
@@ -1253,16 +1234,11 @@ scanner_init(PyObject *self, PyObject *args, PyObject *kwds)
     if (s->parse_constant == NULL)
         goto bail;
 
-    return 0;
+    return (PyObject *)s;
 
 bail:
-    Py_CLEAR(s->strict);
-    Py_CLEAR(s->object_hook);
-    Py_CLEAR(s->object_pairs_hook);
-    Py_CLEAR(s->parse_float);
-    Py_CLEAR(s->parse_int);
-    Py_CLEAR(s->parse_constant);
-    return -1;
+    Py_DECREF(s);
+    return NULL;
 }
 
 PyDoc_STRVAR(scanner_doc, "JSON scanner object");
@@ -1304,7 +1280,7 @@ PyTypeObject PyScannerType = {
     0,                    /* tp_descr_get */
     0,                    /* tp_descr_set */
     0,                    /* tp_dictoffset */
-    scanner_init,                    /* tp_init */
+    0,                    /* tp_init */
     0,/* PyType_GenericAlloc, */        /* tp_alloc */
     scanner_new,          /* tp_new */
     0,/* PyObject_GC_Del, */              /* tp_free */
@@ -1313,25 +1289,6 @@ PyTypeObject PyScannerType = {
 static PyObject *
 encoder_new(PyTypeObject *type, PyObject *args, PyObject *kwds)
 {
-    PyEncoderObject *s;
-    s = (PyEncoderObject *)type->tp_alloc(type, 0);
-    if (s != NULL) {
-        s->markers = NULL;
-        s->defaultfn = NULL;
-        s->encoder = NULL;
-        s->indent = NULL;
-        s->key_separator = NULL;
-        s->item_separator = NULL;
-        s->sort_keys = NULL;
-        s->skipkeys = NULL;
-    }
-    return (PyObject *)s;
-}
-
-static int
-encoder_init(PyObject *self, PyObject *args, PyObject *kwds)
-{
-    /* initialize Encoder object */
     static char *kwlist[] = {"markers", "default", "encoder", "indent", "key_separator", "item_separator", "sort_keys", "skipkeys", "allow_nan", NULL};
 
     PyEncoderObject *s;
@@ -1339,22 +1296,23 @@ encoder_init(PyObject *self, PyObject *args, PyObject *kwds)
     PyObject *item_separator, *sort_keys, *skipkeys;
     int allow_nan;
 
-    assert(PyEncoder_Check(self));
-    s = (PyEncoderObject *)self;
-
     if (!PyArg_ParseTupleAndKeywords(args, kwds, "OOOOUUOOp:make_encoder", kwlist,
         &markers, &defaultfn, &encoder, &indent,
         &key_separator, &item_separator,
         &sort_keys, &skipkeys, &allow_nan))
-        return -1;
+        return NULL;
 
     if (markers != Py_None && !PyDict_Check(markers)) {
         PyErr_Format(PyExc_TypeError,
                      "make_encoder() argument 1 must be dict or None, "
                      "not %.200s", Py_TYPE(markers)->tp_name);
-        return -1;
+        return NULL;
     }
 
+    s = (PyEncoderObject *)type->tp_alloc(type, 0);
+    if (s == NULL)
+        return NULL;
+
     s->markers = markers;
     s->defaultfn = defaultfn;
     s->encoder = encoder;
@@ -1381,7 +1339,7 @@ encoder_init(PyObject *self, PyObject *args, PyObject *kwds)
     Py_INCREF(s->item_separator);
     Py_INCREF(s->sort_keys);
     Py_INCREF(s->skipkeys);
-    return 0;
+    return (PyObject *)s;
 }
 
 static PyObject *
@@ -1559,8 +1517,11 @@ encoder_listencode_obj(PyEncoderObject *s, _PyAccu *acc,
             return -1;
         }
 
-        if (Py_EnterRecursiveCall(" while encoding a JSON object"))
+        if (Py_EnterRecursiveCall(" while encoding a JSON object")) {
+            Py_DECREF(newobj);
+            Py_XDECREF(ident);
             return -1;
+        }
         rv = encoder_listencode_obj(s, acc, newobj, indent_level);
         Py_LeaveRecursiveCall();
 
@@ -1604,7 +1565,7 @@ encoder_listencode_dict(PyEncoderObject *s, _PyAccu *acc,
         if (open_dict == NULL || close_dict == NULL || empty_dict == NULL)
             return -1;
     }
-    if (Py_SIZE(dct) == 0)
+    if (PyDict_Size(dct) == 0)  /* Fast path */
         return _PyAccu_Accumulate(acc, empty_dict);
 
     if (s->markers != Py_None) {
@@ -1909,7 +1870,7 @@ PyTypeObject PyEncoderType = {
     0,                    /* tp_descr_get */
     0,                    /* tp_descr_set */
     0,                    /* tp_dictoffset */
-    encoder_init,         /* tp_init */
+    0,                    /* tp_init */
     0,                    /* tp_alloc */
     encoder_new,          /* tp_new */
     0,                    /* tp_free */
@@ -1952,10 +1913,8 @@ PyInit__json(void)
     PyObject *m = PyModule_Create(&jsonmodule);
     if (!m)
         return NULL;
-    PyScannerType.tp_new = PyType_GenericNew;
     if (PyType_Ready(&PyScannerType) < 0)
         goto fail;
-    PyEncoderType.tp_new = PyType_GenericNew;
     if (PyType_Ready(&PyEncoderType) < 0)
         goto fail;
     Py_INCREF((PyObject*)&PyScannerType);
diff --git a/Modules/_pickle.c b/Modules/_pickle.c
index ac7f5c4..0f62b1c 100644
--- a/Modules/_pickle.c
+++ b/Modules/_pickle.c
@@ -1548,9 +1548,9 @@ memo_put(PicklerObject *self, PyObject *obj)
 }
 
 static PyObject *
-get_dotted_path(PyObject *obj, PyObject *name) {
+get_dotted_path(PyObject *obj, PyObject *name)
+{
     _Py_static_string(PyId_dot, ".");
-    _Py_static_string(PyId_locals, "<locals>");
     PyObject *dotted_path;
     Py_ssize_t i, n;
 
@@ -1561,12 +1561,7 @@ get_dotted_path(PyObject *obj, PyObject *name) {
     assert(n >= 1);
     for (i = 0; i < n; i++) {
         PyObject *subpath = PyList_GET_ITEM(dotted_path, i);
-        PyObject *result = PyUnicode_RichCompare(
-            subpath, _PyUnicode_FromId(&PyId_locals), Py_EQ);
-        int is_equal = (result == Py_True);
-        assert(PyBool_Check(result));
-        Py_DECREF(result);
-        if (is_equal) {
+        if (_PyUnicode_EqualToASCIIString(subpath, "<locals>")) {
             if (obj == NULL)
                 PyErr_Format(PyExc_AttributeError,
                              "Can't pickle local object %R", name);
@@ -3537,13 +3532,12 @@ save_reduce(PicklerObject *self, PyObject *args, PyObject *obj)
         else if (PyUnicode_Check(name)) {
             if (self->proto >= 4) {
                 _Py_IDENTIFIER(__newobj_ex__);
-                use_newobj_ex = PyUnicode_Compare(
-                        name, _PyUnicode_FromId(&PyId___newobj_ex__)) == 0;
+                use_newobj_ex = _PyUnicode_EqualToASCIIId(
+                        name, &PyId___newobj_ex__);
             }
             if (!use_newobj_ex) {
                 _Py_IDENTIFIER(__newobj__);
-                use_newobj = PyUnicode_Compare(
-                        name, _PyUnicode_FromId(&PyId___newobj__)) == 0;
+                use_newobj = _PyUnicode_EqualToASCIIId(name, &PyId___newobj__);
             }
         }
         Py_XDECREF(name);
diff --git a/Modules/_posixsubprocess.c b/Modules/_posixsubprocess.c
index c0240e2..48c1953 100644
--- a/Modules/_posixsubprocess.c
+++ b/Modules/_posixsubprocess.c
@@ -112,13 +112,17 @@ _is_fdescfs_mounted_on_dev_fd(void)
 static int
 _sanity_check_python_fd_sequence(PyObject *fd_sequence)
 {
-    Py_ssize_t seq_idx, seq_len = PySequence_Length(fd_sequence);
+    Py_ssize_t seq_idx;
     long prev_fd = -1;
-    for (seq_idx = 0; seq_idx < seq_len; ++seq_idx) {
-        PyObject* py_fd = PySequence_Fast_GET_ITEM(fd_sequence, seq_idx);
-        long iter_fd = PyLong_AsLong(py_fd);
+    for (seq_idx = 0; seq_idx < PyTuple_GET_SIZE(fd_sequence); ++seq_idx) {
+        PyObject* py_fd = PyTuple_GET_ITEM(fd_sequence, seq_idx);
+        long iter_fd;
+        if (!PyLong_Check(py_fd)) {
+            return 1;
+        }
+        iter_fd = PyLong_AsLong(py_fd);
         if (iter_fd < 0 || iter_fd <= prev_fd || iter_fd > INT_MAX) {
-            /* Negative, overflow, not a Long, unsorted, too big for a fd. */
+            /* Negative, overflow, unsorted, too big for a fd. */
             return 1;
         }
         prev_fd = iter_fd;
@@ -133,13 +137,12 @@ _is_fd_in_sorted_fd_sequence(int fd, PyObject *fd_sequence)
 {
     /* Binary search. */
     Py_ssize_t search_min = 0;
-    Py_ssize_t search_max = PySequence_Length(fd_sequence) - 1;
+    Py_ssize_t search_max = PyTuple_GET_SIZE(fd_sequence) - 1;
     if (search_max < 0)
         return 0;
     do {
         long middle = (search_min + search_max) / 2;
-        long middle_fd = PyLong_AsLong(
-                PySequence_Fast_GET_ITEM(fd_sequence, middle));
+        long middle_fd = PyLong_AsLong(PyTuple_GET_ITEM(fd_sequence, middle));
         if (fd == middle_fd)
             return 1;
         if (fd > middle_fd)
@@ -155,9 +158,9 @@ make_inheritable(PyObject *py_fds_to_keep, int errpipe_write)
 {
     Py_ssize_t i, len;
 
-    len = PySequence_Length(py_fds_to_keep);
+    len = PyTuple_GET_SIZE(py_fds_to_keep);
     for (i = 0; i < len; ++i) {
-        PyObject* fdobj = PySequence_Fast_GET_ITEM(py_fds_to_keep, i);
+        PyObject* fdobj = PyTuple_GET_ITEM(py_fds_to_keep, i);
         long fd = PyLong_AsLong(fdobj);
         assert(!PyErr_Occurred());
         assert(0 <= fd && fd <= INT_MAX);
@@ -214,14 +217,13 @@ static void
 _close_fds_by_brute_force(long start_fd, PyObject *py_fds_to_keep)
 {
     long end_fd = safe_get_max_fd();
-    Py_ssize_t num_fds_to_keep = PySequence_Length(py_fds_to_keep);
+    Py_ssize_t num_fds_to_keep = PyTuple_GET_SIZE(py_fds_to_keep);
     Py_ssize_t keep_seq_idx;
     int fd_num;
     /* As py_fds_to_keep is sorted we can loop through the list closing
      * fds inbetween any in the keep list falling within our range. */
     for (keep_seq_idx = 0; keep_seq_idx < num_fds_to_keep; ++keep_seq_idx) {
-        PyObject* py_keep_fd = PySequence_Fast_GET_ITEM(py_fds_to_keep,
-                                                        keep_seq_idx);
+        PyObject* py_keep_fd = PyTuple_GET_ITEM(py_fds_to_keep, keep_seq_idx);
         int keep_fd = PyLong_AsLong(py_keep_fd);
         if (keep_fd < start_fd)
             continue;
@@ -307,7 +309,7 @@ _close_open_fds_safe(int start_fd, PyObject* py_fds_to_keep)
 
 
 /* Close all open file descriptors from start_fd and higher.
- * Do not close any in the sorted py_fds_to_keep list.
+ * Do not close any in the sorted py_fds_to_keep tuple.
  *
  * This function violates the strict use of async signal safe functions. :(
  * It calls opendir(), readdir() and closedir().  Of these, the one most
@@ -563,8 +565,9 @@ subprocess_fork_exec(PyObject* self, PyObject *args)
 #endif
 
     if (!PyArg_ParseTuple(
-            args, "OOpOOOiiiiiiiiiiO:fork_exec",
-            &process_args, &executable_list, &close_fds, &py_fds_to_keep,
+            args, "OOpO!OOiiiiiiiiiiO:fork_exec",
+            &process_args, &executable_list,
+            &close_fds, &PyTuple_Type, &py_fds_to_keep,
             &cwd_obj, &env_list,
             &p2cread, &p2cwrite, &c2pread, &c2pwrite,
             &errread, &errwrite, &errpipe_read, &errpipe_write,
@@ -575,10 +578,6 @@ subprocess_fork_exec(PyObject* self, PyObject *args)
         PyErr_SetString(PyExc_ValueError, "errpipe_write must be >= 3");
         return NULL;
     }
-    if (PySequence_Length(py_fds_to_keep) < 0) {
-        PyErr_SetString(PyExc_ValueError, "cannot get length of fds_to_keep");
-        return NULL;
-    }
     if (_sanity_check_python_fd_sequence(py_fds_to_keep)) {
         PyErr_SetString(PyExc_ValueError, "bad value(s) in fds_to_keep");
         return NULL;
@@ -632,6 +631,10 @@ subprocess_fork_exec(PyObject* self, PyObject *args)
             goto cleanup;
         for (arg_num = 0; arg_num < num_args; ++arg_num) {
             PyObject *borrowed_arg, *converted_arg;
+            if (PySequence_Fast_GET_SIZE(fast_args) != num_args) {
+                PyErr_SetString(PyExc_RuntimeError, "args changed during iteration");
+                goto cleanup;
+            }
             borrowed_arg = PySequence_Fast_GET_ITEM(fast_args, arg_num);
             if (PyUnicode_FSConverter(borrowed_arg, &converted_arg) == 0)
                 goto cleanup;
diff --git a/Modules/_randommodule.c b/Modules/_randommodule.c
index 95ad4a4..acb116d 100644
--- a/Modules/_randommodule.c
+++ b/Modules/_randommodule.c
@@ -2,7 +2,7 @@
 
 /* ------------------------------------------------------------------
    The code in this module was based on a download from:
-      http://www.math.keio.ac.jp/~matumoto/MT2002/emt19937ar.html
+      http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/MT2002/emt19937ar.html
 
    It was modified in 2002 by Raymond Hettinger as follows:
 
@@ -60,8 +60,8 @@
 
 
    Any feedback is very welcome.
-   http://www.math.keio.ac.jp/matumoto/emt.html
-   email: matumoto@math.keio.ac.jp
+   http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/emt.html
+   email: m-mat @ math.sci.hiroshima-u.ac.jp (remove space)
 */
 
 /* ---------------------------------------------------------------*/
@@ -313,6 +313,7 @@ random_setstate(RandomObject *self, PyObject *state)
     int i;
     unsigned long element;
     long index;
+    PY_UINT32_T new_state[N];
 
     if (!PyTuple_Check(state)) {
         PyErr_SetString(PyExc_TypeError,
@@ -329,7 +330,7 @@ random_setstate(RandomObject *self, PyObject *state)
         element = PyLong_AsUnsignedLong(PyTuple_GET_ITEM(state, i));
         if (element == (unsigned long)-1 && PyErr_Occurred())
             return NULL;
-        self->state[i] = (PY_UINT32_T)element;
+        new_state[i] = (PY_UINT32_T)element;
     }
 
     index = PyLong_AsLong(PyTuple_GET_ITEM(state, i));
@@ -340,6 +341,8 @@ random_setstate(RandomObject *self, PyObject *state)
         return NULL;
     }
     self->index = (int)index;
+    for (i = 0; i < N; i++)
+        self->state[i] = new_state[i];
 
     Py_INCREF(Py_None);
     return Py_None;
diff --git a/Modules/_sre.c b/Modules/_sre.c
index 09b5835..4b376ec 100644
--- a/Modules/_sre.c
+++ b/Modules/_sre.c
@@ -2015,6 +2015,7 @@ match_getslice_by_index(MatchObject* self, Py_ssize_t index, PyObject* def)
     Py_buffer view;
     PyObject *result;
     void* ptr;
+    Py_ssize_t i, j;
 
     if (index < 0 || index >= self->groups) {
         /* raise IndexError if we were given a bad group number */
@@ -2036,8 +2037,12 @@ match_getslice_by_index(MatchObject* self, Py_ssize_t index, PyObject* def)
     ptr = getstring(self->string, &length, &isbytes, &charsize, &view);
     if (ptr == NULL)
         return NULL;
-    result = getslice(isbytes, ptr,
-                      self->string, self->mark[index], self->mark[index+1]);
+
+    i = self->mark[index];
+    j = self->mark[index+1];
+    i = Py_MIN(i, length);
+    j = Py_MIN(j, length);
+    result = getslice(isbytes, ptr, self->string, i, j);
     if (isbytes && view.buf != NULL)
         PyBuffer_Release(&view);
     return result;
diff --git a/Modules/_ssl.c b/Modules/_ssl.c
index a79c3a8..9f79d17 100644
--- a/Modules/_ssl.c
+++ b/Modules/_ssl.c
@@ -1181,10 +1181,6 @@ _get_crl_dp(X509 *certificate) {
     int i, j;
     PyObject *lst, *res = NULL;
 
-#if OPENSSL_VERSION_NUMBER >= 0x10001000L
-    /* Calls x509v3_cache_extensions and sets up crldp */
-    X509_check_ca(certificate);
-#endif
     dps = X509_get_ext_d2i(certificate, NID_crl_distribution_points, NULL, NULL);
 
     if (dps == NULL)
@@ -1229,9 +1225,7 @@ _get_crl_dp(X509 *certificate) {
 
   done:
     Py_XDECREF(lst);
-#if OPENSSL_VERSION_NUMBER < 0x10001000L
-    sk_DIST_POINT_free(dps);
-#endif
+    CRL_DIST_POINTS_free(dps);
     return res;
 }
 
@@ -2418,12 +2412,12 @@ _ssl__SSLContext_impl(PyTypeObject *type, int proto_version)
 #endif
 
 
-#ifndef OPENSSL_NO_ECDH
+#if !defined(OPENSSL_NO_ECDH) && !defined(OPENSSL_VERSION_1_1)
     /* Allow automatic ECDH curve selection (on OpenSSL 1.0.2+), or use
        prime256v1 by default.  This is Apache mod_ssl's initialization
        policy, so we should be safe. OpenSSL 1.1 has it enabled by default.
      */
-#if defined(SSL_CTX_set_ecdh_auto) && !defined(OPENSSL_VERSION_1_1)
+#if defined(SSL_CTX_set_ecdh_auto)
     SSL_CTX_set_ecdh_auto(self->ctx, 1);
 #else
     {
diff --git a/Modules/_struct.c b/Modules/_struct.c
index f965541..2273129 100644
--- a/Modules/_struct.c
+++ b/Modules/_struct.c
@@ -519,7 +519,7 @@ np_ubyte(char *p, PyObject *v, const formatdef *f)
                         "ubyte format requires 0 <= number <= 255");
         return -1;
     }
-    *p = (char)x;
+    *(unsigned char *)p = (unsigned char)x;
     return 0;
 }
 
@@ -850,6 +850,7 @@ bp_int(char *p, PyObject *v, const formatdef *f)
 {
     long x;
     Py_ssize_t i;
+    unsigned char *q = (unsigned char *)p;
     if (get_long(v, &x) < 0)
         return -1;
     i = f->size;
@@ -862,7 +863,7 @@ bp_int(char *p, PyObject *v, const formatdef *f)
 #endif
     }
     do {
-        p[--i] = (char)x;
+        q[--i] = (unsigned char)(x & 0xffL);
         x >>= 8;
     } while (i > 0);
     return 0;
@@ -873,6 +874,7 @@ bp_uint(char *p, PyObject *v, const formatdef *f)
 {
     unsigned long x;
     Py_ssize_t i;
+    unsigned char *q = (unsigned char *)p;
     if (get_ulong(v, &x) < 0)
         return -1;
     i = f->size;
@@ -883,7 +885,7 @@ bp_uint(char *p, PyObject *v, const formatdef *f)
             RANGE_ERROR(x, f, 1, maxint - 1);
     }
     do {
-        p[--i] = (char)x;
+        q[--i] = (unsigned char)(x & 0xffUL);
         x >>= 8;
     } while (i > 0);
     return 0;
@@ -1070,6 +1072,7 @@ lp_int(char *p, PyObject *v, const formatdef *f)
 {
     long x;
     Py_ssize_t i;
+    unsigned char *q = (unsigned char *)p;
     if (get_long(v, &x) < 0)
         return -1;
     i = f->size;
@@ -1082,7 +1085,7 @@ lp_int(char *p, PyObject *v, const formatdef *f)
 #endif
     }
     do {
-        *p++ = (char)x;
+        *q++ = (unsigned char)(x & 0xffL);
         x >>= 8;
     } while (--i > 0);
     return 0;
@@ -1093,6 +1096,7 @@ lp_uint(char *p, PyObject *v, const formatdef *f)
 {
     unsigned long x;
     Py_ssize_t i;
+    unsigned char *q = (unsigned char *)p;
     if (get_ulong(v, &x) < 0)
         return -1;
     i = f->size;
@@ -1103,7 +1107,7 @@ lp_uint(char *p, PyObject *v, const formatdef *f)
             RANGE_ERROR(x, f, 1, maxint - 1);
     }
     do {
-        *p++ = (char)x;
+        *q++ = (unsigned char)(x & 0xffUL);
         x >>= 8;
     } while (--i > 0);
     return 0;
diff --git a/Modules/_testbuffer.c b/Modules/_testbuffer.c
index 43db8a8..0885a03 100644
--- a/Modules/_testbuffer.c
+++ b/Modules/_testbuffer.c
@@ -1714,10 +1714,10 @@ init_slice(Py_buffer *base, PyObject *key, int dim)
 {
     Py_ssize_t start, stop, step, slicelength;
 
-    if (PySlice_GetIndicesEx(key, base->shape[dim],
-                             &start, &stop, &step, &slicelength) < 0) {
+    if (PySlice_Unpack(key, &start, &stop, &step) < 0) {
         return -1;
     }
+    slicelength = PySlice_AdjustIndices(base->shape[dim], &start, &stop, step);
 
 
     if (base->suboffsets == NULL || dim == 0) {
@@ -1934,9 +1934,10 @@ slice_indices(PyObject *self, PyObject *args)
             "first argument must be a slice object");
         return NULL;
     }
-    if (PySlice_GetIndicesEx(key, len, &s[0], &s[1], &s[2], &s[3]) < 0) {
+    if (PySlice_Unpack(key, &s[0], &s[1], &s[2]) < 0) {
         return NULL;
     }
+    s[3] = PySlice_AdjustIndices(len, &s[0], &s[1], s[2]);
 
     ret = PyTuple_New(4);
     if (ret == NULL)
diff --git a/Modules/_testcapimodule.c b/Modules/_testcapimodule.c
index 060a92d..fabcaab 100644
--- a/Modules/_testcapimodule.c
+++ b/Modules/_testcapimodule.c
@@ -1548,7 +1548,7 @@ parse_tuple_and_keywords(PyObject *self, PyObject *args)
 {
     PyObject *sub_args;
     PyObject *sub_kwargs;
-    char *sub_format;
+    const char *sub_format;
     PyObject *sub_keywords;
 
     Py_ssize_t i, size;
@@ -1561,7 +1561,7 @@ parse_tuple_and_keywords(PyObject *self, PyObject *args)
 
     double buffers[8][4]; /* double ensures alignment where necessary */
 
-    if (!PyArg_ParseTuple(args, "OOyO:parse_tuple_and_keywords",
+    if (!PyArg_ParseTuple(args, "OOsO:parse_tuple_and_keywords",
         &sub_args, &sub_kwargs,
         &sub_format, &sub_keywords))
         return NULL;
diff --git a/Modules/_winapi.c b/Modules/_winapi.c
index edc6cf4..cc7b663 100644
--- a/Modules/_winapi.c
+++ b/Modules/_winapi.c
@@ -722,17 +722,22 @@ getenvironment(PyObject* environment)
         return NULL;
     }
 
-    envsize = PyMapping_Length(environment);
-
     keys = PyMapping_Keys(environment);
     values = PyMapping_Values(environment);
     if (!keys || !values)
         goto error;
 
+    envsize = PySequence_Fast_GET_SIZE(keys);
+    if (PySequence_Fast_GET_SIZE(values) != envsize) {
+        PyErr_SetString(PyExc_RuntimeError,
+            "environment changed size during iteration");
+        goto error;
+    }
+
     totalsize = 1; /* trailing null character */
     for (i = 0; i < envsize; i++) {
-        PyObject* key = PyList_GET_ITEM(keys, i);
-        PyObject* value = PyList_GET_ITEM(values, i);
+        PyObject* key = PySequence_Fast_GET_ITEM(keys, i);
+        PyObject* value = PySequence_Fast_GET_ITEM(values, i);
 
         if (! PyUnicode_Check(key) || ! PyUnicode_Check(value)) {
             PyErr_SetString(PyExc_TypeError,
@@ -760,8 +765,8 @@ getenvironment(PyObject* environment)
     end = buffer + totalsize;
 
     for (i = 0; i < envsize; i++) {
-        PyObject* key = PyList_GET_ITEM(keys, i);
-        PyObject* value = PyList_GET_ITEM(values, i);
+        PyObject* key = PySequence_Fast_GET_ITEM(keys, i);
+        PyObject* value = PySequence_Fast_GET_ITEM(values, i);
         if (!PyUnicode_AsUCS4(key, p, end - p, 0))
             goto error;
         p += PyUnicode_GET_LENGTH(key);
diff --git a/Modules/arraymodule.c b/Modules/arraymodule.c
index a4966b4..f615a69 100644
--- a/Modules/arraymodule.c
+++ b/Modules/arraymodule.c
@@ -331,35 +331,51 @@ II_getitem(arrayobject *ap, Py_ssize_t i)
         (unsigned long) ((unsigned int *)ap->ob_item)[i]);
 }
 
+static PyObject *
+get_int_unless_float(PyObject *v)
+{
+    if (PyFloat_Check(v)) {
+        PyErr_SetString(PyExc_TypeError,
+                        "array item must be integer");
+        return NULL;
+    }
+    return (PyObject *)_PyLong_FromNbInt(v);
+}
+
 static int
 II_setitem(arrayobject *ap, Py_ssize_t i, PyObject *v)
 {
     unsigned long x;
-    if (PyLong_Check(v)) {
-        x = PyLong_AsUnsignedLong(v);
-        if (x == (unsigned long) -1 && PyErr_Occurred())
+    int do_decref = 0; /* if nb_int was called */
+
+    if (!PyLong_Check(v)) {
+        v = get_int_unless_float(v);
+        if (NULL == v) {
             return -1;
+        }
+        do_decref = 1;
     }
-    else {
-        long y;
-        if (!PyArg_Parse(v, "l;array item must be integer", &y))
-            return -1;
-        if (y < 0) {
-            PyErr_SetString(PyExc_OverflowError,
-                "unsigned int is less than minimum");
-            return -1;
+    x = PyLong_AsUnsignedLong(v);
+    if (x == (unsigned long)-1 && PyErr_Occurred()) {
+        if (do_decref) {
+            Py_DECREF(v);
         }
-        x = (unsigned long)y;
-
+        return -1;
     }
     if (x > UINT_MAX) {
         PyErr_SetString(PyExc_OverflowError,
-            "unsigned int is greater than maximum");
+                        "unsigned int is greater than maximum");
+        if (do_decref) {
+            Py_DECREF(v);
+        }
         return -1;
     }
-
     if (i >= 0)
         ((unsigned int *)ap->ob_item)[i] = (unsigned int)x;
+
+    if (do_decref) {
+        Py_DECREF(v);
+    }
     return 0;
 }
 
@@ -390,31 +406,28 @@ static int
 LL_setitem(arrayobject *ap, Py_ssize_t i, PyObject *v)
 {
     unsigned long x;
-    if (PyLong_Check(v)) {
-        x = PyLong_AsUnsignedLong(v);
-        if (x == (unsigned long) -1 && PyErr_Occurred())
-            return -1;
-    }
-    else {
-        long y;
-        if (!PyArg_Parse(v, "l;array item must be integer", &y))
-            return -1;
-        if (y < 0) {
-            PyErr_SetString(PyExc_OverflowError,
-                "unsigned long is less than minimum");
+    int do_decref = 0; /* if nb_int was called */
+
+    if (!PyLong_Check(v)) {
+        v = get_int_unless_float(v);
+        if (NULL == v) {
             return -1;
         }
-        x = (unsigned long)y;
-
+        do_decref = 1;
     }
-    if (x > ULONG_MAX) {
-        PyErr_SetString(PyExc_OverflowError,
-            "unsigned long is greater than maximum");
+    x = PyLong_AsUnsignedLong(v);
+    if (x == (unsigned long)-1 && PyErr_Occurred()) {
+        if (do_decref) {
+            Py_DECREF(v);
+        }
         return -1;
     }
-
     if (i >= 0)
         ((unsigned long *)ap->ob_item)[i] = x;
+
+    if (do_decref) {
+        Py_DECREF(v);
+    }
     return 0;
 }
 
@@ -448,25 +461,28 @@ static int
 QQ_setitem(arrayobject *ap, Py_ssize_t i, PyObject *v)
 {
     unsigned PY_LONG_LONG x;
-    if (PyLong_Check(v)) {
-        x = PyLong_AsUnsignedLongLong(v);
-        if (x == (unsigned PY_LONG_LONG) -1 && PyErr_Occurred())
+    int do_decref = 0; /* if nb_int was called */
+
+    if (!PyLong_Check(v)) {
+        v = get_int_unless_float(v);
+        if (NULL == v) {
             return -1;
+        }
+        do_decref = 1;
     }
-    else {
-        PY_LONG_LONG y;
-        if (!PyArg_Parse(v, "L;array item must be integer", &y))
-            return -1;
-        if (y < 0) {
-            PyErr_SetString(PyExc_OverflowError,
-                "unsigned long long is less than minimum");
-            return -1;
+    x = PyLong_AsUnsignedLongLong(v);
+    if (x == (unsigned PY_LONG_LONG)-1 && PyErr_Occurred()) {
+        if (do_decref) {
+            Py_DECREF(v);
         }
-        x = (unsigned PY_LONG_LONG)y;
+        return -1;
     }
-
     if (i >= 0)
         ((unsigned PY_LONG_LONG *)ap->ob_item)[i] = x;
+
+    if (do_decref) {
+        Py_DECREF(v);
+    }
     return 0;
 }
 #endif
@@ -2327,10 +2343,11 @@ array_subscr(arrayobject* self, PyObject* item)
         arrayobject* ar;
         int itemsize = self->ob_descr->itemsize;
 
-        if (PySlice_GetIndicesEx(item, Py_SIZE(self),
-                         &start, &stop, &step, &slicelength) < 0) {
+        if (PySlice_Unpack(item, &start, &stop, &step) < 0) {
             return NULL;
         }
+        slicelength = PySlice_AdjustIndices(Py_SIZE(self), &start, &stop,
+                                            step);
 
         if (slicelength <= 0) {
             return newarrayobject(&Arraytype, 0, self->ob_descr);
@@ -2398,11 +2415,11 @@ array_ass_subscr(arrayobject* self, PyObject* item, PyObject* value)
             return (*self->ob_descr->setitem)(self, i, value);
     }
     else if (PySlice_Check(item)) {
-        if (PySlice_GetIndicesEx(item,
-                                 Py_SIZE(self), &start, &stop,
-                                 &step, &slicelength) < 0) {
+        if (PySlice_Unpack(item, &start, &stop, &step) < 0) {
             return -1;
         }
+        slicelength = PySlice_AdjustIndices(Py_SIZE(self), &start, &stop,
+                                            step);
     }
     else {
         PyErr_SetString(PyExc_TypeError,
diff --git a/Modules/cjkcodecs/_codecs_cn.c b/Modules/cjkcodecs/_codecs_cn.c
index 1a070f2..1fcc220 100644
--- a/Modules/cjkcodecs/_codecs_cn.c
+++ b/Modules/cjkcodecs/_codecs_cn.c
@@ -279,7 +279,9 @@ DECODER(gb18030)
             REQUIRE_INBUF(4);
             c3 = INBYTE3;
             c4 = INBYTE4;
-            if (c < 0x81 || c3 < 0x81 || c4 < 0x30 || c4 > 0x39)
+            if (c  < 0x81 || c  > 0xFE ||
+                c3 < 0x81 || c3 > 0xFE ||
+                c4 < 0x30 || c4 > 0x39)
                 return 1;
             c -= 0x81;  c2 -= 0x30;
             c3 -= 0x81; c4 -= 0x30;
@@ -348,15 +350,17 @@ ENCODER(hz)
         DBCHAR code;
 
         if (c < 0x80) {
-            if (state->i == 0) {
-                WRITEBYTE1((unsigned char)c);
-                NEXT(1, 1);
-            }
-            else {
-                WRITEBYTE3('~', '}', (unsigned char)c);
-                NEXT(1, 3);
+            if (state->i) {
+                WRITEBYTE2('~', '}');
+                NEXT_OUT(2);
                 state->i = 0;
             }
+            WRITEBYTE1((unsigned char)c);
+            NEXT(1, 1);
+            if (c == '~') {
+                WRITEBYTE1('~');
+                NEXT_OUT(1);
+            }
             continue;
         }
 
@@ -407,17 +411,14 @@ DECODER(hz)
             unsigned char c2 = INBYTE2;
 
             REQUIRE_INBUF(2);
-            if (c2 == '~') {
+            if (c2 == '~' && state->i == 0)
                 OUTCHAR('~');
-                NEXT_IN(2);
-                continue;
-            }
             else if (c2 == '{' && state->i == 0)
                 state->i = 1; /* set GB */
+            else if (c2 == '\n' && state->i == 0)
+                ; /* line-continuation */
             else if (c2 == '}' && state->i == 1)
                 state->i = 0; /* set ASCII */
-            else if (c2 == '\n')
-                ; /* line-continuation */
             else
                 return 1;
             NEXT_IN(2);
diff --git a/Modules/cjkcodecs/multibytecodec.c b/Modules/cjkcodecs/multibytecodec.c
index f5c8421..61750ed 100644
--- a/Modules/cjkcodecs/multibytecodec.c
+++ b/Modules/cjkcodecs/multibytecodec.c
@@ -1670,6 +1670,9 @@ _multibytecodec_MultibyteStreamWriter_writelines(MultibyteStreamWriterObject *se
         if (r == -1)
             return NULL;
     }
+    /* PySequence_Length() can fail */
+    if (PyErr_Occurred())
+        return NULL;
 
     Py_RETURN_NONE;
 }
diff --git a/Modules/faulthandler.c b/Modules/faulthandler.c
index f1fda48..56285b6 100644
--- a/Modules/faulthandler.c
+++ b/Modules/faulthandler.c
@@ -124,6 +124,7 @@ static const unsigned char faulthandler_nsignals = \
 
 #ifdef HAVE_SIGALTSTACK
 static stack_t stack;
+static stack_t old_stack;
 #endif
 
 
@@ -1148,7 +1149,7 @@ int _PyFaulthandler_Init(void)
     stack.ss_size = SIGSTKSZ;
     stack.ss_sp = PyMem_Malloc(stack.ss_size);
     if (stack.ss_sp != NULL) {
-        err = sigaltstack(&stack, NULL);
+        err = sigaltstack(&stack, &old_stack);
         if (err) {
             PyMem_Free(stack.ss_sp);
             stack.ss_sp = NULL;
@@ -1204,6 +1205,20 @@ void _PyFaulthandler_Fini(void)
     faulthandler_disable();
 #ifdef HAVE_SIGALTSTACK
     if (stack.ss_sp != NULL) {
+        /* Fetch the current alt stack */
+        stack_t current_stack;
+        if (sigaltstack(NULL, &current_stack) == 0) {
+            if (current_stack.ss_sp == stack.ss_sp) {
+                /* The current alt stack is the one that we installed.
+                 It is safe to restore the old stack that we found when
+                 we installed ours */
+                sigaltstack(&old_stack, NULL);
+            } else {
+                /* Someone switched to a different alt stack and didn't
+                   restore ours when they were done (if they're done).
+                   There's not much we can do in this unlikely case */
+            }
+        }
         PyMem_Free(stack.ss_sp);
         stack.ss_sp = NULL;
     }
diff --git a/Modules/getbuildinfo.c b/Modules/getbuildinfo.c
index 0971a64..5f941a2 100644
--- a/Modules/getbuildinfo.c
+++ b/Modules/getbuildinfo.c
@@ -21,47 +21,47 @@
 #endif
 
 /* XXX Only unix build process has been tested */
-#ifndef HGVERSION
-#define HGVERSION ""
+#ifndef GITVERSION
+#define GITVERSION ""
 #endif
-#ifndef HGTAG
-#define HGTAG ""
+#ifndef GITTAG
+#define GITTAG ""
 #endif
-#ifndef HGBRANCH
-#define HGBRANCH ""
+#ifndef GITBRANCH
+#define GITBRANCH ""
 #endif
 
 const char *
 Py_GetBuildInfo(void)
 {
-    static char buildinfo[50 + sizeof(HGVERSION) +
-                          ((sizeof(HGTAG) > sizeof(HGBRANCH)) ?
-                           sizeof(HGTAG) : sizeof(HGBRANCH))];
-    const char *revision = _Py_hgversion();
+    static char buildinfo[50 + sizeof(GITVERSION) +
+                          ((sizeof(GITTAG) > sizeof(GITBRANCH)) ?
+                           sizeof(GITTAG) : sizeof(GITBRANCH))];
+    const char *revision = _Py_gitversion();
     const char *sep = *revision ? ":" : "";
-    const char *hgid = _Py_hgidentifier();
-    if (!(*hgid))
-        hgid = "default";
+    const char *gitid = _Py_gitidentifier();
+    if (!(*gitid))
+        gitid = "default";
     PyOS_snprintf(buildinfo, sizeof(buildinfo),
-                  "%s%s%s, %.20s, %.9s", hgid, sep, revision,
+                  "%s%s%s, %.20s, %.9s", gitid, sep, revision,
                   DATE, TIME);
     return buildinfo;
 }
 
 const char *
-_Py_hgversion(void)
+_Py_gitversion(void)
 {
-    return HGVERSION;
+    return GITVERSION;
 }
 
 const char *
-_Py_hgidentifier(void)
+_Py_gitidentifier(void)
 {
-    const char *hgtag, *hgid;
-    hgtag = HGTAG;
-    if ((*hgtag) && strcmp(hgtag, "tip") != 0)
-        hgid = hgtag;
+    const char *gittag, *gitid;
+    gittag = GITTAG;
+    if ((*gittag) && strcmp(gittag, "undefined") != 0)
+        gitid = gittag;
     else
-        hgid = HGBRANCH;
-    return hgid;
+        gitid = GITBRANCH;
+    return gitid;
 }
diff --git a/Modules/itertoolsmodule.c b/Modules/itertoolsmodule.c
index be0f498..584dc6e 100644
--- a/Modules/itertoolsmodule.c
+++ b/Modules/itertoolsmodule.c
@@ -1854,33 +1854,37 @@ chain_next(chainobject *lz)
 {
     PyObject *item;
 
-    if (lz->source == NULL)
-        return NULL;                                    /* already stopped */
-
-    if (lz->active == NULL) {
-        PyObject *iterable = PyIter_Next(lz->source);
-        if (iterable == NULL) {
-            Py_CLEAR(lz->source);
-            return NULL;                                /* no more input sources */
-        }
-        lz->active = PyObject_GetIter(iterable);
-        Py_DECREF(iterable);
+    /* lz->source is the iterator of iterables. If it's NULL, we've already
+     * consumed them all. lz->active is the current iterator. If it's NULL,
+     * we should grab a new one from lz->source. */
+    while (lz->source != NULL) {
         if (lz->active == NULL) {
-            Py_CLEAR(lz->source);
-            return NULL;                                /* input not iterable */
+            PyObject *iterable = PyIter_Next(lz->source);
+            if (iterable == NULL) {
+                Py_CLEAR(lz->source);
+                return NULL;            /* no more input sources */
+            }
+            lz->active = PyObject_GetIter(iterable);
+            Py_DECREF(iterable);
+            if (lz->active == NULL) {
+                Py_CLEAR(lz->source);
+                return NULL;            /* input not iterable */
+            }
         }
+        item = (*Py_TYPE(lz->active)->tp_iternext)(lz->active);
+        if (item != NULL)
+            return item;
+        if (PyErr_Occurred()) {
+            if (PyErr_ExceptionMatches(PyExc_StopIteration))
+                PyErr_Clear();
+            else
+                return NULL;            /* input raised an exception */
+        }
+        /* lz->active is consumed, try with the next iterable. */
+        Py_CLEAR(lz->active);
     }
-    item = PyIter_Next(lz->active);
-    if (item != NULL)
-        return item;
-    if (PyErr_Occurred()) {
-        if (PyErr_ExceptionMatches(PyExc_StopIteration))
-            PyErr_Clear();
-        else
-            return NULL;                                /* input raised an exception */
-    }
-    Py_CLEAR(lz->active);
-    return chain_next(lz);                      /* recurse and use next active */
+    /* Everything had been consumed already. */
+    return NULL;
 }
 
 static PyObject *
diff --git a/Modules/main.c b/Modules/main.c
index e4c955e..d36db6d 100644
--- a/Modules/main.c
+++ b/Modules/main.c
@@ -50,7 +50,7 @@ static char *usage_1 = "\
 Options and arguments (and corresponding environment variables):\n\
 -b     : issue warnings about str(bytes_instance), str(bytearray_instance)\n\
          and comparing bytes/bytearray with str. (-bb: issue errors)\n\
--B     : don't write .py[co] files on import; also PYTHONDONTWRITEBYTECODE=x\n\
+-B     : don't write .pyc files on import; also PYTHONDONTWRITEBYTECODE=x\n\
 -c cmd : program passed in as string (terminates option list)\n\
 -d     : debug output from parser; also PYTHONDEBUG=x\n\
 -E     : ignore PYTHON* environment variables (such as PYTHONPATH)\n\
@@ -223,7 +223,7 @@ static int RunModule(wchar_t *modname, int set_argv0)
 static int
 RunMainFromImporter(wchar_t *filename)
 {
-    PyObject *argv0 = NULL, *importer, *sys_path;
+    PyObject *argv0 = NULL, *importer, *sys_path, *sys_path0;
     int sts;
 
     argv0 = PyUnicode_FromWideChar(filename, wcslen(filename));
@@ -248,7 +248,17 @@ RunMainFromImporter(wchar_t *filename)
         PyErr_SetString(PyExc_RuntimeError, "unable to get sys.path");
         goto error;
     }
-    if (PyList_SetItem(sys_path, 0, argv0)) {
+    sys_path0 = PyList_GetItem(sys_path, 0);
+    sts = 0;
+    if (!sys_path0) {
+        PyErr_Clear();
+        sts = PyList_Append(sys_path, argv0);
+    } else if (PyObject_IsTrue(sys_path0)) {
+        sts = PyList_Insert(sys_path, 0, argv0);
+    } else {
+        sts = PyList_SetItem(sys_path, 0, argv0);
+    }
+    if (sts) {
         argv0 = NULL;
         goto error;
     }
diff --git a/Modules/makesetup b/Modules/makesetup
index e204a05..8db8de8 100755
--- a/Modules/makesetup
+++ b/Modules/makesetup
@@ -259,7 +259,7 @@ sed -e 's/[ 	]*#.*//' -e '/^[ 	]*$/d' |
 	for mod in $MODS
 	do
 		EXTDECLS="${EXTDECLS}extern PyObject* PyInit_$mod(void);$NL"
-		INITBITS="${INITBITS}	{\"$mod\", PyInit_$mod},$NL"
+		INITBITS="${INITBITS}    {\"$mod\", PyInit_$mod},$NL"
 	done
 
 
diff --git a/Modules/mmapmodule.c b/Modules/mmapmodule.c
index 4eb9274..d80b1f6 100644
--- a/Modules/mmapmodule.c
+++ b/Modules/mmapmodule.c
@@ -807,10 +807,10 @@ mmap_subscript(mmap_object *self, PyObject *item)
     else if (PySlice_Check(item)) {
         Py_ssize_t start, stop, step, slicelen;
 
-        if (PySlice_GetIndicesEx(item, self->size,
-                         &start, &stop, &step, &slicelen) < 0) {
+        if (PySlice_Unpack(item, &start, &stop, &step) < 0) {
             return NULL;
         }
+        slicelen = PySlice_AdjustIndices(self->size, &start, &stop, step);
 
         if (slicelen <= 0)
             return PyBytes_FromStringAndSize("", 0);
@@ -933,11 +933,10 @@ mmap_ass_subscript(mmap_object *self, PyObject *item, PyObject *value)
         Py_ssize_t start, stop, step, slicelen;
         Py_buffer vbuf;
 
-        if (PySlice_GetIndicesEx(item,
-                                 self->size, &start, &stop,
-                                 &step, &slicelen) < 0) {
+        if (PySlice_Unpack(item, &start, &stop, &step) < 0) {
             return -1;
         }
+        slicelen = PySlice_AdjustIndices(self->size, &start, &stop, step);
         if (value == NULL) {
             PyErr_SetString(PyExc_TypeError,
                 "mmap object doesn't support slice deletion");
diff --git a/Modules/parsermodule.c b/Modules/parsermodule.c
index 6471b8e..fe095e5 100644
--- a/Modules/parsermodule.c
+++ b/Modules/parsermodule.c
@@ -763,6 +763,9 @@ build_node_children(PyObject *tuple, node *root, int *line_num)
     Py_ssize_t i;
     int  err;
 
+    if (len < 0) {
+        return NULL;
+    }
     for (i = 1; i < len; ++i) {
         /* elem must always be a sequence, however simple */
         PyObject* elem = PySequence_GetItem(tuple, i);
@@ -783,7 +786,7 @@ build_node_children(PyObject *tuple, node *root, int *line_num)
                     if (type == -1 && PyErr_Occurred()) {
                         Py_DECREF(temp);
                         Py_DECREF(elem);
-                        return 0;
+                        return NULL;
                     }
                 }
                 Py_DECREF(temp);
@@ -795,7 +798,7 @@ build_node_children(PyObject *tuple, node *root, int *line_num)
             PyErr_SetObject(parser_error, err);
             Py_XDECREF(err);
             Py_XDECREF(elem);
-            return (0);
+            return NULL;
         }
         if (ISTERMINAL(type)) {
             Py_ssize_t len = PyObject_Size(elem);
@@ -804,11 +807,14 @@ build_node_children(PyObject *tuple, node *root, int *line_num)
 
             if ((len != 2) && (len != 3)) {
                 err_string("terminal nodes must have 2 or 3 entries");
-                return 0;
+                Py_DECREF(elem);
+                return NULL;
             }
             temp = PySequence_GetItem(elem, 1);
-            if (temp == NULL)
-                return 0;
+            if (temp == NULL) {
+                Py_DECREF(elem);
+                return NULL;
+            }
             if (!PyUnicode_Check(temp)) {
                 PyErr_Format(parser_error,
                              "second item in terminal node must be a string,"
@@ -816,46 +822,49 @@ build_node_children(PyObject *tuple, node *root, int *line_num)
                              Py_TYPE(temp)->tp_name);
                 Py_DECREF(temp);
                 Py_DECREF(elem);
-                return 0;
+                return NULL;
             }
             if (len == 3) {
                 PyObject *o = PySequence_GetItem(elem, 2);
-                if (o != NULL) {
-                    if (PyLong_Check(o)) {
-                        int num = _PyLong_AsInt(o);
-                        if (num == -1 && PyErr_Occurred()) {
-                            Py_DECREF(o);
-                            Py_DECREF(temp);
-                            Py_DECREF(elem);
-                            return 0;
-                        }
-                        *line_num = num;
-                    }
-                    else {
-                        PyErr_Format(parser_error,
-                                     "third item in terminal node must be an"
-                                     " integer, found %s",
-                                     Py_TYPE(temp)->tp_name);
+                if (o == NULL) {
+                    Py_DECREF(temp);
+                    Py_DECREF(elem);
+                    return NULL;
+                }
+                if (PyLong_Check(o)) {
+                    int num = _PyLong_AsInt(o);
+                    if (num == -1 && PyErr_Occurred()) {
                         Py_DECREF(o);
                         Py_DECREF(temp);
                         Py_DECREF(elem);
-                        return 0;
+                        return NULL;
                     }
+                    *line_num = num;
+                }
+                else {
+                    PyErr_Format(parser_error,
+                                 "third item in terminal node must be an"
+                                 " integer, found %s",
+                                 Py_TYPE(temp)->tp_name);
                     Py_DECREF(o);
+                    Py_DECREF(temp);
+                    Py_DECREF(elem);
+                    return NULL;
                 }
+                Py_DECREF(o);
             }
             temp_str = _PyUnicode_AsStringAndSize(temp, &len);
             if (temp_str == NULL) {
                 Py_DECREF(temp);
-                Py_XDECREF(elem);
-                return 0;
+                Py_DECREF(elem);
+                return NULL;
             }
             strn = (char *)PyObject_MALLOC(len + 1);
             if (strn == NULL) {
                 Py_DECREF(temp);
-                Py_XDECREF(elem);
+                Py_DECREF(elem);
                 PyErr_NoMemory();
-                return 0;
+                return NULL;
             }
             (void) memcpy(strn, temp_str, len + 1);
             Py_DECREF(temp);
@@ -865,20 +874,21 @@ build_node_children(PyObject *tuple, node *root, int *line_num)
              *  It has to be one or the other; this is an error.
              *  Raise an exception.
              */
-            PyObject *err = Py_BuildValue("os", elem, "unknown node type.");
+            PyObject *err = Py_BuildValue("Os", elem, "unknown node type.");
             PyErr_SetObject(parser_error, err);
             Py_XDECREF(err);
-            Py_XDECREF(elem);
-            return (0);
+            Py_DECREF(elem);
+            return NULL;
         }
         err = PyNode_AddChild(root, type, strn, *line_num, 0);
         if (err == E_NOMEM) {
-            Py_XDECREF(elem);
+            Py_DECREF(elem);
             PyObject_FREE(strn);
-            return (node *) PyErr_NoMemory();
+            PyErr_NoMemory();
+            return NULL;
         }
         if (err == E_OVERFLOW) {
-            Py_XDECREF(elem);
+            Py_DECREF(elem);
             PyObject_FREE(strn);
             PyErr_SetString(PyExc_ValueError,
                             "unsupported number of child nodes");
@@ -889,14 +899,14 @@ build_node_children(PyObject *tuple, node *root, int *line_num)
             node* new_child = CHILD(root, i - 1);
 
             if (new_child != build_node_children(elem, new_child, line_num)) {
-                Py_XDECREF(elem);
-                return (0);
+                Py_DECREF(elem);
+                return NULL;
             }
         }
         else if (type == NEWLINE) {     /* It's true:  we increment the     */
             ++(*line_num);              /* line number *after* the newline! */
         }
-        Py_XDECREF(elem);
+        Py_DECREF(elem);
     }
     return root;
 }
@@ -931,10 +941,23 @@ build_node_tree(PyObject *tuple)
 
         if (num == encoding_decl) {
             encoding = PySequence_GetItem(tuple, 2);
+            if (encoding == NULL) {
+                PyErr_SetString(parser_error, "missed encoding");
+                return NULL;
+            }
+            if (!PyUnicode_Check(encoding)) {
+                PyErr_Format(parser_error,
+                             "encoding must be a string, found %.200s",
+                             Py_TYPE(encoding)->tp_name);
+                Py_DECREF(encoding);
+                return NULL;
+            }
             /* tuple isn't borrowed anymore here, need to DECREF */
             tuple = PySequence_GetSlice(tuple, 0, 2);
-            if (tuple == NULL)
+            if (tuple == NULL) {
+                Py_DECREF(encoding);
                 return NULL;
+            }
         }
         res = PyNode_New(num);
         if (res != NULL) {
@@ -947,31 +970,33 @@ build_node_tree(PyObject *tuple)
                 const char *temp;
                 temp = _PyUnicode_AsStringAndSize(encoding, &len);
                 if (temp == NULL) {
-                    Py_DECREF(res);
+                    PyNode_Free(res);
                     Py_DECREF(encoding);
                     Py_DECREF(tuple);
                     return NULL;
                 }
                 res->n_str = (char *)PyObject_MALLOC(len + 1);
                 if (res->n_str == NULL) {
-                    Py_DECREF(res);
+                    PyNode_Free(res);
                     Py_DECREF(encoding);
                     Py_DECREF(tuple);
                     PyErr_NoMemory();
                     return NULL;
                 }
                 (void) memcpy(res->n_str, temp, len + 1);
-                Py_DECREF(encoding);
-                Py_DECREF(tuple);
             }
         }
+        if (encoding != NULL) {
+            Py_DECREF(encoding);
+            Py_DECREF(tuple);
+        }
     }
     else {
         /*  The tuple is illegal -- if the number is neither TERMINAL nor
          *  NONTERMINAL, we can't use it.  Not sure the implementation
          *  allows this condition, but the API doesn't preclude it.
          */
-        PyObject *err = Py_BuildValue("os", tuple,
+        PyObject *err = Py_BuildValue("Os", tuple,
                                       "Illegal component tuple.");
         PyErr_SetObject(parser_error, err);
         Py_XDECREF(err);
@@ -3433,7 +3458,6 @@ parser__pickler(PyObject *self, PyObject *args)
             result = Py_BuildValue("O(O)", pickle_constructor, tuple);
             Py_DECREF(tuple);
         }
-        Py_DECREF(empty_dict);
         Py_DECREF(newargs);
     }
   finally:
diff --git a/Modules/posixmodule.c b/Modules/posixmodule.c
index 3e446a5..00da3c0 100644
--- a/Modules/posixmodule.c
+++ b/Modules/posixmodule.c
@@ -6755,7 +6755,7 @@ static PyObject *
 os_setgroups(PyObject *module, PyObject *groups)
 /*[clinic end generated code: output=3fcb32aad58c5ecd input=fa742ca3daf85a7e]*/
 {
-    int i, len;
+    Py_ssize_t i, len;
     gid_t grouplist[MAX_GROUPS];
 
     if (!PySequence_Check(groups)) {
@@ -6763,6 +6763,9 @@ os_setgroups(PyObject *module, PyObject *groups)
         return NULL;
     }
     len = PySequence_Size(groups);
+    if (len < 0) {
+        return NULL;
+    }
     if (len > MAX_GROUPS) {
         PyErr_SetString(PyExc_ValueError, "too many groups");
         return NULL;
@@ -8076,9 +8079,9 @@ os_read_impl(PyObject *module, int fd, Py_ssize_t length)
 #if (defined(HAVE_SENDFILE) && (defined(__FreeBSD__) || defined(__DragonFly__) \
     || defined(__APPLE__))) || defined(HAVE_READV) || defined(HAVE_WRITEV)
 static Py_ssize_t
-iov_setup(struct iovec **iov, Py_buffer **buf, PyObject *seq, int cnt, int type)
+iov_setup(struct iovec **iov, Py_buffer **buf, PyObject *seq, Py_ssize_t cnt, int type)
 {
-    int i, j;
+    Py_ssize_t i, j;
     Py_ssize_t blen, total = 0;
 
     *iov = PyMem_New(struct iovec, cnt);
@@ -8155,8 +8158,7 @@ static Py_ssize_t
 os_readv_impl(PyObject *module, int fd, PyObject *buffers)
 /*[clinic end generated code: output=792da062d3fcebdb input=e679eb5dbfa0357d]*/
 {
-    int cnt;
-    Py_ssize_t n;
+    Py_ssize_t cnt, n;
     int async_err = 0;
     struct iovec *iov;
     Py_buffer *buf;
@@ -8168,6 +8170,8 @@ os_readv_impl(PyObject *module, int fd, PyObject *buffers)
     }
 
     cnt = PySequence_Size(buffers);
+    if (cnt < 0)
+        return -1;
 
     if (iov_setup(&iov, &buf, buffers, cnt, PyBUF_WRITABLE) < 0)
         return -1;
@@ -8310,15 +8314,24 @@ posix_sendfile(PyObject *self, PyObject *args, PyObject *kwdict)
                 "sendfile() headers must be a sequence");
             return NULL;
         } else {
-            Py_ssize_t i = 0; /* Avoid uninitialized warning */
-            sf.hdr_cnt = PySequence_Size(headers);
-            if (sf.hdr_cnt > 0 &&
-                (i = iov_setup(&(sf.headers), &hbuf,
-                                headers, sf.hdr_cnt, PyBUF_SIMPLE)) < 0)
+            Py_ssize_t i = PySequence_Size(headers);
+            if (i < 0)
+                return NULL;
+            if (i > INT_MAX) {
+                PyErr_SetString(PyExc_OverflowError,
+                    "sendfile() header is too large");
                 return NULL;
+            }
+            if (i > 0) {
+                sf.hdr_cnt = (int)i;
+                i = iov_setup(&(sf.headers), &hbuf,
+                              headers, sf.hdr_cnt, PyBUF_SIMPLE);
+                if (i < 0)
+                    return NULL;
 #ifdef __APPLE__
-            sbytes += i;
+                sbytes += i;
 #endif
+            }
         }
     }
     if (trailers != NULL) {
@@ -8327,15 +8340,24 @@ posix_sendfile(PyObject *self, PyObject *args, PyObject *kwdict)
                 "sendfile() trailers must be a sequence");
             return NULL;
         } else {
-            Py_ssize_t i = 0; /* Avoid uninitialized warning */
-            sf.trl_cnt = PySequence_Size(trailers);
-            if (sf.trl_cnt > 0 &&
-                (i = iov_setup(&(sf.trailers), &tbuf,
-                                trailers, sf.trl_cnt, PyBUF_SIMPLE)) < 0)
+            Py_ssize_t i = PySequence_Size(trailers);
+            if (i < 0)
+                return NULL;
+            if (i > INT_MAX) {
+                PyErr_SetString(PyExc_OverflowError,
+                    "sendfile() trailer is too large");
                 return NULL;
+            }
+            if (i > 0) {
+                sf.trl_cnt = (int)i;
+                i = iov_setup(&(sf.trailers), &tbuf,
+                              trailers, sf.trl_cnt, PyBUF_SIMPLE);
+                if (i < 0)
+                    return NULL;
 #ifdef __APPLE__
-            sbytes += i;
+                sbytes += i;
 #endif
+            }
         }
     }
 
@@ -8605,7 +8627,7 @@ static Py_ssize_t
 os_writev_impl(PyObject *module, int fd, PyObject *buffers)
 /*[clinic end generated code: output=56565cfac3aac15b input=5b8d17fe4189d2fe]*/
 {
-    int cnt;
+    Py_ssize_t cnt;
     Py_ssize_t result;
     int async_err = 0;
     struct iovec *iov;
@@ -8617,6 +8639,8 @@ os_writev_impl(PyObject *module, int fd, PyObject *buffers)
         return -1;
     }
     cnt = PySequence_Size(buffers);
+    if (cnt < 0)
+        return -1;
 
     if (iov_setup(&iov, &buf, buffers, cnt, PyBUF_SIMPLE) < 0) {
         return -1;
diff --git a/Modules/pyexpat.c b/Modules/pyexpat.c
index 00c96a1..3a6e590 100644
--- a/Modules/pyexpat.c
+++ b/Modules/pyexpat.c
@@ -1190,7 +1190,7 @@ newxmlparseobject(const char *encoding, const char *namespace_separator, PyObjec
         Py_DECREF(self);
         return NULL;
     }
-#if ((XML_MAJOR_VERSION >= 2) && (XML_MINOR_VERSION >= 1)) || defined(XML_HAS_SET_HASH_SALT)
+#if XML_COMBINED_VERSION >= 20100 || defined(XML_HAS_SET_HASH_SALT)
     /* This feature was added upstream in libexpat 2.1.0.  Our expat copy
      * has a backport of this feature where we also define XML_HAS_SET_HASH_SALT
      * to indicate that we can still use it. */
diff --git a/Modules/socketmodule.c b/Modules/socketmodule.c
index af6cc94..47abe8d 100644
--- a/Modules/socketmodule.c
+++ b/Modules/socketmodule.c
@@ -1183,9 +1183,9 @@ makesockaddr(SOCKET_T sockfd, struct sockaddr *addr, size_t addrlen, int proto)
     {
         struct sockaddr_un *a = (struct sockaddr_un *) addr;
 #ifdef linux
-        if (a->sun_path[0] == 0) {  /* Linux abstract namespace */
-            addrlen -= offsetof(struct sockaddr_un, sun_path);
-            return PyBytes_FromStringAndSize(a->sun_path, addrlen);
+        size_t linuxaddrlen = addrlen - offsetof(struct sockaddr_un, sun_path);
+        if (linuxaddrlen > 0 && a->sun_path[0] == 0) {  /* Linux abstract namespace */
+            return PyBytes_FromStringAndSize(a->sun_path, linuxaddrlen);
         }
         else
 #endif /* linux */
diff --git a/Modules/xxlimited.c b/Modules/xxlimited.c
index 40c1760..ea620fd 100644
--- a/Modules/xxlimited.c
+++ b/Modules/xxlimited.c
@@ -31,7 +31,7 @@ static XxoObject *
 newXxoObject(PyObject *arg)
 {
     XxoObject *self;
-    self = PyObject_New(XxoObject, (PyTypeObject*)Xxo_Type);
+    self = PyObject_GC_New(XxoObject, (PyTypeObject*)Xxo_Type);
     if (self == NULL)
         return NULL;
     self->x_attr = NULL;
diff --git a/Modules/zipimport.c b/Modules/zipimport.c
index 7473a8f..feef98f 100644
--- a/Modules/zipimport.c
+++ b/Modules/zipimport.c
@@ -1104,7 +1104,7 @@ get_decompress_func(void)
     _Py_IDENTIFIER(decompress);
 
     if (importing_zlib != 0)
-        /* Someone has a zlib.py[co] in their Zip file;
+        /* Someone has a zlib.pyc in their Zip file;
            let's avoid a stack overflow. */
         return NULL;
     importing_zlib = 1;
@@ -1263,7 +1263,12 @@ eq_mtime(time_t t1, time_t t2)
     return d <= 1;
 }
 
-/* Given the contents of a .py[co] file in a buffer, unmarshal the data
+/* Issue #29537: handle issue27286 bytecode incompatibility
+ * See Lib/importlib/_bootstrap_external.py for general discussion
+ */
+extern PY_UINT32_T _Py_BACKCOMPAT_MAGIC_NUMBER;
+
+/* Given the contents of a .pyc file in a buffer, unmarshal the data
    and return the code object. Return None if it the magic word doesn't
    match (we do this instead of raising an exception as we fall back
    to .py if available and we don't want to mask other errors).
@@ -1274,6 +1279,7 @@ unmarshal_code(PyObject *pathname, PyObject *data, time_t mtime)
     PyObject *code;
     unsigned char *buf = (unsigned char *)PyBytes_AsString(data);
     Py_ssize_t size = PyBytes_Size(data);
+    PY_UINT32_T magic;
 
     if (size < 12) {
         PyErr_SetString(ZipImportError,
@@ -1281,7 +1287,10 @@ unmarshal_code(PyObject *pathname, PyObject *data, time_t mtime)
         return NULL;
     }
 
-    if (get_uint32(buf) != (unsigned int)PyImport_GetMagicNumber()) {
+    magic = get_uint32(buf);
+    if (magic != (unsigned int)PyImport_GetMagicNumber()
+            /* Issue #29537: handle issue27286 bytecode incompatibility */
+            && magic != _Py_BACKCOMPAT_MAGIC_NUMBER) {
         if (Py_VerboseFlag) {
             PySys_FormatStderr("# %R has bad magic\n",
                                pathname);
@@ -1405,7 +1414,7 @@ get_mtime_of_source(ZipImporter *self, PyObject *path)
     PyObject *toc_entry, *stripped;
     time_t mtime;
 
-    /* strip 'c' or 'o' from *.py[co] */
+    /* strip 'c' from *.pyc */
     if (PyUnicode_READY(path) == -1)
         return (time_t)-1;
     stripped = PyUnicode_FromKindAndData(PyUnicode_KIND(path),
diff --git a/Modules/zlib/ChangeLog b/Modules/zlib/ChangeLog
index f22aaba..30199a6 100644
--- a/Modules/zlib/ChangeLog
+++ b/Modules/zlib/ChangeLog
@@ -1,10 +1,53 @@
 
                 ChangeLog file for zlib
 
+Changes in 1.2.11 (15 Jan 2017)
+- Fix deflate stored bug when pulling last block from window
+- Permit immediate deflateParams changes before any deflate input
+
+Changes in 1.2.10 (2 Jan 2017)
+- Avoid warnings on snprintf() return value
+- Fix bug in deflate_stored() for zero-length input
+- Fix bug in gzwrite.c that produced corrupt gzip files
+- Remove files to be installed before copying them in Makefile.in
+- Add warnings when compiling with assembler code
+
+Changes in 1.2.9 (31 Dec 2016)
+- Fix contrib/minizip to permit unzipping with desktop API [Zouzou]
+- Improve contrib/blast to return unused bytes
+- Assure that gzoffset() is correct when appending
+- Improve compress() and uncompress() to support large lengths
+- Fix bug in test/example.c where error code not saved
+- Remedy Coverity warning [Randers-Pehrson]
+- Improve speed of gzprintf() in transparent mode
+- Fix inflateInit2() bug when windowBits is 16 or 32
+- Change DEBUG macro to ZLIB_DEBUG
+- Avoid uninitialized access by gzclose_w()
+- Allow building zlib outside of the source directory
+- Fix bug that accepted invalid zlib header when windowBits is zero
+- Fix gzseek() problem on MinGW due to buggy _lseeki64 there
+- Loop on write() calls in gzwrite.c in case of non-blocking I/O
+- Add --warn (-w) option to ./configure for more compiler warnings
+- Reject a window size of 256 bytes if not using the zlib wrapper
+- Fix bug when level 0 used with Z_HUFFMAN or Z_RLE
+- Add --debug (-d) option to ./configure to define ZLIB_DEBUG
+- Fix bugs in creating a very large gzip header
+- Add uncompress2() function, which returns the input size used
+- Assure that deflateParams() will not switch functions mid-block
+- Dramatically speed up deflation for level 0 (storing)
+- Add gzfread(), duplicating the interface of fread()
+- Add gzfwrite(), duplicating the interface of fwrite()
+- Add deflateGetDictionary() function
+- Use snprintf() for later versions of Microsoft C
+- Fix *Init macros to use z_ prefix when requested
+- Replace as400 with os400 for OS/400 support [Monnerat]
+- Add crc32_z() and adler32_z() functions with size_t lengths
+- Update Visual Studio project files [AraHaan]
+
 Changes in 1.2.8 (28 Apr 2013)
 - Update contrib/minizip/iowin32.c for Windows RT [Vollant]
 - Do not force Z_CONST for C++
-- Clean up contrib/vstudio [Ro§]
+- Clean up contrib/vstudio [RoÃŸ]
 - Correct spelling error in zlib.h
 - Fix mixed line endings in contrib/vstudio
 
@@ -34,7 +77,7 @@ Changes in 1.2.7.1 (24 Mar 2013)
 - Clean up the usage of z_const and respect const usage within zlib
 - Clean up examples/gzlog.[ch] comparisons of different types
 - Avoid shift equal to bits in type (caused endless loop)
-- Fix unintialized value bug in gzputc() introduced by const patches
+- Fix uninitialized value bug in gzputc() introduced by const patches
 - Fix memory allocation error in examples/zran.c [Nor]
 - Fix bug where gzopen(), gzclose() would write an empty file
 - Fix bug in gzclose() when gzwrite() runs out of memory
@@ -194,7 +237,7 @@ Changes in 1.2.5.2 (17 Dec 2011)
 - Add a transparent write mode to gzopen() when 'T' is in the mode
 - Update python link in zlib man page
 - Get inffixed.h and MAKEFIXED result to match
-- Add a ./config --solo option to make zlib subset with no libary use
+- Add a ./config --solo option to make zlib subset with no library use
 - Add undocumented inflateResetKeep() function for CAB file decoding
 - Add --cover option to ./configure for gcc coverage testing
 - Add #define ZLIB_CONST option to use const in the z_stream interface
@@ -564,7 +607,7 @@ Changes in 1.2.3.1 (16 August 2006)
 - Update make_vms.com [Zinser]
 - Use -fPIC for shared build in configure [Teredesai, Nicholson]
 - Use only major version number for libz.so on IRIX and OSF1 [Reinholdtsen]
-- Use fdopen() (not _fdopen()) for Interix in zutil.h [BŠck]
+- Use fdopen() (not _fdopen()) for Interix in zutil.h [BÃ¤ck]
 - Add some FAQ entries about the contrib directory
 - Update the MVS question in the FAQ
 - Avoid extraneous reads after EOF in gzio.c [Brown]
@@ -1178,7 +1221,7 @@ Changes in 1.0.6 (19 Jan 1998)
         386 asm code replacing longest_match().
    contrib/iostream/ by Kevin Ruland <kevin@rodin.wustl.edu>
         A C++ I/O streams interface to the zlib gz* functions
-   contrib/iostream2/  by Tyge Løvset <Tyge.Lovset@cmr.no>
+   contrib/iostream2/  by Tyge LÃ¸vset <Tyge.Lovset@cmr.no>
         Another C++ I/O streams interface
    contrib/untgz/  by "Pedro A. Aranda Guti\irrez" <paag@tid.es>
         A very simple tar.gz file extractor using zlib
@@ -1267,7 +1310,7 @@ Changes in 1.0.1 (20 May 96) [1.0 skipped to avoid confusion]
 - fix array overlay in deflate.c which sometimes caused bad compressed data
 - fix inflate bug with empty stored block
 - fix MSDOS medium model which was broken in 0.99
-- fix deflateParams() which could generated bad compressed data.
+- fix deflateParams() which could generate bad compressed data.
 - Bytef is define'd instead of typedef'ed (work around Borland bug)
 - added an INDEX file
 - new makefiles for DJGPP (Makefile.dj2), 32-bit Borland (Makefile.b32),
diff --git a/Modules/zlib/Makefile.in b/Modules/zlib/Makefile.in
index c61aa30..1852192 100644
--- a/Modules/zlib/Makefile.in
+++ b/Modules/zlib/Makefile.in
@@ -1,5 +1,5 @@
 # Makefile for zlib
-# Copyright (C) 1995-2013 Jean-loup Gailly, Mark Adler
+# Copyright (C) 1995-2016 Jean-loup Gailly, Mark Adler
 # For conditions of distribution and use, see copyright notice in zlib.h
 
 # To compile and test, type:
@@ -20,7 +20,7 @@ CC=cc
 
 CFLAGS=-O
 #CFLAGS=-O -DMAX_WBITS=14 -DMAX_MEM_LEVEL=7
-#CFLAGS=-g -DDEBUG
+#CFLAGS=-g -DZLIB_DEBUG
 #CFLAGS=-O3 -Wall -Wwrite-strings -Wpointer-arith -Wconversion \
 #           -Wstrict-prototypes -Wmissing-prototypes
 
@@ -32,7 +32,7 @@ CPP=$(CC) -E
 
 STATICLIB=libz.a
 SHAREDLIB=libz.so
-SHAREDLIBV=libz.so.1.2.8
+SHAREDLIBV=libz.so.1.2.10
 SHAREDLIBM=libz.so.1
 LIBS=$(STATICLIB) $(SHAREDLIBV)
 
@@ -53,6 +53,9 @@ includedir = ${prefix}/include
 mandir = ${prefix}/share/man
 man3dir = ${mandir}/man3
 pkgconfigdir = ${libdir}/pkgconfig
+SRCDIR=
+ZINC=
+ZINCOUT=-I.
 
 OBJZ = adler32.o crc32.o deflate.o infback.o inffast.o inflate.o inftrees.o trees.o zutil.o
 OBJG = compress.o uncompr.o gzclose.o gzlib.o gzread.o gzwrite.o
@@ -113,8 +116,8 @@ test64: all64
 	fi; \
 	rm -f $$TMP64
 
-infcover.o: test/infcover.c zlib.h zconf.h
-	$(CC) $(CFLAGS) -I. -c -o $@ test/infcover.c
+infcover.o: $(SRCDIR)test/infcover.c $(SRCDIR)zlib.h zconf.h
+	$(CC) $(CFLAGS) $(ZINCOUT) -c -o $@ $(SRCDIR)test/infcover.c
 
 infcover: infcover.o libz.a
 	$(CC) $(CFLAGS) -o $@ infcover.o libz.a
@@ -140,24 +143,140 @@ match.lo: match.S
 	mv _match.o match.lo
 	rm -f _match.s
 
-example.o: test/example.c zlib.h zconf.h
-	$(CC) $(CFLAGS) -I. -c -o $@ test/example.c
+example.o: $(SRCDIR)test/example.c $(SRCDIR)zlib.h zconf.h
+	$(CC) $(CFLAGS) $(ZINCOUT) -c -o $@ $(SRCDIR)test/example.c
 
-minigzip.o: test/minigzip.c zlib.h zconf.h
-	$(CC) $(CFLAGS) -I. -c -o $@ test/minigzip.c
+minigzip.o: $(SRCDIR)test/minigzip.c $(SRCDIR)zlib.h zconf.h
+	$(CC) $(CFLAGS) $(ZINCOUT) -c -o $@ $(SRCDIR)test/minigzip.c
 
-example64.o: test/example.c zlib.h zconf.h
-	$(CC) $(CFLAGS) -I. -D_FILE_OFFSET_BITS=64 -c -o $@ test/example.c
+example64.o: $(SRCDIR)test/example.c $(SRCDIR)zlib.h zconf.h
+	$(CC) $(CFLAGS) $(ZINCOUT) -D_FILE_OFFSET_BITS=64 -c -o $@ $(SRCDIR)test/example.c
 
-minigzip64.o: test/minigzip.c zlib.h zconf.h
-	$(CC) $(CFLAGS) -I. -D_FILE_OFFSET_BITS=64 -c -o $@ test/minigzip.c
+minigzip64.o: $(SRCDIR)test/minigzip.c $(SRCDIR)zlib.h zconf.h
+	$(CC) $(CFLAGS) $(ZINCOUT) -D_FILE_OFFSET_BITS=64 -c -o $@ $(SRCDIR)test/minigzip.c
 
-.SUFFIXES: .lo
 
-.c.lo:
+adler32.o: $(SRCDIR)adler32.c
+	$(CC) $(CFLAGS) $(ZINC) -c -o $@ $(SRCDIR)adler32.c
+
+crc32.o: $(SRCDIR)crc32.c
+	$(CC) $(CFLAGS) $(ZINC) -c -o $@ $(SRCDIR)crc32.c
+
+deflate.o: $(SRCDIR)deflate.c
+	$(CC) $(CFLAGS) $(ZINC) -c -o $@ $(SRCDIR)deflate.c
+
+infback.o: $(SRCDIR)infback.c
+	$(CC) $(CFLAGS) $(ZINC) -c -o $@ $(SRCDIR)infback.c
+
+inffast.o: $(SRCDIR)inffast.c
+	$(CC) $(CFLAGS) $(ZINC) -c -o $@ $(SRCDIR)inffast.c
+
+inflate.o: $(SRCDIR)inflate.c
+	$(CC) $(CFLAGS) $(ZINC) -c -o $@ $(SRCDIR)inflate.c
+
+inftrees.o: $(SRCDIR)inftrees.c
+	$(CC) $(CFLAGS) $(ZINC) -c -o $@ $(SRCDIR)inftrees.c
+
+trees.o: $(SRCDIR)trees.c
+	$(CC) $(CFLAGS) $(ZINC) -c -o $@ $(SRCDIR)trees.c
+
+zutil.o: $(SRCDIR)zutil.c
+	$(CC) $(CFLAGS) $(ZINC) -c -o $@ $(SRCDIR)zutil.c
+
+compress.o: $(SRCDIR)compress.c
+	$(CC) $(CFLAGS) $(ZINC) -c -o $@ $(SRCDIR)compress.c
+
+uncompr.o: $(SRCDIR)uncompr.c
+	$(CC) $(CFLAGS) $(ZINC) -c -o $@ $(SRCDIR)uncompr.c
+
+gzclose.o: $(SRCDIR)gzclose.c
+	$(CC) $(CFLAGS) $(ZINC) -c -o $@ $(SRCDIR)gzclose.c
+
+gzlib.o: $(SRCDIR)gzlib.c
+	$(CC) $(CFLAGS) $(ZINC) -c -o $@ $(SRCDIR)gzlib.c
+
+gzread.o: $(SRCDIR)gzread.c
+	$(CC) $(CFLAGS) $(ZINC) -c -o $@ $(SRCDIR)gzread.c
+
+gzwrite.o: $(SRCDIR)gzwrite.c
+	$(CC) $(CFLAGS) $(ZINC) -c -o $@ $(SRCDIR)gzwrite.c
+
+
+adler32.lo: $(SRCDIR)adler32.c
+	-@mkdir objs 2>/dev/null || test -d objs
+	$(CC) $(SFLAGS) $(ZINC) -DPIC -c -o objs/adler32.o $(SRCDIR)adler32.c
+	-@mv objs/adler32.o $@
+
+crc32.lo: $(SRCDIR)crc32.c
 	-@mkdir objs 2>/dev/null || test -d objs
-	$(CC) $(SFLAGS) -DPIC -c -o objs/$*.o $<
-	-@mv objs/$*.o $@
+	$(CC) $(SFLAGS) $(ZINC) -DPIC -c -o objs/crc32.o $(SRCDIR)crc32.c
+	-@mv objs/crc32.o $@
+
+deflate.lo: $(SRCDIR)deflate.c
+	-@mkdir objs 2>/dev/null || test -d objs
+	$(CC) $(SFLAGS) $(ZINC) -DPIC -c -o objs/deflate.o $(SRCDIR)deflate.c
+	-@mv objs/deflate.o $@
+
+infback.lo: $(SRCDIR)infback.c
+	-@mkdir objs 2>/dev/null || test -d objs
+	$(CC) $(SFLAGS) $(ZINC) -DPIC -c -o objs/infback.o $(SRCDIR)infback.c
+	-@mv objs/infback.o $@
+
+inffast.lo: $(SRCDIR)inffast.c
+	-@mkdir objs 2>/dev/null || test -d objs
+	$(CC) $(SFLAGS) $(ZINC) -DPIC -c -o objs/inffast.o $(SRCDIR)inffast.c
+	-@mv objs/inffast.o $@
+
+inflate.lo: $(SRCDIR)inflate.c
+	-@mkdir objs 2>/dev/null || test -d objs
+	$(CC) $(SFLAGS) $(ZINC) -DPIC -c -o objs/inflate.o $(SRCDIR)inflate.c
+	-@mv objs/inflate.o $@
+
+inftrees.lo: $(SRCDIR)inftrees.c
+	-@mkdir objs 2>/dev/null || test -d objs
+	$(CC) $(SFLAGS) $(ZINC) -DPIC -c -o objs/inftrees.o $(SRCDIR)inftrees.c
+	-@mv objs/inftrees.o $@
+
+trees.lo: $(SRCDIR)trees.c
+	-@mkdir objs 2>/dev/null || test -d objs
+	$(CC) $(SFLAGS) $(ZINC) -DPIC -c -o objs/trees.o $(SRCDIR)trees.c
+	-@mv objs/trees.o $@
+
+zutil.lo: $(SRCDIR)zutil.c
+	-@mkdir objs 2>/dev/null || test -d objs
+	$(CC) $(SFLAGS) $(ZINC) -DPIC -c -o objs/zutil.o $(SRCDIR)zutil.c
+	-@mv objs/zutil.o $@
+
+compress.lo: $(SRCDIR)compress.c
+	-@mkdir objs 2>/dev/null || test -d objs
+	$(CC) $(SFLAGS) $(ZINC) -DPIC -c -o objs/compress.o $(SRCDIR)compress.c
+	-@mv objs/compress.o $@
+
+uncompr.lo: $(SRCDIR)uncompr.c
+	-@mkdir objs 2>/dev/null || test -d objs
+	$(CC) $(SFLAGS) $(ZINC) -DPIC -c -o objs/uncompr.o $(SRCDIR)uncompr.c
+	-@mv objs/uncompr.o $@
+
+gzclose.lo: $(SRCDIR)gzclose.c
+	-@mkdir objs 2>/dev/null || test -d objs
+	$(CC) $(SFLAGS) $(ZINC) -DPIC -c -o objs/gzclose.o $(SRCDIR)gzclose.c
+	-@mv objs/gzclose.o $@
+
+gzlib.lo: $(SRCDIR)gzlib.c
+	-@mkdir objs 2>/dev/null || test -d objs
+	$(CC) $(SFLAGS) $(ZINC) -DPIC -c -o objs/gzlib.o $(SRCDIR)gzlib.c
+	-@mv objs/gzlib.o $@
+
+gzread.lo: $(SRCDIR)gzread.c
+	-@mkdir objs 2>/dev/null || test -d objs
+	$(CC) $(SFLAGS) $(ZINC) -DPIC -c -o objs/gzread.o $(SRCDIR)gzread.c
+	-@mv objs/gzread.o $@
+
+gzwrite.lo: $(SRCDIR)gzwrite.c
+	-@mkdir objs 2>/dev/null || test -d objs
+	$(CC) $(SFLAGS) $(ZINC) -DPIC -c -o objs/gzwrite.o $(SRCDIR)gzwrite.c
+	-@mv objs/gzwrite.o $@
+
 
 placebo $(SHAREDLIBV): $(PIC_OBJS) libz.a
 	$(LDSHARED) $(SFLAGS) -o $@ $(PIC_OBJS) $(LDSHAREDLIBC) $(LDFLAGS)
@@ -190,10 +309,12 @@ install-libs: $(LIBS)
 	-@if [ ! -d $(DESTDIR)$(sharedlibdir) ]; then mkdir -p $(DESTDIR)$(sharedlibdir); fi
 	-@if [ ! -d $(DESTDIR)$(man3dir)      ]; then mkdir -p $(DESTDIR)$(man3dir); fi
 	-@if [ ! -d $(DESTDIR)$(pkgconfigdir) ]; then mkdir -p $(DESTDIR)$(pkgconfigdir); fi
+	rm -f $(DESTDIR)$(libdir)/$(STATICLIB)
 	cp $(STATICLIB) $(DESTDIR)$(libdir)
 	chmod 644 $(DESTDIR)$(libdir)/$(STATICLIB)
 	-@($(RANLIB) $(DESTDIR)$(libdir)/libz.a || true) >/dev/null 2>&1
 	-@if test -n "$(SHAREDLIBV)"; then \
+	  rm -f $(DESTDIR)$(sharedlibdir)/$(SHAREDLIBV); \
 	  cp $(SHAREDLIBV) $(DESTDIR)$(sharedlibdir); \
 	  echo "cp $(SHAREDLIBV) $(DESTDIR)$(sharedlibdir)"; \
 	  chmod 755 $(DESTDIR)$(sharedlibdir)/$(SHAREDLIBV); \
@@ -203,8 +324,10 @@ install-libs: $(LIBS)
 	  ln -s $(SHAREDLIBV) $(DESTDIR)$(sharedlibdir)/$(SHAREDLIBM); \
 	  ($(LDCONFIG) || true)  >/dev/null 2>&1; \
 	fi
-	cp zlib.3 $(DESTDIR)$(man3dir)
+	rm -f $(DESTDIR)$(man3dir)/zlib.3
+	cp $(SRCDIR)zlib.3 $(DESTDIR)$(man3dir)
 	chmod 644 $(DESTDIR)$(man3dir)/zlib.3
+	rm -f $(DESTDIR)$(pkgconfigdir)/zlib.pc
 	cp zlib.pc $(DESTDIR)$(pkgconfigdir)
 	chmod 644 $(DESTDIR)$(pkgconfigdir)/zlib.pc
 # The ranlib in install is needed on NeXTSTEP which checks file times
@@ -212,7 +335,8 @@ install-libs: $(LIBS)
 
 install: install-libs
 	-@if [ ! -d $(DESTDIR)$(includedir)   ]; then mkdir -p $(DESTDIR)$(includedir); fi
-	cp zlib.h zconf.h $(DESTDIR)$(includedir)
+	rm -f $(DESTDIR)$(includedir)/zlib.h $(DESTDIR)$(includedir)/zconf.h
+	cp $(SRCDIR)zlib.h zconf.h $(DESTDIR)$(includedir)
 	chmod 644 $(DESTDIR)$(includedir)/zlib.h $(DESTDIR)$(includedir)/zconf.h
 
 uninstall:
@@ -226,18 +350,18 @@ uninstall:
 
 docs: zlib.3.pdf
 
-zlib.3.pdf: zlib.3
-	groff -mandoc -f H -T ps zlib.3 | ps2pdf - zlib.3.pdf
+zlib.3.pdf: $(SRCDIR)zlib.3
+	groff -mandoc -f H -T ps $(SRCDIR)zlib.3 | ps2pdf - $@
 
-zconf.h.cmakein: zconf.h.in
+zconf.h.cmakein: $(SRCDIR)zconf.h.in
 	-@ TEMPFILE=zconfh_$$; \
 	echo "/#define ZCONF_H/ a\\\\\n#cmakedefine Z_PREFIX\\\\\n#cmakedefine Z_HAVE_UNISTD_H\n" >> $$TEMPFILE &&\
-	sed -f $$TEMPFILE zconf.h.in > zconf.h.cmakein &&\
-	touch -r zconf.h.in zconf.h.cmakein &&\
+	sed -f $$TEMPFILE $(SRCDIR)zconf.h.in > $@ &&\
+	touch -r $(SRCDIR)zconf.h.in $@ &&\
 	rm $$TEMPFILE
 
-zconf: zconf.h.in
-	cp -p zconf.h.in zconf.h
+zconf: $(SRCDIR)zconf.h.in
+	cp -p $(SRCDIR)zconf.h.in zconf.h
 
 mostlyclean: clean
 clean:
@@ -255,34 +379,32 @@ maintainer-clean: distclean
 distclean: clean zconf zconf.h.cmakein docs
 	rm -f Makefile zlib.pc configure.log
 	-@rm -f .DS_Store
-	-@printf 'all:\n\t-@echo "Please use ./configure first.  Thank you."\n' > Makefile
-	-@printf '\ndistclean:\n\tmake -f Makefile.in distclean\n' >> Makefile
-	-@touch -r Makefile.in Makefile
+	@if [ -f Makefile.in ]; then \
+	printf 'all:\n\t-@echo "Please use ./configure first.  Thank you."\n' > Makefile ; \
+	printf '\ndistclean:\n\tmake -f Makefile.in distclean\n' >> Makefile ; \
+	touch -r $(SRCDIR)Makefile.in Makefile ; fi
+	@if [ ! -f zconf.h.in ]; then rm -f zconf.h zconf.h.cmakein ; fi
+	@if [ ! -f zlib.3 ]; then rm -f zlib.3.pdf ; fi
 
 tags:
-	etags *.[ch]
-
-depend:
-	makedepend -- $(CFLAGS) -- *.[ch]
-
-# DO NOT DELETE THIS LINE -- make depend depends on it.
-
-adler32.o zutil.o: zutil.h zlib.h zconf.h
-gzclose.o gzlib.o gzread.o gzwrite.o: zlib.h zconf.h gzguts.h
-compress.o example.o minigzip.o uncompr.o: zlib.h zconf.h
-crc32.o: zutil.h zlib.h zconf.h crc32.h
-deflate.o: deflate.h zutil.h zlib.h zconf.h
-infback.o inflate.o: zutil.h zlib.h zconf.h inftrees.h inflate.h inffast.h inffixed.h
-inffast.o: zutil.h zlib.h zconf.h inftrees.h inflate.h inffast.h
-inftrees.o: zutil.h zlib.h zconf.h inftrees.h
-trees.o: deflate.h zutil.h zlib.h zconf.h trees.h
-
-adler32.lo zutil.lo: zutil.h zlib.h zconf.h
-gzclose.lo gzlib.lo gzread.lo gzwrite.lo: zlib.h zconf.h gzguts.h
-compress.lo example.lo minigzip.lo uncompr.lo: zlib.h zconf.h
-crc32.lo: zutil.h zlib.h zconf.h crc32.h
-deflate.lo: deflate.h zutil.h zlib.h zconf.h
-infback.lo inflate.lo: zutil.h zlib.h zconf.h inftrees.h inflate.h inffast.h inffixed.h
-inffast.lo: zutil.h zlib.h zconf.h inftrees.h inflate.h inffast.h
-inftrees.lo: zutil.h zlib.h zconf.h inftrees.h
-trees.lo: deflate.h zutil.h zlib.h zconf.h trees.h
+	etags $(SRCDIR)*.[ch]
+
+adler32.o zutil.o: $(SRCDIR)zutil.h $(SRCDIR)zlib.h zconf.h
+gzclose.o gzlib.o gzread.o gzwrite.o: $(SRCDIR)zlib.h zconf.h $(SRCDIR)gzguts.h
+compress.o example.o minigzip.o uncompr.o: $(SRCDIR)zlib.h zconf.h
+crc32.o: $(SRCDIR)zutil.h $(SRCDIR)zlib.h zconf.h $(SRCDIR)crc32.h
+deflate.o: $(SRCDIR)deflate.h $(SRCDIR)zutil.h $(SRCDIR)zlib.h zconf.h
+infback.o inflate.o: $(SRCDIR)zutil.h $(SRCDIR)zlib.h zconf.h $(SRCDIR)inftrees.h $(SRCDIR)inflate.h $(SRCDIR)inffast.h $(SRCDIR)inffixed.h
+inffast.o: $(SRCDIR)zutil.h $(SRCDIR)zlib.h zconf.h $(SRCDIR)inftrees.h $(SRCDIR)inflate.h $(SRCDIR)inffast.h
+inftrees.o: $(SRCDIR)zutil.h $(SRCDIR)zlib.h zconf.h $(SRCDIR)inftrees.h
+trees.o: $(SRCDIR)deflate.h $(SRCDIR)zutil.h $(SRCDIR)zlib.h zconf.h $(SRCDIR)trees.h
+
+adler32.lo zutil.lo: $(SRCDIR)zutil.h $(SRCDIR)zlib.h zconf.h
+gzclose.lo gzlib.lo gzread.lo gzwrite.lo: $(SRCDIR)zlib.h zconf.h $(SRCDIR)gzguts.h
+compress.lo example.lo minigzip.lo uncompr.lo: $(SRCDIR)zlib.h zconf.h
+crc32.lo: $(SRCDIR)zutil.h $(SRCDIR)zlib.h zconf.h $(SRCDIR)crc32.h
+deflate.lo: $(SRCDIR)deflate.h $(SRCDIR)zutil.h $(SRCDIR)zlib.h zconf.h
+infback.lo inflate.lo: $(SRCDIR)zutil.h $(SRCDIR)zlib.h zconf.h $(SRCDIR)inftrees.h $(SRCDIR)inflate.h $(SRCDIR)inffast.h $(SRCDIR)inffixed.h
+inffast.lo: $(SRCDIR)zutil.h $(SRCDIR)zlib.h zconf.h $(SRCDIR)inftrees.h $(SRCDIR)inflate.h $(SRCDIR)inffast.h
+inftrees.lo: $(SRCDIR)zutil.h $(SRCDIR)zlib.h zconf.h $(SRCDIR)inftrees.h
+trees.lo: $(SRCDIR)deflate.h $(SRCDIR)zutil.h $(SRCDIR)zlib.h zconf.h $(SRCDIR)trees.h
diff --git a/Modules/zlib/README b/Modules/zlib/README
index 5ca9d12..51106de 100644
--- a/Modules/zlib/README
+++ b/Modules/zlib/README
@@ -1,6 +1,6 @@
 ZLIB DATA COMPRESSION LIBRARY
 
-zlib 1.2.8 is a general purpose data compression library.  All the code is
+zlib 1.2.11 is a general purpose data compression library.  All the code is
 thread safe.  The data format used by the zlib library is described by RFCs
 (Request for Comments) 1950 to 1952 in the files
 http://tools.ietf.org/html/rfc1950 (zlib format), rfc1951 (deflate format) and
@@ -31,7 +31,7 @@ Mark Nelson <markn@ieee.org> wrote an article about zlib for the Jan.  1997
 issue of Dr.  Dobb's Journal; a copy of the article is available at
 http://marknelson.us/1997/01/01/zlib-engine/ .
 
-The changes made in version 1.2.8 are documented in the file ChangeLog.
+The changes made in version 1.2.11 are documented in the file ChangeLog.
 
 Unsupported third party contributions are provided in directory contrib/ .
 
@@ -84,7 +84,7 @@ Acknowledgments:
 
 Copyright notice:
 
- (C) 1995-2013 Jean-loup Gailly and Mark Adler
+ (C) 1995-2017 Jean-loup Gailly and Mark Adler
 
   This software is provided 'as-is', without any express or implied
   warranty.  In no event will the authors be held liable for any damages
diff --git a/Modules/zlib/adler32.c b/Modules/zlib/adler32.c
index a868f07..d0be438 100644
--- a/Modules/zlib/adler32.c
+++ b/Modules/zlib/adler32.c
@@ -1,5 +1,5 @@
 /* adler32.c -- compute the Adler-32 checksum of a data stream
- * Copyright (C) 1995-2011 Mark Adler
+ * Copyright (C) 1995-2011, 2016 Mark Adler
  * For conditions of distribution and use, see copyright notice in zlib.h
  */
 
@@ -7,11 +7,9 @@
 
 #include "zutil.h"
 
-#define local static
-
 local uLong adler32_combine_ OF((uLong adler1, uLong adler2, z_off64_t len2));
 
-#define BASE 65521      /* largest prime smaller than 65536 */
+#define BASE 65521U     /* largest prime smaller than 65536 */
 #define NMAX 5552
 /* NMAX is the largest n such that 255n(n+1)/2 + (n+1)(BASE-1) <= 2^32-1 */
 
@@ -62,10 +60,10 @@ local uLong adler32_combine_ OF((uLong adler1, uLong adler2, z_off64_t len2));
 #endif
 
 /* ========================================================================= */
-uLong ZEXPORT adler32(adler, buf, len)
+uLong ZEXPORT adler32_z(adler, buf, len)
     uLong adler;
     const Bytef *buf;
-    uInt len;
+    z_size_t len;
 {
     unsigned long sum2;
     unsigned n;
@@ -133,6 +131,15 @@ uLong ZEXPORT adler32(adler, buf, len)
 }
 
 /* ========================================================================= */
+uLong ZEXPORT adler32(adler, buf, len)
+    uLong adler;
+    const Bytef *buf;
+    uInt len;
+{
+    return adler32_z(adler, buf, len);
+}
+
+/* ========================================================================= */
 local uLong adler32_combine_(adler1, adler2, len2)
     uLong adler1;
     uLong adler2;
@@ -156,7 +163,7 @@ local uLong adler32_combine_(adler1, adler2, len2)
     sum2 += ((adler1 >> 16) & 0xffff) + ((adler2 >> 16) & 0xffff) + BASE - rem;
     if (sum1 >= BASE) sum1 -= BASE;
     if (sum1 >= BASE) sum1 -= BASE;
-    if (sum2 >= (BASE << 1)) sum2 -= (BASE << 1);
+    if (sum2 >= ((unsigned long)BASE << 1)) sum2 -= ((unsigned long)BASE << 1);
     if (sum2 >= BASE) sum2 -= BASE;
     return sum1 | (sum2 << 16);
 }
diff --git a/Modules/zlib/compress.c b/Modules/zlib/compress.c
index 6e97626..e2db404 100644
--- a/Modules/zlib/compress.c
+++ b/Modules/zlib/compress.c
@@ -1,5 +1,5 @@
 /* compress.c -- compress a memory buffer
- * Copyright (C) 1995-2005 Jean-loup Gailly.
+ * Copyright (C) 1995-2005, 2014, 2016 Jean-loup Gailly, Mark Adler
  * For conditions of distribution and use, see copyright notice in zlib.h
  */
 
@@ -28,16 +28,11 @@ int ZEXPORT compress2 (dest, destLen, source, sourceLen, level)
 {
     z_stream stream;
     int err;
+    const uInt max = (uInt)-1;
+    uLong left;
 
-    stream.next_in = (z_const Bytef *)source;
-    stream.avail_in = (uInt)sourceLen;
-#ifdef MAXSEG_64K
-    /* Check for source > 64K on 16-bit machine: */
-    if ((uLong)stream.avail_in != sourceLen) return Z_BUF_ERROR;
-#endif
-    stream.next_out = dest;
-    stream.avail_out = (uInt)*destLen;
-    if ((uLong)stream.avail_out != *destLen) return Z_BUF_ERROR;
+    left = *destLen;
+    *destLen = 0;
 
     stream.zalloc = (alloc_func)0;
     stream.zfree = (free_func)0;
@@ -46,15 +41,26 @@ int ZEXPORT compress2 (dest, destLen, source, sourceLen, level)
     err = deflateInit(&stream, level);
     if (err != Z_OK) return err;
 
-    err = deflate(&stream, Z_FINISH);
-    if (err != Z_STREAM_END) {
-        deflateEnd(&stream);
-        return err == Z_OK ? Z_BUF_ERROR : err;
-    }
-    *destLen = stream.total_out;
+    stream.next_out = dest;
+    stream.avail_out = 0;
+    stream.next_in = (z_const Bytef *)source;
+    stream.avail_in = 0;
+
+    do {
+        if (stream.avail_out == 0) {
+            stream.avail_out = left > (uLong)max ? max : (uInt)left;
+            left -= stream.avail_out;
+        }
+        if (stream.avail_in == 0) {
+            stream.avail_in = sourceLen > (uLong)max ? max : (uInt)sourceLen;
+            sourceLen -= stream.avail_in;
+        }
+        err = deflate(&stream, sourceLen ? Z_NO_FLUSH : Z_FINISH);
+    } while (err == Z_OK);
 
-    err = deflateEnd(&stream);
-    return err;
+    *destLen = stream.total_out;
+    deflateEnd(&stream);
+    return err == Z_STREAM_END ? Z_OK : err;
 }
 
 /* ===========================================================================
diff --git a/Modules/zlib/configure b/Modules/zlib/configure
index b77a8a8..e974d1f 100755
--- a/Modules/zlib/configure
+++ b/Modules/zlib/configure
@@ -18,6 +18,18 @@ echo -------------------- >> configure.log
 echo $0 $* >> configure.log
 date >> configure.log
 
+# get source directory
+SRCDIR=`dirname $0`
+if test $SRCDIR = "."; then
+    ZINC=""
+    ZINCOUT="-I."
+    SRCDIR=""
+else
+    ZINC='-include zconf.h'
+    ZINCOUT='-I. -I$(SRCDIR)'
+    SRCDIR="$SRCDIR/"
+fi
+
 # set command prefix for cross-compilation
 if [ -n "${CHOST}" ]; then
     uname="`echo "${CHOST}" | sed -e 's/^[^-]*-\([^-]*\)$/\1/' -e 's/^[^-]*-[^-]*-\([^-]*\)$/\1/' -e 's/^[^-]*-[^-]*-\([^-]*\)-.*$/\1/'`"
@@ -28,10 +40,10 @@ fi
 STATICLIB=libz.a
 
 # extract zlib version numbers from zlib.h
-VER=`sed -n -e '/VERSION "/s/.*"\(.*\)".*/\1/p' < zlib.h`
-VER3=`sed -n -e '/VERSION "/s/.*"\([0-9]*\\.[0-9]*\\.[0-9]*\).*/\1/p' < zlib.h`
-VER2=`sed -n -e '/VERSION "/s/.*"\([0-9]*\\.[0-9]*\)\\..*/\1/p' < zlib.h`
-VER1=`sed -n -e '/VERSION "/s/.*"\([0-9]*\)\\..*/\1/p' < zlib.h`
+VER=`sed -n -e '/VERSION "/s/.*"\(.*\)".*/\1/p' < ${SRCDIR}zlib.h`
+VER3=`sed -n -e '/VERSION "/s/.*"\([0-9]*\\.[0-9]*\\.[0-9]*\).*/\1/p' < ${SRCDIR}zlib.h`
+VER2=`sed -n -e '/VERSION "/s/.*"\([0-9]*\\.[0-9]*\)\\..*/\1/p' < ${SRCDIR}zlib.h`
+VER1=`sed -n -e '/VERSION "/s/.*"\([0-9]*\)\\..*/\1/p' < ${SRCDIR}zlib.h`
 
 # establish commands for library building
 if "${CROSS_PREFIX}ar" --version >/dev/null 2>/dev/null || test $? -lt 126; then
@@ -73,6 +85,8 @@ zprefix=0
 zconst=0
 build64=0
 gcc=0
+warn=0
+debug=0
 old_cc="$CC"
 old_cflags="$CFLAGS"
 OBJC='$(OBJZ) $(OBJG)'
@@ -121,6 +135,8 @@ case "$1" in
     --sysconfdir=*) echo "ignored option: --sysconfdir" | tee -a configure.log; shift ;;
     --localstatedir=*) echo "ignored option: --localstatedir" | tee -a configure.log; shift ;;
     -c* | --const) zconst=1; shift ;;
+    -w* | --warn) warn=1; shift ;;
+    -d* | --debug) debug=1; shift ;;
     *)
       echo "unknown option: $1" | tee -a configure.log
       echo "$0 --help for help" | tee -a configure.log
@@ -159,34 +175,42 @@ case "$cc" in
 esac
 case `$cc -v 2>&1` in
   *gcc*) gcc=1 ;;
+  *clang*) gcc=1 ;;
 esac
 
 show $cc -c $test.c
 if test "$gcc" -eq 1 && ($cc -c $test.c) >> configure.log 2>&1; then
   echo ... using gcc >> configure.log
   CC="$cc"
-  CFLAGS="${CFLAGS--O3} ${ARCHS}"
+  CFLAGS="${CFLAGS--O3}"
   SFLAGS="${CFLAGS--O3} -fPIC"
-  LDFLAGS="${LDFLAGS} ${ARCHS}"
+  if test "$ARCHS"; then
+    CFLAGS="${CFLAGS} ${ARCHS}"
+    LDFLAGS="${LDFLAGS} ${ARCHS}"
+  fi
   if test $build64 -eq 1; then
     CFLAGS="${CFLAGS} -m64"
     SFLAGS="${SFLAGS} -m64"
   fi
-  if test "${ZLIBGCCWARN}" = "YES"; then
+  if test "$warn" -eq 1; then
     if test "$zconst" -eq 1; then
       CFLAGS="${CFLAGS} -Wall -Wextra -Wcast-qual -pedantic -DZLIB_CONST"
     else
       CFLAGS="${CFLAGS} -Wall -Wextra -pedantic"
     fi
   fi
+  if test $debug -eq 1; then
+    CFLAGS="${CFLAGS} -DZLIB_DEBUG"
+    SFLAGS="${SFLAGS} -DZLIB_DEBUG"
+  fi
   if test -z "$uname"; then
     uname=`(uname -s || echo unknown) 2>/dev/null`
   fi
   case "$uname" in
   Linux* | linux* | GNU | GNU/* | solaris*)
-        LDSHARED=${LDSHARED-"$cc -shared -Wl,-soname,libz.so.1,--version-script,zlib.map"} ;;
+        LDSHARED=${LDSHARED-"$cc -shared -Wl,-soname,libz.so.1,--version-script,${SRCDIR}zlib.map"} ;;
   *BSD | *bsd* | DragonFly)
-        LDSHARED=${LDSHARED-"$cc -shared -Wl,-soname,libz.so.1,--version-script,zlib.map"}
+        LDSHARED=${LDSHARED-"$cc -shared -Wl,-soname,libz.so.1,--version-script,${SRCDIR}zlib.map"}
         LDCONFIG="ldconfig -m" ;;
   CYGWIN* | Cygwin* | cygwin* | OS/2*)
         EXE='.exe' ;;
@@ -287,6 +311,9 @@ else
                  esac
              fi
          fi
+         if test -n "$ZINC"; then
+             ZINC='-I- -I. -I$(SRCDIR)'
+         fi
          ;;
   SunOS\ 4*) SFLAGS=${CFLAGS-"-O2 -PIC"}
              CFLAGS=${CFLAGS-"-O2"}
@@ -337,16 +364,16 @@ if ($CC -c $CFLAGS $test.c) 2>/dev/null; then
   }
   echo - using any output from compiler to indicate an error >> configure.log
 else
-try()
-{
-  show $*
-  ( $* ) >> configure.log 2>&1
-  ret=$?
-  if test $ret -ne 0; then
-    echo "(exit code "$ret")" >> configure.log
-  fi
-  return $ret
-}
+  try()
+  {
+    show $*
+    ( $* ) >> configure.log 2>&1
+    ret=$?
+    if test $ret -ne 0; then
+      echo "(exit code "$ret")" >> configure.log
+    fi
+    return $ret
+  }
 fi
 
 tryboth()
@@ -422,6 +449,65 @@ esac
 
 echo >> configure.log
 
+# check for size_t
+cat > $test.c <<EOF
+#include <stdio.h>
+#include <stdlib.h>
+size_t dummy = 0;
+EOF
+if try $CC -c $CFLAGS $test.c; then
+  echo "Checking for size_t... Yes." | tee -a configure.log
+  need_sizet=0
+else
+  echo "Checking for size_t... No." | tee -a configure.log
+  need_sizet=1
+fi
+
+echo >> configure.log
+
+# find the size_t integer type, if needed
+if test $need_sizet -eq 1; then
+  cat > $test.c <<EOF
+long long dummy = 0;
+EOF
+  if try $CC -c $CFLAGS $test.c; then
+    echo "Checking for long long... Yes." | tee -a configure.log
+    cat > $test.c <<EOF
+#include <stdio.h>
+int main(void) {
+    if (sizeof(void *) <= sizeof(int)) puts("int");
+    else if (sizeof(void *) <= sizeof(long)) puts("long");
+    else puts("z_longlong");
+    return 0;
+}
+EOF
+  else
+    echo "Checking for long long... No." | tee -a configure.log
+    cat > $test.c <<EOF
+#include <stdio.h>
+int main(void) {
+    if (sizeof(void *) <= sizeof(int)) puts("int");
+    else puts("long");
+    return 0;
+}
+EOF
+  fi
+  if try $CC $CFLAGS -o $test $test.c; then
+    sizet=`./$test`
+    echo "Checking for a pointer-size integer type..." $sizet"." | tee -a configure.log
+  else
+    echo "Failed to find a pointer-size integer type." | tee -a configure.log
+    leave 1
+  fi
+fi
+
+if test $need_sizet -eq 1; then
+  CFLAGS="${CFLAGS} -DNO_SIZE_T=${sizet}"
+  SFLAGS="${SFLAGS} -DNO_SIZE_T=${sizet}"
+fi
+
+echo >> configure.log
+
 # check for large file support, and if none, check for fseeko()
 cat > $test.c <<EOF
 #include <sys/types.h>
@@ -470,7 +556,7 @@ else
 fi
 
 # copy clean zconf.h for subsequent edits
-cp -p zconf.h.in zconf.h
+cp -p ${SRCDIR}zconf.h.in zconf.h
 
 echo >> configure.log
 
@@ -764,6 +850,7 @@ echo STATICLIB = $STATICLIB >> configure.log
 echo TEST = $TEST >> configure.log
 echo VER = $VER >> configure.log
 echo Z_U4 = $Z_U4 >> configure.log
+echo SRCDIR = $SRCDIR >> configure.log
 echo exec_prefix = $exec_prefix >> configure.log
 echo includedir = $includedir >> configure.log
 echo libdir = $libdir >> configure.log
@@ -773,7 +860,7 @@ echo sharedlibdir = $sharedlibdir >> configure.log
 echo uname = $uname >> configure.log
 
 # udpate Makefile with the configure results
-sed < Makefile.in "
+sed < ${SRCDIR}Makefile.in "
 /^CC *=/s#=.*#=$CC#
 /^CFLAGS *=/s#=.*#=$CFLAGS#
 /^SFLAGS *=/s#=.*#=$SFLAGS#
@@ -790,6 +877,9 @@ sed < Makefile.in "
 /^LDCONFIG *=/s#=.*#=$LDCONFIG#
 /^LDSHAREDLIBC *=/s#=.*#=$LDSHAREDLIBC#
 /^EXE *=/s#=.*#=$EXE#
+/^SRCDIR *=/s#=.*#=$SRCDIR#
+/^ZINC *=/s#=.*#=$ZINC#
+/^ZINCOUT *=/s#=.*#=$ZINCOUT#
 /^prefix *=/s#=.*#=$prefix#
 /^exec_prefix *=/s#=.*#=$exec_prefix#
 /^libdir *=/s#=.*#=$libdir#
@@ -803,7 +893,7 @@ sed < Makefile.in "
 " > Makefile
 
 # create zlib.pc with the configure results
-sed < zlib.pc.in "
+sed < ${SRCDIR}zlib.pc.in "
 /^CC *=/s#=.*#=$CC#
 /^CFLAGS *=/s#=.*#=$CFLAGS#
 /^CPP *=/s#=.*#=$CPP#
diff --git a/Modules/zlib/crc32.c b/Modules/zlib/crc32.c
index 979a719..9580440 100644
--- a/Modules/zlib/crc32.c
+++ b/Modules/zlib/crc32.c
@@ -1,5 +1,5 @@
 /* crc32.c -- compute the CRC-32 of a data stream
- * Copyright (C) 1995-2006, 2010, 2011, 2012 Mark Adler
+ * Copyright (C) 1995-2006, 2010, 2011, 2012, 2016 Mark Adler
  * For conditions of distribution and use, see copyright notice in zlib.h
  *
  * Thanks to Rodney Brown <rbrown64@csc.com.au> for his contribution of faster
@@ -30,17 +30,15 @@
 
 #include "zutil.h"      /* for STDC and FAR definitions */
 
-#define local static
-
 /* Definitions for doing the crc four data bytes at a time. */
 #if !defined(NOBYFOUR) && defined(Z_U4)
 #  define BYFOUR
 #endif
 #ifdef BYFOUR
    local unsigned long crc32_little OF((unsigned long,
-                        const unsigned char FAR *, unsigned));
+                        const unsigned char FAR *, z_size_t));
    local unsigned long crc32_big OF((unsigned long,
-                        const unsigned char FAR *, unsigned));
+                        const unsigned char FAR *, z_size_t));
 #  define TBLS 8
 #else
 #  define TBLS 1
@@ -201,10 +199,10 @@ const z_crc_t FAR * ZEXPORT get_crc_table()
 #define DO8 DO1; DO1; DO1; DO1; DO1; DO1; DO1; DO1
 
 /* ========================================================================= */
-unsigned long ZEXPORT crc32(crc, buf, len)
+unsigned long ZEXPORT crc32_z(crc, buf, len)
     unsigned long crc;
     const unsigned char FAR *buf;
-    uInt len;
+    z_size_t len;
 {
     if (buf == Z_NULL) return 0UL;
 
@@ -235,8 +233,29 @@ unsigned long ZEXPORT crc32(crc, buf, len)
     return crc ^ 0xffffffffUL;
 }
 
+/* ========================================================================= */
+unsigned long ZEXPORT crc32(crc, buf, len)
+    unsigned long crc;
+    const unsigned char FAR *buf;
+    uInt len;
+{
+    return crc32_z(crc, buf, len);
+}
+
 #ifdef BYFOUR
 
+/*
+   This BYFOUR code accesses the passed unsigned char * buffer with a 32-bit
+   integer pointer type. This violates the strict aliasing rule, where a
+   compiler can assume, for optimization purposes, that two pointers to
+   fundamentally different types won't ever point to the same memory. This can
+   manifest as a problem only if one of the pointers is written to. This code
+   only reads from those pointers. So long as this code remains isolated in
+   this compilation unit, there won't be a problem. For this reason, this code
+   should not be copied and pasted into a compilation unit in which other code
+   writes to the buffer that is passed to these routines.
+ */
+
 /* ========================================================================= */
 #define DOLIT4 c ^= *buf4++; \
         c = crc_table[3][c & 0xff] ^ crc_table[2][(c >> 8) & 0xff] ^ \
@@ -247,7 +266,7 @@ unsigned long ZEXPORT crc32(crc, buf, len)
 local unsigned long crc32_little(crc, buf, len)
     unsigned long crc;
     const unsigned char FAR *buf;
-    unsigned len;
+    z_size_t len;
 {
     register z_crc_t c;
     register const z_crc_t FAR *buf4;
@@ -278,7 +297,7 @@ local unsigned long crc32_little(crc, buf, len)
 }
 
 /* ========================================================================= */
-#define DOBIG4 c ^= *++buf4; \
+#define DOBIG4 c ^= *buf4++; \
         c = crc_table[4][c & 0xff] ^ crc_table[5][(c >> 8) & 0xff] ^ \
             crc_table[6][(c >> 16) & 0xff] ^ crc_table[7][c >> 24]
 #define DOBIG32 DOBIG4; DOBIG4; DOBIG4; DOBIG4; DOBIG4; DOBIG4; DOBIG4; DOBIG4
@@ -287,7 +306,7 @@ local unsigned long crc32_little(crc, buf, len)
 local unsigned long crc32_big(crc, buf, len)
     unsigned long crc;
     const unsigned char FAR *buf;
-    unsigned len;
+    z_size_t len;
 {
     register z_crc_t c;
     register const z_crc_t FAR *buf4;
@@ -300,7 +319,6 @@ local unsigned long crc32_big(crc, buf, len)
     }
 
     buf4 = (const z_crc_t FAR *)(const void FAR *)buf;
-    buf4--;
     while (len >= 32) {
         DOBIG32;
         len -= 32;
@@ -309,7 +327,6 @@ local unsigned long crc32_big(crc, buf, len)
         DOBIG4;
         len -= 4;
     }
-    buf4++;
     buf = (const unsigned char FAR *)buf4;
 
     if (len) do {
diff --git a/Modules/zlib/deflate.c b/Modules/zlib/deflate.c
index 6969577..1ec7614 100644
--- a/Modules/zlib/deflate.c
+++ b/Modules/zlib/deflate.c
@@ -1,5 +1,5 @@
 /* deflate.c -- compress data using the deflation algorithm
- * Copyright (C) 1995-2013 Jean-loup Gailly and Mark Adler
+ * Copyright (C) 1995-2017 Jean-loup Gailly and Mark Adler
  * For conditions of distribution and use, see copyright notice in zlib.h
  */
 
@@ -52,7 +52,7 @@
 #include "deflate.h"
 
 const char deflate_copyright[] =
-   " deflate 1.2.8 Copyright 1995-2013 Jean-loup Gailly and Mark Adler ";
+   " deflate 1.2.11 Copyright 1995-2017 Jean-loup Gailly and Mark Adler ";
 /*
   If you use the zlib library in a product, an acknowledgment is welcome
   in the documentation of your product. If for some reason you cannot
@@ -73,6 +73,8 @@ typedef enum {
 typedef block_state (*compress_func) OF((deflate_state *s, int flush));
 /* Compression function. Returns the block state after the call. */
 
+local int deflateStateCheck      OF((z_streamp strm));
+local void slide_hash     OF((deflate_state *s));
 local void fill_window    OF((deflate_state *s));
 local block_state deflate_stored OF((deflate_state *s, int flush));
 local block_state deflate_fast   OF((deflate_state *s, int flush));
@@ -84,15 +86,16 @@ local block_state deflate_huff   OF((deflate_state *s, int flush));
 local void lm_init        OF((deflate_state *s));
 local void putShortMSB    OF((deflate_state *s, uInt b));
 local void flush_pending  OF((z_streamp strm));
-local int read_buf        OF((z_streamp strm, Bytef *buf, unsigned size));
+local unsigned read_buf   OF((z_streamp strm, Bytef *buf, unsigned size));
 #ifdef ASMV
+#  pragma message("Assembler code may have bugs -- use at your own risk")
       void match_init OF((void)); /* asm code initialization */
       uInt longest_match  OF((deflate_state *s, IPos cur_match));
 #else
 local uInt longest_match  OF((deflate_state *s, IPos cur_match));
 #endif
 
-#ifdef DEBUG
+#ifdef ZLIB_DEBUG
 local  void check_match OF((deflate_state *s, IPos start, IPos match,
                             int length));
 #endif
@@ -148,21 +151,14 @@ local const config configuration_table[10] = {
  * meaning.
  */
 
-#define EQUAL 0
-/* result of memcmp for equal strings */
-
-#ifndef NO_DUMMY_DECL
-struct static_tree_desc_s {int dummy;}; /* for buggy compilers */
-#endif
-
 /* rank Z_BLOCK between Z_NO_FLUSH and Z_PARTIAL_FLUSH */
-#define RANK(f) (((f) << 1) - ((f) > 4 ? 9 : 0))
+#define RANK(f) (((f) * 2) - ((f) > 4 ? 9 : 0))
 
 /* ===========================================================================
  * Update a hash value with the given input byte
- * IN  assertion: all calls to to UPDATE_HASH are made with consecutive
- *    input characters, so that a running hash key can be computed from the
- *    previous key instead of complete recalculation each time.
+ * IN  assertion: all calls to UPDATE_HASH are made with consecutive input
+ *    characters, so that a running hash key can be computed from the previous
+ *    key instead of complete recalculation each time.
  */
 #define UPDATE_HASH(s,h,c) (h = (((h)<<s->hash_shift) ^ (c)) & s->hash_mask)
 
@@ -173,9 +169,9 @@ struct static_tree_desc_s {int dummy;}; /* for buggy compilers */
  * the previous length of the hash chain.
  * If this file is compiled with -DFASTEST, the compression level is forced
  * to 1, and no hash chains are maintained.
- * IN  assertion: all calls to to INSERT_STRING are made with consecutive
- *    input characters and the first MIN_MATCH bytes of str are valid
- *    (except for the last MIN_MATCH-1 bytes of the input file).
+ * IN  assertion: all calls to INSERT_STRING are made with consecutive input
+ *    characters and the first MIN_MATCH bytes of str are valid (except for
+ *    the last MIN_MATCH-1 bytes of the input file).
  */
 #ifdef FASTEST
 #define INSERT_STRING(s, str, match_head) \
@@ -197,6 +193,37 @@ struct static_tree_desc_s {int dummy;}; /* for buggy compilers */
     s->head[s->hash_size-1] = NIL; \
     zmemzero((Bytef *)s->head, (unsigned)(s->hash_size-1)*sizeof(*s->head));
 
+/* ===========================================================================
+ * Slide the hash table when sliding the window down (could be avoided with 32
+ * bit values at the expense of memory usage). We slide even when level == 0 to
+ * keep the hash table consistent if we switch back to level > 0 later.
+ */
+local void slide_hash(s)
+    deflate_state *s;
+{
+    unsigned n, m;
+    Posf *p;
+    uInt wsize = s->w_size;
+
+    n = s->hash_size;
+    p = &s->head[n];
+    do {
+        m = *--p;
+        *p = (Pos)(m >= wsize ? m - wsize : NIL);
+    } while (--n);
+    n = wsize;
+#ifndef FASTEST
+    p = &s->prev[n];
+    do {
+        m = *--p;
+        *p = (Pos)(m >= wsize ? m - wsize : NIL);
+        /* If n is not on any hash chain, prev[n] is garbage but
+         * its value will never be used.
+         */
+    } while (--n);
+#endif
+}
+
 /* ========================================================================= */
 int ZEXPORT deflateInit_(strm, level, version, stream_size)
     z_streamp strm;
@@ -270,7 +297,7 @@ int ZEXPORT deflateInit2_(strm, level, method, windowBits, memLevel, strategy,
 #endif
     if (memLevel < 1 || memLevel > MAX_MEM_LEVEL || method != Z_DEFLATED ||
         windowBits < 8 || windowBits > 15 || level < 0 || level > 9 ||
-        strategy < 0 || strategy > Z_FIXED) {
+        strategy < 0 || strategy > Z_FIXED || (windowBits == 8 && wrap != 1)) {
         return Z_STREAM_ERROR;
     }
     if (windowBits == 8) windowBits = 9;  /* until 256-byte window bug fixed */
@@ -278,14 +305,15 @@ int ZEXPORT deflateInit2_(strm, level, method, windowBits, memLevel, strategy,
     if (s == Z_NULL) return Z_MEM_ERROR;
     strm->state = (struct internal_state FAR *)s;
     s->strm = strm;
+    s->status = INIT_STATE;     /* to pass state test in deflateReset() */
 
     s->wrap = wrap;
     s->gzhead = Z_NULL;
-    s->w_bits = windowBits;
+    s->w_bits = (uInt)windowBits;
     s->w_size = 1 << s->w_bits;
     s->w_mask = s->w_size - 1;
 
-    s->hash_bits = memLevel + 7;
+    s->hash_bits = (uInt)memLevel + 7;
     s->hash_size = 1 << s->hash_bits;
     s->hash_mask = s->hash_size - 1;
     s->hash_shift =  ((s->hash_bits+MIN_MATCH-1)/MIN_MATCH);
@@ -319,6 +347,31 @@ int ZEXPORT deflateInit2_(strm, level, method, windowBits, memLevel, strategy,
     return deflateReset(strm);
 }
 
+/* =========================================================================
+ * Check for a valid deflate stream state. Return 0 if ok, 1 if not.
+ */
+local int deflateStateCheck (strm)
+    z_streamp strm;
+{
+    deflate_state *s;
+    if (strm == Z_NULL ||
+        strm->zalloc == (alloc_func)0 || strm->zfree == (free_func)0)
+        return 1;
+    s = strm->state;
+    if (s == Z_NULL || s->strm != strm || (s->status != INIT_STATE &&
+#ifdef GZIP
+                                           s->status != GZIP_STATE &&
+#endif
+                                           s->status != EXTRA_STATE &&
+                                           s->status != NAME_STATE &&
+                                           s->status != COMMENT_STATE &&
+                                           s->status != HCRC_STATE &&
+                                           s->status != BUSY_STATE &&
+                                           s->status != FINISH_STATE))
+        return 1;
+    return 0;
+}
+
 /* ========================================================================= */
 int ZEXPORT deflateSetDictionary (strm, dictionary, dictLength)
     z_streamp strm;
@@ -331,7 +384,7 @@ int ZEXPORT deflateSetDictionary (strm, dictionary, dictLength)
     unsigned avail;
     z_const unsigned char *next;
 
-    if (strm == Z_NULL || strm->state == Z_NULL || dictionary == Z_NULL)
+    if (deflateStateCheck(strm) || dictionary == Z_NULL)
         return Z_STREAM_ERROR;
     s = strm->state;
     wrap = s->wrap;
@@ -389,13 +442,34 @@ int ZEXPORT deflateSetDictionary (strm, dictionary, dictLength)
 }
 
 /* ========================================================================= */
+int ZEXPORT deflateGetDictionary (strm, dictionary, dictLength)
+    z_streamp strm;
+    Bytef *dictionary;
+    uInt  *dictLength;
+{
+    deflate_state *s;
+    uInt len;
+
+    if (deflateStateCheck(strm))
+        return Z_STREAM_ERROR;
+    s = strm->state;
+    len = s->strstart + s->lookahead;
+    if (len > s->w_size)
+        len = s->w_size;
+    if (dictionary != Z_NULL && len)
+        zmemcpy(dictionary, s->window + s->strstart + s->lookahead - len, len);
+    if (dictLength != Z_NULL)
+        *dictLength = len;
+    return Z_OK;
+}
+
+/* ========================================================================= */
 int ZEXPORT deflateResetKeep (strm)
     z_streamp strm;
 {
     deflate_state *s;
 
-    if (strm == Z_NULL || strm->state == Z_NULL ||
-        strm->zalloc == (alloc_func)0 || strm->zfree == (free_func)0) {
+    if (deflateStateCheck(strm)) {
         return Z_STREAM_ERROR;
     }
 
@@ -410,7 +484,11 @@ int ZEXPORT deflateResetKeep (strm)
     if (s->wrap < 0) {
         s->wrap = -s->wrap; /* was made negative by deflate(..., Z_FINISH); */
     }
-    s->status = s->wrap ? INIT_STATE : BUSY_STATE;
+    s->status =
+#ifdef GZIP
+        s->wrap == 2 ? GZIP_STATE :
+#endif
+        s->wrap ? INIT_STATE : BUSY_STATE;
     strm->adler =
 #ifdef GZIP
         s->wrap == 2 ? crc32(0L, Z_NULL, 0) :
@@ -440,8 +518,8 @@ int ZEXPORT deflateSetHeader (strm, head)
     z_streamp strm;
     gz_headerp head;
 {
-    if (strm == Z_NULL || strm->state == Z_NULL) return Z_STREAM_ERROR;
-    if (strm->state->wrap != 2) return Z_STREAM_ERROR;
+    if (deflateStateCheck(strm) || strm->state->wrap != 2)
+        return Z_STREAM_ERROR;
     strm->state->gzhead = head;
     return Z_OK;
 }
@@ -452,7 +530,7 @@ int ZEXPORT deflatePending (strm, pending, bits)
     int *bits;
     z_streamp strm;
 {
-    if (strm == Z_NULL || strm->state == Z_NULL) return Z_STREAM_ERROR;
+    if (deflateStateCheck(strm)) return Z_STREAM_ERROR;
     if (pending != Z_NULL)
         *pending = strm->state->pending;
     if (bits != Z_NULL)
@@ -469,7 +547,7 @@ int ZEXPORT deflatePrime (strm, bits, value)
     deflate_state *s;
     int put;
 
-    if (strm == Z_NULL || strm->state == Z_NULL) return Z_STREAM_ERROR;
+    if (deflateStateCheck(strm)) return Z_STREAM_ERROR;
     s = strm->state;
     if ((Bytef *)(s->d_buf) < s->pending_out + ((Buf_size + 7) >> 3))
         return Z_BUF_ERROR;
@@ -494,9 +572,8 @@ int ZEXPORT deflateParams(strm, level, strategy)
 {
     deflate_state *s;
     compress_func func;
-    int err = Z_OK;
 
-    if (strm == Z_NULL || strm->state == Z_NULL) return Z_STREAM_ERROR;
+    if (deflateStateCheck(strm)) return Z_STREAM_ERROR;
     s = strm->state;
 
 #ifdef FASTEST
@@ -510,13 +587,22 @@ int ZEXPORT deflateParams(strm, level, strategy)
     func = configuration_table[s->level].func;
 
     if ((strategy != s->strategy || func != configuration_table[level].func) &&
-        strm->total_in != 0) {
+        s->high_water) {
         /* Flush the last buffer: */
-        err = deflate(strm, Z_BLOCK);
-        if (err == Z_BUF_ERROR && s->pending == 0)
-            err = Z_OK;
+        int err = deflate(strm, Z_BLOCK);
+        if (err == Z_STREAM_ERROR)
+            return err;
+        if (strm->avail_out == 0)
+            return Z_BUF_ERROR;
     }
     if (s->level != level) {
+        if (s->level == 0 && s->matches != 0) {
+            if (s->matches == 1)
+                slide_hash(s);
+            else
+                CLEAR_HASH(s);
+            s->matches = 0;
+        }
         s->level = level;
         s->max_lazy_match   = configuration_table[level].max_lazy;
         s->good_match       = configuration_table[level].good_length;
@@ -524,7 +610,7 @@ int ZEXPORT deflateParams(strm, level, strategy)
         s->max_chain_length = configuration_table[level].max_chain;
     }
     s->strategy = strategy;
-    return err;
+    return Z_OK;
 }
 
 /* ========================================================================= */
@@ -537,12 +623,12 @@ int ZEXPORT deflateTune(strm, good_length, max_lazy, nice_length, max_chain)
 {
     deflate_state *s;
 
-    if (strm == Z_NULL || strm->state == Z_NULL) return Z_STREAM_ERROR;
+    if (deflateStateCheck(strm)) return Z_STREAM_ERROR;
     s = strm->state;
-    s->good_match = good_length;
-    s->max_lazy_match = max_lazy;
+    s->good_match = (uInt)good_length;
+    s->max_lazy_match = (uInt)max_lazy;
     s->nice_match = nice_length;
-    s->max_chain_length = max_chain;
+    s->max_chain_length = (uInt)max_chain;
     return Z_OK;
 }
 
@@ -569,14 +655,13 @@ uLong ZEXPORT deflateBound(strm, sourceLen)
 {
     deflate_state *s;
     uLong complen, wraplen;
-    Bytef *str;
 
     /* conservative upper bound for compressed data */
     complen = sourceLen +
               ((sourceLen + 7) >> 3) + ((sourceLen + 63) >> 6) + 5;
 
     /* if can't get parameters, return conservative bound plus zlib wrapper */
-    if (strm == Z_NULL || strm->state == Z_NULL)
+    if (deflateStateCheck(strm))
         return complen + 6;
 
     /* compute wrapper length */
@@ -588,9 +673,11 @@ uLong ZEXPORT deflateBound(strm, sourceLen)
     case 1:                                 /* zlib wrapper */
         wraplen = 6 + (s->strstart ? 4 : 0);
         break;
+#ifdef GZIP
     case 2:                                 /* gzip wrapper */
         wraplen = 18;
         if (s->gzhead != Z_NULL) {          /* user-supplied gzip header */
+            Bytef *str;
             if (s->gzhead->extra != Z_NULL)
                 wraplen += 2 + s->gzhead->extra_len;
             str = s->gzhead->name;
@@ -607,6 +694,7 @@ uLong ZEXPORT deflateBound(strm, sourceLen)
                 wraplen += 2;
         }
         break;
+#endif
     default:                                /* for compiler happiness */
         wraplen = 6;
     }
@@ -634,10 +722,10 @@ local void putShortMSB (s, b)
 }
 
 /* =========================================================================
- * Flush as much pending output as possible. All deflate() output goes
- * through this function so some applications may wish to modify it
- * to avoid allocating a large strm->next_out buffer and copying into it.
- * (See also read_buf()).
+ * Flush as much pending output as possible. All deflate() output, except for
+ * some deflate_stored() output, goes through this function so some
+ * applications may wish to modify it to avoid allocating a large
+ * strm->next_out buffer and copying into it. (See also read_buf()).
  */
 local void flush_pending(strm)
     z_streamp strm;
@@ -654,13 +742,23 @@ local void flush_pending(strm)
     strm->next_out  += len;
     s->pending_out  += len;
     strm->total_out += len;
-    strm->avail_out  -= len;
-    s->pending -= len;
+    strm->avail_out -= len;
+    s->pending      -= len;
     if (s->pending == 0) {
         s->pending_out = s->pending_buf;
     }
 }
 
+/* ===========================================================================
+ * Update the header CRC with the bytes s->pending_buf[beg..s->pending - 1].
+ */
+#define HCRC_UPDATE(beg) \
+    do { \
+        if (s->gzhead->hcrc && s->pending > (beg)) \
+            strm->adler = crc32(strm->adler, s->pending_buf + (beg), \
+                                s->pending - (beg)); \
+    } while (0)
+
 /* ========================================================================= */
 int ZEXPORT deflate (strm, flush)
     z_streamp strm;
@@ -669,230 +767,229 @@ int ZEXPORT deflate (strm, flush)
     int old_flush; /* value of flush param for previous deflate call */
     deflate_state *s;
 
-    if (strm == Z_NULL || strm->state == Z_NULL ||
-        flush > Z_BLOCK || flush < 0) {
+    if (deflateStateCheck(strm) || flush > Z_BLOCK || flush < 0) {
         return Z_STREAM_ERROR;
     }
     s = strm->state;
 
     if (strm->next_out == Z_NULL ||
-        (strm->next_in == Z_NULL && strm->avail_in != 0) ||
+        (strm->avail_in != 0 && strm->next_in == Z_NULL) ||
         (s->status == FINISH_STATE && flush != Z_FINISH)) {
         ERR_RETURN(strm, Z_STREAM_ERROR);
     }
     if (strm->avail_out == 0) ERR_RETURN(strm, Z_BUF_ERROR);
 
-    s->strm = strm; /* just in case */
     old_flush = s->last_flush;
     s->last_flush = flush;
 
+    /* Flush as much pending output as possible */
+    if (s->pending != 0) {
+        flush_pending(strm);
+        if (strm->avail_out == 0) {
+            /* Since avail_out is 0, deflate will be called again with
+             * more output space, but possibly with both pending and
+             * avail_in equal to zero. There won't be anything to do,
+             * but this is not an error situation so make sure we
+             * return OK instead of BUF_ERROR at next call of deflate:
+             */
+            s->last_flush = -1;
+            return Z_OK;
+        }
+
+    /* Make sure there is something to do and avoid duplicate consecutive
+     * flushes. For repeated and useless calls with Z_FINISH, we keep
+     * returning Z_STREAM_END instead of Z_BUF_ERROR.
+     */
+    } else if (strm->avail_in == 0 && RANK(flush) <= RANK(old_flush) &&
+               flush != Z_FINISH) {
+        ERR_RETURN(strm, Z_BUF_ERROR);
+    }
+
+    /* User must not provide more input after the first FINISH: */
+    if (s->status == FINISH_STATE && strm->avail_in != 0) {
+        ERR_RETURN(strm, Z_BUF_ERROR);
+    }
+
     /* Write the header */
     if (s->status == INIT_STATE) {
-#ifdef GZIP
-        if (s->wrap == 2) {
-            strm->adler = crc32(0L, Z_NULL, 0);
-            put_byte(s, 31);
-            put_byte(s, 139);
-            put_byte(s, 8);
-            if (s->gzhead == Z_NULL) {
-                put_byte(s, 0);
-                put_byte(s, 0);
-                put_byte(s, 0);
-                put_byte(s, 0);
-                put_byte(s, 0);
-                put_byte(s, s->level == 9 ? 2 :
-                            (s->strategy >= Z_HUFFMAN_ONLY || s->level < 2 ?
-                             4 : 0));
-                put_byte(s, OS_CODE);
-                s->status = BUSY_STATE;
-            }
-            else {
-                put_byte(s, (s->gzhead->text ? 1 : 0) +
-                            (s->gzhead->hcrc ? 2 : 0) +
-                            (s->gzhead->extra == Z_NULL ? 0 : 4) +
-                            (s->gzhead->name == Z_NULL ? 0 : 8) +
-                            (s->gzhead->comment == Z_NULL ? 0 : 16)
-                        );
-                put_byte(s, (Byte)(s->gzhead->time & 0xff));
-                put_byte(s, (Byte)((s->gzhead->time >> 8) & 0xff));
-                put_byte(s, (Byte)((s->gzhead->time >> 16) & 0xff));
-                put_byte(s, (Byte)((s->gzhead->time >> 24) & 0xff));
-                put_byte(s, s->level == 9 ? 2 :
-                            (s->strategy >= Z_HUFFMAN_ONLY || s->level < 2 ?
-                             4 : 0));
-                put_byte(s, s->gzhead->os & 0xff);
-                if (s->gzhead->extra != Z_NULL) {
-                    put_byte(s, s->gzhead->extra_len & 0xff);
-                    put_byte(s, (s->gzhead->extra_len >> 8) & 0xff);
-                }
-                if (s->gzhead->hcrc)
-                    strm->adler = crc32(strm->adler, s->pending_buf,
-                                        s->pending);
-                s->gzindex = 0;
-                s->status = EXTRA_STATE;
-            }
-        }
+        /* zlib header */
+        uInt header = (Z_DEFLATED + ((s->w_bits-8)<<4)) << 8;
+        uInt level_flags;
+
+        if (s->strategy >= Z_HUFFMAN_ONLY || s->level < 2)
+            level_flags = 0;
+        else if (s->level < 6)
+            level_flags = 1;
+        else if (s->level == 6)
+            level_flags = 2;
         else
-#endif
-        {
-            uInt header = (Z_DEFLATED + ((s->w_bits-8)<<4)) << 8;
-            uInt level_flags;
-
-            if (s->strategy >= Z_HUFFMAN_ONLY || s->level < 2)
-                level_flags = 0;
-            else if (s->level < 6)
-                level_flags = 1;
-            else if (s->level == 6)
-                level_flags = 2;
-            else
-                level_flags = 3;
-            header |= (level_flags << 6);
-            if (s->strstart != 0) header |= PRESET_DICT;
-            header += 31 - (header % 31);
+            level_flags = 3;
+        header |= (level_flags << 6);
+        if (s->strstart != 0) header |= PRESET_DICT;
+        header += 31 - (header % 31);
+
+        putShortMSB(s, header);
 
+        /* Save the adler32 of the preset dictionary: */
+        if (s->strstart != 0) {
+            putShortMSB(s, (uInt)(strm->adler >> 16));
+            putShortMSB(s, (uInt)(strm->adler & 0xffff));
+        }
+        strm->adler = adler32(0L, Z_NULL, 0);
+        s->status = BUSY_STATE;
+
+        /* Compression must start with an empty pending buffer */
+        flush_pending(strm);
+        if (s->pending != 0) {
+            s->last_flush = -1;
+            return Z_OK;
+        }
+    }
+#ifdef GZIP
+    if (s->status == GZIP_STATE) {
+        /* gzip header */
+        strm->adler = crc32(0L, Z_NULL, 0);
+        put_byte(s, 31);
+        put_byte(s, 139);
+        put_byte(s, 8);
+        if (s->gzhead == Z_NULL) {
+            put_byte(s, 0);
+            put_byte(s, 0);
+            put_byte(s, 0);
+            put_byte(s, 0);
+            put_byte(s, 0);
+            put_byte(s, s->level == 9 ? 2 :
+                     (s->strategy >= Z_HUFFMAN_ONLY || s->level < 2 ?
+                      4 : 0));
+            put_byte(s, OS_CODE);
             s->status = BUSY_STATE;
-            putShortMSB(s, header);
 
-            /* Save the adler32 of the preset dictionary: */
-            if (s->strstart != 0) {
-                putShortMSB(s, (uInt)(strm->adler >> 16));
-                putShortMSB(s, (uInt)(strm->adler & 0xffff));
+            /* Compression must start with an empty pending buffer */
+            flush_pending(strm);
+            if (s->pending != 0) {
+                s->last_flush = -1;
+                return Z_OK;
+            }
+        }
+        else {
+            put_byte(s, (s->gzhead->text ? 1 : 0) +
+                     (s->gzhead->hcrc ? 2 : 0) +
+                     (s->gzhead->extra == Z_NULL ? 0 : 4) +
+                     (s->gzhead->name == Z_NULL ? 0 : 8) +
+                     (s->gzhead->comment == Z_NULL ? 0 : 16)
+                     );
+            put_byte(s, (Byte)(s->gzhead->time & 0xff));
+            put_byte(s, (Byte)((s->gzhead->time >> 8) & 0xff));
+            put_byte(s, (Byte)((s->gzhead->time >> 16) & 0xff));
+            put_byte(s, (Byte)((s->gzhead->time >> 24) & 0xff));
+            put_byte(s, s->level == 9 ? 2 :
+                     (s->strategy >= Z_HUFFMAN_ONLY || s->level < 2 ?
+                      4 : 0));
+            put_byte(s, s->gzhead->os & 0xff);
+            if (s->gzhead->extra != Z_NULL) {
+                put_byte(s, s->gzhead->extra_len & 0xff);
+                put_byte(s, (s->gzhead->extra_len >> 8) & 0xff);
             }
-            strm->adler = adler32(0L, Z_NULL, 0);
+            if (s->gzhead->hcrc)
+                strm->adler = crc32(strm->adler, s->pending_buf,
+                                    s->pending);
+            s->gzindex = 0;
+            s->status = EXTRA_STATE;
         }
     }
-#ifdef GZIP
     if (s->status == EXTRA_STATE) {
         if (s->gzhead->extra != Z_NULL) {
-            uInt beg = s->pending;  /* start of bytes to update crc */
-
-            while (s->gzindex < (s->gzhead->extra_len & 0xffff)) {
-                if (s->pending == s->pending_buf_size) {
-                    if (s->gzhead->hcrc && s->pending > beg)
-                        strm->adler = crc32(strm->adler, s->pending_buf + beg,
-                                            s->pending - beg);
-                    flush_pending(strm);
-                    beg = s->pending;
-                    if (s->pending == s->pending_buf_size)
-                        break;
+            ulg beg = s->pending;   /* start of bytes to update crc */
+            uInt left = (s->gzhead->extra_len & 0xffff) - s->gzindex;
+            while (s->pending + left > s->pending_buf_size) {
+                uInt copy = s->pending_buf_size - s->pending;
+                zmemcpy(s->pending_buf + s->pending,
+                        s->gzhead->extra + s->gzindex, copy);
+                s->pending = s->pending_buf_size;
+                HCRC_UPDATE(beg);
+                s->gzindex += copy;
+                flush_pending(strm);
+                if (s->pending != 0) {
+                    s->last_flush = -1;
+                    return Z_OK;
                 }
-                put_byte(s, s->gzhead->extra[s->gzindex]);
-                s->gzindex++;
-            }
-            if (s->gzhead->hcrc && s->pending > beg)
-                strm->adler = crc32(strm->adler, s->pending_buf + beg,
-                                    s->pending - beg);
-            if (s->gzindex == s->gzhead->extra_len) {
-                s->gzindex = 0;
-                s->status = NAME_STATE;
+                beg = 0;
+                left -= copy;
             }
+            zmemcpy(s->pending_buf + s->pending,
+                    s->gzhead->extra + s->gzindex, left);
+            s->pending += left;
+            HCRC_UPDATE(beg);
+            s->gzindex = 0;
         }
-        else
-            s->status = NAME_STATE;
+        s->status = NAME_STATE;
     }
     if (s->status == NAME_STATE) {
         if (s->gzhead->name != Z_NULL) {
-            uInt beg = s->pending;  /* start of bytes to update crc */
+            ulg beg = s->pending;   /* start of bytes to update crc */
             int val;
-
             do {
                 if (s->pending == s->pending_buf_size) {
-                    if (s->gzhead->hcrc && s->pending > beg)
-                        strm->adler = crc32(strm->adler, s->pending_buf + beg,
-                                            s->pending - beg);
+                    HCRC_UPDATE(beg);
                     flush_pending(strm);
-                    beg = s->pending;
-                    if (s->pending == s->pending_buf_size) {
-                        val = 1;
-                        break;
+                    if (s->pending != 0) {
+                        s->last_flush = -1;
+                        return Z_OK;
                     }
+                    beg = 0;
                 }
                 val = s->gzhead->name[s->gzindex++];
                 put_byte(s, val);
             } while (val != 0);
-            if (s->gzhead->hcrc && s->pending > beg)
-                strm->adler = crc32(strm->adler, s->pending_buf + beg,
-                                    s->pending - beg);
-            if (val == 0) {
-                s->gzindex = 0;
-                s->status = COMMENT_STATE;
-            }
+            HCRC_UPDATE(beg);
+            s->gzindex = 0;
         }
-        else
-            s->status = COMMENT_STATE;
+        s->status = COMMENT_STATE;
     }
     if (s->status == COMMENT_STATE) {
         if (s->gzhead->comment != Z_NULL) {
-            uInt beg = s->pending;  /* start of bytes to update crc */
+            ulg beg = s->pending;   /* start of bytes to update crc */
             int val;
-
             do {
                 if (s->pending == s->pending_buf_size) {
-                    if (s->gzhead->hcrc && s->pending > beg)
-                        strm->adler = crc32(strm->adler, s->pending_buf + beg,
-                                            s->pending - beg);
+                    HCRC_UPDATE(beg);
                     flush_pending(strm);
-                    beg = s->pending;
-                    if (s->pending == s->pending_buf_size) {
-                        val = 1;
-                        break;
+                    if (s->pending != 0) {
+                        s->last_flush = -1;
+                        return Z_OK;
                     }
+                    beg = 0;
                 }
                 val = s->gzhead->comment[s->gzindex++];
                 put_byte(s, val);
             } while (val != 0);
-            if (s->gzhead->hcrc && s->pending > beg)
-                strm->adler = crc32(strm->adler, s->pending_buf + beg,
-                                    s->pending - beg);
-            if (val == 0)
-                s->status = HCRC_STATE;
+            HCRC_UPDATE(beg);
         }
-        else
-            s->status = HCRC_STATE;
+        s->status = HCRC_STATE;
     }
     if (s->status == HCRC_STATE) {
         if (s->gzhead->hcrc) {
-            if (s->pending + 2 > s->pending_buf_size)
+            if (s->pending + 2 > s->pending_buf_size) {
                 flush_pending(strm);
-            if (s->pending + 2 <= s->pending_buf_size) {
-                put_byte(s, (Byte)(strm->adler & 0xff));
-                put_byte(s, (Byte)((strm->adler >> 8) & 0xff));
-                strm->adler = crc32(0L, Z_NULL, 0);
-                s->status = BUSY_STATE;
+                if (s->pending != 0) {
+                    s->last_flush = -1;
+                    return Z_OK;
+                }
             }
+            put_byte(s, (Byte)(strm->adler & 0xff));
+            put_byte(s, (Byte)((strm->adler >> 8) & 0xff));
+            strm->adler = crc32(0L, Z_NULL, 0);
         }
-        else
-            s->status = BUSY_STATE;
-    }
-#endif
+        s->status = BUSY_STATE;
 
-    /* Flush as much pending output as possible */
-    if (s->pending != 0) {
+        /* Compression must start with an empty pending buffer */
         flush_pending(strm);
-        if (strm->avail_out == 0) {
-            /* Since avail_out is 0, deflate will be called again with
-             * more output space, but possibly with both pending and
-             * avail_in equal to zero. There won't be anything to do,
-             * but this is not an error situation so make sure we
-             * return OK instead of BUF_ERROR at next call of deflate:
-             */
+        if (s->pending != 0) {
             s->last_flush = -1;
             return Z_OK;
         }
-
-    /* Make sure there is something to do and avoid duplicate consecutive
-     * flushes. For repeated and useless calls with Z_FINISH, we keep
-     * returning Z_STREAM_END instead of Z_BUF_ERROR.
-     */
-    } else if (strm->avail_in == 0 && RANK(flush) <= RANK(old_flush) &&
-               flush != Z_FINISH) {
-        ERR_RETURN(strm, Z_BUF_ERROR);
-    }
-
-    /* User must not provide more input after the first FINISH: */
-    if (s->status == FINISH_STATE && strm->avail_in != 0) {
-        ERR_RETURN(strm, Z_BUF_ERROR);
     }
+#endif
 
     /* Start a new block or continue the current one.
      */
@@ -900,9 +997,10 @@ int ZEXPORT deflate (strm, flush)
         (flush != Z_NO_FLUSH && s->status != FINISH_STATE)) {
         block_state bstate;
 
-        bstate = s->strategy == Z_HUFFMAN_ONLY ? deflate_huff(s, flush) :
-                    (s->strategy == Z_RLE ? deflate_rle(s, flush) :
-                        (*(configuration_table[s->level].func))(s, flush));
+        bstate = s->level == 0 ? deflate_stored(s, flush) :
+                 s->strategy == Z_HUFFMAN_ONLY ? deflate_huff(s, flush) :
+                 s->strategy == Z_RLE ? deflate_rle(s, flush) :
+                 (*(configuration_table[s->level].func))(s, flush);
 
         if (bstate == finish_started || bstate == finish_done) {
             s->status = FINISH_STATE;
@@ -944,7 +1042,6 @@ int ZEXPORT deflate (strm, flush)
             }
         }
     }
-    Assert(strm->avail_out > 0, "bug2");
 
     if (flush != Z_FINISH) return Z_OK;
     if (s->wrap <= 0) return Z_STREAM_END;
@@ -981,18 +1078,9 @@ int ZEXPORT deflateEnd (strm)
 {
     int status;
 
-    if (strm == Z_NULL || strm->state == Z_NULL) return Z_STREAM_ERROR;
+    if (deflateStateCheck(strm)) return Z_STREAM_ERROR;
 
     status = strm->state->status;
-    if (status != INIT_STATE &&
-        status != EXTRA_STATE &&
-        status != NAME_STATE &&
-        status != COMMENT_STATE &&
-        status != HCRC_STATE &&
-        status != BUSY_STATE &&
-        status != FINISH_STATE) {
-      return Z_STREAM_ERROR;
-    }
 
     /* Deallocate in reverse order of allocations: */
     TRY_FREE(strm, strm->state->pending_buf);
@@ -1023,7 +1111,7 @@ int ZEXPORT deflateCopy (dest, source)
     ushf *overlay;
 
 
-    if (source == Z_NULL || dest == Z_NULL || source->state == Z_NULL) {
+    if (deflateStateCheck(source) || dest == Z_NULL) {
         return Z_STREAM_ERROR;
     }
 
@@ -1073,7 +1161,7 @@ int ZEXPORT deflateCopy (dest, source)
  * allocating a large strm->next_in buffer and copying from it.
  * (See also flush_pending()).
  */
-local int read_buf(strm, buf, size)
+local unsigned read_buf(strm, buf, size)
     z_streamp strm;
     Bytef *buf;
     unsigned size;
@@ -1097,7 +1185,7 @@ local int read_buf(strm, buf, size)
     strm->next_in  += len;
     strm->total_in += len;
 
-    return (int)len;
+    return len;
 }
 
 /* ===========================================================================
@@ -1151,9 +1239,9 @@ local uInt longest_match(s, cur_match)
 {
     unsigned chain_length = s->max_chain_length;/* max hash chain length */
     register Bytef *scan = s->window + s->strstart; /* current string */
-    register Bytef *match;                       /* matched string */
+    register Bytef *match;                      /* matched string */
     register int len;                           /* length of current match */
-    int best_len = s->prev_length;              /* best match length so far */
+    int best_len = (int)s->prev_length;         /* best match length so far */
     int nice_match = s->nice_match;             /* stop if match long enough */
     IPos limit = s->strstart > (IPos)MAX_DIST(s) ?
         s->strstart - (IPos)MAX_DIST(s) : NIL;
@@ -1188,7 +1276,7 @@ local uInt longest_match(s, cur_match)
     /* Do not look for matches beyond the end of the input. This is necessary
      * to make deflate deterministic.
      */
-    if ((uInt)nice_match > s->lookahead) nice_match = s->lookahead;
+    if ((uInt)nice_match > s->lookahead) nice_match = (int)s->lookahead;
 
     Assert((ulg)s->strstart <= s->window_size-MIN_LOOKAHEAD, "need lookahead");
 
@@ -1349,7 +1437,11 @@ local uInt longest_match(s, cur_match)
 
 #endif /* FASTEST */
 
-#ifdef DEBUG
+#ifdef ZLIB_DEBUG
+
+#define EQUAL 0
+/* result of memcmp for equal strings */
+
 /* ===========================================================================
  * Check that the match at match_start is indeed a match.
  */
@@ -1375,7 +1467,7 @@ local void check_match(s, start, match, length)
 }
 #else
 #  define check_match(s, start, match, length)
-#endif /* DEBUG */
+#endif /* ZLIB_DEBUG */
 
 /* ===========================================================================
  * Fill the window when the lookahead becomes insufficient.
@@ -1390,8 +1482,7 @@ local void check_match(s, start, match, length)
 local void fill_window(s)
     deflate_state *s;
 {
-    register unsigned n, m;
-    register Posf *p;
+    unsigned n;
     unsigned more;    /* Amount of free space at the end of the window. */
     uInt wsize = s->w_size;
 
@@ -1418,35 +1509,11 @@ local void fill_window(s)
          */
         if (s->strstart >= wsize+MAX_DIST(s)) {
 
-            zmemcpy(s->window, s->window+wsize, (unsigned)wsize);
+            zmemcpy(s->window, s->window+wsize, (unsigned)wsize - more);
             s->match_start -= wsize;
             s->strstart    -= wsize; /* we now have strstart >= MAX_DIST */
             s->block_start -= (long) wsize;
-
-            /* Slide the hash table (could be avoided with 32 bit values
-               at the expense of memory usage). We slide even when level == 0
-               to keep the hash table consistent if we switch back to level > 0
-               later. (Using level 0 permanently is not an optimal usage of
-               zlib, so we don't care about this pathological case.)
-             */
-            n = s->hash_size;
-            p = &s->head[n];
-            do {
-                m = *--p;
-                *p = (Pos)(m >= wsize ? m-wsize : NIL);
-            } while (--n);
-
-            n = wsize;
-#ifndef FASTEST
-            p = &s->prev[n];
-            do {
-                m = *--p;
-                *p = (Pos)(m >= wsize ? m-wsize : NIL);
-                /* If n is not on any hash chain, prev[n] is garbage but
-                 * its value will never be used.
-                 */
-            } while (--n);
-#endif
+            slide_hash(s);
             more += wsize;
         }
         if (s->strm->avail_in == 0) break;
@@ -1552,70 +1619,199 @@ local void fill_window(s)
    if (s->strm->avail_out == 0) return (last) ? finish_started : need_more; \
 }
 
+/* Maximum stored block length in deflate format (not including header). */
+#define MAX_STORED 65535
+
+/* Minimum of a and b. */
+#define MIN(a, b) ((a) > (b) ? (b) : (a))
+
 /* ===========================================================================
  * Copy without compression as much as possible from the input stream, return
  * the current block state.
- * This function does not insert new strings in the dictionary since
- * uncompressible data is probably not useful. This function is used
- * only for the level=0 compression option.
- * NOTE: this function should be optimized to avoid extra copying from
- * window to pending_buf.
+ *
+ * In case deflateParams() is used to later switch to a non-zero compression
+ * level, s->matches (otherwise unused when storing) keeps track of the number
+ * of hash table slides to perform. If s->matches is 1, then one hash table
+ * slide will be done when switching. If s->matches is 2, the maximum value
+ * allowed here, then the hash table will be cleared, since two or more slides
+ * is the same as a clear.
+ *
+ * deflate_stored() is written to minimize the number of times an input byte is
+ * copied. It is most efficient with large input and output buffers, which
+ * maximizes the opportunites to have a single copy from next_in to next_out.
  */
 local block_state deflate_stored(s, flush)
     deflate_state *s;
     int flush;
 {
-    /* Stored blocks are limited to 0xffff bytes, pending_buf is limited
-     * to pending_buf_size, and each stored block has a 5 byte header:
+    /* Smallest worthy block size when not flushing or finishing. By default
+     * this is 32K. This can be as small as 507 bytes for memLevel == 1. For
+     * large input and output buffers, the stored block size will be larger.
      */
-    ulg max_block_size = 0xffff;
-    ulg max_start;
-
-    if (max_block_size > s->pending_buf_size - 5) {
-        max_block_size = s->pending_buf_size - 5;
-    }
+    unsigned min_block = MIN(s->pending_buf_size - 5, s->w_size);
 
-    /* Copy as much as possible from input to output: */
-    for (;;) {
-        /* Fill the window as much as possible: */
-        if (s->lookahead <= 1) {
-
-            Assert(s->strstart < s->w_size+MAX_DIST(s) ||
-                   s->block_start >= (long)s->w_size, "slide too late");
+    /* Copy as many min_block or larger stored blocks directly to next_out as
+     * possible. If flushing, copy the remaining available input to next_out as
+     * stored blocks, if there is enough space.
+     */
+    unsigned len, left, have, last = 0;
+    unsigned used = s->strm->avail_in;
+    do {
+        /* Set len to the maximum size block that we can copy directly with the
+         * available input data and output space. Set left to how much of that
+         * would be copied from what's left in the window.
+         */
+        len = MAX_STORED;       /* maximum deflate stored block length */
+        have = (s->bi_valid + 42) >> 3;         /* number of header bytes */
+        if (s->strm->avail_out < have)          /* need room for header */
+            break;
+            /* maximum stored block length that will fit in avail_out: */
+        have = s->strm->avail_out - have;
+        left = s->strstart - s->block_start;    /* bytes left in window */
+        if (len > (ulg)left + s->strm->avail_in)
+            len = left + s->strm->avail_in;     /* limit len to the input */
+        if (len > have)
+            len = have;                         /* limit len to the output */
+
+        /* If the stored block would be less than min_block in length, or if
+         * unable to copy all of the available input when flushing, then try
+         * copying to the window and the pending buffer instead. Also don't
+         * write an empty block when flushing -- deflate() does that.
+         */
+        if (len < min_block && ((len == 0 && flush != Z_FINISH) ||
+                                flush == Z_NO_FLUSH ||
+                                len != left + s->strm->avail_in))
+            break;
 
-            fill_window(s);
-            if (s->lookahead == 0 && flush == Z_NO_FLUSH) return need_more;
+        /* Make a dummy stored block in pending to get the header bytes,
+         * including any pending bits. This also updates the debugging counts.
+         */
+        last = flush == Z_FINISH && len == left + s->strm->avail_in ? 1 : 0;
+        _tr_stored_block(s, (char *)0, 0L, last);
+
+        /* Replace the lengths in the dummy stored block with len. */
+        s->pending_buf[s->pending - 4] = len;
+        s->pending_buf[s->pending - 3] = len >> 8;
+        s->pending_buf[s->pending - 2] = ~len;
+        s->pending_buf[s->pending - 1] = ~len >> 8;
+
+        /* Write the stored block header bytes. */
+        flush_pending(s->strm);
+
+#ifdef ZLIB_DEBUG
+        /* Update debugging counts for the data about to be copied. */
+        s->compressed_len += len << 3;
+        s->bits_sent += len << 3;
+#endif
 
-            if (s->lookahead == 0) break; /* flush the current block */
+        /* Copy uncompressed bytes from the window to next_out. */
+        if (left) {
+            if (left > len)
+                left = len;
+            zmemcpy(s->strm->next_out, s->window + s->block_start, left);
+            s->strm->next_out += left;
+            s->strm->avail_out -= left;
+            s->strm->total_out += left;
+            s->block_start += left;
+            len -= left;
         }
-        Assert(s->block_start >= 0L, "block gone");
-
-        s->strstart += s->lookahead;
-        s->lookahead = 0;
-
-        /* Emit a stored block if pending_buf will be full: */
-        max_start = s->block_start + max_block_size;
-        if (s->strstart == 0 || (ulg)s->strstart >= max_start) {
-            /* strstart == 0 is possible when wraparound on 16-bit machine */
-            s->lookahead = (uInt)(s->strstart - max_start);
-            s->strstart = (uInt)max_start;
-            FLUSH_BLOCK(s, 0);
+
+        /* Copy uncompressed bytes directly from next_in to next_out, updating
+         * the check value.
+         */
+        if (len) {
+            read_buf(s->strm, s->strm->next_out, len);
+            s->strm->next_out += len;
+            s->strm->avail_out -= len;
+            s->strm->total_out += len;
         }
-        /* Flush if we may have to slide, otherwise block_start may become
-         * negative and the data will be gone:
+    } while (last == 0);
+
+    /* Update the sliding window with the last s->w_size bytes of the copied
+     * data, or append all of the copied data to the existing window if less
+     * than s->w_size bytes were copied. Also update the number of bytes to
+     * insert in the hash tables, in the event that deflateParams() switches to
+     * a non-zero compression level.
+     */
+    used -= s->strm->avail_in;      /* number of input bytes directly copied */
+    if (used) {
+        /* If any input was used, then no unused input remains in the window,
+         * therefore s->block_start == s->strstart.
          */
-        if (s->strstart - (uInt)s->block_start >= MAX_DIST(s)) {
-            FLUSH_BLOCK(s, 0);
+        if (used >= s->w_size) {    /* supplant the previous history */
+            s->matches = 2;         /* clear hash */
+            zmemcpy(s->window, s->strm->next_in - s->w_size, s->w_size);
+            s->strstart = s->w_size;
         }
+        else {
+            if (s->window_size - s->strstart <= used) {
+                /* Slide the window down. */
+                s->strstart -= s->w_size;
+                zmemcpy(s->window, s->window + s->w_size, s->strstart);
+                if (s->matches < 2)
+                    s->matches++;   /* add a pending slide_hash() */
+            }
+            zmemcpy(s->window + s->strstart, s->strm->next_in - used, used);
+            s->strstart += used;
+        }
+        s->block_start = s->strstart;
+        s->insert += MIN(used, s->w_size - s->insert);
     }
-    s->insert = 0;
-    if (flush == Z_FINISH) {
-        FLUSH_BLOCK(s, 1);
+    if (s->high_water < s->strstart)
+        s->high_water = s->strstart;
+
+    /* If the last block was written to next_out, then done. */
+    if (last)
         return finish_done;
+
+    /* If flushing and all input has been consumed, then done. */
+    if (flush != Z_NO_FLUSH && flush != Z_FINISH &&
+        s->strm->avail_in == 0 && (long)s->strstart == s->block_start)
+        return block_done;
+
+    /* Fill the window with any remaining input. */
+    have = s->window_size - s->strstart - 1;
+    if (s->strm->avail_in > have && s->block_start >= (long)s->w_size) {
+        /* Slide the window down. */
+        s->block_start -= s->w_size;
+        s->strstart -= s->w_size;
+        zmemcpy(s->window, s->window + s->w_size, s->strstart);
+        if (s->matches < 2)
+            s->matches++;           /* add a pending slide_hash() */
+        have += s->w_size;          /* more space now */
     }
-    if ((long)s->strstart > s->block_start)
-        FLUSH_BLOCK(s, 0);
-    return block_done;
+    if (have > s->strm->avail_in)
+        have = s->strm->avail_in;
+    if (have) {
+        read_buf(s->strm, s->window + s->strstart, have);
+        s->strstart += have;
+    }
+    if (s->high_water < s->strstart)
+        s->high_water = s->strstart;
+
+    /* There was not enough avail_out to write a complete worthy or flushed
+     * stored block to next_out. Write a stored block to pending instead, if we
+     * have enough input for a worthy block, or if flushing and there is enough
+     * room for the remaining input as a stored block in the pending buffer.
+     */
+    have = (s->bi_valid + 42) >> 3;         /* number of header bytes */
+        /* maximum stored block length that will fit in pending: */
+    have = MIN(s->pending_buf_size - have, MAX_STORED);
+    min_block = MIN(have, s->w_size);
+    left = s->strstart - s->block_start;
+    if (left >= min_block ||
+        ((left || flush == Z_FINISH) && flush != Z_NO_FLUSH &&
+         s->strm->avail_in == 0 && left <= have)) {
+        len = MIN(left, have);
+        last = flush == Z_FINISH && s->strm->avail_in == 0 &&
+               len == left ? 1 : 0;
+        _tr_stored_block(s, (charf *)s->window + s->block_start, len, last);
+        s->block_start += len;
+        flush_pending(s->strm);
+    }
+
+    /* We've done all we can with the available input and output. */
+    return last ? finish_started : need_more;
 }
 
 /* ===========================================================================
@@ -1892,7 +2088,7 @@ local block_state deflate_rle(s, flush)
                          prev == *++scan && prev == *++scan &&
                          prev == *++scan && prev == *++scan &&
                          scan < strend);
-                s->match_length = MAX_MATCH - (int)(strend - scan);
+                s->match_length = MAX_MATCH - (uInt)(strend - scan);
                 if (s->match_length > s->lookahead)
                     s->match_length = s->lookahead;
             }
diff --git a/Modules/zlib/deflate.h b/Modules/zlib/deflate.h
index ce0299e..23ecdd3 100644
--- a/Modules/zlib/deflate.h
+++ b/Modules/zlib/deflate.h
@@ -1,5 +1,5 @@
 /* deflate.h -- internal compression state
- * Copyright (C) 1995-2012 Jean-loup Gailly
+ * Copyright (C) 1995-2016 Jean-loup Gailly
  * For conditions of distribution and use, see copyright notice in zlib.h
  */
 
@@ -51,13 +51,16 @@
 #define Buf_size 16
 /* size of bit buffer in bi_buf */
 
-#define INIT_STATE    42
-#define EXTRA_STATE   69
-#define NAME_STATE    73
-#define COMMENT_STATE 91
-#define HCRC_STATE   103
-#define BUSY_STATE   113
-#define FINISH_STATE 666
+#define INIT_STATE    42    /* zlib header -> BUSY_STATE */
+#ifdef GZIP
+#  define GZIP_STATE  57    /* gzip header -> BUSY_STATE | EXTRA_STATE */
+#endif
+#define EXTRA_STATE   69    /* gzip extra block -> NAME_STATE */
+#define NAME_STATE    73    /* gzip file name -> COMMENT_STATE */
+#define COMMENT_STATE 91    /* gzip comment -> HCRC_STATE */
+#define HCRC_STATE   103    /* gzip header CRC -> BUSY_STATE */
+#define BUSY_STATE   113    /* deflate -> FINISH_STATE */
+#define FINISH_STATE 666    /* stream complete */
 /* Stream status */
 
 
@@ -83,7 +86,7 @@ typedef struct static_tree_desc_s  static_tree_desc;
 typedef struct tree_desc_s {
     ct_data *dyn_tree;           /* the dynamic tree */
     int     max_code;            /* largest code with non zero frequency */
-    static_tree_desc *stat_desc; /* the corresponding static tree */
+    const static_tree_desc *stat_desc;  /* the corresponding static tree */
 } FAR tree_desc;
 
 typedef ush Pos;
@@ -100,10 +103,10 @@ typedef struct internal_state {
     Bytef *pending_buf;  /* output still pending */
     ulg   pending_buf_size; /* size of pending_buf */
     Bytef *pending_out;  /* next pending byte to output to the stream */
-    uInt   pending;      /* nb of bytes in the pending buffer */
+    ulg   pending;       /* nb of bytes in the pending buffer */
     int   wrap;          /* bit 0 true for zlib, bit 1 true for gzip */
     gz_headerp  gzhead;  /* gzip header information to write */
-    uInt   gzindex;      /* where in extra, name, or comment */
+    ulg   gzindex;       /* where in extra, name, or comment */
     Byte  method;        /* can only be DEFLATED */
     int   last_flush;    /* value of flush param for previous deflate call */
 
@@ -249,7 +252,7 @@ typedef struct internal_state {
     uInt matches;       /* number of string matches in current block */
     uInt insert;        /* bytes at end of window left to insert */
 
-#ifdef DEBUG
+#ifdef ZLIB_DEBUG
     ulg compressed_len; /* total bit length of compressed file mod 2^32 */
     ulg bits_sent;      /* bit length of compressed data sent mod 2^32 */
 #endif
@@ -275,7 +278,7 @@ typedef struct internal_state {
 /* Output a byte on the stream.
  * IN assertion: there is enough room in pending_buf.
  */
-#define put_byte(s, c) {s->pending_buf[s->pending++] = (c);}
+#define put_byte(s, c) {s->pending_buf[s->pending++] = (Bytef)(c);}
 
 
 #define MIN_LOOKAHEAD (MAX_MATCH+MIN_MATCH+1)
@@ -309,7 +312,7 @@ void ZLIB_INTERNAL _tr_stored_block OF((deflate_state *s, charf *buf,
  * used.
  */
 
-#ifndef DEBUG
+#ifndef ZLIB_DEBUG
 /* Inline versions of _tr_tally for speed: */
 
 #if defined(GEN_TREES_H) || !defined(STDC)
@@ -328,8 +331,8 @@ void ZLIB_INTERNAL _tr_stored_block OF((deflate_state *s, charf *buf,
     flush = (s->last_lit == s->lit_bufsize-1); \
    }
 # define _tr_tally_dist(s, distance, length, flush) \
-  { uch len = (length); \
-    ush dist = (distance); \
+  { uch len = (uch)(length); \
+    ush dist = (ush)(distance); \
     s->d_buf[s->last_lit] = dist; \
     s->l_buf[s->last_lit++] = len; \
     dist--; \
diff --git a/Modules/zlib/gzguts.h b/Modules/zlib/gzguts.h
index d87659d..990a4d2 100644
--- a/Modules/zlib/gzguts.h
+++ b/Modules/zlib/gzguts.h
@@ -1,5 +1,5 @@
 /* gzguts.h -- zlib internal header definitions for gz* operations
- * Copyright (C) 2004, 2005, 2010, 2011, 2012, 2013 Mark Adler
+ * Copyright (C) 2004, 2005, 2010, 2011, 2012, 2013, 2016 Mark Adler
  * For conditions of distribution and use, see copyright notice in zlib.h
  */
 
@@ -25,6 +25,10 @@
 #  include <stdlib.h>
 #  include <limits.h>
 #endif
+
+#ifndef _POSIX_SOURCE
+#  define _POSIX_SOURCE
+#endif
 #include <fcntl.h>
 
 #ifdef _WIN32
@@ -35,6 +39,10 @@
 #  include <io.h>
 #endif
 
+#if defined(_WIN32) || defined(__CYGWIN__)
+#  define WIDECHAR
+#endif
+
 #ifdef WINAPI_FAMILY
 #  define open _open
 #  define read _read
@@ -95,18 +103,19 @@
 #  endif
 #endif
 
-/* unlike snprintf (which is required in C99, yet still not supported by
-   Microsoft more than a decade later!), _snprintf does not guarantee null
-   termination of the result -- however this is only used in gzlib.c where
+/* unlike snprintf (which is required in C99), _snprintf does not guarantee
+   null termination of the result -- however this is only used in gzlib.c where
    the result is assured to fit in the space provided */
-#ifdef _MSC_VER
+#if defined(_MSC_VER) && _MSC_VER < 1900
 #  define snprintf _snprintf
 #endif
 
 #ifndef local
 #  define local static
 #endif
-/* compile with -Dlocal if your debugger can't find static symbols */
+/* since "static" is used to mean two completely different things in C, we
+   define "local" for the non-static meaning of "static", for readability
+   (compile with -Dlocal if your debugger can't find static symbols) */
 
 /* gz* functions always use library allocation functions */
 #ifndef STDC
@@ -170,7 +179,7 @@ typedef struct {
     char *path;             /* path or fd for error messages */
     unsigned size;          /* buffer size, zero if not allocated yet */
     unsigned want;          /* requested buffer size, default is GZBUFSIZE */
-    unsigned char *in;      /* input buffer */
+    unsigned char *in;      /* input buffer (double-sized when writing) */
     unsigned char *out;     /* output buffer (double-sized when reading) */
     int direct;             /* 0 if processing gzip, 1 if transparent */
         /* just for reading */
diff --git a/Modules/zlib/gzlib.c b/Modules/zlib/gzlib.c
index fae202e..4105e6a 100644
--- a/Modules/zlib/gzlib.c
+++ b/Modules/zlib/gzlib.c
@@ -1,11 +1,11 @@
 /* gzlib.c -- zlib functions common to reading and writing gzip files
- * Copyright (C) 2004, 2010, 2011, 2012, 2013 Mark Adler
+ * Copyright (C) 2004-2017 Mark Adler
  * For conditions of distribution and use, see copyright notice in zlib.h
  */
 
 #include "gzguts.h"
 
-#if defined(_WIN32) && !defined(__BORLANDC__)
+#if defined(_WIN32) && !defined(__BORLANDC__) && !defined(__MINGW32__)
 #  define LSEEK _lseeki64
 #else
 #if defined(_LARGEFILE64_SOURCE) && _LFS64_LARGEFILE-0
@@ -94,7 +94,7 @@ local gzFile gz_open(path, fd, mode)
     const char *mode;
 {
     gz_statep state;
-    size_t len;
+    z_size_t len;
     int oflag;
 #ifdef O_CLOEXEC
     int cloexec = 0;
@@ -188,10 +188,10 @@ local gzFile gz_open(path, fd, mode)
     }
 
     /* save the path name for error messages */
-#ifdef _WIN32
+#ifdef WIDECHAR
     if (fd == -2) {
         len = wcstombs(NULL, path, 0);
-        if (len == (size_t)-1)
+        if (len == (z_size_t)-1)
             len = 0;
     }
     else
@@ -202,7 +202,7 @@ local gzFile gz_open(path, fd, mode)
         free(state);
         return NULL;
     }
-#ifdef _WIN32
+#ifdef WIDECHAR
     if (fd == -2)
         if (len)
             wcstombs(state->path, path, len + 1);
@@ -211,7 +211,7 @@ local gzFile gz_open(path, fd, mode)
     else
 #endif
 #if !defined(NO_snprintf) && !defined(NO_vsnprintf)
-        snprintf(state->path, len + 1, "%s", (const char *)path);
+        (void)snprintf(state->path, len + 1, "%s", (const char *)path);
 #else
         strcpy(state->path, path);
 #endif
@@ -239,7 +239,7 @@ local gzFile gz_open(path, fd, mode)
 
     /* open the file with the appropriate flags (or just use fd) */
     state->fd = fd > -1 ? fd : (
-#ifdef _WIN32
+#ifdef WIDECHAR
         fd == -2 ? _wopen(path, oflag, 0666) :
 #endif
         open((const char *)path, oflag, 0666));
@@ -248,8 +248,10 @@ local gzFile gz_open(path, fd, mode)
         free(state);
         return NULL;
     }
-    if (state->mode == GZ_APPEND)
+    if (state->mode == GZ_APPEND) {
+        LSEEK(state->fd, 0, SEEK_END);  /* so gzoffset() is correct */
         state->mode = GZ_WRITE;         /* simplify later checks */
+    }
 
     /* save the current position for rewinding (only if reading) */
     if (state->mode == GZ_READ) {
@@ -291,7 +293,7 @@ gzFile ZEXPORT gzdopen(fd, mode)
     if (fd == -1 || (path = (char *)malloc(7 + 3 * sizeof(int))) == NULL)
         return NULL;
 #if !defined(NO_snprintf) && !defined(NO_vsnprintf)
-    snprintf(path, 7 + 3 * sizeof(int), "<fd:%d>", fd); /* for debugging */
+    (void)snprintf(path, 7 + 3 * sizeof(int), "<fd:%d>", fd);
 #else
     sprintf(path, "<fd:%d>", fd);   /* for debugging */
 #endif
@@ -301,7 +303,7 @@ gzFile ZEXPORT gzdopen(fd, mode)
 }
 
 /* -- see zlib.h -- */
-#ifdef _WIN32
+#ifdef WIDECHAR
 gzFile ZEXPORT gzopen_w(path, mode)
     const wchar_t *path;
     const char *mode;
@@ -329,6 +331,8 @@ int ZEXPORT gzbuffer(file, size)
         return -1;
 
     /* check and set requested size */
+    if ((size << 1) < size)
+        return -1;              /* need to be able to double it */
     if (size < 2)
         size = 2;               /* need two bytes to check magic header */
     state->want = size;
@@ -604,14 +608,13 @@ void ZLIB_INTERNAL gz_error(state, err, msg)
         return;
     }
 #if !defined(NO_snprintf) && !defined(NO_vsnprintf)
-    snprintf(state->msg, strlen(state->path) + strlen(msg) + 3,
-             "%s%s%s", state->path, ": ", msg);
+    (void)snprintf(state->msg, strlen(state->path) + strlen(msg) + 3,
+                   "%s%s%s", state->path, ": ", msg);
 #else
     strcpy(state->msg, state->path);
     strcat(state->msg, ": ");
     strcat(state->msg, msg);
 #endif
-    return;
 }
 
 #ifndef INT_MAX
diff --git a/Modules/zlib/gzread.c b/Modules/zlib/gzread.c
index bf4538e..956b91e 100644
--- a/Modules/zlib/gzread.c
+++ b/Modules/zlib/gzread.c
@@ -1,5 +1,5 @@
 /* gzread.c -- zlib functions for reading gzip files
- * Copyright (C) 2004, 2005, 2010, 2011, 2012, 2013 Mark Adler
+ * Copyright (C) 2004, 2005, 2010, 2011, 2012, 2013, 2016 Mark Adler
  * For conditions of distribution and use, see copyright notice in zlib.h
  */
 
@@ -12,6 +12,7 @@ local int gz_look OF((gz_statep));
 local int gz_decomp OF((gz_statep));
 local int gz_fetch OF((gz_statep));
 local int gz_skip OF((gz_statep, z_off64_t));
+local z_size_t gz_read OF((gz_statep, voidp, z_size_t));
 
 /* Use read() to load a buffer -- return -1 on error, otherwise 0.  Read from
    state->fd, and update state->eof, state->err, and state->msg as appropriate.
@@ -24,13 +25,17 @@ local int gz_load(state, buf, len, have)
     unsigned *have;
 {
     int ret;
+    unsigned get, max = ((unsigned)-1 >> 2) + 1;
 
     *have = 0;
     do {
-        ret = read(state->fd, buf + *have, len - *have);
+        get = len - *have;
+        if (get > max)
+            get = max;
+        ret = read(state->fd, buf + *have, get);
         if (ret <= 0)
             break;
-        *have += ret;
+        *have += (unsigned)ret;
     } while (*have < len);
     if (ret < 0) {
         gz_error(state, Z_ERRNO, zstrerror());
@@ -94,10 +99,8 @@ local int gz_look(state)
         state->in = (unsigned char *)malloc(state->want);
         state->out = (unsigned char *)malloc(state->want << 1);
         if (state->in == NULL || state->out == NULL) {
-            if (state->out != NULL)
-                free(state->out);
-            if (state->in != NULL)
-                free(state->in);
+            free(state->out);
+            free(state->in);
             gz_error(state, Z_MEM_ERROR, "out of memory");
             return -1;
         }
@@ -284,33 +287,17 @@ local int gz_skip(state, len)
     return 0;
 }
 
-/* -- see zlib.h -- */
-int ZEXPORT gzread(file, buf, len)
-    gzFile file;
+/* Read len bytes into buf from file, or less than len up to the end of the
+   input.  Return the number of bytes read.  If zero is returned, either the
+   end of file was reached, or there was an error.  state->err must be
+   consulted in that case to determine which. */
+local z_size_t gz_read(state, buf, len)
+    gz_statep state;
     voidp buf;
-    unsigned len;
+    z_size_t len;
 {
-    unsigned got, n;
-    gz_statep state;
-    z_streamp strm;
-
-    /* get internal structure */
-    if (file == NULL)
-        return -1;
-    state = (gz_statep)file;
-    strm = &(state->strm);
-
-    /* check that we're reading and that there's no (serious) error */
-    if (state->mode != GZ_READ ||
-            (state->err != Z_OK && state->err != Z_BUF_ERROR))
-        return -1;
-
-    /* since an int is returned, make sure len fits in one, otherwise return
-       with an error (this avoids the flaw in the interface) */
-    if ((int)len < 0) {
-        gz_error(state, Z_DATA_ERROR, "requested length does not fit in int");
-        return -1;
-    }
+    z_size_t got;
+    unsigned n;
 
     /* if len is zero, avoid unnecessary operations */
     if (len == 0)
@@ -320,32 +307,38 @@ int ZEXPORT gzread(file, buf, len)
     if (state->seek) {
         state->seek = 0;
         if (gz_skip(state, state->skip) == -1)
-            return -1;
+            return 0;
     }
 
     /* get len bytes to buf, or less than len if at the end */
     got = 0;
     do {
+        /* set n to the maximum amount of len that fits in an unsigned int */
+        n = -1;
+        if (n > len)
+            n = len;
+
         /* first just try copying data from the output buffer */
         if (state->x.have) {
-            n = state->x.have > len ? len : state->x.have;
+            if (state->x.have < n)
+                n = state->x.have;
             memcpy(buf, state->x.next, n);
             state->x.next += n;
             state->x.have -= n;
         }
 
         /* output buffer empty -- return if we're at the end of the input */
-        else if (state->eof && strm->avail_in == 0) {
+        else if (state->eof && state->strm.avail_in == 0) {
             state->past = 1;        /* tried to read past end */
             break;
         }
 
         /* need output data -- for small len or new stream load up our output
            buffer */
-        else if (state->how == LOOK || len < (state->size << 1)) {
+        else if (state->how == LOOK || n < (state->size << 1)) {
             /* get more output, looking for header if required */
             if (gz_fetch(state) == -1)
-                return -1;
+                return 0;
             continue;       /* no progress yet -- go back to copy above */
             /* the copy above assures that we will leave with space in the
                output buffer, allowing at least one gzungetc() to succeed */
@@ -353,16 +346,16 @@ int ZEXPORT gzread(file, buf, len)
 
         /* large len -- read directly into user buffer */
         else if (state->how == COPY) {      /* read directly */
-            if (gz_load(state, (unsigned char *)buf, len, &n) == -1)
-                return -1;
+            if (gz_load(state, (unsigned char *)buf, n, &n) == -1)
+                return 0;
         }
 
         /* large len -- decompress directly into user buffer */
         else {  /* state->how == GZIP */
-            strm->avail_out = len;
-            strm->next_out = (unsigned char *)buf;
+            state->strm.avail_out = n;
+            state->strm.next_out = (unsigned char *)buf;
             if (gz_decomp(state) == -1)
-                return -1;
+                return 0;
             n = state->x.have;
             state->x.have = 0;
         }
@@ -374,8 +367,75 @@ int ZEXPORT gzread(file, buf, len)
         state->x.pos += n;
     } while (len);
 
-    /* return number of bytes read into user buffer (will fit in int) */
-    return (int)got;
+    /* return number of bytes read into user buffer */
+    return got;
+}
+
+/* -- see zlib.h -- */
+int ZEXPORT gzread(file, buf, len)
+    gzFile file;
+    voidp buf;
+    unsigned len;
+{
+    gz_statep state;
+
+    /* get internal structure */
+    if (file == NULL)
+        return -1;
+    state = (gz_statep)file;
+
+    /* check that we're reading and that there's no (serious) error */
+    if (state->mode != GZ_READ ||
+            (state->err != Z_OK && state->err != Z_BUF_ERROR))
+        return -1;
+
+    /* since an int is returned, make sure len fits in one, otherwise return
+       with an error (this avoids a flaw in the interface) */
+    if ((int)len < 0) {
+        gz_error(state, Z_STREAM_ERROR, "request does not fit in an int");
+        return -1;
+    }
+
+    /* read len or fewer bytes to buf */
+    len = gz_read(state, buf, len);
+
+    /* check for an error */
+    if (len == 0 && state->err != Z_OK && state->err != Z_BUF_ERROR)
+        return -1;
+
+    /* return the number of bytes read (this is assured to fit in an int) */
+    return (int)len;
+}
+
+/* -- see zlib.h -- */
+z_size_t ZEXPORT gzfread(buf, size, nitems, file)
+    voidp buf;
+    z_size_t size;
+    z_size_t nitems;
+    gzFile file;
+{
+    z_size_t len;
+    gz_statep state;
+
+    /* get internal structure */
+    if (file == NULL)
+        return 0;
+    state = (gz_statep)file;
+
+    /* check that we're reading and that there's no (serious) error */
+    if (state->mode != GZ_READ ||
+            (state->err != Z_OK && state->err != Z_BUF_ERROR))
+        return 0;
+
+    /* compute bytes to read -- error on overflow */
+    len = nitems * size;
+    if (size && len / size != nitems) {
+        gz_error(state, Z_STREAM_ERROR, "request does not fit in a size_t");
+        return 0;
+    }
+
+    /* read len or fewer bytes to buf, return the number of full items read */
+    return len ? gz_read(state, buf, len) / size : 0;
 }
 
 /* -- see zlib.h -- */
@@ -408,8 +468,8 @@ int ZEXPORT gzgetc(file)
         return *(state->x.next)++;
     }
 
-    /* nothing there -- try gzread() */
-    ret = gzread(file, buf, 1);
+    /* nothing there -- try gz_read() */
+    ret = gz_read(state, buf, 1);
     return ret < 1 ? -1 : buf[0];
 }
 
@@ -451,7 +511,7 @@ int ZEXPORT gzungetc(c, file)
     if (state->x.have == 0) {
         state->x.have = 1;
         state->x.next = state->out + (state->size << 1) - 1;
-        state->x.next[0] = c;
+        state->x.next[0] = (unsigned char)c;
         state->x.pos--;
         state->past = 0;
         return c;
@@ -473,7 +533,7 @@ int ZEXPORT gzungetc(c, file)
     }
     state->x.have++;
     state->x.next--;
-    state->x.next[0] = c;
+    state->x.next[0] = (unsigned char)c;
     state->x.pos--;
     state->past = 0;
     return c;
diff --git a/Modules/zlib/gzwrite.c b/Modules/zlib/gzwrite.c
index aa767fb..c7b5651 100644
--- a/Modules/zlib/gzwrite.c
+++ b/Modules/zlib/gzwrite.c
@@ -1,5 +1,5 @@
 /* gzwrite.c -- zlib functions for writing gzip files
- * Copyright (C) 2004, 2005, 2010, 2011, 2012, 2013 Mark Adler
+ * Copyright (C) 2004-2017 Mark Adler
  * For conditions of distribution and use, see copyright notice in zlib.h
  */
 
@@ -9,17 +9,19 @@
 local int gz_init OF((gz_statep));
 local int gz_comp OF((gz_statep, int));
 local int gz_zero OF((gz_statep, z_off64_t));
+local z_size_t gz_write OF((gz_statep, voidpc, z_size_t));
 
 /* Initialize state for writing a gzip file.  Mark initialization by setting
-   state->size to non-zero.  Return -1 on failure or 0 on success. */
+   state->size to non-zero.  Return -1 on a memory allocation failure, or 0 on
+   success. */
 local int gz_init(state)
     gz_statep state;
 {
     int ret;
     z_streamp strm = &(state->strm);
 
-    /* allocate input buffer */
-    state->in = (unsigned char *)malloc(state->want);
+    /* allocate input buffer (double size for gzprintf) */
+    state->in = (unsigned char *)malloc(state->want << 1);
     if (state->in == NULL) {
         gz_error(state, Z_MEM_ERROR, "out of memory");
         return -1;
@@ -47,6 +49,7 @@ local int gz_init(state)
             gz_error(state, Z_MEM_ERROR, "out of memory");
             return -1;
         }
+        strm->next_in = NULL;
     }
 
     /* mark state as initialized */
@@ -62,17 +65,17 @@ local int gz_init(state)
 }
 
 /* Compress whatever is at avail_in and next_in and write to the output file.
-   Return -1 if there is an error writing to the output file, otherwise 0.
-   flush is assumed to be a valid deflate() flush value.  If flush is Z_FINISH,
-   then the deflate() state is reset to start a new gzip stream.  If gz->direct
-   is true, then simply write to the output file without compressing, and
-   ignore flush. */
+   Return -1 if there is an error writing to the output file or if gz_init()
+   fails to allocate memory, otherwise 0.  flush is assumed to be a valid
+   deflate() flush value.  If flush is Z_FINISH, then the deflate() state is
+   reset to start a new gzip stream.  If gz->direct is true, then simply write
+   to the output file without compressing, and ignore flush. */
 local int gz_comp(state, flush)
     gz_statep state;
     int flush;
 {
-    int ret, got;
-    unsigned have;
+    int ret, writ;
+    unsigned have, put, max = ((unsigned)-1 >> 2) + 1;
     z_streamp strm = &(state->strm);
 
     /* allocate memory if this is the first time through */
@@ -81,12 +84,16 @@ local int gz_comp(state, flush)
 
     /* write directly if requested */
     if (state->direct) {
-        got = write(state->fd, strm->next_in, strm->avail_in);
-        if (got < 0 || (unsigned)got != strm->avail_in) {
-            gz_error(state, Z_ERRNO, zstrerror());
-            return -1;
+        while (strm->avail_in) {
+            put = strm->avail_in > max ? max : strm->avail_in;
+            writ = write(state->fd, strm->next_in, put);
+            if (writ < 0) {
+                gz_error(state, Z_ERRNO, zstrerror());
+                return -1;
+            }
+            strm->avail_in -= (unsigned)writ;
+            strm->next_in += writ;
         }
-        strm->avail_in = 0;
         return 0;
     }
 
@@ -97,17 +104,21 @@ local int gz_comp(state, flush)
            doing Z_FINISH then don't write until we get to Z_STREAM_END */
         if (strm->avail_out == 0 || (flush != Z_NO_FLUSH &&
             (flush != Z_FINISH || ret == Z_STREAM_END))) {
-            have = (unsigned)(strm->next_out - state->x.next);
-            if (have && ((got = write(state->fd, state->x.next, have)) < 0 ||
-                         (unsigned)got != have)) {
-                gz_error(state, Z_ERRNO, zstrerror());
-                return -1;
+            while (strm->next_out > state->x.next) {
+                put = strm->next_out - state->x.next > (int)max ? max :
+                      (unsigned)(strm->next_out - state->x.next);
+                writ = write(state->fd, state->x.next, put);
+                if (writ < 0) {
+                    gz_error(state, Z_ERRNO, zstrerror());
+                    return -1;
+                }
+                state->x.next += writ;
             }
             if (strm->avail_out == 0) {
                 strm->avail_out = state->size;
                 strm->next_out = state->out;
+                state->x.next = state->out;
             }
-            state->x.next = strm->next_out;
         }
 
         /* compress */
@@ -129,7 +140,8 @@ local int gz_comp(state, flush)
     return 0;
 }
 
-/* Compress len zeros to output.  Return -1 on error, 0 on success. */
+/* Compress len zeros to output.  Return -1 on a write error or memory
+   allocation failure by gz_comp(), or 0 on success. */
 local int gz_zero(state, len)
     gz_statep state;
     z_off64_t len;
@@ -161,32 +173,14 @@ local int gz_zero(state, len)
     return 0;
 }
 
-/* -- see zlib.h -- */
-int ZEXPORT gzwrite(file, buf, len)
-    gzFile file;
+/* Write len bytes from buf to file.  Return the number of bytes written.  If
+   the returned value is less than len, then there was an error. */
+local z_size_t gz_write(state, buf, len)
+    gz_statep state;
     voidpc buf;
-    unsigned len;
+    z_size_t len;
 {
-    unsigned put = len;
-    gz_statep state;
-    z_streamp strm;
-
-    /* get internal structure */
-    if (file == NULL)
-        return 0;
-    state = (gz_statep)file;
-    strm = &(state->strm);
-
-    /* check that we're writing and that there's no error */
-    if (state->mode != GZ_WRITE || state->err != Z_OK)
-        return 0;
-
-    /* since an int is returned, make sure len fits in one, otherwise return
-       with an error (this avoids the flaw in the interface) */
-    if ((int)len < 0) {
-        gz_error(state, Z_DATA_ERROR, "requested length does not fit in int");
-        return 0;
-    }
+    z_size_t put = len;
 
     /* if len is zero, avoid unnecessary operations */
     if (len == 0)
@@ -209,14 +203,15 @@ int ZEXPORT gzwrite(file, buf, len)
         do {
             unsigned have, copy;
 
-            if (strm->avail_in == 0)
-                strm->next_in = state->in;
-            have = (unsigned)((strm->next_in + strm->avail_in) - state->in);
+            if (state->strm.avail_in == 0)
+                state->strm.next_in = state->in;
+            have = (unsigned)((state->strm.next_in + state->strm.avail_in) -
+                              state->in);
             copy = state->size - have;
             if (copy > len)
                 copy = len;
             memcpy(state->in + have, buf, copy);
-            strm->avail_in += copy;
+            state->strm.avail_in += copy;
             state->x.pos += copy;
             buf = (const char *)buf + copy;
             len -= copy;
@@ -226,19 +221,83 @@ int ZEXPORT gzwrite(file, buf, len)
     }
     else {
         /* consume whatever's left in the input buffer */
-        if (strm->avail_in && gz_comp(state, Z_NO_FLUSH) == -1)
+        if (state->strm.avail_in && gz_comp(state, Z_NO_FLUSH) == -1)
             return 0;
 
         /* directly compress user buffer to file */
-        strm->avail_in = len;
-        strm->next_in = (z_const Bytef *)buf;
-        state->x.pos += len;
-        if (gz_comp(state, Z_NO_FLUSH) == -1)
-            return 0;
+        state->strm.next_in = (z_const Bytef *)buf;
+        do {
+            unsigned n = (unsigned)-1;
+            if (n > len)
+                n = len;
+            state->strm.avail_in = n;
+            state->x.pos += n;
+            if (gz_comp(state, Z_NO_FLUSH) == -1)
+                return 0;
+            len -= n;
+        } while (len);
+    }
+
+    /* input was all buffered or compressed */
+    return put;
+}
+
+/* -- see zlib.h -- */
+int ZEXPORT gzwrite(file, buf, len)
+    gzFile file;
+    voidpc buf;
+    unsigned len;
+{
+    gz_statep state;
+
+    /* get internal structure */
+    if (file == NULL)
+        return 0;
+    state = (gz_statep)file;
+
+    /* check that we're writing and that there's no error */
+    if (state->mode != GZ_WRITE || state->err != Z_OK)
+        return 0;
+
+    /* since an int is returned, make sure len fits in one, otherwise return
+       with an error (this avoids a flaw in the interface) */
+    if ((int)len < 0) {
+        gz_error(state, Z_DATA_ERROR, "requested length does not fit in int");
+        return 0;
+    }
+
+    /* write len bytes from buf (the return value will fit in an int) */
+    return (int)gz_write(state, buf, len);
+}
+
+/* -- see zlib.h -- */
+z_size_t ZEXPORT gzfwrite(buf, size, nitems, file)
+    voidpc buf;
+    z_size_t size;
+    z_size_t nitems;
+    gzFile file;
+{
+    z_size_t len;
+    gz_statep state;
+
+    /* get internal structure */
+    if (file == NULL)
+        return 0;
+    state = (gz_statep)file;
+
+    /* check that we're writing and that there's no error */
+    if (state->mode != GZ_WRITE || state->err != Z_OK)
+        return 0;
+
+    /* compute bytes to read -- error on overflow */
+    len = nitems * size;
+    if (size && len / size != nitems) {
+        gz_error(state, Z_STREAM_ERROR, "request does not fit in a size_t");
+        return 0;
     }
 
-    /* input was all buffered or compressed (put will fit in int) */
-    return (int)put;
+    /* write len bytes to buf, return the number of full items written */
+    return len ? gz_write(state, buf, len) / size : 0;
 }
 
 /* -- see zlib.h -- */
@@ -275,7 +334,7 @@ int ZEXPORT gzputc(file, c)
             strm->next_in = state->in;
         have = (unsigned)((strm->next_in + strm->avail_in) - state->in);
         if (have < state->size) {
-            state->in[have] = c;
+            state->in[have] = (unsigned char)c;
             strm->avail_in++;
             state->x.pos++;
             return c & 0xff;
@@ -283,8 +342,8 @@ int ZEXPORT gzputc(file, c)
     }
 
     /* no room in buffer or not initialized, use gz_write() */
-    buf[0] = c;
-    if (gzwrite(file, buf, 1) != 1)
+    buf[0] = (unsigned char)c;
+    if (gz_write(state, buf, 1) != 1)
         return -1;
     return c & 0xff;
 }
@@ -295,11 +354,21 @@ int ZEXPORT gzputs(file, str)
     const char *str;
 {
     int ret;
-    unsigned len;
+    z_size_t len;
+    gz_statep state;
+
+    /* get internal structure */
+    if (file == NULL)
+        return -1;
+    state = (gz_statep)file;
+
+    /* check that we're writing and that there's no error */
+    if (state->mode != GZ_WRITE || state->err != Z_OK)
+        return -1;
 
     /* write string */
-    len = (unsigned)strlen(str);
-    ret = gzwrite(file, str, len);
+    len = strlen(str);
+    ret = gz_write(state, str, len);
     return ret == 0 && len != 0 ? -1 : ret;
 }
 
@@ -309,63 +378,73 @@ int ZEXPORT gzputs(file, str)
 /* -- see zlib.h -- */
 int ZEXPORTVA gzvprintf(gzFile file, const char *format, va_list va)
 {
-    int size, len;
+    int len;
+    unsigned left;
+    char *next;
     gz_statep state;
     z_streamp strm;
 
     /* get internal structure */
     if (file == NULL)
-        return -1;
+        return Z_STREAM_ERROR;
     state = (gz_statep)file;
     strm = &(state->strm);
 
     /* check that we're writing and that there's no error */
     if (state->mode != GZ_WRITE || state->err != Z_OK)
-        return 0;
+        return Z_STREAM_ERROR;
 
     /* make sure we have some buffer space */
     if (state->size == 0 && gz_init(state) == -1)
-        return 0;
+        return state->err;
 
     /* check for seek request */
     if (state->seek) {
         state->seek = 0;
         if (gz_zero(state, state->skip) == -1)
-            return 0;
+            return state->err;
     }
 
-    /* consume whatever's left in the input buffer */
-    if (strm->avail_in && gz_comp(state, Z_NO_FLUSH) == -1)
-        return 0;
-
-    /* do the printf() into the input buffer, put length in len */
-    size = (int)(state->size);
-    state->in[size - 1] = 0;
+    /* do the printf() into the input buffer, put length in len -- the input
+       buffer is double-sized just for this function, so there is guaranteed to
+       be state->size bytes available after the current contents */
+    if (strm->avail_in == 0)
+        strm->next_in = state->in;
+    next = (char *)(state->in + (strm->next_in - state->in) + strm->avail_in);
+    next[state->size - 1] = 0;
 #ifdef NO_vsnprintf
 #  ifdef HAS_vsprintf_void
-    (void)vsprintf((char *)(state->in), format, va);
-    for (len = 0; len < size; len++)
-        if (state->in[len] == 0) break;
+    (void)vsprintf(next, format, va);
+    for (len = 0; len < state->size; len++)
+        if (next[len] == 0) break;
 #  else
-    len = vsprintf((char *)(state->in), format, va);
+    len = vsprintf(next, format, va);
 #  endif
 #else
 #  ifdef HAS_vsnprintf_void
-    (void)vsnprintf((char *)(state->in), size, format, va);
-    len = strlen((char *)(state->in));
+    (void)vsnprintf(next, state->size, format, va);
+    len = strlen(next);
 #  else
-    len = vsnprintf((char *)(state->in), size, format, va);
+    len = vsnprintf(next, state->size, format, va);
 #  endif
 #endif
 
     /* check that printf() results fit in buffer */
-    if (len <= 0 || len >= (int)size || state->in[size - 1] != 0)
+    if (len == 0 || (unsigned)len >= state->size || next[state->size - 1] != 0)
         return 0;
 
-    /* update buffer and position, defer compression until needed */
-    strm->avail_in = (unsigned)len;
-    strm->next_in = state->in;
+    /* update buffer and position, compress first half if past that */
+    strm->avail_in += (unsigned)len;
     state->x.pos += len;
+    if (strm->avail_in >= state->size) {
+        left = strm->avail_in - state->size;
+        strm->avail_in = state->size;
+        if (gz_comp(state, Z_NO_FLUSH) == -1)
+            return state->err;
+        memcpy(state->in, state->in + state->size, left);
+        strm->next_in = state->in;
+        strm->avail_in = left;
+    }
     return len;
 }
 
@@ -390,73 +469,82 @@ int ZEXPORTVA gzprintf (file, format, a1, a2, a3, a4, a5, a6, a7, a8, a9, a10,
     int a1, a2, a3, a4, a5, a6, a7, a8, a9, a10,
         a11, a12, a13, a14, a15, a16, a17, a18, a19, a20;
 {
-    int size, len;
+    unsigned len, left;
+    char *next;
     gz_statep state;
     z_streamp strm;
 
     /* get internal structure */
     if (file == NULL)
-        return -1;
+        return Z_STREAM_ERROR;
     state = (gz_statep)file;
     strm = &(state->strm);
 
     /* check that can really pass pointer in ints */
     if (sizeof(int) != sizeof(void *))
-        return 0;
+        return Z_STREAM_ERROR;
 
     /* check that we're writing and that there's no error */
     if (state->mode != GZ_WRITE || state->err != Z_OK)
-        return 0;
+        return Z_STREAM_ERROR;
 
     /* make sure we have some buffer space */
     if (state->size == 0 && gz_init(state) == -1)
-        return 0;
+        return state->error;
 
     /* check for seek request */
     if (state->seek) {
         state->seek = 0;
         if (gz_zero(state, state->skip) == -1)
-            return 0;
+            return state->error;
     }
 
-    /* consume whatever's left in the input buffer */
-    if (strm->avail_in && gz_comp(state, Z_NO_FLUSH) == -1)
-        return 0;
-
-    /* do the printf() into the input buffer, put length in len */
-    size = (int)(state->size);
-    state->in[size - 1] = 0;
+    /* do the printf() into the input buffer, put length in len -- the input
+       buffer is double-sized just for this function, so there is guaranteed to
+       be state->size bytes available after the current contents */
+    if (strm->avail_in == 0)
+        strm->next_in = state->in;
+    next = (char *)(strm->next_in + strm->avail_in);
+    next[state->size - 1] = 0;
 #ifdef NO_snprintf
 #  ifdef HAS_sprintf_void
-    sprintf((char *)(state->in), format, a1, a2, a3, a4, a5, a6, a7, a8,
-            a9, a10, a11, a12, a13, a14, a15, a16, a17, a18, a19, a20);
+    sprintf(next, format, a1, a2, a3, a4, a5, a6, a7, a8, a9, a10, a11, a12,
+            a13, a14, a15, a16, a17, a18, a19, a20);
     for (len = 0; len < size; len++)
-        if (state->in[len] == 0) break;
+        if (next[len] == 0)
+            break;
 #  else
-    len = sprintf((char *)(state->in), format, a1, a2, a3, a4, a5, a6, a7, a8,
-                  a9, a10, a11, a12, a13, a14, a15, a16, a17, a18, a19, a20);
+    len = sprintf(next, format, a1, a2, a3, a4, a5, a6, a7, a8, a9, a10, a11,
+                  a12, a13, a14, a15, a16, a17, a18, a19, a20);
 #  endif
 #else
 #  ifdef HAS_snprintf_void
-    snprintf((char *)(state->in), size, format, a1, a2, a3, a4, a5, a6, a7, a8,
-             a9, a10, a11, a12, a13, a14, a15, a16, a17, a18, a19, a20);
-    len = strlen((char *)(state->in));
+    snprintf(next, state->size, format, a1, a2, a3, a4, a5, a6, a7, a8, a9,
+             a10, a11, a12, a13, a14, a15, a16, a17, a18, a19, a20);
+    len = strlen(next);
 #  else
-    len = snprintf((char *)(state->in), size, format, a1, a2, a3, a4, a5, a6,
-                   a7, a8, a9, a10, a11, a12, a13, a14, a15, a16, a17, a18,
-                   a19, a20);
+    len = snprintf(next, state->size, format, a1, a2, a3, a4, a5, a6, a7, a8,
+                   a9, a10, a11, a12, a13, a14, a15, a16, a17, a18, a19, a20);
 #  endif
 #endif
 
     /* check that printf() results fit in buffer */
-    if (len <= 0 || len >= (int)size || state->in[size - 1] != 0)
+    if (len == 0 || len >= state->size || next[state->size - 1] != 0)
         return 0;
 
-    /* update buffer and position, defer compression until needed */
-    strm->avail_in = (unsigned)len;
-    strm->next_in = state->in;
+    /* update buffer and position, compress first half if past that */
+    strm->avail_in += len;
     state->x.pos += len;
-    return len;
+    if (strm->avail_in >= state->size) {
+        left = strm->avail_in - state->size;
+        strm->avail_in = state->size;
+        if (gz_comp(state, Z_NO_FLUSH) == -1)
+            return state->err;
+        memcpy(state->in, state->in + state->size, left);
+        strm->next_in = state->in;
+        strm->avail_in = left;
+    }
+    return (int)len;
 }
 
 #endif
@@ -470,7 +558,7 @@ int ZEXPORT gzflush(file, flush)
 
     /* get internal structure */
     if (file == NULL)
-        return -1;
+        return Z_STREAM_ERROR;
     state = (gz_statep)file;
 
     /* check that we're writing and that there's no error */
@@ -485,11 +573,11 @@ int ZEXPORT gzflush(file, flush)
     if (state->seek) {
         state->seek = 0;
         if (gz_zero(state, state->skip) == -1)
-            return -1;
+            return state->err;
     }
 
     /* compress remaining data with requested flush */
-    gz_comp(state, flush);
+    (void)gz_comp(state, flush);
     return state->err;
 }
 
@@ -520,13 +608,13 @@ int ZEXPORT gzsetparams(file, level, strategy)
     if (state->seek) {
         state->seek = 0;
         if (gz_zero(state, state->skip) == -1)
-            return -1;
+            return state->err;
     }
 
     /* change compression parameters for subsequent input */
     if (state->size) {
         /* flush previous input with previous parameters before changing */
-        if (strm->avail_in && gz_comp(state, Z_PARTIAL_FLUSH) == -1)
+        if (strm->avail_in && gz_comp(state, Z_BLOCK) == -1)
             return state->err;
         deflateParams(strm, level, strategy);
     }
diff --git a/Modules/zlib/infback.c b/Modules/zlib/infback.c
index f3833c2..59679ec 100644
--- a/Modules/zlib/infback.c
+++ b/Modules/zlib/infback.c
@@ -1,5 +1,5 @@
 /* infback.c -- inflate using a call-back interface
- * Copyright (C) 1995-2011 Mark Adler
+ * Copyright (C) 1995-2016 Mark Adler
  * For conditions of distribution and use, see copyright notice in zlib.h
  */
 
@@ -61,7 +61,7 @@ int stream_size;
     Tracev((stderr, "inflate: allocated\n"));
     strm->state = (struct internal_state FAR *)state;
     state->dmax = 32768U;
-    state->wbits = windowBits;
+    state->wbits = (uInt)windowBits;
     state->wsize = 1U << windowBits;
     state->window = window;
     state->wnext = 0;
diff --git a/Modules/zlib/inffast.c b/Modules/zlib/inffast.c
index bda59ce..0dbd1db 100644
--- a/Modules/zlib/inffast.c
+++ b/Modules/zlib/inffast.c
@@ -1,5 +1,5 @@
 /* inffast.c -- fast decoding
- * Copyright (C) 1995-2008, 2010, 2013 Mark Adler
+ * Copyright (C) 1995-2017 Mark Adler
  * For conditions of distribution and use, see copyright notice in zlib.h
  */
 
@@ -8,26 +8,9 @@
 #include "inflate.h"
 #include "inffast.h"
 
-#ifndef ASMINF
-
-/* Allow machine dependent optimization for post-increment or pre-increment.
-   Based on testing to date,
-   Pre-increment preferred for:
-   - PowerPC G3 (Adler)
-   - MIPS R5000 (Randers-Pehrson)
-   Post-increment preferred for:
-   - none
-   No measurable difference:
-   - Pentium III (Anderson)
-   - M68060 (Nikl)
- */
-#ifdef POSTINC
-#  define OFF 0
-#  define PUP(a) *(a)++
+#ifdef ASMINF
+#  pragma message("Assembler code may have bugs -- use at your own risk")
 #else
-#  define OFF 1
-#  define PUP(a) *++(a)
-#endif
 
 /*
    Decode literal, length, and distance codes and write out the resulting
@@ -96,9 +79,9 @@ unsigned start;         /* inflate()'s starting value for strm->avail_out */
 
     /* copy state to local variables */
     state = (struct inflate_state FAR *)strm->state;
-    in = strm->next_in - OFF;
+    in = strm->next_in;
     last = in + (strm->avail_in - 5);
-    out = strm->next_out - OFF;
+    out = strm->next_out;
     beg = out - (start - strm->avail_out);
     end = out + (strm->avail_out - 257);
 #ifdef INFLATE_STRICT
@@ -119,9 +102,9 @@ unsigned start;         /* inflate()'s starting value for strm->avail_out */
        input data or output space */
     do {
         if (bits < 15) {
-            hold += (unsigned long)(PUP(in)) << bits;
+            hold += (unsigned long)(*in++) << bits;
             bits += 8;
-            hold += (unsigned long)(PUP(in)) << bits;
+            hold += (unsigned long)(*in++) << bits;
             bits += 8;
         }
         here = lcode[hold & lmask];
@@ -134,14 +117,14 @@ unsigned start;         /* inflate()'s starting value for strm->avail_out */
             Tracevv((stderr, here.val >= 0x20 && here.val < 0x7f ?
                     "inflate:         literal '%c'\n" :
                     "inflate:         literal 0x%02x\n", here.val));
-            PUP(out) = (unsigned char)(here.val);
+            *out++ = (unsigned char)(here.val);
         }
         else if (op & 16) {                     /* length base */
             len = (unsigned)(here.val);
             op &= 15;                           /* number of extra bits */
             if (op) {
                 if (bits < op) {
-                    hold += (unsigned long)(PUP(in)) << bits;
+                    hold += (unsigned long)(*in++) << bits;
                     bits += 8;
                 }
                 len += (unsigned)hold & ((1U << op) - 1);
@@ -150,9 +133,9 @@ unsigned start;         /* inflate()'s starting value for strm->avail_out */
             }
             Tracevv((stderr, "inflate:         length %u\n", len));
             if (bits < 15) {
-                hold += (unsigned long)(PUP(in)) << bits;
+                hold += (unsigned long)(*in++) << bits;
                 bits += 8;
-                hold += (unsigned long)(PUP(in)) << bits;
+                hold += (unsigned long)(*in++) << bits;
                 bits += 8;
             }
             here = dcode[hold & dmask];
@@ -165,10 +148,10 @@ unsigned start;         /* inflate()'s starting value for strm->avail_out */
                 dist = (unsigned)(here.val);
                 op &= 15;                       /* number of extra bits */
                 if (bits < op) {
-                    hold += (unsigned long)(PUP(in)) << bits;
+                    hold += (unsigned long)(*in++) << bits;
                     bits += 8;
                     if (bits < op) {
-                        hold += (unsigned long)(PUP(in)) << bits;
+                        hold += (unsigned long)(*in++) << bits;
                         bits += 8;
                     }
                 }
@@ -196,30 +179,30 @@ unsigned start;         /* inflate()'s starting value for strm->avail_out */
 #ifdef INFLATE_ALLOW_INVALID_DISTANCE_TOOFAR_ARRR
                         if (len <= op - whave) {
                             do {
-                                PUP(out) = 0;
+                                *out++ = 0;
                             } while (--len);
                             continue;
                         }
                         len -= op - whave;
                         do {
-                            PUP(out) = 0;
+                            *out++ = 0;
                         } while (--op > whave);
                         if (op == 0) {
                             from = out - dist;
                             do {
-                                PUP(out) = PUP(from);
+                                *out++ = *from++;
                             } while (--len);
                             continue;
                         }
 #endif
                     }
-                    from = window - OFF;
+                    from = window;
                     if (wnext == 0) {           /* very common case */
                         from += wsize - op;
                         if (op < len) {         /* some from window */
                             len -= op;
                             do {
-                                PUP(out) = PUP(from);
+                                *out++ = *from++;
                             } while (--op);
                             from = out - dist;  /* rest from output */
                         }
@@ -230,14 +213,14 @@ unsigned start;         /* inflate()'s starting value for strm->avail_out */
                         if (op < len) {         /* some from end of window */
                             len -= op;
                             do {
-                                PUP(out) = PUP(from);
+                                *out++ = *from++;
                             } while (--op);
-                            from = window - OFF;
+                            from = window;
                             if (wnext < len) {  /* some from start of window */
                                 op = wnext;
                                 len -= op;
                                 do {
-                                    PUP(out) = PUP(from);
+                                    *out++ = *from++;
                                 } while (--op);
                                 from = out - dist;      /* rest from output */
                             }
@@ -248,35 +231,35 @@ unsigned start;         /* inflate()'s starting value for strm->avail_out */
                         if (op < len) {         /* some from window */
                             len -= op;
                             do {
-                                PUP(out) = PUP(from);
+                                *out++ = *from++;
                             } while (--op);
                             from = out - dist;  /* rest from output */
                         }
                     }
                     while (len > 2) {
-                        PUP(out) = PUP(from);
-                        PUP(out) = PUP(from);
-                        PUP(out) = PUP(from);
+                        *out++ = *from++;
+                        *out++ = *from++;
+                        *out++ = *from++;
                         len -= 3;
                     }
                     if (len) {
-                        PUP(out) = PUP(from);
+                        *out++ = *from++;
                         if (len > 1)
-                            PUP(out) = PUP(from);
+                            *out++ = *from++;
                     }
                 }
                 else {
                     from = out - dist;          /* copy direct from output */
                     do {                        /* minimum length is three */
-                        PUP(out) = PUP(from);
-                        PUP(out) = PUP(from);
-                        PUP(out) = PUP(from);
+                        *out++ = *from++;
+                        *out++ = *from++;
+                        *out++ = *from++;
                         len -= 3;
                     } while (len > 2);
                     if (len) {
-                        PUP(out) = PUP(from);
+                        *out++ = *from++;
                         if (len > 1)
-                            PUP(out) = PUP(from);
+                            *out++ = *from++;
                     }
                 }
             }
@@ -313,8 +296,8 @@ unsigned start;         /* inflate()'s starting value for strm->avail_out */
     hold &= (1U << bits) - 1;
 
     /* update state and return */
-    strm->next_in = in + OFF;
-    strm->next_out = out + OFF;
+    strm->next_in = in;
+    strm->next_out = out;
     strm->avail_in = (unsigned)(in < last ? 5 + (last - in) : 5 - (in - last));
     strm->avail_out = (unsigned)(out < end ?
                                  257 + (end - out) : 257 - (out - end));
diff --git a/Modules/zlib/inflate.c b/Modules/zlib/inflate.c
index 870f89b..ac333e8 100644
--- a/Modules/zlib/inflate.c
+++ b/Modules/zlib/inflate.c
@@ -1,5 +1,5 @@
 /* inflate.c -- zlib decompression
- * Copyright (C) 1995-2012 Mark Adler
+ * Copyright (C) 1995-2016 Mark Adler
  * For conditions of distribution and use, see copyright notice in zlib.h
  */
 
@@ -92,6 +92,7 @@
 #endif
 
 /* function prototypes */
+local int inflateStateCheck OF((z_streamp strm));
 local void fixedtables OF((struct inflate_state FAR *state));
 local int updatewindow OF((z_streamp strm, const unsigned char FAR *end,
                            unsigned copy));
@@ -101,12 +102,26 @@ local int updatewindow OF((z_streamp strm, const unsigned char FAR *end,
 local unsigned syncsearch OF((unsigned FAR *have, const unsigned char FAR *buf,
                               unsigned len));
 
+local int inflateStateCheck(strm)
+z_streamp strm;
+{
+    struct inflate_state FAR *state;
+    if (strm == Z_NULL ||
+        strm->zalloc == (alloc_func)0 || strm->zfree == (free_func)0)
+        return 1;
+    state = (struct inflate_state FAR *)strm->state;
+    if (state == Z_NULL || state->strm != strm ||
+        state->mode < HEAD || state->mode > SYNC)
+        return 1;
+    return 0;
+}
+
 int ZEXPORT inflateResetKeep(strm)
 z_streamp strm;
 {
     struct inflate_state FAR *state;
 
-    if (strm == Z_NULL || strm->state == Z_NULL) return Z_STREAM_ERROR;
+    if (inflateStateCheck(strm)) return Z_STREAM_ERROR;
     state = (struct inflate_state FAR *)strm->state;
     strm->total_in = strm->total_out = state->total = 0;
     strm->msg = Z_NULL;
@@ -131,7 +146,7 @@ z_streamp strm;
 {
     struct inflate_state FAR *state;
 
-    if (strm == Z_NULL || strm->state == Z_NULL) return Z_STREAM_ERROR;
+    if (inflateStateCheck(strm)) return Z_STREAM_ERROR;
     state = (struct inflate_state FAR *)strm->state;
     state->wsize = 0;
     state->whave = 0;
@@ -147,7 +162,7 @@ int windowBits;
     struct inflate_state FAR *state;
 
     /* get the state */
-    if (strm == Z_NULL || strm->state == Z_NULL) return Z_STREAM_ERROR;
+    if (inflateStateCheck(strm)) return Z_STREAM_ERROR;
     state = (struct inflate_state FAR *)strm->state;
 
     /* extract wrap request from windowBits parameter */
@@ -156,7 +171,7 @@ int windowBits;
         windowBits = -windowBits;
     }
     else {
-        wrap = (windowBits >> 4) + 1;
+        wrap = (windowBits >> 4) + 5;
 #ifdef GUNZIP
         if (windowBits < 48)
             windowBits &= 15;
@@ -210,7 +225,9 @@ int stream_size;
     if (state == Z_NULL) return Z_MEM_ERROR;
     Tracev((stderr, "inflate: allocated\n"));
     strm->state = (struct internal_state FAR *)state;
+    state->strm = strm;
     state->window = Z_NULL;
+    state->mode = HEAD;     /* to pass state test in inflateReset2() */
     ret = inflateReset2(strm, windowBits);
     if (ret != Z_OK) {
         ZFREE(strm, state);
@@ -234,17 +251,17 @@ int value;
 {
     struct inflate_state FAR *state;
 
-    if (strm == Z_NULL || strm->state == Z_NULL) return Z_STREAM_ERROR;
+    if (inflateStateCheck(strm)) return Z_STREAM_ERROR;
     state = (struct inflate_state FAR *)strm->state;
     if (bits < 0) {
         state->hold = 0;
         state->bits = 0;
         return Z_OK;
     }
-    if (bits > 16 || state->bits + bits > 32) return Z_STREAM_ERROR;
+    if (bits > 16 || state->bits + (uInt)bits > 32) return Z_STREAM_ERROR;
     value &= (1L << bits) - 1;
-    state->hold += value << state->bits;
-    state->bits += bits;
+    state->hold += (unsigned)value << state->bits;
+    state->bits += (uInt)bits;
     return Z_OK;
 }
 
@@ -625,7 +642,7 @@ int flush;
     static const unsigned short order[19] = /* permutation of code lengths */
         {16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15};
 
-    if (strm == Z_NULL || strm->state == Z_NULL || strm->next_out == Z_NULL ||
+    if (inflateStateCheck(strm) || strm->next_out == Z_NULL ||
         (strm->next_in == Z_NULL && strm->avail_in != 0))
         return Z_STREAM_ERROR;
 
@@ -645,6 +662,8 @@ int flush;
             NEEDBITS(16);
 #ifdef GUNZIP
             if ((state->wrap & 2) && hold == 0x8b1f) {  /* gzip header */
+                if (state->wbits == 0)
+                    state->wbits = 15;
                 state->check = crc32(0L, Z_NULL, 0);
                 CRC2(state->check, hold);
                 INITBITS();
@@ -672,7 +691,7 @@ int flush;
             len = BITS(4) + 8;
             if (state->wbits == 0)
                 state->wbits = len;
-            else if (len > state->wbits) {
+            if (len > 15 || len > state->wbits) {
                 strm->msg = (char *)"invalid window size";
                 state->mode = BAD;
                 break;
@@ -699,14 +718,16 @@ int flush;
             }
             if (state->head != Z_NULL)
                 state->head->text = (int)((hold >> 8) & 1);
-            if (state->flags & 0x0200) CRC2(state->check, hold);
+            if ((state->flags & 0x0200) && (state->wrap & 4))
+                CRC2(state->check, hold);
             INITBITS();
             state->mode = TIME;
         case TIME:
             NEEDBITS(32);
             if (state->head != Z_NULL)
                 state->head->time = hold;
-            if (state->flags & 0x0200) CRC4(state->check, hold);
+            if ((state->flags & 0x0200) && (state->wrap & 4))
+                CRC4(state->check, hold);
             INITBITS();
             state->mode = OS;
         case OS:
@@ -715,7 +736,8 @@ int flush;
                 state->head->xflags = (int)(hold & 0xff);
                 state->head->os = (int)(hold >> 8);
             }
-            if (state->flags & 0x0200) CRC2(state->check, hold);
+            if ((state->flags & 0x0200) && (state->wrap & 4))
+                CRC2(state->check, hold);
             INITBITS();
             state->mode = EXLEN;
         case EXLEN:
@@ -724,7 +746,8 @@ int flush;
                 state->length = (unsigned)(hold);
                 if (state->head != Z_NULL)
                     state->head->extra_len = (unsigned)hold;
-                if (state->flags & 0x0200) CRC2(state->check, hold);
+                if ((state->flags & 0x0200) && (state->wrap & 4))
+                    CRC2(state->check, hold);
                 INITBITS();
             }
             else if (state->head != Z_NULL)
@@ -742,7 +765,7 @@ int flush;
                                 len + copy > state->head->extra_max ?
                                 state->head->extra_max - len : copy);
                     }
-                    if (state->flags & 0x0200)
+                    if ((state->flags & 0x0200) && (state->wrap & 4))
                         state->check = crc32(state->check, next, copy);
                     have -= copy;
                     next += copy;
@@ -761,9 +784,9 @@ int flush;
                     if (state->head != Z_NULL &&
                             state->head->name != Z_NULL &&
                             state->length < state->head->name_max)
-                        state->head->name[state->length++] = len;
+                        state->head->name[state->length++] = (Bytef)len;
                 } while (len && copy < have);
-                if (state->flags & 0x0200)
+                if ((state->flags & 0x0200) && (state->wrap & 4))
                     state->check = crc32(state->check, next, copy);
                 have -= copy;
                 next += copy;
@@ -782,9 +805,9 @@ int flush;
                     if (state->head != Z_NULL &&
                             state->head->comment != Z_NULL &&
                             state->length < state->head->comm_max)
-                        state->head->comment[state->length++] = len;
+                        state->head->comment[state->length++] = (Bytef)len;
                 } while (len && copy < have);
-                if (state->flags & 0x0200)
+                if ((state->flags & 0x0200) && (state->wrap & 4))
                     state->check = crc32(state->check, next, copy);
                 have -= copy;
                 next += copy;
@@ -796,7 +819,7 @@ int flush;
         case HCRC:
             if (state->flags & 0x0200) {
                 NEEDBITS(16);
-                if (hold != (state->check & 0xffff)) {
+                if ((state->wrap & 4) && hold != (state->check & 0xffff)) {
                     strm->msg = (char *)"header crc mismatch";
                     state->mode = BAD;
                     break;
@@ -1177,11 +1200,11 @@ int flush;
                 out -= left;
                 strm->total_out += out;
                 state->total += out;
-                if (out)
+                if ((state->wrap & 4) && out)
                     strm->adler = state->check =
                         UPDATE(state->check, put - out, out);
                 out = left;
-                if ((
+                if ((state->wrap & 4) && (
 #ifdef GUNZIP
                      state->flags ? hold :
 #endif
@@ -1240,10 +1263,10 @@ int flush;
     strm->total_in += in;
     strm->total_out += out;
     state->total += out;
-    if (state->wrap && out)
+    if ((state->wrap & 4) && out)
         strm->adler = state->check =
             UPDATE(state->check, strm->next_out - out, out);
-    strm->data_type = state->bits + (state->last ? 64 : 0) +
+    strm->data_type = (int)state->bits + (state->last ? 64 : 0) +
                       (state->mode == TYPE ? 128 : 0) +
                       (state->mode == LEN_ || state->mode == COPY_ ? 256 : 0);
     if (((in == 0 && out == 0) || flush == Z_FINISH) && ret == Z_OK)
@@ -1255,7 +1278,7 @@ int ZEXPORT inflateEnd(strm)
 z_streamp strm;
 {
     struct inflate_state FAR *state;
-    if (strm == Z_NULL || strm->state == Z_NULL || strm->zfree == (free_func)0)
+    if (inflateStateCheck(strm))
         return Z_STREAM_ERROR;
     state = (struct inflate_state FAR *)strm->state;
     if (state->window != Z_NULL) ZFREE(strm, state->window);
@@ -1273,7 +1296,7 @@ uInt *dictLength;
     struct inflate_state FAR *state;
 
     /* check state */
-    if (strm == Z_NULL || strm->state == Z_NULL) return Z_STREAM_ERROR;
+    if (inflateStateCheck(strm)) return Z_STREAM_ERROR;
     state = (struct inflate_state FAR *)strm->state;
 
     /* copy dictionary */
@@ -1298,7 +1321,7 @@ uInt dictLength;
     int ret;
 
     /* check state */
-    if (strm == Z_NULL || strm->state == Z_NULL) return Z_STREAM_ERROR;
+    if (inflateStateCheck(strm)) return Z_STREAM_ERROR;
     state = (struct inflate_state FAR *)strm->state;
     if (state->wrap != 0 && state->mode != DICT)
         return Z_STREAM_ERROR;
@@ -1330,7 +1353,7 @@ gz_headerp head;
     struct inflate_state FAR *state;
 
     /* check state */
-    if (strm == Z_NULL || strm->state == Z_NULL) return Z_STREAM_ERROR;
+    if (inflateStateCheck(strm)) return Z_STREAM_ERROR;
     state = (struct inflate_state FAR *)strm->state;
     if ((state->wrap & 2) == 0) return Z_STREAM_ERROR;
 
@@ -1383,7 +1406,7 @@ z_streamp strm;
     struct inflate_state FAR *state;
 
     /* check parameters */
-    if (strm == Z_NULL || strm->state == Z_NULL) return Z_STREAM_ERROR;
+    if (inflateStateCheck(strm)) return Z_STREAM_ERROR;
     state = (struct inflate_state FAR *)strm->state;
     if (strm->avail_in == 0 && state->bits < 8) return Z_BUF_ERROR;
 
@@ -1430,7 +1453,7 @@ z_streamp strm;
 {
     struct inflate_state FAR *state;
 
-    if (strm == Z_NULL || strm->state == Z_NULL) return Z_STREAM_ERROR;
+    if (inflateStateCheck(strm)) return Z_STREAM_ERROR;
     state = (struct inflate_state FAR *)strm->state;
     return state->mode == STORED && state->bits == 0;
 }
@@ -1445,8 +1468,7 @@ z_streamp source;
     unsigned wsize;
 
     /* check input */
-    if (dest == Z_NULL || source == Z_NULL || source->state == Z_NULL ||
-        source->zalloc == (alloc_func)0 || source->zfree == (free_func)0)
+    if (inflateStateCheck(source) || dest == Z_NULL)
         return Z_STREAM_ERROR;
     state = (struct inflate_state FAR *)source->state;
 
@@ -1467,6 +1489,7 @@ z_streamp source;
     /* copy state */
     zmemcpy((voidpf)dest, (voidpf)source, sizeof(z_stream));
     zmemcpy((voidpf)copy, (voidpf)state, sizeof(struct inflate_state));
+    copy->strm = dest;
     if (state->lencode >= state->codes &&
         state->lencode <= state->codes + ENOUGH - 1) {
         copy->lencode = copy->codes + (state->lencode - state->codes);
@@ -1488,25 +1511,51 @@ int subvert;
 {
     struct inflate_state FAR *state;
 
-    if (strm == Z_NULL || strm->state == Z_NULL) return Z_STREAM_ERROR;
+    if (inflateStateCheck(strm)) return Z_STREAM_ERROR;
     state = (struct inflate_state FAR *)strm->state;
-    state->sane = !subvert;
 #ifdef INFLATE_ALLOW_INVALID_DISTANCE_TOOFAR_ARRR
+    state->sane = !subvert;
     return Z_OK;
 #else
+    (void)subvert;
     state->sane = 1;
     return Z_DATA_ERROR;
 #endif
 }
 
+int ZEXPORT inflateValidate(strm, check)
+z_streamp strm;
+int check;
+{
+    struct inflate_state FAR *state;
+
+    if (inflateStateCheck(strm)) return Z_STREAM_ERROR;
+    state = (struct inflate_state FAR *)strm->state;
+    if (check)
+        state->wrap |= 4;
+    else
+        state->wrap &= ~4;
+    return Z_OK;
+}
+
 long ZEXPORT inflateMark(strm)
 z_streamp strm;
 {
     struct inflate_state FAR *state;
 
-    if (strm == Z_NULL || strm->state == Z_NULL) return -1L << 16;
+    if (inflateStateCheck(strm))
+        return -(1L << 16);
     state = (struct inflate_state FAR *)strm->state;
-    return ((long)(state->back) << 16) +
+    return (long)(((unsigned long)((long)state->back)) << 16) +
         (state->mode == COPY ? state->length :
             (state->mode == MATCH ? state->was - state->length : 0));
 }
+
+unsigned long ZEXPORT inflateCodesUsed(strm)
+z_streamp strm;
+{
+    struct inflate_state FAR *state;
+    if (inflateStateCheck(strm)) return (unsigned long)-1;
+    state = (struct inflate_state FAR *)strm->state;
+    return (unsigned long)(state->next - state->codes);
+}
diff --git a/Modules/zlib/inflate.h b/Modules/zlib/inflate.h
index 95f4986..a46cce6 100644
--- a/Modules/zlib/inflate.h
+++ b/Modules/zlib/inflate.h
@@ -1,5 +1,5 @@
 /* inflate.h -- internal inflate state definition
- * Copyright (C) 1995-2009 Mark Adler
+ * Copyright (C) 1995-2016 Mark Adler
  * For conditions of distribution and use, see copyright notice in zlib.h
  */
 
@@ -18,7 +18,7 @@
 
 /* Possible inflate modes between inflate() calls */
 typedef enum {
-    HEAD,       /* i: waiting for magic header */
+    HEAD = 16180,   /* i: waiting for magic header */
     FLAGS,      /* i: waiting for method and flags (gzip) */
     TIME,       /* i: waiting for modification time (gzip) */
     OS,         /* i: waiting for extra flags and operating system (gzip) */
@@ -77,11 +77,14 @@ typedef enum {
         CHECK -> LENGTH -> DONE
  */
 
-/* state maintained between inflate() calls.  Approximately 10K bytes. */
+/* State maintained between inflate() calls -- approximately 7K bytes, not
+   including the allocated sliding window, which is up to 32K bytes. */
 struct inflate_state {
+    z_streamp strm;             /* pointer back to this zlib stream */
     inflate_mode mode;          /* current inflate mode */
     int last;                   /* true if processing last block */
-    int wrap;                   /* bit 0 true for zlib, bit 1 true for gzip */
+    int wrap;                   /* bit 0 true for zlib, bit 1 true for gzip,
+                                   bit 2 true to validate check value */
     int havedict;               /* true if dictionary provided */
     int flags;                  /* gzip header method and flags (0 if zlib) */
     unsigned dmax;              /* zlib header max distance (INFLATE_STRICT) */
diff --git a/Modules/zlib/inftrees.c b/Modules/zlib/inftrees.c
index 44d89cf..2ea08fc 100644
--- a/Modules/zlib/inftrees.c
+++ b/Modules/zlib/inftrees.c
@@ -1,5 +1,5 @@
 /* inftrees.c -- generate Huffman trees for efficient decoding
- * Copyright (C) 1995-2013 Mark Adler
+ * Copyright (C) 1995-2017 Mark Adler
  * For conditions of distribution and use, see copyright notice in zlib.h
  */
 
@@ -9,7 +9,7 @@
 #define MAXBITS 15
 
 const char inflate_copyright[] =
-   " inflate 1.2.8 Copyright 1995-2013 Mark Adler ";
+   " inflate 1.2.11 Copyright 1995-2017 Mark Adler ";
 /*
   If you use the zlib library in a product, an acknowledgment is welcome
   in the documentation of your product. If for some reason you cannot
@@ -54,7 +54,7 @@ unsigned short FAR *work;
     code FAR *next;             /* next available space in table */
     const unsigned short FAR *base;     /* base value table to use */
     const unsigned short FAR *extra;    /* extra bits table to use */
-    int end;                    /* use base and extra for symbol > end */
+    unsigned match;             /* use base and extra for symbol >= match */
     unsigned short count[MAXBITS+1];    /* number of codes of each length */
     unsigned short offs[MAXBITS+1];     /* offsets in table for each length */
     static const unsigned short lbase[31] = { /* Length codes 257..285 base */
@@ -62,7 +62,7 @@ unsigned short FAR *work;
         35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0};
     static const unsigned short lext[31] = { /* Length codes 257..285 extra */
         16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18,
-        19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 72, 78};
+        19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 77, 202};
     static const unsigned short dbase[32] = { /* Distance codes 0..29 base */
         1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193,
         257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145,
@@ -181,19 +181,17 @@ unsigned short FAR *work;
     switch (type) {
     case CODES:
         base = extra = work;    /* dummy value--not used */
-        end = 19;
+        match = 20;
         break;
     case LENS:
         base = lbase;
-        base -= 257;
         extra = lext;
-        extra -= 257;
-        end = 256;
+        match = 257;
         break;
-    default:            /* DISTS */
+    default:    /* DISTS */
         base = dbase;
         extra = dext;
-        end = -1;
+        match = 0;
     }
 
     /* initialize state for loop */
@@ -216,13 +214,13 @@ unsigned short FAR *work;
     for (;;) {
         /* create table entry */
         here.bits = (unsigned char)(len - drop);
-        if ((int)(work[sym]) < end) {
+        if (work[sym] + 1U < match) {
             here.op = (unsigned char)0;
             here.val = work[sym];
         }
-        else if ((int)(work[sym]) > end) {
-            here.op = (unsigned char)(extra[work[sym]]);
-            here.val = base[work[sym]];
+        else if (work[sym] >= match) {
+            here.op = (unsigned char)(extra[work[sym] - match]);
+            here.val = base[work[sym] - match];
         }
         else {
             here.op = (unsigned char)(32 + 64);         /* end of block */
diff --git a/Modules/zlib/trees.c b/Modules/zlib/trees.c
index 1fd7759..50cf4b4 100644
--- a/Modules/zlib/trees.c
+++ b/Modules/zlib/trees.c
@@ -1,5 +1,5 @@
 /* trees.c -- output deflated data using Huffman coding
- * Copyright (C) 1995-2012 Jean-loup Gailly
+ * Copyright (C) 1995-2017 Jean-loup Gailly
  * detect_data_type() function provided freely by Cosmin Truta, 2006
  * For conditions of distribution and use, see copyright notice in zlib.h
  */
@@ -36,7 +36,7 @@
 
 #include "deflate.h"
 
-#ifdef DEBUG
+#ifdef ZLIB_DEBUG
 #  include <ctype.h>
 #endif
 
@@ -122,13 +122,13 @@ struct static_tree_desc_s {
     int     max_length;          /* max bit length for the codes */
 };
 
-local static_tree_desc  static_l_desc =
+local const static_tree_desc  static_l_desc =
 {static_ltree, extra_lbits, LITERALS+1, L_CODES, MAX_BITS};
 
-local static_tree_desc  static_d_desc =
+local const static_tree_desc  static_d_desc =
 {static_dtree, extra_dbits, 0,          D_CODES, MAX_BITS};
 
-local static_tree_desc  static_bl_desc =
+local const static_tree_desc  static_bl_desc =
 {(const ct_data *)0, extra_blbits, 0,   BL_CODES, MAX_BL_BITS};
 
 /* ===========================================================================
@@ -152,18 +152,16 @@ local int  detect_data_type OF((deflate_state *s));
 local unsigned bi_reverse OF((unsigned value, int length));
 local void bi_windup      OF((deflate_state *s));
 local void bi_flush       OF((deflate_state *s));
-local void copy_block     OF((deflate_state *s, charf *buf, unsigned len,
-                              int header));
 
 #ifdef GEN_TREES_H
 local void gen_trees_header OF((void));
 #endif
 
-#ifndef DEBUG
+#ifndef ZLIB_DEBUG
 #  define send_code(s, c, tree) send_bits(s, tree[c].Code, tree[c].Len)
    /* Send a code of the given tree. c and tree must not have side effects */
 
-#else /* DEBUG */
+#else /* !ZLIB_DEBUG */
 #  define send_code(s, c, tree) \
      { if (z_verbose>2) fprintf(stderr,"\ncd %3d ",(c)); \
        send_bits(s, tree[c].Code, tree[c].Len); }
@@ -182,7 +180,7 @@ local void gen_trees_header OF((void));
  * Send a value on a given number of bits.
  * IN assertion: length <= 16 and value fits in length bits.
  */
-#ifdef DEBUG
+#ifdef ZLIB_DEBUG
 local void send_bits      OF((deflate_state *s, int value, int length));
 
 local void send_bits(s, value, length)
@@ -208,12 +206,12 @@ local void send_bits(s, value, length)
         s->bi_valid += length;
     }
 }
-#else /* !DEBUG */
+#else /* !ZLIB_DEBUG */
 
 #define send_bits(s, value, length) \
 { int len = length;\
   if (s->bi_valid > (int)Buf_size - len) {\
-    int val = value;\
+    int val = (int)value;\
     s->bi_buf |= (ush)val << s->bi_valid;\
     put_short(s, s->bi_buf);\
     s->bi_buf = (ush)val >> (Buf_size - s->bi_valid);\
@@ -223,7 +221,7 @@ local void send_bits(s, value, length)
     s->bi_valid += len;\
   }\
 }
-#endif /* DEBUG */
+#endif /* ZLIB_DEBUG */
 
 
 /* the arguments must not have side effects */
@@ -317,7 +315,7 @@ local void tr_static_init()
  * Genererate the file trees.h describing the static trees.
  */
 #ifdef GEN_TREES_H
-#  ifndef DEBUG
+#  ifndef ZLIB_DEBUG
 #    include <stdio.h>
 #  endif
 
@@ -394,7 +392,7 @@ void ZLIB_INTERNAL _tr_init(s)
 
     s->bi_buf = 0;
     s->bi_valid = 0;
-#ifdef DEBUG
+#ifdef ZLIB_DEBUG
     s->compressed_len = 0L;
     s->bits_sent = 0L;
 #endif
@@ -522,12 +520,12 @@ local void gen_bitlen(s, desc)
         xbits = 0;
         if (n >= base) xbits = extra[n-base];
         f = tree[n].Freq;
-        s->opt_len += (ulg)f * (bits + xbits);
-        if (stree) s->static_len += (ulg)f * (stree[n].Len + xbits);
+        s->opt_len += (ulg)f * (unsigned)(bits + xbits);
+        if (stree) s->static_len += (ulg)f * (unsigned)(stree[n].Len + xbits);
     }
     if (overflow == 0) return;
 
-    Trace((stderr,"\nbit length overflow\n"));
+    Tracev((stderr,"\nbit length overflow\n"));
     /* This happens for example on obj2 and pic of the Calgary corpus */
 
     /* Find the first bit length which could increase: */
@@ -554,9 +552,8 @@ local void gen_bitlen(s, desc)
             m = s->heap[--h];
             if (m > max_code) continue;
             if ((unsigned) tree[m].Len != (unsigned) bits) {
-                Trace((stderr,"code %d bits %d->%d\n", m, tree[m].Len, bits));
-                s->opt_len += ((long)bits - (long)tree[m].Len)
-                              *(long)tree[m].Freq;
+                Tracev((stderr,"code %d bits %d->%d\n", m, tree[m].Len, bits));
+                s->opt_len += ((ulg)bits - tree[m].Len) * tree[m].Freq;
                 tree[m].Len = (ush)bits;
             }
             n--;
@@ -578,7 +575,7 @@ local void gen_codes (tree, max_code, bl_count)
     ushf *bl_count;            /* number of codes at each bit length */
 {
     ush next_code[MAX_BITS+1]; /* next code value for each bit length */
-    ush code = 0;              /* running code value */
+    unsigned code = 0;         /* running code value */
     int bits;                  /* bit index */
     int n;                     /* code index */
 
@@ -586,7 +583,8 @@ local void gen_codes (tree, max_code, bl_count)
      * without bit reversal.
      */
     for (bits = 1; bits <= MAX_BITS; bits++) {
-        next_code[bits] = code = (code + bl_count[bits-1]) << 1;
+        code = (code + bl_count[bits-1]) << 1;
+        next_code[bits] = (ush)code;
     }
     /* Check that the bit counts in bl_count are consistent. The last code
      * must be all ones.
@@ -599,7 +597,7 @@ local void gen_codes (tree, max_code, bl_count)
         int len = tree[n].Len;
         if (len == 0) continue;
         /* Now reverse the bits */
-        tree[n].Code = bi_reverse(next_code[len]++, len);
+        tree[n].Code = (ush)bi_reverse(next_code[len]++, len);
 
         Tracecv(tree != static_ltree, (stderr,"\nn %3d %c l %2d c %4x (%x) ",
              n, (isgraph(n) ? n : ' '), len, tree[n].Code, next_code[len]-1));
@@ -821,7 +819,7 @@ local int build_bl_tree(s)
         if (s->bl_tree[bl_order[max_blindex]].Len != 0) break;
     }
     /* Update opt_len to include the bit length tree and counts */
-    s->opt_len += 3*(max_blindex+1) + 5+5+4;
+    s->opt_len += 3*((ulg)max_blindex+1) + 5+5+4;
     Tracev((stderr, "\ndyn trees: dyn %ld, stat %ld",
             s->opt_len, s->static_len));
 
@@ -869,11 +867,17 @@ void ZLIB_INTERNAL _tr_stored_block(s, buf, stored_len, last)
     int last;         /* one if this is the last block for a file */
 {
     send_bits(s, (STORED_BLOCK<<1)+last, 3);    /* send block type */
-#ifdef DEBUG
+    bi_windup(s);        /* align on byte boundary */
+    put_short(s, (ush)stored_len);
+    put_short(s, (ush)~stored_len);
+    zmemcpy(s->pending_buf + s->pending, (Bytef *)buf, stored_len);
+    s->pending += stored_len;
+#ifdef ZLIB_DEBUG
     s->compressed_len = (s->compressed_len + 3 + 7) & (ulg)~7L;
     s->compressed_len += (stored_len + 4) << 3;
+    s->bits_sent += 2*16;
+    s->bits_sent += stored_len<<3;
 #endif
-    copy_block(s, buf, (unsigned)stored_len, 1); /* with header */
 }
 
 /* ===========================================================================
@@ -894,7 +898,7 @@ void ZLIB_INTERNAL _tr_align(s)
 {
     send_bits(s, STATIC_TREES<<1, 3);
     send_code(s, END_BLOCK, static_ltree);
-#ifdef DEBUG
+#ifdef ZLIB_DEBUG
     s->compressed_len += 10L; /* 3 for block type, 7 for EOB */
 #endif
     bi_flush(s);
@@ -902,7 +906,7 @@ void ZLIB_INTERNAL _tr_align(s)
 
 /* ===========================================================================
  * Determine the best encoding for the current block: dynamic trees, static
- * trees or store, and output the encoded block to the zip file.
+ * trees or store, and write out the encoded block.
  */
 void ZLIB_INTERNAL _tr_flush_block(s, buf, stored_len, last)
     deflate_state *s;
@@ -974,7 +978,7 @@ void ZLIB_INTERNAL _tr_flush_block(s, buf, stored_len, last)
         send_bits(s, (STATIC_TREES<<1)+last, 3);
         compress_block(s, (const ct_data *)static_ltree,
                        (const ct_data *)static_dtree);
-#ifdef DEBUG
+#ifdef ZLIB_DEBUG
         s->compressed_len += 3 + s->static_len;
 #endif
     } else {
@@ -983,7 +987,7 @@ void ZLIB_INTERNAL _tr_flush_block(s, buf, stored_len, last)
                        max_blindex+1);
         compress_block(s, (const ct_data *)s->dyn_ltree,
                        (const ct_data *)s->dyn_dtree);
-#ifdef DEBUG
+#ifdef ZLIB_DEBUG
         s->compressed_len += 3 + s->opt_len;
 #endif
     }
@@ -995,7 +999,7 @@ void ZLIB_INTERNAL _tr_flush_block(s, buf, stored_len, last)
 
     if (last) {
         bi_windup(s);
-#ifdef DEBUG
+#ifdef ZLIB_DEBUG
         s->compressed_len += 7;  /* align on byte boundary */
 #endif
     }
@@ -1090,7 +1094,7 @@ local void compress_block(s, ltree, dtree)
             send_code(s, code, dtree);       /* send the distance code */
             extra = extra_dbits[code];
             if (extra != 0) {
-                dist -= base_dist[code];
+                dist -= (unsigned)base_dist[code];
                 send_bits(s, dist, extra);   /* send the extra distance bits */
             }
         } /* literal or match pair ? */
@@ -1193,34 +1197,7 @@ local void bi_windup(s)
     }
     s->bi_buf = 0;
     s->bi_valid = 0;
-#ifdef DEBUG
+#ifdef ZLIB_DEBUG
     s->bits_sent = (s->bits_sent+7) & ~7;
 #endif
 }
-
-/* ===========================================================================
- * Copy a stored block, storing first the length and its
- * one's complement if requested.
- */
-local void copy_block(s, buf, len, header)
-    deflate_state *s;
-    charf    *buf;    /* the input data */
-    unsigned len;     /* its length */
-    int      header;  /* true if block header must be written */
-{
-    bi_windup(s);        /* align on byte boundary */
-
-    if (header) {
-        put_short(s, (ush)len);
-        put_short(s, (ush)~len);
-#ifdef DEBUG
-        s->bits_sent += 2*16;
-#endif
-    }
-#ifdef DEBUG
-    s->bits_sent += (ulg)len<<3;
-#endif
-    while (len--) {
-        put_byte(s, *buf++);
-    }
-}
diff --git a/Modules/zlib/uncompr.c b/Modules/zlib/uncompr.c
index 242e949..f03a1a8 100644
--- a/Modules/zlib/uncompr.c
+++ b/Modules/zlib/uncompr.c
@@ -1,5 +1,5 @@
 /* uncompr.c -- decompress a memory buffer
- * Copyright (C) 1995-2003, 2010 Jean-loup Gailly.
+ * Copyright (C) 1995-2003, 2010, 2014, 2016 Jean-loup Gailly, Mark Adler
  * For conditions of distribution and use, see copyright notice in zlib.h
  */
 
@@ -9,51 +9,85 @@
 #include "zlib.h"
 
 /* ===========================================================================
-     Decompresses the source buffer into the destination buffer.  sourceLen is
-   the byte length of the source buffer. Upon entry, destLen is the total
-   size of the destination buffer, which must be large enough to hold the
-   entire uncompressed data. (The size of the uncompressed data must have
-   been saved previously by the compressor and transmitted to the decompressor
-   by some mechanism outside the scope of this compression library.)
-   Upon exit, destLen is the actual size of the compressed buffer.
-
-     uncompress returns Z_OK if success, Z_MEM_ERROR if there was not
-   enough memory, Z_BUF_ERROR if there was not enough room in the output
-   buffer, or Z_DATA_ERROR if the input data was corrupted.
+     Decompresses the source buffer into the destination buffer.  *sourceLen is
+   the byte length of the source buffer. Upon entry, *destLen is the total size
+   of the destination buffer, which must be large enough to hold the entire
+   uncompressed data. (The size of the uncompressed data must have been saved
+   previously by the compressor and transmitted to the decompressor by some
+   mechanism outside the scope of this compression library.) Upon exit,
+   *destLen is the size of the decompressed data and *sourceLen is the number
+   of source bytes consumed. Upon return, source + *sourceLen points to the
+   first unused input byte.
+
+     uncompress returns Z_OK if success, Z_MEM_ERROR if there was not enough
+   memory, Z_BUF_ERROR if there was not enough room in the output buffer, or
+   Z_DATA_ERROR if the input data was corrupted, including if the input data is
+   an incomplete zlib stream.
 */
-int ZEXPORT uncompress (dest, destLen, source, sourceLen)
+int ZEXPORT uncompress2 (dest, destLen, source, sourceLen)
     Bytef *dest;
     uLongf *destLen;
     const Bytef *source;
-    uLong sourceLen;
+    uLong *sourceLen;
 {
     z_stream stream;
     int err;
+    const uInt max = (uInt)-1;
+    uLong len, left;
+    Byte buf[1];    /* for detection of incomplete stream when *destLen == 0 */
 
-    stream.next_in = (z_const Bytef *)source;
-    stream.avail_in = (uInt)sourceLen;
-    /* Check for source > 64K on 16-bit machine: */
-    if ((uLong)stream.avail_in != sourceLen) return Z_BUF_ERROR;
-
-    stream.next_out = dest;
-    stream.avail_out = (uInt)*destLen;
-    if ((uLong)stream.avail_out != *destLen) return Z_BUF_ERROR;
+    len = *sourceLen;
+    if (*destLen) {
+        left = *destLen;
+        *destLen = 0;
+    }
+    else {
+        left = 1;
+        dest = buf;
+    }
 
+    stream.next_in = (z_const Bytef *)source;
+    stream.avail_in = 0;
     stream.zalloc = (alloc_func)0;
     stream.zfree = (free_func)0;
+    stream.opaque = (voidpf)0;
 
     err = inflateInit(&stream);
     if (err != Z_OK) return err;
 
-    err = inflate(&stream, Z_FINISH);
-    if (err != Z_STREAM_END) {
-        inflateEnd(&stream);
-        if (err == Z_NEED_DICT || (err == Z_BUF_ERROR && stream.avail_in == 0))
-            return Z_DATA_ERROR;
-        return err;
-    }
-    *destLen = stream.total_out;
+    stream.next_out = dest;
+    stream.avail_out = 0;
 
-    err = inflateEnd(&stream);
-    return err;
+    do {
+        if (stream.avail_out == 0) {
+            stream.avail_out = left > (uLong)max ? max : (uInt)left;
+            left -= stream.avail_out;
+        }
+        if (stream.avail_in == 0) {
+            stream.avail_in = len > (uLong)max ? max : (uInt)len;
+            len -= stream.avail_in;
+        }
+        err = inflate(&stream, Z_NO_FLUSH);
+    } while (err == Z_OK);
+
+    *sourceLen -= len + stream.avail_in;
+    if (dest != buf)
+        *destLen = stream.total_out;
+    else if (stream.total_out && err == Z_BUF_ERROR)
+        left = 1;
+
+    inflateEnd(&stream);
+    return err == Z_STREAM_END ? Z_OK :
+           err == Z_NEED_DICT ? Z_DATA_ERROR  :
+           err == Z_BUF_ERROR && left + stream.avail_out ? Z_DATA_ERROR :
+           err;
+}
+
+int ZEXPORT uncompress (dest, destLen, source, sourceLen)
+    Bytef *dest;
+    uLongf *destLen;
+    const Bytef *source;
+    uLong sourceLen;
+{
+    return uncompress2(dest, destLen, source, &sourceLen);
 }
diff --git a/Modules/zlib/zconf.h b/Modules/zlib/zconf.h
index 9987a77..5e1d68a 100644
--- a/Modules/zlib/zconf.h
+++ b/Modules/zlib/zconf.h
@@ -1,5 +1,5 @@
 /* zconf.h -- configuration of the zlib compression library
- * Copyright (C) 1995-2013 Jean-loup Gailly.
+ * Copyright (C) 1995-2016 Jean-loup Gailly, Mark Adler
  * For conditions of distribution and use, see copyright notice in zlib.h
  */
 
@@ -17,7 +17,7 @@
 #ifdef Z_PREFIX     /* may be set to #if 1 by ./configure */
 #  define Z_PREFIX_SET
 
-/* all linked symbols */
+/* all linked symbols and init macros */
 #  define _dist_code            z__dist_code
 #  define _length_code          z__length_code
 #  define _tr_align             z__tr_align
@@ -29,6 +29,7 @@
 #  define adler32               z_adler32
 #  define adler32_combine       z_adler32_combine
 #  define adler32_combine64     z_adler32_combine64
+#  define adler32_z             z_adler32_z
 #  ifndef Z_SOLO
 #    define compress              z_compress
 #    define compress2             z_compress2
@@ -37,10 +38,14 @@
 #  define crc32                 z_crc32
 #  define crc32_combine         z_crc32_combine
 #  define crc32_combine64       z_crc32_combine64
+#  define crc32_z               z_crc32_z
 #  define deflate               z_deflate
 #  define deflateBound          z_deflateBound
 #  define deflateCopy           z_deflateCopy
 #  define deflateEnd            z_deflateEnd
+#  define deflateGetDictionary  z_deflateGetDictionary
+#  define deflateInit           z_deflateInit
+#  define deflateInit2          z_deflateInit2
 #  define deflateInit2_         z_deflateInit2_
 #  define deflateInit_          z_deflateInit_
 #  define deflateParams         z_deflateParams
@@ -67,6 +72,8 @@
 #    define gzeof                 z_gzeof
 #    define gzerror               z_gzerror
 #    define gzflush               z_gzflush
+#    define gzfread               z_gzfread
+#    define gzfwrite              z_gzfwrite
 #    define gzgetc                z_gzgetc
 #    define gzgetc_               z_gzgetc_
 #    define gzgets                z_gzgets
@@ -78,7 +85,6 @@
 #      define gzopen_w              z_gzopen_w
 #    endif
 #    define gzprintf              z_gzprintf
-#    define gzvprintf             z_gzvprintf
 #    define gzputc                z_gzputc
 #    define gzputs                z_gzputs
 #    define gzread                z_gzread
@@ -89,32 +95,39 @@
 #    define gztell                z_gztell
 #    define gztell64              z_gztell64
 #    define gzungetc              z_gzungetc
+#    define gzvprintf             z_gzvprintf
 #    define gzwrite               z_gzwrite
 #  endif
 #  define inflate               z_inflate
 #  define inflateBack           z_inflateBack
 #  define inflateBackEnd        z_inflateBackEnd
+#  define inflateBackInit       z_inflateBackInit
 #  define inflateBackInit_      z_inflateBackInit_
+#  define inflateCodesUsed      z_inflateCodesUsed
 #  define inflateCopy           z_inflateCopy
 #  define inflateEnd            z_inflateEnd
+#  define inflateGetDictionary  z_inflateGetDictionary
 #  define inflateGetHeader      z_inflateGetHeader
+#  define inflateInit           z_inflateInit
+#  define inflateInit2          z_inflateInit2
 #  define inflateInit2_         z_inflateInit2_
 #  define inflateInit_          z_inflateInit_
 #  define inflateMark           z_inflateMark
 #  define inflatePrime          z_inflatePrime
 #  define inflateReset          z_inflateReset
 #  define inflateReset2         z_inflateReset2
+#  define inflateResetKeep      z_inflateResetKeep
 #  define inflateSetDictionary  z_inflateSetDictionary
-#  define inflateGetDictionary  z_inflateGetDictionary
 #  define inflateSync           z_inflateSync
 #  define inflateSyncPoint      z_inflateSyncPoint
 #  define inflateUndermine      z_inflateUndermine
-#  define inflateResetKeep      z_inflateResetKeep
+#  define inflateValidate       z_inflateValidate
 #  define inflate_copyright     z_inflate_copyright
 #  define inflate_fast          z_inflate_fast
 #  define inflate_table         z_inflate_table
 #  ifndef Z_SOLO
 #    define uncompress            z_uncompress
+#    define uncompress2           z_uncompress2
 #  endif
 #  define zError                z_zError
 #  ifndef Z_SOLO
@@ -224,9 +237,19 @@
 #  define z_const
 #endif
 
-/* Some Mac compilers merge all .h files incorrectly: */
-#if defined(__MWERKS__)||defined(applec)||defined(THINK_C)||defined(__SC__)
-#  define NO_DUMMY_DECL
+#ifdef Z_SOLO
+   typedef unsigned long z_size_t;
+#else
+#  define z_longlong long long
+#  if defined(NO_SIZE_T)
+     typedef unsigned NO_SIZE_T z_size_t;
+#  elif defined(STDC)
+#    include <stddef.h>
+     typedef size_t z_size_t;
+#  else
+     typedef unsigned long z_size_t;
+#  endif
+#  undef z_longlong
 #endif
 
 /* Maximum value for memLevel in deflateInit2 */
@@ -256,7 +279,7 @@
  Of course this will generally degrade compression (there's no free lunch).
 
    The memory requirements for inflate are (in bytes) 1 << windowBits
- that is, 32K for windowBits=15 (default value) plus a few kilobytes
+ that is, 32K for windowBits=15 (default value) plus about 7 kilobytes
  for small objects.
 */
 
diff --git a/Modules/zlib/zconf.h.cmakein b/Modules/zlib/zconf.h.cmakein
index 043019c..a7f24cc 100644
--- a/Modules/zlib/zconf.h.cmakein
+++ b/Modules/zlib/zconf.h.cmakein
@@ -1,5 +1,5 @@
 /* zconf.h -- configuration of the zlib compression library
- * Copyright (C) 1995-2013 Jean-loup Gailly.
+ * Copyright (C) 1995-2016 Jean-loup Gailly, Mark Adler
  * For conditions of distribution and use, see copyright notice in zlib.h
  */
 
@@ -19,7 +19,7 @@
 #ifdef Z_PREFIX     /* may be set to #if 1 by ./configure */
 #  define Z_PREFIX_SET
 
-/* all linked symbols */
+/* all linked symbols and init macros */
 #  define _dist_code            z__dist_code
 #  define _length_code          z__length_code
 #  define _tr_align             z__tr_align
@@ -31,6 +31,7 @@
 #  define adler32               z_adler32
 #  define adler32_combine       z_adler32_combine
 #  define adler32_combine64     z_adler32_combine64
+#  define adler32_z             z_adler32_z
 #  ifndef Z_SOLO
 #    define compress              z_compress
 #    define compress2             z_compress2
@@ -39,10 +40,14 @@
 #  define crc32                 z_crc32
 #  define crc32_combine         z_crc32_combine
 #  define crc32_combine64       z_crc32_combine64
+#  define crc32_z               z_crc32_z
 #  define deflate               z_deflate
 #  define deflateBound          z_deflateBound
 #  define deflateCopy           z_deflateCopy
 #  define deflateEnd            z_deflateEnd
+#  define deflateGetDictionary  z_deflateGetDictionary
+#  define deflateInit           z_deflateInit
+#  define deflateInit2          z_deflateInit2
 #  define deflateInit2_         z_deflateInit2_
 #  define deflateInit_          z_deflateInit_
 #  define deflateParams         z_deflateParams
@@ -69,6 +74,8 @@
 #    define gzeof                 z_gzeof
 #    define gzerror               z_gzerror
 #    define gzflush               z_gzflush
+#    define gzfread               z_gzfread
+#    define gzfwrite              z_gzfwrite
 #    define gzgetc                z_gzgetc
 #    define gzgetc_               z_gzgetc_
 #    define gzgets                z_gzgets
@@ -80,7 +87,6 @@
 #      define gzopen_w              z_gzopen_w
 #    endif
 #    define gzprintf              z_gzprintf
-#    define gzvprintf             z_gzvprintf
 #    define gzputc                z_gzputc
 #    define gzputs                z_gzputs
 #    define gzread                z_gzread
@@ -91,32 +97,39 @@
 #    define gztell                z_gztell
 #    define gztell64              z_gztell64
 #    define gzungetc              z_gzungetc
+#    define gzvprintf             z_gzvprintf
 #    define gzwrite               z_gzwrite
 #  endif
 #  define inflate               z_inflate
 #  define inflateBack           z_inflateBack
 #  define inflateBackEnd        z_inflateBackEnd
+#  define inflateBackInit       z_inflateBackInit
 #  define inflateBackInit_      z_inflateBackInit_
+#  define inflateCodesUsed      z_inflateCodesUsed
 #  define inflateCopy           z_inflateCopy
 #  define inflateEnd            z_inflateEnd
+#  define inflateGetDictionary  z_inflateGetDictionary
 #  define inflateGetHeader      z_inflateGetHeader
+#  define inflateInit           z_inflateInit
+#  define inflateInit2          z_inflateInit2
 #  define inflateInit2_         z_inflateInit2_
 #  define inflateInit_          z_inflateInit_
 #  define inflateMark           z_inflateMark
 #  define inflatePrime          z_inflatePrime
 #  define inflateReset          z_inflateReset
 #  define inflateReset2         z_inflateReset2
+#  define inflateResetKeep      z_inflateResetKeep
 #  define inflateSetDictionary  z_inflateSetDictionary
-#  define inflateGetDictionary  z_inflateGetDictionary
 #  define inflateSync           z_inflateSync
 #  define inflateSyncPoint      z_inflateSyncPoint
 #  define inflateUndermine      z_inflateUndermine
-#  define inflateResetKeep      z_inflateResetKeep
+#  define inflateValidate       z_inflateValidate
 #  define inflate_copyright     z_inflate_copyright
 #  define inflate_fast          z_inflate_fast
 #  define inflate_table         z_inflate_table
 #  ifndef Z_SOLO
 #    define uncompress            z_uncompress
+#    define uncompress2           z_uncompress2
 #  endif
 #  define zError                z_zError
 #  ifndef Z_SOLO
@@ -226,9 +239,19 @@
 #  define z_const
 #endif
 
-/* Some Mac compilers merge all .h files incorrectly: */
-#if defined(__MWERKS__)||defined(applec)||defined(THINK_C)||defined(__SC__)
-#  define NO_DUMMY_DECL
+#ifdef Z_SOLO
+   typedef unsigned long z_size_t;
+#else
+#  define z_longlong long long
+#  if defined(NO_SIZE_T)
+     typedef unsigned NO_SIZE_T z_size_t;
+#  elif defined(STDC)
+#    include <stddef.h>
+     typedef size_t z_size_t;
+#  else
+     typedef unsigned long z_size_t;
+#  endif
+#  undef z_longlong
 #endif
 
 /* Maximum value for memLevel in deflateInit2 */
@@ -258,7 +281,7 @@
  Of course this will generally degrade compression (there's no free lunch).
 
    The memory requirements for inflate are (in bytes) 1 << windowBits
- that is, 32K for windowBits=15 (default value) plus a few kilobytes
+ that is, 32K for windowBits=15 (default value) plus about 7 kilobytes
  for small objects.
 */
 
diff --git a/Modules/zlib/zconf.h.in b/Modules/zlib/zconf.h.in
index 9987a77..5e1d68a 100644
--- a/Modules/zlib/zconf.h.in
+++ b/Modules/zlib/zconf.h.in
@@ -1,5 +1,5 @@
 /* zconf.h -- configuration of the zlib compression library
- * Copyright (C) 1995-2013 Jean-loup Gailly.
+ * Copyright (C) 1995-2016 Jean-loup Gailly, Mark Adler
  * For conditions of distribution and use, see copyright notice in zlib.h
  */
 
@@ -17,7 +17,7 @@
 #ifdef Z_PREFIX     /* may be set to #if 1 by ./configure */
 #  define Z_PREFIX_SET
 
-/* all linked symbols */
+/* all linked symbols and init macros */
 #  define _dist_code            z__dist_code
 #  define _length_code          z__length_code
 #  define _tr_align             z__tr_align
@@ -29,6 +29,7 @@
 #  define adler32               z_adler32
 #  define adler32_combine       z_adler32_combine
 #  define adler32_combine64     z_adler32_combine64
+#  define adler32_z             z_adler32_z
 #  ifndef Z_SOLO
 #    define compress              z_compress
 #    define compress2             z_compress2
@@ -37,10 +38,14 @@
 #  define crc32                 z_crc32
 #  define crc32_combine         z_crc32_combine
 #  define crc32_combine64       z_crc32_combine64
+#  define crc32_z               z_crc32_z
 #  define deflate               z_deflate
 #  define deflateBound          z_deflateBound
 #  define deflateCopy           z_deflateCopy
 #  define deflateEnd            z_deflateEnd
+#  define deflateGetDictionary  z_deflateGetDictionary
+#  define deflateInit           z_deflateInit
+#  define deflateInit2          z_deflateInit2
 #  define deflateInit2_         z_deflateInit2_
 #  define deflateInit_          z_deflateInit_
 #  define deflateParams         z_deflateParams
@@ -67,6 +72,8 @@
 #    define gzeof                 z_gzeof
 #    define gzerror               z_gzerror
 #    define gzflush               z_gzflush
+#    define gzfread               z_gzfread
+#    define gzfwrite              z_gzfwrite
 #    define gzgetc                z_gzgetc
 #    define gzgetc_               z_gzgetc_
 #    define gzgets                z_gzgets
@@ -78,7 +85,6 @@
 #      define gzopen_w              z_gzopen_w
 #    endif
 #    define gzprintf              z_gzprintf
-#    define gzvprintf             z_gzvprintf
 #    define gzputc                z_gzputc
 #    define gzputs                z_gzputs
 #    define gzread                z_gzread
@@ -89,32 +95,39 @@
 #    define gztell                z_gztell
 #    define gztell64              z_gztell64
 #    define gzungetc              z_gzungetc
+#    define gzvprintf             z_gzvprintf
 #    define gzwrite               z_gzwrite
 #  endif
 #  define inflate               z_inflate
 #  define inflateBack           z_inflateBack
 #  define inflateBackEnd        z_inflateBackEnd
+#  define inflateBackInit       z_inflateBackInit
 #  define inflateBackInit_      z_inflateBackInit_
+#  define inflateCodesUsed      z_inflateCodesUsed
 #  define inflateCopy           z_inflateCopy
 #  define inflateEnd            z_inflateEnd
+#  define inflateGetDictionary  z_inflateGetDictionary
 #  define inflateGetHeader      z_inflateGetHeader
+#  define inflateInit           z_inflateInit
+#  define inflateInit2          z_inflateInit2
 #  define inflateInit2_         z_inflateInit2_
 #  define inflateInit_          z_inflateInit_
 #  define inflateMark           z_inflateMark
 #  define inflatePrime          z_inflatePrime
 #  define inflateReset          z_inflateReset
 #  define inflateReset2         z_inflateReset2
+#  define inflateResetKeep      z_inflateResetKeep
 #  define inflateSetDictionary  z_inflateSetDictionary
-#  define inflateGetDictionary  z_inflateGetDictionary
 #  define inflateSync           z_inflateSync
 #  define inflateSyncPoint      z_inflateSyncPoint
 #  define inflateUndermine      z_inflateUndermine
-#  define inflateResetKeep      z_inflateResetKeep
+#  define inflateValidate       z_inflateValidate
 #  define inflate_copyright     z_inflate_copyright
 #  define inflate_fast          z_inflate_fast
 #  define inflate_table         z_inflate_table
 #  ifndef Z_SOLO
 #    define uncompress            z_uncompress
+#    define uncompress2           z_uncompress2
 #  endif
 #  define zError                z_zError
 #  ifndef Z_SOLO
@@ -224,9 +237,19 @@
 #  define z_const
 #endif
 
-/* Some Mac compilers merge all .h files incorrectly: */
-#if defined(__MWERKS__)||defined(applec)||defined(THINK_C)||defined(__SC__)
-#  define NO_DUMMY_DECL
+#ifdef Z_SOLO
+   typedef unsigned long z_size_t;
+#else
+#  define z_longlong long long
+#  if defined(NO_SIZE_T)
+     typedef unsigned NO_SIZE_T z_size_t;
+#  elif defined(STDC)
+#    include <stddef.h>
+     typedef size_t z_size_t;
+#  else
+     typedef unsigned long z_size_t;
+#  endif
+#  undef z_longlong
 #endif
 
 /* Maximum value for memLevel in deflateInit2 */
@@ -256,7 +279,7 @@
  Of course this will generally degrade compression (there's no free lunch).
 
    The memory requirements for inflate are (in bytes) 1 << windowBits
- that is, 32K for windowBits=15 (default value) plus a few kilobytes
+ that is, 32K for windowBits=15 (default value) plus about 7 kilobytes
  for small objects.
 */
 
diff --git a/Modules/zlib/zlib.3 b/Modules/zlib/zlib.3
index 0160e62..bda4eb0 100644
--- a/Modules/zlib/zlib.3
+++ b/Modules/zlib/zlib.3
@@ -1,4 +1,4 @@
-.TH ZLIB 3 "28 Apr 2013"
+.TH ZLIB 3 "15 Jan 2017"
 .SH NAME
 zlib \- compression/decompression library
 .SH SYNOPSIS
@@ -48,32 +48,10 @@ Changes to this version are documented in the file
 that accompanies the source.
 .LP
 .I zlib
-is available in Java using the java.util.zip package:
-.IP
-http://java.sun.com/developer/technicalArticles/Programming/compression/
-.LP
-A Perl interface to
-.IR zlib ,
-written by Paul Marquess (pmqs@cpan.org),
-is available at CPAN (Comprehensive Perl Archive Network) sites,
-including:
-.IP
-http://search.cpan.org/~pmqs/IO-Compress-Zlib/
-.LP
-A Python interface to
-.IR zlib ,
-written by A.M. Kuchling (amk@magnet.com),
-is available in Python 1.5 and later versions:
-.IP
-http://docs.python.org/library/zlib.html
-.LP
-.I zlib
-is built into
-.IR tcl:
-.IP
-http://wiki.tcl.tk/4610
+is built in to many languages and operating systems, including but not limited to
+Java, Python, .NET, PHP, Perl, Ruby, Swift, and Go.
 .LP
-An experimental package to read and write files in .zip format,
+An experimental package to read and write files in the .zip format,
 written on top of
 .I zlib
 by Gilles Vollant (info@winimage.com),
@@ -92,7 +70,9 @@ web site can be found at:
 .IP
 http://zlib.net/
 .LP
-The data format used by the zlib library is described by RFC
+The data format used by the
+.I zlib
+library is described by RFC
 (Request for Comments) 1950 to 1952 in the files:
 .IP
 http://tools.ietf.org/html/rfc1950 (for the zlib header and trailer format)
@@ -124,17 +104,35 @@ http://zlib.net/zlib_faq.html
 before asking for help.
 Send questions and/or comments to zlib@gzip.org,
 or (for the Windows DLL version) to Gilles Vollant (info@winimage.com).
-.SH AUTHORS
-Version 1.2.8
-Copyright (C) 1995-2013 Jean-loup Gailly (jloup@gzip.org)
-and Mark Adler (madler@alumni.caltech.edu).
-.LP
-This software is provided "as-is,"
-without any express or implied warranty.
-In no event will the authors be held liable for any damages
+.SH AUTHORS AND LICENSE
+Version 1.2.11
+.LP
+Copyright (C) 1995-2017 Jean-loup Gailly and Mark Adler
+.LP
+This software is provided 'as-is', without any express or implied
+warranty.  In no event will the authors be held liable for any damages
 arising from the use of this software.
-See the distribution directory with respect to requirements
-governing redistribution.
+.LP
+Permission is granted to anyone to use this software for any purpose,
+including commercial applications, and to alter it and redistribute it
+freely, subject to the following restrictions:
+.LP
+.nr step 1 1
+.IP \n[step]. 3
+The origin of this software must not be misrepresented; you must not
+claim that you wrote the original software. If you use this software
+in a product, an acknowledgment in the product documentation would be
+appreciated but is not required.
+.IP \n+[step].
+Altered source versions must be plainly marked as such, and must not be
+misrepresented as being the original software.
+.IP \n+[step].
+This notice may not be removed or altered from any source distribution.
+.LP
+Jean-loup Gailly        Mark Adler
+.br
+jloup@gzip.org          madler@alumni.caltech.edu
+.LP
 The deflate format used by
 .I zlib
 was defined by Phil Katz.
diff --git a/Modules/zlib/zlib.h b/Modules/zlib/zlib.h
index 3e0c767..f09cdaf 100644
--- a/Modules/zlib/zlib.h
+++ b/Modules/zlib/zlib.h
@@ -1,7 +1,7 @@
 /* zlib.h -- interface of the 'zlib' general purpose compression library
-  version 1.2.8, April 28th, 2013
+  version 1.2.11, January 15th, 2017
 
-  Copyright (C) 1995-2013 Jean-loup Gailly and Mark Adler
+  Copyright (C) 1995-2017 Jean-loup Gailly and Mark Adler
 
   This software is provided 'as-is', without any express or implied
   warranty.  In no event will the authors be held liable for any damages
@@ -37,11 +37,11 @@
 extern "C" {
 #endif
 
-#define ZLIB_VERSION "1.2.8"
-#define ZLIB_VERNUM 0x1280
+#define ZLIB_VERSION "1.2.11"
+#define ZLIB_VERNUM 0x12b0
 #define ZLIB_VER_MAJOR 1
 #define ZLIB_VER_MINOR 2
-#define ZLIB_VER_REVISION 8
+#define ZLIB_VER_REVISION 11
 #define ZLIB_VER_SUBREVISION 0
 
 /*
@@ -65,7 +65,8 @@ extern "C" {
   with "gz".  The gzip format is different from the zlib format.  gzip is a
   gzip wrapper, documented in RFC 1952, wrapped around a deflate stream.
 
-    This library can optionally read and write gzip streams in memory as well.
+    This library can optionally read and write gzip and raw deflate streams in
+  memory as well.
 
     The zlib format was designed to be compact and fast for use in memory
   and on communications channels.  The gzip format was designed for single-
@@ -74,7 +75,7 @@ extern "C" {
 
     The library does not install any signal handler.  The decoder checks
   the consistency of the compressed data, so the library should never crash
-  even in case of corrupted input.
+  even in the case of corrupted input.
 */
 
 typedef voidpf (*alloc_func) OF((voidpf opaque, uInt items, uInt size));
@@ -87,7 +88,7 @@ typedef struct z_stream_s {
     uInt     avail_in;  /* number of bytes available at next_in */
     uLong    total_in;  /* total number of input bytes read so far */
 
-    Bytef    *next_out; /* next output byte should be put there */
+    Bytef    *next_out; /* next output byte will go here */
     uInt     avail_out; /* remaining free space at next_out */
     uLong    total_out; /* total number of bytes output so far */
 
@@ -98,8 +99,9 @@ typedef struct z_stream_s {
     free_func  zfree;   /* used to free the internal state */
     voidpf     opaque;  /* private data object passed to zalloc and zfree */
 
-    int     data_type;  /* best guess about the data type: binary or text */
-    uLong   adler;      /* adler32 value of the uncompressed data */
+    int     data_type;  /* best guess about the data type: binary or text
+                           for deflate, or the decoding state for inflate */
+    uLong   adler;      /* Adler-32 or CRC-32 value of the uncompressed data */
     uLong   reserved;   /* reserved for future use */
 } z_stream;
 
@@ -142,7 +144,9 @@ typedef gz_header FAR *gz_headerp;
 
      zalloc must return Z_NULL if there is not enough memory for the object.
    If zlib is used in a multi-threaded application, zalloc and zfree must be
-   thread safe.
+   thread safe.  In that case, zlib is thread-safe.  When zalloc and zfree are
+   Z_NULL on entry to the initialization function, they are set to internal
+   routines that use the standard library functions malloc() and free().
 
      On 16-bit systems, the functions zalloc and zfree must be able to allocate
    exactly 65536 bytes, but will not be required to allocate more than this if
@@ -155,7 +159,7 @@ typedef gz_header FAR *gz_headerp;
 
      The fields total_in and total_out can be used for statistics or progress
    reports.  After compression, total_in holds the total size of the
-   uncompressed data and may be saved for use in the decompressor (particularly
+   uncompressed data and may be saved for use by the decompressor (particularly
    if the decompressor wants to decompress everything in a single step).
 */
 
@@ -200,7 +204,7 @@ typedef gz_header FAR *gz_headerp;
 #define Z_TEXT     1
 #define Z_ASCII    Z_TEXT   /* for compatibility with 1.2.2 and earlier */
 #define Z_UNKNOWN  2
-/* Possible values of the data_type field (though see inflate()) */
+/* Possible values of the data_type field for deflate() */
 
 #define Z_DEFLATED   8
 /* The deflate compression method (the only one supported in this version) */
@@ -258,11 +262,11 @@ ZEXTERN int ZEXPORT deflate OF((z_streamp strm, int flush));
     enough room in the output buffer), next_in and avail_in are updated and
     processing will resume at this point for the next call of deflate().
 
-  - Provide more output starting at next_out and update next_out and avail_out
+  - Generate more output starting at next_out and update next_out and avail_out
     accordingly.  This action is forced if the parameter flush is non zero.
     Forcing flush frequently degrades the compression ratio, so this parameter
-    should be set only when necessary (in interactive applications).  Some
-    output may be provided even if flush is not set.
+    should be set only when necessary.  Some output may be provided even if
+    flush is zero.
 
     Before the call of deflate(), the application should ensure that at least
   one of the actions is possible, by providing more input and/or consuming more
@@ -271,7 +275,9 @@ ZEXTERN int ZEXPORT deflate OF((z_streamp strm, int flush));
   output when it wants, for example when the output buffer is full (avail_out
   == 0), or after each call of deflate().  If deflate returns Z_OK and with
   zero avail_out, it must be called again after making room in the output
-  buffer because there might be more output pending.
+  buffer because there might be more output pending. See deflatePending(),
+  which can be used if desired to determine whether or not there is more ouput
+  in that case.
 
     Normally the parameter flush is set to Z_NO_FLUSH, which allows deflate to
   decide how much data to accumulate before producing output, in order to
@@ -292,8 +298,8 @@ ZEXTERN int ZEXPORT deflate OF((z_streamp strm, int flush));
   input data so far will be available to the decompressor, as for Z_SYNC_FLUSH.
   This completes the current deflate block and follows it with an empty fixed
   codes block that is 10 bits long.  This assures that enough bytes are output
-  in order for the decompressor to finish the block before the empty fixed code
-  block.
+  in order for the decompressor to finish the block before the empty fixed
+  codes block.
 
     If flush is set to Z_BLOCK, a deflate block is completed and emitted, as
   for Z_SYNC_FLUSH, but the output is not aligned on a byte boundary, and up to
@@ -319,34 +325,38 @@ ZEXTERN int ZEXPORT deflate OF((z_streamp strm, int flush));
 
     If the parameter flush is set to Z_FINISH, pending input is processed,
   pending output is flushed and deflate returns with Z_STREAM_END if there was
-  enough output space; if deflate returns with Z_OK, this function must be
-  called again with Z_FINISH and more output space (updated avail_out) but no
-  more input data, until it returns with Z_STREAM_END or an error.  After
-  deflate has returned Z_STREAM_END, the only possible operations on the stream
-  are deflateReset or deflateEnd.
-
-    Z_FINISH can be used immediately after deflateInit if all the compression
-  is to be done in a single step.  In this case, avail_out must be at least the
-  value returned by deflateBound (see below).  Then deflate is guaranteed to
-  return Z_STREAM_END.  If not enough output space is provided, deflate will
-  not return Z_STREAM_END, and it must be called again as described above.
-
-    deflate() sets strm->adler to the adler32 checksum of all input read
-  so far (that is, total_in bytes).
+  enough output space.  If deflate returns with Z_OK or Z_BUF_ERROR, this
+  function must be called again with Z_FINISH and more output space (updated
+  avail_out) but no more input data, until it returns with Z_STREAM_END or an
+  error.  After deflate has returned Z_STREAM_END, the only possible operations
+  on the stream are deflateReset or deflateEnd.
+
+    Z_FINISH can be used in the first deflate call after deflateInit if all the
+  compression is to be done in a single step.  In order to complete in one
+  call, avail_out must be at least the value returned by deflateBound (see
+  below).  Then deflate is guaranteed to return Z_STREAM_END.  If not enough
+  output space is provided, deflate will not return Z_STREAM_END, and it must
+  be called again as described above.
+
+    deflate() sets strm->adler to the Adler-32 checksum of all input read
+  so far (that is, total_in bytes).  If a gzip stream is being generated, then
+  strm->adler will be the CRC-32 checksum of the input read so far.  (See
+  deflateInit2 below.)
 
     deflate() may update strm->data_type if it can make a good guess about
-  the input data type (Z_BINARY or Z_TEXT).  In doubt, the data is considered
-  binary.  This field is only for information purposes and does not affect the
-  compression algorithm in any manner.
+  the input data type (Z_BINARY or Z_TEXT).  If in doubt, the data is
+  considered binary.  This field is only for information purposes and does not
+  affect the compression algorithm in any manner.
 
     deflate() returns Z_OK if some progress has been made (more input
   processed or more output produced), Z_STREAM_END if all input has been
   consumed and all output has been produced (only when flush is set to
   Z_FINISH), Z_STREAM_ERROR if the stream state was inconsistent (for example
-  if next_in or next_out was Z_NULL), Z_BUF_ERROR if no progress is possible
-  (for example avail_in or avail_out was zero).  Note that Z_BUF_ERROR is not
-  fatal, and deflate() can be called again with more input and more output
-  space to continue compressing.
+  if next_in or next_out was Z_NULL or the state was inadvertently written over
+  by the application), or Z_BUF_ERROR if no progress is possible (for example
+  avail_in or avail_out was zero).  Note that Z_BUF_ERROR is not fatal, and
+  deflate() can be called again with more input and more output space to
+  continue compressing.
 */
 
 
@@ -369,23 +379,21 @@ ZEXTERN int ZEXPORT inflateInit OF((z_streamp strm));
 
      Initializes the internal stream state for decompression.  The fields
    next_in, avail_in, zalloc, zfree and opaque must be initialized before by
-   the caller.  If next_in is not Z_NULL and avail_in is large enough (the
-   exact value depends on the compression method), inflateInit determines the
-   compression method from the zlib header and allocates all data structures
-   accordingly; otherwise the allocation will be deferred to the first call of
-   inflate.  If zalloc and zfree are set to Z_NULL, inflateInit updates them to
-   use default allocation functions.
+   the caller.  In the current version of inflate, the provided input is not
+   read or consumed.  The allocation of a sliding window will be deferred to
+   the first call of inflate (if the decompression does not complete on the
+   first call).  If zalloc and zfree are set to Z_NULL, inflateInit updates
+   them to use default allocation functions.
 
      inflateInit returns Z_OK if success, Z_MEM_ERROR if there was not enough
    memory, Z_VERSION_ERROR if the zlib library version is incompatible with the
    version assumed by the caller, or Z_STREAM_ERROR if the parameters are
    invalid, such as a null pointer to the structure.  msg is set to null if
-   there is no error message.  inflateInit does not perform any decompression
-   apart from possibly reading the zlib header if present: actual decompression
-   will be done by inflate().  (So next_in and avail_in may be modified, but
-   next_out and avail_out are unused and unchanged.) The current implementation
-   of inflateInit() does not process any header information -- that is deferred
-   until inflate() is called.
+   there is no error message.  inflateInit does not perform any decompression.
+   Actual decompression will be done by inflate().  So next_in, and avail_in,
+   next_out, and avail_out are unused and unchanged.  The current
+   implementation of inflateInit() does not process any header information --
+   that is deferred until inflate() is called.
 */
 
 
@@ -401,17 +409,20 @@ ZEXTERN int ZEXPORT inflate OF((z_streamp strm, int flush));
 
   - Decompress more input starting at next_in and update next_in and avail_in
     accordingly.  If not all input can be processed (because there is not
-    enough room in the output buffer), next_in is updated and processing will
-    resume at this point for the next call of inflate().
+    enough room in the output buffer), then next_in and avail_in are updated
+    accordingly, and processing will resume at this point for the next call of
+    inflate().
 
-  - Provide more output starting at next_out and update next_out and avail_out
+  - Generate more output starting at next_out and update next_out and avail_out
     accordingly.  inflate() provides as much output as possible, until there is
     no more input data or no more space in the output buffer (see below about
     the flush parameter).
 
     Before the call of inflate(), the application should ensure that at least
   one of the actions is possible, by providing more input and/or consuming more
-  output, and updating the next_* and avail_* values accordingly.  The
+  output, and updating the next_* and avail_* values accordingly.  If the
+  caller of inflate() does not provide both available input and available
+  output space, it is possible that there will be no progress made.  The
   application can consume the uncompressed output when it wants, for example
   when the output buffer is full (avail_out == 0), or after each call of
   inflate().  If inflate returns Z_OK and with zero avail_out, it must be
@@ -428,7 +439,7 @@ ZEXTERN int ZEXPORT inflate OF((z_streamp strm, int flush));
   gets to the end of that block, or when it runs out of data.
 
     The Z_BLOCK option assists in appending to or combining deflate streams.
-  Also to assist in this, on return inflate() will set strm->data_type to the
+  To assist in this, on return inflate() always sets strm->data_type to the
   number of unused bits in the last byte taken from strm->next_in, plus 64 if
   inflate() is currently decoding the last block in the deflate stream, plus
   128 if inflate() returned immediately after decoding an end-of-block code or
@@ -454,7 +465,7 @@ ZEXTERN int ZEXPORT inflate OF((z_streamp strm, int flush));
   this case all pending input is processed and all pending output is flushed;
   avail_out must be large enough to hold all of the uncompressed data for the
   operation to complete.  (The size of the uncompressed data may have been
-  saved by the compressor for this purpose.) The use of Z_FINISH is not
+  saved by the compressor for this purpose.)  The use of Z_FINISH is not
   required to perform an inflation in one step.  However it may be used to
   inform inflate that a faster approach can be used for the single inflate()
   call.  Z_FINISH also informs inflate to not maintain a sliding window if the
@@ -476,32 +487,33 @@ ZEXTERN int ZEXPORT inflate OF((z_streamp strm, int flush));
   chosen by the compressor and returns Z_NEED_DICT; otherwise it sets
   strm->adler to the Adler-32 checksum of all output produced so far (that is,
   total_out bytes) and returns Z_OK, Z_STREAM_END or an error code as described
-  below.  At the end of the stream, inflate() checks that its computed adler32
+  below.  At the end of the stream, inflate() checks that its computed Adler-32
   checksum is equal to that saved by the compressor and returns Z_STREAM_END
   only if the checksum is correct.
 
     inflate() can decompress and check either zlib-wrapped or gzip-wrapped
   deflate data.  The header type is detected automatically, if requested when
   initializing with inflateInit2().  Any information contained in the gzip
-  header is not retained, so applications that need that information should
-  instead use raw inflate, see inflateInit2() below, or inflateBack() and
-  perform their own processing of the gzip header and trailer.  When processing
+  header is not retained unless inflateGetHeader() is used.  When processing
   gzip-wrapped deflate data, strm->adler32 is set to the CRC-32 of the output
-  producted so far.  The CRC-32 is checked against the gzip trailer.
+  produced so far.  The CRC-32 is checked against the gzip trailer, as is the
+  uncompressed length, modulo 2^32.
 
     inflate() returns Z_OK if some progress has been made (more input processed
   or more output produced), Z_STREAM_END if the end of the compressed data has
   been reached and all uncompressed output has been produced, Z_NEED_DICT if a
   preset dictionary is needed at this point, Z_DATA_ERROR if the input data was
   corrupted (input stream not conforming to the zlib format or incorrect check
-  value), Z_STREAM_ERROR if the stream structure was inconsistent (for example
-  next_in or next_out was Z_NULL), Z_MEM_ERROR if there was not enough memory,
-  Z_BUF_ERROR if no progress is possible or if there was not enough room in the
-  output buffer when Z_FINISH is used.  Note that Z_BUF_ERROR is not fatal, and
+  value, in which case strm->msg points to a string with a more specific
+  error), Z_STREAM_ERROR if the stream structure was inconsistent (for example
+  next_in or next_out was Z_NULL, or the state was inadvertently written over
+  by the application), Z_MEM_ERROR if there was not enough memory, Z_BUF_ERROR
+  if no progress was possible or if there was not enough room in the output
+  buffer when Z_FINISH is used.  Note that Z_BUF_ERROR is not fatal, and
   inflate() can be called again with more input and more output space to
   continue decompressing.  If Z_DATA_ERROR is returned, the application may
   then call inflateSync() to look for a good compression block if a partial
-  recovery of the data is desired.
+  recovery of the data is to be attempted.
 */
 
 
@@ -511,9 +523,8 @@ ZEXTERN int ZEXPORT inflateEnd OF((z_streamp strm));
    This function discards any unprocessed input and does not flush any pending
    output.
 
-     inflateEnd returns Z_OK if success, Z_STREAM_ERROR if the stream state
-   was inconsistent.  In the error case, msg may be set but then points to a
-   static string (which must not be deallocated).
+     inflateEnd returns Z_OK if success, or Z_STREAM_ERROR if the stream state
+   was inconsistent.
 */
 
 
@@ -544,16 +555,29 @@ ZEXTERN int ZEXPORT deflateInit2 OF((z_streamp strm,
    compression at the expense of memory usage.  The default value is 15 if
    deflateInit is used instead.
 
+     For the current implementation of deflate(), a windowBits value of 8 (a
+   window size of 256 bytes) is not supported.  As a result, a request for 8
+   will result in 9 (a 512-byte window).  In that case, providing 8 to
+   inflateInit2() will result in an error when the zlib header with 9 is
+   checked against the initialization of inflate().  The remedy is to not use 8
+   with deflateInit2() with this initialization, or at least in that case use 9
+   with inflateInit2().
+
      windowBits can also be -8..-15 for raw deflate.  In this case, -windowBits
    determines the window size.  deflate() will then generate raw deflate data
-   with no zlib header or trailer, and will not compute an adler32 check value.
+   with no zlib header or trailer, and will not compute a check value.
 
      windowBits can also be greater than 15 for optional gzip encoding.  Add
    16 to windowBits to write a simple gzip header and trailer around the
    compressed data instead of a zlib wrapper.  The gzip header will have no
    file name, no extra data, no comment, no modification time (set to zero), no
-   header crc, and the operating system will be set to 255 (unknown).  If a
-   gzip stream is being written, strm->adler is a crc32 instead of an adler32.
+   header crc, and the operating system will be set to the appropriate value,
+   if the operating system was determined at compile time.  If a gzip stream is
+   being written, strm->adler is a CRC-32 instead of an Adler-32.
+
+     For raw deflate or gzip encoding, a request for a 256-byte window is
+   rejected as invalid, since only the zlib header provides a means of
+   transmitting the window size to the decompressor.
 
      The memLevel parameter specifies how much memory should be allocated
    for the internal compression state.  memLevel=1 uses minimum memory but is
@@ -614,12 +638,12 @@ ZEXTERN int ZEXPORT deflateSetDictionary OF((z_streamp strm,
    addition, the current implementation of deflate will use at most the window
    size minus 262 bytes of the provided dictionary.
 
-     Upon return of this function, strm->adler is set to the adler32 value
+     Upon return of this function, strm->adler is set to the Adler-32 value
    of the dictionary; the decompressor may later use this value to determine
-   which dictionary has been used by the compressor.  (The adler32 value
+   which dictionary has been used by the compressor.  (The Adler-32 value
    applies to the whole dictionary even if only a subset of the dictionary is
    actually used by the compressor.) If a raw deflate was requested, then the
-   adler32 value is not computed and strm->adler is not set.
+   Adler-32 value is not computed and strm->adler is not set.
 
      deflateSetDictionary returns Z_OK if success, or Z_STREAM_ERROR if a
    parameter is invalid (e.g.  dictionary being Z_NULL) or the stream state is
@@ -628,6 +652,28 @@ ZEXTERN int ZEXPORT deflateSetDictionary OF((z_streamp strm,
    not perform any compression: this will be done by deflate().
 */
 
+ZEXTERN int ZEXPORT deflateGetDictionary OF((z_streamp strm,
+                                             Bytef *dictionary,
+                                             uInt  *dictLength));
+/*
+     Returns the sliding dictionary being maintained by deflate.  dictLength is
+   set to the number of bytes in the dictionary, and that many bytes are copied
+   to dictionary.  dictionary must have enough space, where 32768 bytes is
+   always enough.  If deflateGetDictionary() is called with dictionary equal to
+   Z_NULL, then only the dictionary length is returned, and nothing is copied.
+   Similary, if dictLength is Z_NULL, then it is not set.
+
+     deflateGetDictionary() may return a length less than the window size, even
+   when more than the window size in input has been provided. It may return up
+   to 258 bytes less in that case, due to how zlib's implementation of deflate
+   manages the sliding window and lookahead for matches, where matches can be
+   up to 258 bytes long. If the application needs the last window-size bytes of
+   input, then that would need to be saved by the application outside of zlib.
+
+     deflateGetDictionary returns Z_OK on success, or Z_STREAM_ERROR if the
+   stream state is inconsistent.
+*/
+
 ZEXTERN int ZEXPORT deflateCopy OF((z_streamp dest,
                                     z_streamp source));
 /*
@@ -648,10 +694,10 @@ ZEXTERN int ZEXPORT deflateCopy OF((z_streamp dest,
 
 ZEXTERN int ZEXPORT deflateReset OF((z_streamp strm));
 /*
-     This function is equivalent to deflateEnd followed by deflateInit,
-   but does not free and reallocate all the internal compression state.  The
-   stream will keep the same compression level and any other attributes that
-   may have been set by deflateInit2.
+     This function is equivalent to deflateEnd followed by deflateInit, but
+   does not free and reallocate the internal compression state.  The stream
+   will leave the compression level and any other attributes that may have been
+   set unchanged.
 
      deflateReset returns Z_OK if success, or Z_STREAM_ERROR if the source
    stream state was inconsistent (such as zalloc or state being Z_NULL).
@@ -662,20 +708,36 @@ ZEXTERN int ZEXPORT deflateParams OF((z_streamp strm,
                                       int strategy));
 /*
      Dynamically update the compression level and compression strategy.  The
-   interpretation of level and strategy is as in deflateInit2.  This can be
+   interpretation of level and strategy is as in deflateInit2().  This can be
    used to switch between compression and straight copy of the input data, or
    to switch to a different kind of input data requiring a different strategy.
-   If the compression level is changed, the input available so far is
-   compressed with the old level (and may be flushed); the new level will take
-   effect only at the next call of deflate().
-
-     Before the call of deflateParams, the stream state must be set as for
-   a call of deflate(), since the currently available input may have to be
-   compressed and flushed.  In particular, strm->avail_out must be non-zero.
-
-     deflateParams returns Z_OK if success, Z_STREAM_ERROR if the source
-   stream state was inconsistent or if a parameter was invalid, Z_BUF_ERROR if
-   strm->avail_out was zero.
+   If the compression approach (which is a function of the level) or the
+   strategy is changed, and if any input has been consumed in a previous
+   deflate() call, then the input available so far is compressed with the old
+   level and strategy using deflate(strm, Z_BLOCK).  There are three approaches
+   for the compression levels 0, 1..3, and 4..9 respectively.  The new level
+   and strategy will take effect at the next call of deflate().
+
+     If a deflate(strm, Z_BLOCK) is performed by deflateParams(), and it does
+   not have enough output space to complete, then the parameter change will not
+   take effect.  In this case, deflateParams() can be called again with the
+   same parameters and more output space to try again.
+
+     In order to assure a change in the parameters on the first try, the
+   deflate stream should be flushed using deflate() with Z_BLOCK or other flush
+   request until strm.avail_out is not zero, before calling deflateParams().
+   Then no more input data should be provided before the deflateParams() call.
+   If this is done, the old level and strategy will be applied to the data
+   compressed before deflateParams(), and the new level and strategy will be
+   applied to the the data compressed after deflateParams().
+
+     deflateParams returns Z_OK on success, Z_STREAM_ERROR if the source stream
+   state was inconsistent or if a parameter was invalid, or Z_BUF_ERROR if
+   there was not enough output space to complete the compression of the
+   available input data before a change in the strategy or approach.  Note that
+   in the case of a Z_BUF_ERROR, the parameters are not changed.  A return
+   value of Z_BUF_ERROR is not fatal, in which case deflateParams() can be
+   retried with more output space.
 */
 
 ZEXTERN int ZEXPORT deflateTune OF((z_streamp strm,
@@ -793,7 +855,7 @@ ZEXTERN int ZEXPORT inflateInit2 OF((z_streamp strm,
    is for use with other formats that use the deflate compressed data format
    such as zip.  Those formats provide their own check values.  If a custom
    format is developed using the raw deflate format for compressed data, it is
-   recommended that a check value such as an adler32 or a crc32 be applied to
+   recommended that a check value such as an Adler-32 or a CRC-32 be applied to
    the uncompressed data as is done in the zlib, gzip, and zip formats.  For
    most applications, the zlib format should be used as is.  Note that comments
    above on the use in deflateInit2() applies to the magnitude of windowBits.
@@ -802,7 +864,10 @@ ZEXTERN int ZEXPORT inflateInit2 OF((z_streamp strm,
    32 to windowBits to enable zlib and gzip decoding with automatic header
    detection, or add 16 to decode only the gzip format (the zlib format will
    return a Z_DATA_ERROR).  If a gzip stream is being decoded, strm->adler is a
-   crc32 instead of an adler32.
+   CRC-32 instead of an Adler-32.  Unlike the gunzip utility and gzread() (see
+   below), inflate() will not automatically decode concatenated gzip streams.
+   inflate() will return Z_STREAM_END at the end of the gzip stream.  The state
+   would need to be reset to continue decoding a subsequent gzip stream.
 
      inflateInit2 returns Z_OK if success, Z_MEM_ERROR if there was not enough
    memory, Z_VERSION_ERROR if the zlib library version is incompatible with the
@@ -823,7 +888,7 @@ ZEXTERN int ZEXPORT inflateSetDictionary OF((z_streamp strm,
      Initializes the decompression dictionary from the given uncompressed byte
    sequence.  This function must be called immediately after a call of inflate,
    if that call returned Z_NEED_DICT.  The dictionary chosen by the compressor
-   can be determined from the adler32 value returned by that call of inflate.
+   can be determined from the Adler-32 value returned by that call of inflate.
    The compressor and decompressor must use exactly the same dictionary (see
    deflateSetDictionary).  For raw inflate, this function can be called at any
    time to set the dictionary.  If the provided dictionary is smaller than the
@@ -834,7 +899,7 @@ ZEXTERN int ZEXPORT inflateSetDictionary OF((z_streamp strm,
      inflateSetDictionary returns Z_OK if success, Z_STREAM_ERROR if a
    parameter is invalid (e.g.  dictionary being Z_NULL) or the stream state is
    inconsistent, Z_DATA_ERROR if the given dictionary doesn't match the
-   expected one (incorrect adler32 value).  inflateSetDictionary does not
+   expected one (incorrect Adler-32 value).  inflateSetDictionary does not
    perform any decompression: this will be done by subsequent calls of
    inflate().
 */
@@ -892,7 +957,7 @@ ZEXTERN int ZEXPORT inflateCopy OF((z_streamp dest,
 ZEXTERN int ZEXPORT inflateReset OF((z_streamp strm));
 /*
      This function is equivalent to inflateEnd followed by inflateInit,
-   but does not free and reallocate all the internal decompression state.  The
+   but does not free and reallocate the internal decompression state.  The
    stream will keep attributes that may have been set by inflateInit2.
 
      inflateReset returns Z_OK if success, or Z_STREAM_ERROR if the source
@@ -904,7 +969,9 @@ ZEXTERN int ZEXPORT inflateReset2 OF((z_streamp strm,
 /*
      This function is the same as inflateReset, but it also permits changing
    the wrap and window size requests.  The windowBits parameter is interpreted
-   the same as it is for inflateInit2.
+   the same as it is for inflateInit2.  If the window size is changed, then the
+   memory allocated for the window is freed, and the window will be reallocated
+   by inflate() if needed.
 
      inflateReset2 returns Z_OK if success, or Z_STREAM_ERROR if the source
    stream state was inconsistent (such as zalloc or state being Z_NULL), or if
@@ -956,7 +1023,7 @@ ZEXTERN long ZEXPORT inflateMark OF((z_streamp strm));
    location in the input stream can be determined from avail_in and data_type
    as noted in the description for the Z_BLOCK flush parameter for inflate.
 
-     inflateMark returns the value noted above or -1 << 16 if the provided
+     inflateMark returns the value noted above, or -65536 if the provided
    source stream state was inconsistent.
 */
 
@@ -1048,9 +1115,9 @@ ZEXTERN int ZEXPORT inflateBack OF((z_streamp strm,
    This routine would normally be used in a utility that reads zip or gzip
    files and writes out uncompressed files.  The utility would decode the
    header and process the trailer on its own, hence this routine expects only
-   the raw deflate stream to decompress.  This is different from the normal
-   behavior of inflate(), which expects either a zlib or gzip header and
-   trailer around the deflate stream.
+   the raw deflate stream to decompress.  This is different from the default
+   behavior of inflate(), which expects a zlib header and trailer around the
+   deflate stream.
 
      inflateBack() uses two subroutines supplied by the caller that are then
    called by inflateBack() for input and output.  inflateBack() calls those
@@ -1059,12 +1126,12 @@ ZEXTERN int ZEXPORT inflateBack OF((z_streamp strm,
    parameters and return types are defined above in the in_func and out_func
    typedefs.  inflateBack() will call in(in_desc, &buf) which should return the
    number of bytes of provided input, and a pointer to that input in buf.  If
-   there is no input available, in() must return zero--buf is ignored in that
-   case--and inflateBack() will return a buffer error.  inflateBack() will call
-   out(out_desc, buf, len) to write the uncompressed data buf[0..len-1].  out()
-   should return zero on success, or non-zero on failure.  If out() returns
-   non-zero, inflateBack() will return with an error.  Neither in() nor out()
-   are permitted to change the contents of the window provided to
+   there is no input available, in() must return zero -- buf is ignored in that
+   case -- and inflateBack() will return a buffer error.  inflateBack() will
+   call out(out_desc, buf, len) to write the uncompressed data buf[0..len-1].
+   out() should return zero on success, or non-zero on failure.  If out()
+   returns non-zero, inflateBack() will return with an error.  Neither in() nor
+   out() are permitted to change the contents of the window provided to
    inflateBackInit(), which is also the buffer that out() uses to write from.
    The length written by out() will be at most the window size.  Any non-zero
    amount of input may be provided by in().
@@ -1092,7 +1159,7 @@ ZEXTERN int ZEXPORT inflateBack OF((z_streamp strm,
    using strm->next_in which will be Z_NULL only if in() returned an error.  If
    strm->next_in is not Z_NULL, then the Z_BUF_ERROR was due to out() returning
    non-zero.  (in() will always be called before out(), so strm->next_in is
-   assured to be defined if out() returns non-zero.) Note that inflateBack()
+   assured to be defined if out() returns non-zero.)  Note that inflateBack()
    cannot return Z_OK.
 */
 
@@ -1114,7 +1181,7 @@ ZEXTERN uLong ZEXPORT zlibCompileFlags OF((void));
      7.6: size of z_off_t
 
     Compiler, assembler, and debug options:
-     8: DEBUG
+     8: ZLIB_DEBUG
      9: ASMV or ASMINF -- use ASM code
      10: ZLIB_WINAPI -- exported functions use the WINAPI calling convention
      11: 0 (reserved)
@@ -1164,7 +1231,8 @@ ZEXTERN int ZEXPORT compress OF((Bytef *dest,   uLongf *destLen,
    the byte length of the source buffer.  Upon entry, destLen is the total size
    of the destination buffer, which must be at least the value returned by
    compressBound(sourceLen).  Upon exit, destLen is the actual size of the
-   compressed buffer.
+   compressed data.  compress() is equivalent to compress2() with a level
+   parameter of Z_DEFAULT_COMPRESSION.
 
      compress returns Z_OK if success, Z_MEM_ERROR if there was not
    enough memory, Z_BUF_ERROR if there was not enough room in the output
@@ -1180,7 +1248,7 @@ ZEXTERN int ZEXPORT compress2 OF((Bytef *dest,   uLongf *destLen,
    length of the source buffer.  Upon entry, destLen is the total size of the
    destination buffer, which must be at least the value returned by
    compressBound(sourceLen).  Upon exit, destLen is the actual size of the
-   compressed buffer.
+   compressed data.
 
      compress2 returns Z_OK if success, Z_MEM_ERROR if there was not enough
    memory, Z_BUF_ERROR if there was not enough room in the output buffer,
@@ -1203,7 +1271,7 @@ ZEXTERN int ZEXPORT uncompress OF((Bytef *dest,   uLongf *destLen,
    uncompressed data.  (The size of the uncompressed data must have been saved
    previously by the compressor and transmitted to the decompressor by some
    mechanism outside the scope of this compression library.) Upon exit, destLen
-   is the actual size of the uncompressed buffer.
+   is the actual size of the uncompressed data.
 
      uncompress returns Z_OK if success, Z_MEM_ERROR if there was not
    enough memory, Z_BUF_ERROR if there was not enough room in the output
@@ -1212,6 +1280,14 @@ ZEXTERN int ZEXPORT uncompress OF((Bytef *dest,   uLongf *destLen,
    buffer with the uncompressed data up to that point.
 */
 
+ZEXTERN int ZEXPORT uncompress2 OF((Bytef *dest,   uLongf *destLen,
+                                    const Bytef *source, uLong *sourceLen));
+/*
+     Same as uncompress, except that sourceLen is a pointer, where the
+   length of the source is *sourceLen.  On return, *sourceLen is the number of
+   source bytes consumed.
+*/
+
                         /* gzip file access functions */
 
 /*
@@ -1290,10 +1366,9 @@ ZEXTERN int ZEXPORT gzbuffer OF((gzFile file, unsigned size));
    default buffer size is 8192 bytes.  This function must be called after
    gzopen() or gzdopen(), and before any other calls that read or write the
    file.  The buffer memory allocation is always deferred to the first read or
-   write.  Two buffers are allocated, either both of the specified size when
-   writing, or one of the specified size and the other twice that size when
-   reading.  A larger buffer size of, for example, 64K or 128K bytes will
-   noticeably increase the speed of decompression (reading).
+   write.  Three times that size in buffer space is allocated.  A larger buffer
+   size of, for example, 64K or 128K bytes will noticeably increase the speed
+   of decompression (reading).
 
      The new buffer size also affects the maximum length for gzprintf().
 
@@ -1304,10 +1379,12 @@ ZEXTERN int ZEXPORT gzbuffer OF((gzFile file, unsigned size));
 ZEXTERN int ZEXPORT gzsetparams OF((gzFile file, int level, int strategy));
 /*
      Dynamically update the compression level or strategy.  See the description
-   of deflateInit2 for the meaning of these parameters.
+   of deflateInit2 for the meaning of these parameters.  Previously provided
+   data is flushed before the parameter change.
 
-     gzsetparams returns Z_OK if success, or Z_STREAM_ERROR if the file was not
-   opened for writing.
+     gzsetparams returns Z_OK if success, Z_STREAM_ERROR if the file was not
+   opened for writing, Z_ERRNO if there is an error writing the flushed data,
+   or Z_MEM_ERROR if there is a memory allocation error.
 */
 
 ZEXTERN int ZEXPORT gzread OF((gzFile file, voidp buf, unsigned len));
@@ -1335,7 +1412,35 @@ ZEXTERN int ZEXPORT gzread OF((gzFile file, voidp buf, unsigned len));
    case.
 
      gzread returns the number of uncompressed bytes actually read, less than
-   len for end of file, or -1 for error.
+   len for end of file, or -1 for error.  If len is too large to fit in an int,
+   then nothing is read, -1 is returned, and the error state is set to
+   Z_STREAM_ERROR.
+*/
+
+ZEXTERN z_size_t ZEXPORT gzfread OF((voidp buf, z_size_t size, z_size_t nitems,
+                                     gzFile file));
+/*
+     Read up to nitems items of size size from file to buf, otherwise operating
+   as gzread() does.  This duplicates the interface of stdio's fread(), with
+   size_t request and return types.  If the library defines size_t, then
+   z_size_t is identical to size_t.  If not, then z_size_t is an unsigned
+   integer type that can contain a pointer.
+
+     gzfread() returns the number of full items read of size size, or zero if
+   the end of the file was reached and a full item could not be read, or if
+   there was an error.  gzerror() must be consulted if zero is returned in
+   order to determine if there was an error.  If the multiplication of size and
+   nitems overflows, i.e. the product does not fit in a z_size_t, then nothing
+   is read, zero is returned, and the error state is set to Z_STREAM_ERROR.
+
+     In the event that the end of file is reached and only a partial item is
+   available at the end, i.e. the remaining uncompressed data length is not a
+   multiple of size, then the final partial item is nevetheless read into buf
+   and the end-of-file flag is set.  The length of the partial item read is not
+   provided, but could be inferred from the result of gztell().  This behavior
+   is the same as the behavior of fread() implementations in common libraries,
+   but it prevents the direct use of gzfread() to read a concurrently written
+   file, reseting and retrying on end-of-file, when size is not 1.
 */
 
 ZEXTERN int ZEXPORT gzwrite OF((gzFile file,
@@ -1346,19 +1451,33 @@ ZEXTERN int ZEXPORT gzwrite OF((gzFile file,
    error.
 */
 
+ZEXTERN z_size_t ZEXPORT gzfwrite OF((voidpc buf, z_size_t size,
+                                      z_size_t nitems, gzFile file));
+/*
+     gzfwrite() writes nitems items of size size from buf to file, duplicating
+   the interface of stdio's fwrite(), with size_t request and return types.  If
+   the library defines size_t, then z_size_t is identical to size_t.  If not,
+   then z_size_t is an unsigned integer type that can contain a pointer.
+
+     gzfwrite() returns the number of full items written of size size, or zero
+   if there was an error.  If the multiplication of size and nitems overflows,
+   i.e. the product does not fit in a z_size_t, then nothing is written, zero
+   is returned, and the error state is set to Z_STREAM_ERROR.
+*/
+
 ZEXTERN int ZEXPORTVA gzprintf Z_ARG((gzFile file, const char *format, ...));
 /*
      Converts, formats, and writes the arguments to the compressed file under
    control of the format string, as in fprintf.  gzprintf returns the number of
-   uncompressed bytes actually written, or 0 in case of error.  The number of
-   uncompressed bytes written is limited to 8191, or one less than the buffer
-   size given to gzbuffer().  The caller should assure that this limit is not
-   exceeded.  If it is exceeded, then gzprintf() will return an error (0) with
-   nothing written.  In this case, there may also be a buffer overflow with
-   unpredictable consequences, which is possible only if zlib was compiled with
-   the insecure functions sprintf() or vsprintf() because the secure snprintf()
-   or vsnprintf() functions were not available.  This can be determined using
-   zlibCompileFlags().
+   uncompressed bytes actually written, or a negative zlib error code in case
+   of error.  The number of uncompressed bytes written is limited to 8191, or
+   one less than the buffer size given to gzbuffer().  The caller should assure
+   that this limit is not exceeded.  If it is exceeded, then gzprintf() will
+   return an error (0) with nothing written.  In this case, there may also be a
+   buffer overflow with unpredictable consequences, which is possible only if
+   zlib was compiled with the insecure functions sprintf() or vsprintf()
+   because the secure snprintf() or vsnprintf() functions were not available.
+   This can be determined using zlibCompileFlags().
 */
 
 ZEXTERN int ZEXPORT gzputs OF((gzFile file, const char *s));
@@ -1418,7 +1537,7 @@ ZEXTERN int ZEXPORT gzflush OF((gzFile file, int flush));
      If the flush parameter is Z_FINISH, the remaining data is written and the
    gzip stream is completed in the output.  If gzwrite() is called again, a new
    gzip stream will be started in the output.  gzread() is able to read such
-   concatented gzip streams.
+   concatenated gzip streams.
 
      gzflush should be called only when strictly necessary because it will
    degrade compression if called too often.
@@ -1572,7 +1691,7 @@ ZEXTERN uLong ZEXPORT adler32 OF((uLong adler, const Bytef *buf, uInt len));
    return the updated checksum.  If buf is Z_NULL, this function returns the
    required initial value for the checksum.
 
-     An Adler-32 checksum is almost as reliable as a CRC32 but can be computed
+     An Adler-32 checksum is almost as reliable as a CRC-32 but can be computed
    much faster.
 
    Usage example:
@@ -1585,6 +1704,12 @@ ZEXTERN uLong ZEXPORT adler32 OF((uLong adler, const Bytef *buf, uInt len));
      if (adler != original_adler) error();
 */
 
+ZEXTERN uLong ZEXPORT adler32_z OF((uLong adler, const Bytef *buf,
+                                    z_size_t len));
+/*
+     Same as adler32(), but with a size_t length.
+*/
+
 /*
 ZEXTERN uLong ZEXPORT adler32_combine OF((uLong adler1, uLong adler2,
                                           z_off_t len2));
@@ -1614,6 +1739,12 @@ ZEXTERN uLong ZEXPORT crc32   OF((uLong crc, const Bytef *buf, uInt len));
      if (crc != original_crc) error();
 */
 
+ZEXTERN uLong ZEXPORT crc32_z OF((uLong adler, const Bytef *buf,
+                                  z_size_t len));
+/*
+     Same as crc32(), but with a size_t length.
+*/
+
 /*
 ZEXTERN uLong ZEXPORT crc32_combine OF((uLong crc1, uLong crc2, z_off_t len2));
 
@@ -1644,19 +1775,35 @@ ZEXTERN int ZEXPORT inflateBackInit_ OF((z_streamp strm, int windowBits,
                                          unsigned char FAR *window,
                                          const char *version,
                                          int stream_size));
-#define deflateInit(strm, level) \
-        deflateInit_((strm), (level), ZLIB_VERSION, (int)sizeof(z_stream))
-#define inflateInit(strm) \
-        inflateInit_((strm), ZLIB_VERSION, (int)sizeof(z_stream))
-#define deflateInit2(strm, level, method, windowBits, memLevel, strategy) \
-        deflateInit2_((strm),(level),(method),(windowBits),(memLevel),\
-                      (strategy), ZLIB_VERSION, (int)sizeof(z_stream))
-#define inflateInit2(strm, windowBits) \
-        inflateInit2_((strm), (windowBits), ZLIB_VERSION, \
-                      (int)sizeof(z_stream))
-#define inflateBackInit(strm, windowBits, window) \
-        inflateBackInit_((strm), (windowBits), (window), \
-                      ZLIB_VERSION, (int)sizeof(z_stream))
+#ifdef Z_PREFIX_SET
+#  define z_deflateInit(strm, level) \
+          deflateInit_((strm), (level), ZLIB_VERSION, (int)sizeof(z_stream))
+#  define z_inflateInit(strm) \
+          inflateInit_((strm), ZLIB_VERSION, (int)sizeof(z_stream))
+#  define z_deflateInit2(strm, level, method, windowBits, memLevel, strategy) \
+          deflateInit2_((strm),(level),(method),(windowBits),(memLevel),\
+                        (strategy), ZLIB_VERSION, (int)sizeof(z_stream))
+#  define z_inflateInit2(strm, windowBits) \
+          inflateInit2_((strm), (windowBits), ZLIB_VERSION, \
+                        (int)sizeof(z_stream))
+#  define z_inflateBackInit(strm, windowBits, window) \
+          inflateBackInit_((strm), (windowBits), (window), \
+                           ZLIB_VERSION, (int)sizeof(z_stream))
+#else
+#  define deflateInit(strm, level) \
+          deflateInit_((strm), (level), ZLIB_VERSION, (int)sizeof(z_stream))
+#  define inflateInit(strm) \
+          inflateInit_((strm), ZLIB_VERSION, (int)sizeof(z_stream))
+#  define deflateInit2(strm, level, method, windowBits, memLevel, strategy) \
+          deflateInit2_((strm),(level),(method),(windowBits),(memLevel),\
+                        (strategy), ZLIB_VERSION, (int)sizeof(z_stream))
+#  define inflateInit2(strm, windowBits) \
+          inflateInit2_((strm), (windowBits), ZLIB_VERSION, \
+                        (int)sizeof(z_stream))
+#  define inflateBackInit(strm, windowBits, window) \
+          inflateBackInit_((strm), (windowBits), (window), \
+                           ZLIB_VERSION, (int)sizeof(z_stream))
+#endif
 
 #ifndef Z_SOLO
 
@@ -1676,10 +1823,10 @@ ZEXTERN int ZEXPORT gzgetc_ OF((gzFile file));  /* backward compatibility */
 #ifdef Z_PREFIX_SET
 #  undef z_gzgetc
 #  define z_gzgetc(g) \
-          ((g)->have ? ((g)->have--, (g)->pos++, *((g)->next)++) : gzgetc(g))
+          ((g)->have ? ((g)->have--, (g)->pos++, *((g)->next)++) : (gzgetc)(g))
 #else
 #  define gzgetc(g) \
-          ((g)->have ? ((g)->have--, (g)->pos++, *((g)->next)++) : gzgetc(g))
+          ((g)->have ? ((g)->have--, (g)->pos++, *((g)->next)++) : (gzgetc)(g))
 #endif
 
 /* provide 64-bit offset functions if _LARGEFILE64_SOURCE defined, and/or
@@ -1737,19 +1884,16 @@ ZEXTERN int ZEXPORT gzgetc_ OF((gzFile file));  /* backward compatibility */
 
 #endif /* !Z_SOLO */
 
-/* hack for buggy compilers */
-#if !defined(ZUTIL_H) && !defined(NO_DUMMY_DECL)
-    struct internal_state {int dummy;};
-#endif
-
 /* undocumented functions */
 ZEXTERN const char   * ZEXPORT zError           OF((int));
 ZEXTERN int            ZEXPORT inflateSyncPoint OF((z_streamp));
 ZEXTERN const z_crc_t FAR * ZEXPORT get_crc_table    OF((void));
 ZEXTERN int            ZEXPORT inflateUndermine OF((z_streamp, int));
+ZEXTERN int            ZEXPORT inflateValidate OF((z_streamp, int));
+ZEXTERN unsigned long  ZEXPORT inflateCodesUsed OF ((z_streamp));
 ZEXTERN int            ZEXPORT inflateResetKeep OF((z_streamp));
 ZEXTERN int            ZEXPORT deflateResetKeep OF((z_streamp));
-#if defined(_WIN32) && !defined(Z_SOLO)
+#if (defined(_WIN32) || defined(__CYGWIN__)) && !defined(Z_SOLO)
 ZEXTERN gzFile         ZEXPORT gzopen_w OF((const wchar_t *path,
                                             const char *mode));
 #endif
diff --git a/Modules/zlib/zlib.map b/Modules/zlib/zlib.map
index 55c6647..40fa9db 100644
--- a/Modules/zlib/zlib.map
+++ b/Modules/zlib/zlib.map
@@ -1,83 +1,94 @@
-ZLIB_1.2.0 {
-  global:
-    compressBound;
-    deflateBound;
-    inflateBack;
-    inflateBackEnd;
-    inflateBackInit_;
-    inflateCopy;
-  local:
-    deflate_copyright;
-    inflate_copyright;
-    inflate_fast;
-    inflate_table;
-    zcalloc;
-    zcfree;
-    z_errmsg;
-    gz_error;
-    gz_intmax;
-    _*;
-};
-
-ZLIB_1.2.0.2 {
-    gzclearerr;
-    gzungetc;
-    zlibCompileFlags;
-} ZLIB_1.2.0;
-
-ZLIB_1.2.0.8 {
-    deflatePrime;
-} ZLIB_1.2.0.2;
-
-ZLIB_1.2.2 {
-    adler32_combine;
-    crc32_combine;
-    deflateSetHeader;
-    inflateGetHeader;
-} ZLIB_1.2.0.8;
-
-ZLIB_1.2.2.3 {
-    deflateTune;
-    gzdirect;
-} ZLIB_1.2.2;
-
-ZLIB_1.2.2.4 {
-    inflatePrime;
-} ZLIB_1.2.2.3;
-
-ZLIB_1.2.3.3 {
-    adler32_combine64;
-    crc32_combine64;
-    gzopen64;
-    gzseek64;
-    gztell64;
-    inflateUndermine;
-} ZLIB_1.2.2.4;
-
-ZLIB_1.2.3.4 {
-    inflateReset2;
-    inflateMark;
-} ZLIB_1.2.3.3;
-
-ZLIB_1.2.3.5 {
-    gzbuffer;
-    gzoffset;
-    gzoffset64;
-    gzclose_r;
-    gzclose_w;
-} ZLIB_1.2.3.4;
-
-ZLIB_1.2.5.1 {
-    deflatePending;
-} ZLIB_1.2.3.5;
-
-ZLIB_1.2.5.2 {
-    deflateResetKeep;
-    gzgetc_;
-    inflateResetKeep;
-} ZLIB_1.2.5.1;
-
-ZLIB_1.2.7.1 {
-    inflateGetDictionary;
-    gzvprintf;
-} ZLIB_1.2.5.2;
+ZLIB_1.2.0 {
+  global:
+    compressBound;
+    deflateBound;
+    inflateBack;
+    inflateBackEnd;
+    inflateBackInit_;
+    inflateCopy;
+  local:
+    deflate_copyright;
+    inflate_copyright;
+    inflate_fast;
+    inflate_table;
+    zcalloc;
+    zcfree;
+    z_errmsg;
+    gz_error;
+    gz_intmax;
+    _*;
+};
+
+ZLIB_1.2.0.2 {
+    gzclearerr;
+    gzungetc;
+    zlibCompileFlags;
+} ZLIB_1.2.0;
+
+ZLIB_1.2.0.8 {
+    deflatePrime;
+} ZLIB_1.2.0.2;
+
+ZLIB_1.2.2 {
+    adler32_combine;
+    crc32_combine;
+    deflateSetHeader;
+    inflateGetHeader;
+} ZLIB_1.2.0.8;
+
+ZLIB_1.2.2.3 {
+    deflateTune;
+    gzdirect;
+} ZLIB_1.2.2;
+
+ZLIB_1.2.2.4 {
+    inflatePrime;
+} ZLIB_1.2.2.3;
+
+ZLIB_1.2.3.3 {
+    adler32_combine64;
+    crc32_combine64;
+    gzopen64;
+    gzseek64;
+    gztell64;
+    inflateUndermine;
+} ZLIB_1.2.2.4;
+
+ZLIB_1.2.3.4 {
+    inflateReset2;
+    inflateMark;
+} ZLIB_1.2.3.3;
+
+ZLIB_1.2.3.5 {
+    gzbuffer;
+    gzoffset;
+    gzoffset64;
+    gzclose_r;
+    gzclose_w;
+} ZLIB_1.2.3.4;
+
+ZLIB_1.2.5.1 {
+    deflatePending;
+} ZLIB_1.2.3.5;
+
+ZLIB_1.2.5.2 {
+    deflateResetKeep;
+    gzgetc_;
+    inflateResetKeep;
+} ZLIB_1.2.5.1;
+
+ZLIB_1.2.7.1 {
+    inflateGetDictionary;
+    gzvprintf;
+} ZLIB_1.2.5.2;
+
+ZLIB_1.2.9 {
+    inflateCodesUsed;
+    inflateValidate;
+    uncompress2;
+    gzfread;
+    gzfwrite;
+    deflateGetDictionary;
+    adler32_z;
+    crc32_z;
+} ZLIB_1.2.7.1;
diff --git a/Modules/zlib/zutil.c b/Modules/zlib/zutil.c
index 23d2ebe..a76c6b0 100644
--- a/Modules/zlib/zutil.c
+++ b/Modules/zlib/zutil.c
@@ -1,5 +1,5 @@
 /* zutil.c -- target dependent utility functions for the compression library
- * Copyright (C) 1995-2005, 2010, 2011, 2012 Jean-loup Gailly.
+ * Copyright (C) 1995-2017 Jean-loup Gailly
  * For conditions of distribution and use, see copyright notice in zlib.h
  */
 
@@ -10,21 +10,18 @@
 #  include "gzguts.h"
 #endif
 
-#ifndef NO_DUMMY_DECL
-struct internal_state      {int dummy;}; /* for buggy compilers */
-#endif
-
 z_const char * const z_errmsg[10] = {
-"need dictionary",     /* Z_NEED_DICT       2  */
-"stream end",          /* Z_STREAM_END      1  */
-"",                    /* Z_OK              0  */
-"file error",          /* Z_ERRNO         (-1) */
-"stream error",        /* Z_STREAM_ERROR  (-2) */
-"data error",          /* Z_DATA_ERROR    (-3) */
-"insufficient memory", /* Z_MEM_ERROR     (-4) */
-"buffer error",        /* Z_BUF_ERROR     (-5) */
-"incompatible version",/* Z_VERSION_ERROR (-6) */
-""};
+    (z_const char *)"need dictionary",     /* Z_NEED_DICT       2  */
+    (z_const char *)"stream end",          /* Z_STREAM_END      1  */
+    (z_const char *)"",                    /* Z_OK              0  */
+    (z_const char *)"file error",          /* Z_ERRNO         (-1) */
+    (z_const char *)"stream error",        /* Z_STREAM_ERROR  (-2) */
+    (z_const char *)"data error",          /* Z_DATA_ERROR    (-3) */
+    (z_const char *)"insufficient memory", /* Z_MEM_ERROR     (-4) */
+    (z_const char *)"buffer error",        /* Z_BUF_ERROR     (-5) */
+    (z_const char *)"incompatible version",/* Z_VERSION_ERROR (-6) */
+    (z_const char *)""
+};
 
 
 const char * ZEXPORT zlibVersion()
@@ -61,7 +58,7 @@ uLong ZEXPORT zlibCompileFlags()
     case 8:     flags += 2 << 6;        break;
     default:    flags += 3 << 6;
     }
-#ifdef DEBUG
+#ifdef ZLIB_DEBUG
     flags += 1 << 8;
 #endif
 #if defined(ASMV) || defined(ASMINF)
@@ -115,8 +112,8 @@ uLong ZEXPORT zlibCompileFlags()
     return flags;
 }
 
-#ifdef DEBUG
-
+#ifdef ZLIB_DEBUG
+#include <stdlib.h>
 #  ifndef verbose
 #    define verbose 0
 #  endif
@@ -219,9 +216,11 @@ local ptr_table table[MAX_PTR];
 
 voidpf ZLIB_INTERNAL zcalloc (voidpf opaque, unsigned items, unsigned size)
 {
-    voidpf buf = opaque; /* just to make some compilers happy */
+    voidpf buf;
     ulg bsize = (ulg)items*size;
 
+    (void)opaque;
+
     /* If we allocate less than 65520 bytes, we assume that farmalloc
      * will return a usable pointer which doesn't have to be normalized.
      */
@@ -244,6 +243,9 @@ voidpf ZLIB_INTERNAL zcalloc (voidpf opaque, unsigned items, unsigned size)
 void ZLIB_INTERNAL zcfree (voidpf opaque, voidpf ptr)
 {
     int n;
+
+    (void)opaque;
+
     if (*(ush*)&ptr != 0) { /* object < 64K */
         farfree(ptr);
         return;
@@ -259,7 +261,6 @@ void ZLIB_INTERNAL zcfree (voidpf opaque, voidpf ptr)
         next_ptr--;
         return;
     }
-    ptr = opaque; /* just to make some compilers happy */
     Assert(0, "zcfree: ptr not found");
 }
 
@@ -278,13 +279,13 @@ void ZLIB_INTERNAL zcfree (voidpf opaque, voidpf ptr)
 
 voidpf ZLIB_INTERNAL zcalloc (voidpf opaque, uInt items, uInt size)
 {
-    if (opaque) opaque = 0; /* to make compiler happy */
+    (void)opaque;
     return _halloc((long)items, size);
 }
 
 void ZLIB_INTERNAL zcfree (voidpf opaque, voidpf ptr)
 {
-    if (opaque) opaque = 0; /* to make compiler happy */
+    (void)opaque;
     _hfree(ptr);
 }
 
@@ -306,7 +307,7 @@ voidpf ZLIB_INTERNAL zcalloc (opaque, items, size)
     unsigned items;
     unsigned size;
 {
-    if (opaque) items += size - size; /* make compiler happy */
+    (void)opaque;
     return sizeof(uInt) > 2 ? (voidpf)malloc(items * size) :
                               (voidpf)calloc(items, size);
 }
@@ -315,8 +316,8 @@ void ZLIB_INTERNAL zcfree (opaque, ptr)
     voidpf opaque;
     voidpf ptr;
 {
+    (void)opaque;
     free(ptr);
-    if (opaque) return; /* make compiler happy */
 }
 
 #endif /* MY_ZCALLOC */
diff --git a/Modules/zlib/zutil.h b/Modules/zlib/zutil.h
index 24ab06b..b079ea6 100644
--- a/Modules/zlib/zutil.h
+++ b/Modules/zlib/zutil.h
@@ -1,5 +1,5 @@
 /* zutil.h -- internal interface and configuration of the compression library
- * Copyright (C) 1995-2013 Jean-loup Gailly.
+ * Copyright (C) 1995-2016 Jean-loup Gailly, Mark Adler
  * For conditions of distribution and use, see copyright notice in zlib.h
  */
 
@@ -36,7 +36,9 @@
 #ifndef local
 #  define local static
 #endif
-/* compile with -Dlocal if your debugger can't find static symbols */
+/* since "static" is used to mean two completely different things in C, we
+   define "local" for the non-static meaning of "static", for readability
+   (compile with -Dlocal if your debugger can't find static symbols) */
 
 typedef unsigned char  uch;
 typedef uch FAR uchf;
@@ -98,28 +100,38 @@ extern z_const char * const z_errmsg[10]; /* indexed by 2-zlib_error */
 #endif
 
 #ifdef AMIGA
-#  define OS_CODE  0x01
+#  define OS_CODE  1
 #endif
 
 #if defined(VAXC) || defined(VMS)
-#  define OS_CODE  0x02
+#  define OS_CODE  2
 #  define F_OPEN(name, mode) \
      fopen((name), (mode), "mbc=60", "ctx=stm", "rfm=fix", "mrs=512")
 #endif
 
+#ifdef __370__
+#  if __TARGET_LIB__ < 0x20000000
+#    define OS_CODE 4
+#  elif __TARGET_LIB__ < 0x40000000
+#    define OS_CODE 11
+#  else
+#    define OS_CODE 8
+#  endif
+#endif
+
 #if defined(ATARI) || defined(atarist)
-#  define OS_CODE  0x05
+#  define OS_CODE  5
 #endif
 
 #ifdef OS2
-#  define OS_CODE  0x06
+#  define OS_CODE  6
 #  if defined(M_I86) && !defined(Z_SOLO)
 #    include <malloc.h>
 #  endif
 #endif
 
 #if defined(MACOS) || defined(TARGET_OS_MAC)
-#  define OS_CODE  0x07
+#  define OS_CODE  7
 #  ifndef Z_SOLO
 #    if defined(__MWERKS__) && __dest_os != __be_os && __dest_os != __win32_os
 #      include <unix.h> /* for fdopen */
@@ -131,18 +143,24 @@ extern z_const char * const z_errmsg[10]; /* indexed by 2-zlib_error */
 #  endif
 #endif
 
-#ifdef TOPS20
-#  define OS_CODE  0x0a
+#ifdef __acorn
+#  define OS_CODE 13
 #endif
 
-#ifdef WIN32
-#  ifndef __CYGWIN__  /* Cygwin is Unix, not Win32 */
-#    define OS_CODE  0x0b
-#  endif
+#if defined(WIN32) && !defined(__CYGWIN__)
+#  define OS_CODE  10
+#endif
+
+#ifdef _BEOS_
+#  define OS_CODE  16
+#endif
+
+#ifdef __TOS_OS400__
+#  define OS_CODE 18
 #endif
 
-#ifdef __50SERIES /* Prime/PRIMOS */
-#  define OS_CODE  0x0f
+#ifdef __APPLE__
+#  define OS_CODE 19
 #endif
 
 #if defined(_BEOS_) || defined(RISCOS)
@@ -177,7 +195,7 @@ extern z_const char * const z_errmsg[10]; /* indexed by 2-zlib_error */
         /* common defaults */
 
 #ifndef OS_CODE
-#  define OS_CODE  0x03  /* assume Unix */
+#  define OS_CODE  3     /* assume Unix */
 #endif
 
 #ifndef F_OPEN
@@ -216,7 +234,7 @@ extern z_const char * const z_errmsg[10]; /* indexed by 2-zlib_error */
 #endif
 
 /* Diagnostic functions */
-#ifdef DEBUG
+#ifdef ZLIB_DEBUG
 #  include <stdio.h>
    extern int ZLIB_INTERNAL z_verbose;
    extern void ZLIB_INTERNAL z_error OF((char *m));
diff --git a/Objects/bytearrayobject.c b/Objects/bytearrayobject.c
index 3fad6d8..85c6d1b 100644
--- a/Objects/bytearrayobject.c
+++ b/Objects/bytearrayobject.c
@@ -254,7 +254,7 @@ PyByteArray_Concat(PyObject *a, PyObject *b)
     if (PyObject_GetBuffer(a, &va, PyBUF_SIMPLE) != 0 ||
         PyObject_GetBuffer(b, &vb, PyBUF_SIMPLE) != 0) {
             PyErr_Format(PyExc_TypeError, "can't concat %.100s to %.100s",
-                         Py_TYPE(a)->tp_name, Py_TYPE(b)->tp_name);
+                         Py_TYPE(b)->tp_name, Py_TYPE(a)->tp_name);
             goto done;
     }
 
@@ -427,11 +427,11 @@ bytearray_subscript(PyByteArrayObject *self, PyObject *index)
     }
     else if (PySlice_Check(index)) {
         Py_ssize_t start, stop, step, slicelength, cur, i;
-        if (PySlice_GetIndicesEx(index,
-                                 PyByteArray_GET_SIZE(self),
-                                 &start, &stop, &step, &slicelength) < 0) {
+        if (PySlice_Unpack(index, &start, &stop, &step) < 0) {
             return NULL;
         }
+        slicelength = PySlice_AdjustIndices(PyByteArray_GET_SIZE(self),
+                                            &start, &stop, step);
 
         if (slicelength <= 0)
             return PyByteArray_FromStringAndSize("", 0);
@@ -657,11 +657,11 @@ bytearray_ass_subscript(PyByteArrayObject *self, PyObject *index, PyObject *valu
         }
     }
     else if (PySlice_Check(index)) {
-        if (PySlice_GetIndicesEx(index,
-                                 PyByteArray_GET_SIZE(self),
-                                 &start, &stop, &step, &slicelen) < 0) {
+        if (PySlice_Unpack(index, &start, &stop, &step) < 0) {
             return -1;
         }
+        slicelen = PySlice_AdjustIndices(PyByteArray_GET_SIZE(self), &start,
+                                         &stop, step);
     }
     else {
         PyErr_Format(PyExc_TypeError,
diff --git a/Objects/bytesobject.c b/Objects/bytesobject.c
index 673bb00..77dd45e 100644
--- a/Objects/bytesobject.c
+++ b/Objects/bytesobject.c
@@ -1272,7 +1272,7 @@ bytes_concat(PyObject *a, PyObject *b)
     if (PyObject_GetBuffer(a, &va, PyBUF_SIMPLE) != 0 ||
         PyObject_GetBuffer(b, &vb, PyBUF_SIMPLE) != 0) {
         PyErr_Format(PyExc_TypeError, "can't concat %.100s to %.100s",
-                     Py_TYPE(a)->tp_name, Py_TYPE(b)->tp_name);
+                     Py_TYPE(b)->tp_name, Py_TYPE(a)->tp_name);
         goto done;
     }
 
@@ -1534,11 +1534,11 @@ bytes_subscript(PyBytesObject* self, PyObject* item)
         char* result_buf;
         PyObject* result;
 
-        if (PySlice_GetIndicesEx(item,
-                         PyBytes_GET_SIZE(self),
-                         &start, &stop, &step, &slicelength) < 0) {
+        if (PySlice_Unpack(item, &start, &stop, &step) < 0) {
             return NULL;
         }
+        slicelength = PySlice_AdjustIndices(PyBytes_GET_SIZE(self), &start,
+                                            &stop, step);
 
         if (slicelength <= 0) {
             return PyBytes_FromStringAndSize("", 0);
diff --git a/Objects/codeobject.c b/Objects/codeobject.c
index c334626..2f1bef2 100644
--- a/Objects/codeobject.c
+++ b/Objects/codeobject.c
@@ -521,7 +521,7 @@ _PyCode_ConstantKey(PyObject *op)
             PyTuple_SET_ITEM(tuple, i, item_key);
         }
 
-        key = PyTuple_Pack(3, Py_TYPE(op), op, tuple);
+        key = PyTuple_Pack(2, tuple, op);
         Py_DECREF(tuple);
     }
     else if (PyFrozenSet_CheckExact(op)) {
@@ -555,7 +555,7 @@ _PyCode_ConstantKey(PyObject *op)
         if (set == NULL)
             return NULL;
 
-        key = PyTuple_Pack(3, Py_TYPE(op), op, set);
+        key = PyTuple_Pack(2, set, op);
         Py_DECREF(set);
         return key;
     }
@@ -566,7 +566,7 @@ _PyCode_ConstantKey(PyObject *op)
         if (obj_id == NULL)
             return NULL;
 
-        key = PyTuple_Pack(3, Py_TYPE(op), op, obj_id);
+        key = PyTuple_Pack(2, obj_id, op);
         Py_DECREF(obj_id);
     }
     return key;
diff --git a/Objects/complexobject.c b/Objects/complexobject.c
index d82c5eb..606c101 100644
--- a/Objects/complexobject.c
+++ b/Objects/complexobject.c
@@ -1014,11 +1014,11 @@ complex_new(PyTypeObject *type, PyObject *args, PyObject *kwds)
             return NULL;
         }
         cr.real = PyFloat_AsDouble(tmp);
-        cr.imag = 0.0; /* Shut up compiler warning */
+        cr.imag = 0.0;
         Py_DECREF(tmp);
     }
     if (i == NULL) {
-        ci.real = 0.0;
+        ci.real = cr.imag;
     }
     else if (PyComplex_Check(i)) {
         ci = ((PyComplexObject*)i)->cval;
@@ -1040,7 +1040,7 @@ complex_new(PyTypeObject *type, PyObject *args, PyObject *kwds)
     if (ci_is_complex) {
         cr.real -= ci.imag;
     }
-    if (cr_is_complex) {
+    if (cr_is_complex && i != NULL) {
         ci.real += cr.imag;
     }
     return complex_subtype_from_doubles(type, cr.real, ci.real);
diff --git a/Objects/dictobject.c b/Objects/dictobject.c
index 747d218..ff77bee 100644
--- a/Objects/dictobject.c
+++ b/Objects/dictobject.c
@@ -429,7 +429,7 @@ Christian Tismer.
 lookdict() is general-purpose, and may return NULL if (and only if) a
 comparison raises an exception (this was new in Python 2.5).
 lookdict_unicode() below is specialized to string keys, comparison of which can
-never raise an exception; that function can never return NULL.
+never raise an exception; that function must not return NULL for string key.
 lookdict_unicode_nodummy is further specialized for string keys that cannot be
 the <dummy> value.
 For both, when the key isn't found a PyDictEntry* is returned
@@ -787,56 +787,61 @@ insertdict(PyDictObject *mp, PyObject *key, Py_hash_t hash, PyObject *value)
     PyDictKeyEntry *ep;
     assert(key != dummy);
 
+    Py_INCREF(key);
+    Py_INCREF(value);
     if (mp->ma_values != NULL && !PyUnicode_CheckExact(key)) {
         if (insertion_resize(mp) < 0)
-            return -1;
+            goto Fail;
     }
 
     ep = mp->ma_keys->dk_lookup(mp, key, hash, &value_addr);
-    if (ep == NULL) {
-        return -1;
-    }
+    if (ep == NULL)
+        goto Fail;
+
     assert(PyUnicode_CheckExact(key) || mp->ma_keys->dk_lookup == lookdict);
-    Py_INCREF(value);
     MAINTAIN_TRACKING(mp, key, value);
     old_value = *value_addr;
     if (old_value != NULL) {
         assert(ep->me_key != NULL && ep->me_key != dummy);
         *value_addr = value;
         Py_DECREF(old_value); /* which **CAN** re-enter (see issue #22653) */
+        Py_DECREF(key);
     }
     else {
         if (ep->me_key == NULL) {
-            Py_INCREF(key);
             if (mp->ma_keys->dk_usable <= 0) {
                 /* Need to resize. */
-                if (insertion_resize(mp) < 0) {
-                    Py_DECREF(key);
-                    Py_DECREF(value);
-                    return -1;
-                }
+                if (insertion_resize(mp) < 0)
+                    goto Fail;
                 ep = find_empty_slot(mp, key, hash, &value_addr);
             }
+            mp->ma_used++;
+            *value_addr = value;
             mp->ma_keys->dk_usable--;
             assert(mp->ma_keys->dk_usable >= 0);
             ep->me_key = key;
             ep->me_hash = hash;
+            assert(ep->me_key != NULL && ep->me_key != dummy);
         }
         else {
+            mp->ma_used++;
+            *value_addr = value;
             if (ep->me_key == dummy) {
-                Py_INCREF(key);
                 ep->me_key = key;
                 ep->me_hash = hash;
                 Py_DECREF(dummy);
             } else {
                 assert(_PyDict_HasSplitTable(mp));
+                Py_DECREF(key);
             }
         }
-        mp->ma_used++;
-        *value_addr = value;
-        assert(ep->me_key != NULL && ep->me_key != dummy);
     }
     return 0;
+
+Fail:
+    Py_DECREF(value);
+    Py_DECREF(key);
+    return -1;
 }
 
 /*
@@ -1475,9 +1480,8 @@ _PyDict_Next(PyObject *op, Py_ssize_t *ppos, PyObject **pkey,
 
 /* Internal version of dict.pop(). */
 PyObject *
-_PyDict_Pop(PyDictObject *mp, PyObject *key, PyObject *deflt)
+_PyDict_Pop_KnownHash(PyDictObject *mp, PyObject *key, Py_hash_t hash, PyObject *deflt)
 {
-    Py_hash_t hash;
     PyObject *old_value, *old_key;
     PyDictKeyEntry *ep;
     PyObject **value_addr;
@@ -1490,12 +1494,6 @@ _PyDict_Pop(PyDictObject *mp, PyObject *key, PyObject *deflt)
         _PyErr_SetKeyError(key);
         return NULL;
     }
-    if (!PyUnicode_CheckExact(key) ||
-        (hash = ((PyASCIIObject *) key)->hash) == -1) {
-        hash = PyObject_Hash(key);
-        if (hash == -1)
-            return NULL;
-    }
     ep = (mp->ma_keys->dk_lookup)(mp, key, hash, &value_addr);
     if (ep == NULL)
         return NULL;
@@ -1520,6 +1518,28 @@ _PyDict_Pop(PyDictObject *mp, PyObject *key, PyObject *deflt)
     return old_value;
 }
 
+PyObject *
+_PyDict_Pop(PyDictObject *mp, PyObject *key, PyObject *deflt)
+{
+    Py_hash_t hash;
+
+    if (mp->ma_used == 0) {
+        if (deflt) {
+            Py_INCREF(deflt);
+            return deflt;
+        }
+        _PyErr_SetKeyError(key);
+        return NULL;
+    }
+    if (!PyUnicode_CheckExact(key) ||
+        (hash = ((PyASCIIObject *) key)->hash) == -1) {
+        hash = PyObject_Hash(key);
+        if (hash == -1)
+            return NULL;
+    }
+    return _PyDict_Pop_KnownHash(mp, key, hash, deflt);
+}
+
 /* Internal version of dict.from_keys().  It is subclass-friendly. */
 PyObject *
 _PyDict_FromKeys(PyObject *cls, PyObject *iterable, PyObject *value)
@@ -2042,11 +2062,18 @@ PyDict_MergeFromSeq2(PyObject *d, PyObject *seq2, int override)
         /* Update/merge with this (key, value) pair. */
         key = PySequence_Fast_GET_ITEM(fast, 0);
         value = PySequence_Fast_GET_ITEM(fast, 1);
+        Py_INCREF(key);
+        Py_INCREF(value);
         if (override || PyDict_GetItem(d, key) == NULL) {
             int status = PyDict_SetItem(d, key, value);
-            if (status < 0)
+            if (status < 0) {
+                Py_DECREF(key);
+                Py_DECREF(value);
                 goto Fail;
+            }
         }
+        Py_DECREF(key);
+        Py_DECREF(value);
         Py_DECREF(fast);
         Py_DECREF(item);
     }
@@ -2305,14 +2332,15 @@ dict_equal(PyDictObject *a, PyDictObject *b)
                 bval = NULL;
             else
                 bval = *vaddr;
-            Py_DECREF(key);
             if (bval == NULL) {
+                Py_DECREF(key);
                 Py_DECREF(aval);
                 if (PyErr_Occurred())
                     return -1;
                 return 0;
             }
             cmp = PyObject_RichCompareBool(aval, bval, Py_EQ);
+            Py_DECREF(key);
             Py_DECREF(aval);
             if (cmp <= 0)  /* error or not equal */
                 return cmp;
@@ -3137,7 +3165,7 @@ PyTypeObject PyDictIterValue_Type = {
 
 static PyObject *dictiter_iternextitem(dictiterobject *di)
 {
-    PyObject *key, *value, *result = di->di_result;
+    PyObject *key, *value, *result;
     Py_ssize_t i, mask, offset;
     PyDictObject *d = di->di_dict;
     PyObject **value_ptr;
@@ -3173,22 +3201,27 @@ static PyObject *dictiter_iternextitem(dictiterobject *di)
     if (i > mask)
         goto fail;
 
-    if (result->ob_refcnt == 1) {
+    di->len--;
+    key = d->ma_keys->dk_entries[i].me_key;
+    value = *value_ptr;
+    Py_INCREF(key);
+    Py_INCREF(value);
+    result = di->di_result;
+    if (Py_REFCNT(result) == 1) {
+        PyObject *oldkey = PyTuple_GET_ITEM(result, 0);
+        PyObject *oldvalue = PyTuple_GET_ITEM(result, 1);
+        PyTuple_SET_ITEM(result, 0, key);  /* steals reference */
+        PyTuple_SET_ITEM(result, 1, value);  /* steals reference */
         Py_INCREF(result);
-        Py_DECREF(PyTuple_GET_ITEM(result, 0));
-        Py_DECREF(PyTuple_GET_ITEM(result, 1));
+        Py_DECREF(oldkey);
+        Py_DECREF(oldvalue);
     } else {
         result = PyTuple_New(2);
         if (result == NULL)
             return NULL;
+        PyTuple_SET_ITEM(result, 0, key);  /* steals reference */
+        PyTuple_SET_ITEM(result, 1, value);  /* steals reference */
     }
-    di->len--;
-    key = d->ma_keys->dk_entries[i].me_key;
-    value = *value_ptr;
-    Py_INCREF(key);
-    Py_INCREF(value);
-    PyTuple_SET_ITEM(result, 0, key);  /* steals reference */
-    PyTuple_SET_ITEM(result, 1, value);  /* steals reference */
     return result;
 
 fail:
@@ -3681,6 +3714,7 @@ dictitems_iter(_PyDictViewObject *dv)
 static int
 dictitems_contains(_PyDictViewObject *dv, PyObject *obj)
 {
+    int result;
     PyObject *key, *value, *found;
     if (dv->dv_dict == NULL)
         return 0;
@@ -3694,7 +3728,10 @@ dictitems_contains(_PyDictViewObject *dv, PyObject *obj)
             return -1;
         return 0;
     }
-    return PyObject_RichCompareBool(value, found, Py_EQ);
+    Py_INCREF(found);
+    result = PyObject_RichCompareBool(value, found, Py_EQ);
+    Py_DECREF(found);
+    return result;
 }
 
 static PySequenceMethods dictitems_as_sequence = {
@@ -3878,20 +3915,18 @@ _PyObjectDict_SetItem(PyTypeObject *tp, PyObject **dictptr,
         }
         if (value == NULL) {
             res = PyDict_DelItem(dict, key);
-            if (cached != ((PyDictObject *)dict)->ma_keys) {
-                CACHED_KEYS(tp) = NULL;
-                DK_DECREF(cached);
-            }
         }
         else {
-            int was_shared = cached == ((PyDictObject *)dict)->ma_keys;
+            int was_shared = (cached == ((PyDictObject *)dict)->ma_keys);
             res = PyDict_SetItem(dict, key, value);
             /* PyDict_SetItem() may call dictresize() and convert split table
              * into combined table.  In such case, convert it to split
              * table again and update type's shared key only when this is
              * the only dict sharing key with the type.
              */
-            if (was_shared && cached != ((PyDictObject *)dict)->ma_keys) {
+            if (was_shared &&
+                    (cached = CACHED_KEYS(tp)) != NULL &&
+                    cached != ((PyDictObject *)dict)->ma_keys) {
                 if (cached->dk_refcnt == 1) {
                     CACHED_KEYS(tp) = make_keys_shared(dict);
                 } else {
diff --git a/Objects/exceptions.c b/Objects/exceptions.c
index 981ead2..345a0fe 100644
--- a/Objects/exceptions.c
+++ b/Objects/exceptions.c
@@ -692,6 +692,53 @@ ImportError_str(PyImportErrorObject *self)
     }
 }
 
+static PyObject *
+ImportError_getstate(PyImportErrorObject *self)
+{
+    PyObject *dict = ((PyBaseExceptionObject *)self)->dict;
+    if (self->name || self->path) {
+        _Py_IDENTIFIER(name);
+        _Py_IDENTIFIER(path);
+        dict = dict ? PyDict_Copy(dict) : PyDict_New();
+        if (dict == NULL)
+            return NULL;
+        if (self->name && _PyDict_SetItemId(dict, &PyId_name, self->name) < 0) {
+            Py_DECREF(dict);
+            return NULL;
+        }
+        if (self->path && _PyDict_SetItemId(dict, &PyId_path, self->path) < 0) {
+            Py_DECREF(dict);
+            return NULL;
+        }
+        return dict;
+    }
+    else if (dict) {
+        Py_INCREF(dict);
+        return dict;
+    }
+    else {
+        Py_RETURN_NONE;
+    }
+}
+
+/* Pickling support */
+static PyObject *
+ImportError_reduce(PyImportErrorObject *self)
+{
+    PyObject *res;
+    PyObject *args;
+    PyObject *state = ImportError_getstate(self);
+    if (state == NULL)
+        return NULL;
+    args = ((PyBaseExceptionObject *)self)->args;
+    if (state == Py_None)
+        res = PyTuple_Pack(2, Py_TYPE(self), args);
+    else
+        res = PyTuple_Pack(3, Py_TYPE(self), args, state);
+    Py_DECREF(state);
+    return res;
+}
+
 static PyMemberDef ImportError_members[] = {
     {"msg", T_OBJECT, offsetof(PyImportErrorObject, msg), 0,
         PyDoc_STR("exception message")},
@@ -703,6 +750,7 @@ static PyMemberDef ImportError_members[] = {
 };
 
 static PyMethodDef ImportError_methods[] = {
+    {"__reduce__", (PyCFunction)ImportError_reduce, METH_NOARGS},
     {NULL}
 };
 
diff --git a/Objects/genobject.c b/Objects/genobject.c
index d403598..0de5408 100644
--- a/Objects/genobject.c
+++ b/Objects/genobject.c
@@ -466,8 +466,7 @@ _PyGen_SetStopIterationValue(PyObject *value)
     PyObject *e;
 
     if (value == NULL ||
-        (!PyTuple_Check(value) &&
-         !PyObject_TypeCheck(value, (PyTypeObject *) PyExc_StopIteration)))
+        (!PyTuple_Check(value) && !PyExceptionInstance_Check(value)))
     {
         /* Delay exception instantiation if we can */
         PyErr_SetObject(PyExc_StopIteration, value);
diff --git a/Objects/listobject.c b/Objects/listobject.c
index 815a1b9..8100048 100644
--- a/Objects/listobject.c
+++ b/Objects/listobject.c
@@ -2154,8 +2154,8 @@ listindex(PyListObject *self, PyObject *args)
     PyObject *v;
 
     if (!PyArg_ParseTuple(args, "O|O&O&:index", &v,
-                                _PyEval_SliceIndex, &start,
-                                _PyEval_SliceIndex, &stop))
+                                _PyEval_SliceIndexNotNone, &start,
+                                _PyEval_SliceIndexNotNone, &stop))
         return NULL;
     if (start < 0) {
         start += Py_SIZE(self);
@@ -2421,10 +2421,11 @@ list_subscript(PyListObject* self, PyObject* item)
         PyObject* it;
         PyObject **src, **dest;
 
-        if (PySlice_GetIndicesEx(item, Py_SIZE(self),
-                         &start, &stop, &step, &slicelength) < 0) {
+        if (PySlice_Unpack(item, &start, &stop, &step) < 0) {
             return NULL;
         }
+        slicelength = PySlice_AdjustIndices(Py_SIZE(self), &start, &stop,
+                                            step);
 
         if (slicelength <= 0) {
             return PyList_New(0);
@@ -2470,10 +2471,11 @@ list_ass_subscript(PyListObject* self, PyObject* item, PyObject* value)
     else if (PySlice_Check(item)) {
         Py_ssize_t start, stop, step, slicelength;
 
-        if (PySlice_GetIndicesEx(item, Py_SIZE(self),
-                         &start, &stop, &step, &slicelength) < 0) {
+        if (PySlice_Unpack(item, &start, &stop, &step) < 0) {
             return -1;
         }
+        slicelength = PySlice_AdjustIndices(Py_SIZE(self), &start, &stop,
+                                            step);
 
         if (step == 1)
             return list_ass_slice(self, start, stop, value);
diff --git a/Objects/memoryobject.c b/Objects/memoryobject.c
index e261ee0..45849be 100644
--- a/Objects/memoryobject.c
+++ b/Objects/memoryobject.c
@@ -2311,10 +2311,10 @@ init_slice(Py_buffer *base, PyObject *key, int dim)
 {
     Py_ssize_t start, stop, step, slicelength;
 
-    if (PySlice_GetIndicesEx(key, base->shape[dim],
-                             &start, &stop, &step, &slicelength) < 0) {
+    if (PySlice_Unpack(key, &start, &stop, &step) < 0) {
         return -1;
     }
+    slicelength = PySlice_AdjustIndices(base->shape[dim], &start, &stop, step);
 
 
     if (base->suboffsets == NULL || dim == 0) {
diff --git a/Objects/obmalloc.c b/Objects/obmalloc.c
index 7cc889f..9dd8421 100644
--- a/Objects/obmalloc.c
+++ b/Objects/obmalloc.c
@@ -1176,7 +1176,7 @@ _PyObject_Alloc(int use_calloc, void *ctx, size_t nelem, size_t elsize)
 
     _Py_AllocatedBlocks++;
 
-    assert(nelem <= PY_SSIZE_T_MAX / elsize);
+    assert(elsize == 0 || nelem <= PY_SSIZE_T_MAX / elsize);
     nbytes = nelem * elsize;
 
 #ifdef WITH_VALGRIND
@@ -2233,7 +2233,9 @@ _PyObject_DebugMallocStats(FILE *out)
 
             if (p->ref.count == 0) {
                 /* currently unused */
+#ifdef Py_DEBUG
                 assert(pool_is_in_list(p, arenas[i].freepools));
+#endif
                 continue;
             }
             ++numpools[sz];
diff --git a/Objects/odictobject.c b/Objects/odictobject.c
index a6963d7..73deedf 100644
--- a/Objects/odictobject.c
+++ b/Objects/odictobject.c
@@ -2237,7 +2237,7 @@ odictvalues_new(PyObject *od)
 
 
 /* ----------------------------------------------
-   MutableMappping implementations
+   MutableMapping implementations
 
 Mapping:
 
diff --git a/Objects/rangeobject.c b/Objects/rangeobject.c
index 899697a..f221fde 100644
--- a/Objects/rangeobject.c
+++ b/Objects/rangeobject.c
@@ -675,6 +675,25 @@ static PyMappingMethods range_as_mapping = {
         (objobjargproc)0,            /* mp_ass_subscript */
 };
 
+static int
+range_bool(rangeobject* self)
+{
+    return PyObject_IsTrue(self->length);
+}
+
+static PyNumberMethods range_as_number = {
+    0,                          /* nb_add */
+    0,                          /* nb_subtract */
+    0,                          /* nb_multiply */
+    0,                          /* nb_remainder */
+    0,                          /* nb_divmod */
+    0,                          /* nb_power */
+    0,                          /* nb_negative */
+    0,                          /* nb_positive */
+    0,                          /* nb_absolute */
+    (inquiry)range_bool,        /* nb_bool */
+};
+
 static PyObject * range_iter(PyObject *seq);
 static PyObject * range_reverse(PyObject *seq);
 
@@ -714,7 +733,7 @@ PyTypeObject PyRange_Type = {
         0,                      /* tp_setattr */
         0,                      /* tp_reserved */
         (reprfunc)range_repr,   /* tp_repr */
-        0,                      /* tp_as_number */
+        &range_as_number,       /* tp_as_number */
         &range_as_sequence,     /* tp_as_sequence */
         &range_as_mapping,      /* tp_as_mapping */
         (hashfunc)range_hash,   /* tp_hash */
diff --git a/Objects/setobject.c b/Objects/setobject.c
index 4ef692d..3dbdb4e 100644
--- a/Objects/setobject.c
+++ b/Objects/setobject.c
@@ -1498,15 +1498,21 @@ set_difference(PySetObject *so, PyObject *other)
 {
     PyObject *result;
     setentry *entry;
-    Py_ssize_t pos = 0;
+    Py_ssize_t pos = 0, other_size;
 
-    if (!PyAnySet_Check(other)  && !PyDict_CheckExact(other)) {
+    if (PyAnySet_Check(other)) {
+        other_size = PySet_GET_SIZE(other);
+    }
+    else if (PyDict_CheckExact(other)) {
+        other_size = PyDict_Size(other);
+    }
+    else {
         return set_copy_and_difference(so, other);
     }
 
     /* If len(so) much more than len(other), it's more efficient to simply copy
      * so and then iterate other looking for common elements. */
-    if ((PySet_GET_SIZE(so) >> 2) > PyObject_Size(other)) {
+    if ((PySet_GET_SIZE(so) >> 2) > other_size) {
         return set_copy_and_difference(so, other);
     }
 
diff --git a/Objects/sliceobject.c b/Objects/sliceobject.c
index 2f32355..3259947 100644
--- a/Objects/sliceobject.c
+++ b/Objects/sliceobject.c
@@ -191,14 +191,13 @@ PySlice_GetIndices(PyObject *_r, Py_ssize_t length,
 }
 
 int
-PySlice_GetIndicesEx(PyObject *_r, Py_ssize_t length,
-                     Py_ssize_t *start, Py_ssize_t *stop, Py_ssize_t *step,
-                     Py_ssize_t *slicelength)
+PySlice_Unpack(PyObject *_r,
+               Py_ssize_t *start, Py_ssize_t *stop, Py_ssize_t *step)
 {
     PySliceObject *r = (PySliceObject*)_r;
     /* this is harder to get right than you might think */
 
-    Py_ssize_t defstart, defstop;
+    assert(PY_SSIZE_T_MIN + 1 <= -PY_SSIZE_T_MAX);
 
     if (r->step == Py_None) {
         *step = 1;
@@ -219,42 +218,75 @@ PySlice_GetIndicesEx(PyObject *_r, Py_ssize_t length,
             *step = -PY_SSIZE_T_MAX;
     }
 
-    defstart = *step < 0 ? length-1 : 0;
-    defstop = *step < 0 ? -1 : length;
-
     if (r->start == Py_None) {
-        *start = defstart;
+        *start = *step < 0 ? PY_SSIZE_T_MAX : 0;
     }
     else {
         if (!_PyEval_SliceIndex(r->start, start)) return -1;
-        if (*start < 0) *start += length;
-        if (*start < 0) *start = (*step < 0) ? -1 : 0;
-        if (*start >= length)
-            *start = (*step < 0) ? length - 1 : length;
     }
 
     if (r->stop == Py_None) {
-        *stop = defstop;
+        *stop = *step < 0 ? PY_SSIZE_T_MIN : PY_SSIZE_T_MAX;
     }
     else {
         if (!_PyEval_SliceIndex(r->stop, stop)) return -1;
-        if (*stop < 0) *stop += length;
-        if (*stop < 0) *stop = (*step < 0) ? -1 : 0;
-        if (*stop >= length)
-            *stop = (*step < 0) ? length - 1 : length;
     }
 
-    if ((*step < 0 && *stop >= *start)
-        || (*step > 0 && *start >= *stop)) {
-        *slicelength = 0;
+    return 0;
+}
+
+Py_ssize_t
+PySlice_AdjustIndices(Py_ssize_t length,
+                      Py_ssize_t *start, Py_ssize_t *stop, Py_ssize_t step)
+{
+    /* this is harder to get right than you might think */
+
+    assert(step != 0);
+    assert(step >= -PY_SSIZE_T_MAX);
+
+    if (*start < 0) {
+        *start += length;
+        if (*start < 0) {
+            *start = (step < 0) ? -1 : 0;
+        }
+    }
+    else if (*start >= length) {
+        *start = (step < 0) ? length - 1 : length;
+    }
+
+    if (*stop < 0) {
+        *stop += length;
+        if (*stop < 0) {
+            *stop = (step < 0) ? -1 : 0;
+        }
+    }
+    else if (*stop >= length) {
+        *stop = (step < 0) ? length - 1 : length;
     }
-    else if (*step < 0) {
-        *slicelength = (*stop-*start+1)/(*step)+1;
+
+    if (step < 0) {
+        if (*stop < *start) {
+            return (*start - *stop - 1) / (-step) + 1;
+        }
     }
     else {
-        *slicelength = (*stop-*start-1)/(*step)+1;
+        if (*start < *stop) {
+            return (*stop - *start - 1) / step + 1;
+        }
     }
+    return 0;
+}
+
+#undef PySlice_GetIndicesEx
 
+int
+PySlice_GetIndicesEx(PyObject *_r, Py_ssize_t length,
+                     Py_ssize_t *start, Py_ssize_t *stop, Py_ssize_t *step,
+                     Py_ssize_t *slicelength)
+{
+    if (PySlice_Unpack(_r, start, stop, step) < 0)
+        return -1;
+    *slicelength = PySlice_AdjustIndices(length, start, stop, *step);
     return 0;
 }
 
diff --git a/Objects/tupleobject.c b/Objects/tupleobject.c
index 7920fec..19a6fed 100644
--- a/Objects/tupleobject.c
+++ b/Objects/tupleobject.c
@@ -515,8 +515,8 @@ tupleindex(PyTupleObject *self, PyObject *args)
     PyObject *v;
 
     if (!PyArg_ParseTuple(args, "O|O&O&:index", &v,
-                                _PyEval_SliceIndex, &start,
-                                _PyEval_SliceIndex, &stop))
+                                _PyEval_SliceIndexNotNone, &start,
+                                _PyEval_SliceIndexNotNone, &stop))
         return NULL;
     if (start < 0) {
         start += Py_SIZE(self);
@@ -713,11 +713,11 @@ tuplesubscript(PyTupleObject* self, PyObject* item)
         PyObject* it;
         PyObject **src, **dest;
 
-        if (PySlice_GetIndicesEx(item,
-                         PyTuple_GET_SIZE(self),
-                         &start, &stop, &step, &slicelength) < 0) {
+        if (PySlice_Unpack(item, &start, &stop, &step) < 0) {
             return NULL;
         }
+        slicelength = PySlice_AdjustIndices(PyTuple_GET_SIZE(self), &start,
+                                            &stop, step);
 
         if (slicelength <= 0) {
             return PyTuple_New(0);
diff --git a/Objects/typeobject.c b/Objects/typeobject.c
index 7b76e5c..3f526b4 100644
--- a/Objects/typeobject.c
+++ b/Objects/typeobject.c
@@ -3020,6 +3020,7 @@ type_getattro(PyTypeObject *type, PyObject *name)
 static int
 type_setattro(PyTypeObject *type, PyObject *name, PyObject *value)
 {
+    int res;
     if (!(type->tp_flags & Py_TPFLAGS_HEAPTYPE)) {
         PyErr_Format(
             PyExc_TypeError,
@@ -3027,9 +3028,35 @@ type_setattro(PyTypeObject *type, PyObject *name, PyObject *value)
             type->tp_name);
         return -1;
     }
-    if (PyObject_GenericSetAttr((PyObject *)type, name, value) < 0)
-        return -1;
-    return update_slot(type, name);
+    if (PyUnicode_Check(name)) {
+        if (PyUnicode_CheckExact(name)) {
+            if (PyUnicode_READY(name) == -1)
+                return -1;
+            Py_INCREF(name);
+        }
+        else {
+            name = _PyUnicode_Copy(name);
+            if (name == NULL)
+                return -1;
+        }
+        PyUnicode_InternInPlace(&name);
+        if (!PyUnicode_CHECK_INTERNED(name)) {
+            PyErr_SetString(PyExc_MemoryError,
+                            "Out of memory interning an attribute name");
+            Py_DECREF(name);
+            return -1;
+        }
+    }
+    else {
+        /* Will fail in _PyObject_GenericSetAttrWithDict. */
+        Py_INCREF(name);
+    }
+    res = PyObject_GenericSetAttr((PyObject *)type, name, value);
+    if (res == 0) {
+        res = update_slot(type, name);
+    }
+    Py_DECREF(name);
+    return res;
 }
 
 extern void
@@ -6849,7 +6876,7 @@ init_slotdefs(void)
         /* Slots must be ordered by their offset in the PyHeapTypeObject. */
         assert(!p[1].name || p->offset <= p[1].offset);
         p->name_strobj = PyUnicode_InternFromString(p->name);
-        if (!p->name_strobj)
+        if (!p->name_strobj || !PyUnicode_CHECK_INTERNED(p->name_strobj))
             Py_FatalError("Out of memory interning slotdef names");
     }
     slotdefs_initialized = 1;
@@ -6874,6 +6901,9 @@ update_slot(PyTypeObject *type, PyObject *name)
     slotdef **pp;
     int offset;
 
+    assert(PyUnicode_CheckExact(name));
+    assert(PyUnicode_CHECK_INTERNED(name));
+
     /* Clear the VALID_VERSION flag of 'type' and all its
        subclasses.  This could possibly be unified with the
        update_subclasses() recursion below, but carefully:
@@ -6884,7 +6914,6 @@ update_slot(PyTypeObject *type, PyObject *name)
     init_slotdefs();
     pp = ptrs;
     for (p = slotdefs; p->name; p++) {
-        /* XXX assume name is interned! */
         if (p->name_strobj == name)
             *pp++ = p;
     }
diff --git a/Objects/unicodeobject.c b/Objects/unicodeobject.c
index 5787830..d037d80 100644
--- a/Objects/unicodeobject.c
+++ b/Objects/unicodeobject.c
@@ -3654,6 +3654,7 @@ PyUnicode_FSDecoder(PyObject* arg, void* addr)
     PyObject *output = NULL;
     if (arg == NULL) {
         Py_DECREF(*(PyObject**)addr);
+        *(PyObject**)addr = NULL;
         return 1;
     }
     if (PyUnicode_Check(arg)) {
@@ -9752,7 +9753,7 @@ PyUnicode_Join(PyObject *separator, PyObject *seq)
     use_memcpy = 1;
 #endif
     for (i = 0; i < seqlen; i++) {
-        const Py_ssize_t old_sz = sz;
+        size_t add_sz;
         item = items[i];
         if (!PyUnicode_Check(item)) {
             PyErr_Format(PyExc_TypeError,
@@ -9763,16 +9764,18 @@ PyUnicode_Join(PyObject *separator, PyObject *seq)
         }
         if (PyUnicode_READY(item) == -1)
             goto onError;
-        sz += PyUnicode_GET_LENGTH(item);
+        add_sz = PyUnicode_GET_LENGTH(item);
         item_maxchar = PyUnicode_MAX_CHAR_VALUE(item);
         maxchar = Py_MAX(maxchar, item_maxchar);
-        if (i != 0)
-            sz += seplen;
-        if (sz < old_sz || sz > PY_SSIZE_T_MAX) {
+        if (i != 0) {
+            add_sz += seplen;
+        }
+        if (add_sz > (size_t)(PY_SSIZE_T_MAX - sz)) {
             PyErr_SetString(PyExc_OverflowError,
                             "join() result is too long for a Python string");
             goto onError;
         }
+        sz += add_sz;
         if (use_memcpy && last_obj != NULL) {
             if (PyUnicode_KIND(last_obj) != PyUnicode_KIND(item))
                 use_memcpy = 0;
@@ -10418,7 +10421,7 @@ replace(PyObject *self, PyObject *str1,
             u = unicode_empty;
             goto done;
         }
-        if (new_size > (PY_SSIZE_T_MAX >> (rkind-1))) {
+        if (new_size > (PY_SSIZE_T_MAX / rkind)) {
             PyErr_SetString(PyExc_OverflowError,
                             "replace string is too long");
             goto error;
@@ -13802,10 +13805,11 @@ unicode_subscript(PyObject* self, PyObject* item)
         int src_kind, dest_kind;
         Py_UCS4 ch, max_char, kind_limit;
 
-        if (PySlice_GetIndicesEx(item, PyUnicode_GET_LENGTH(self),
-                                 &start, &stop, &step, &slicelength) < 0) {
+        if (PySlice_Unpack(item, &start, &stop, &step) < 0) {
             return NULL;
         }
+        slicelength = PySlice_AdjustIndices(PyUnicode_GET_LENGTH(self),
+                                            &start, &stop, step);
 
         if (slicelength <= 0) {
             _Py_RETURN_UNICODE_EMPTY();
diff --git a/Objects/weakrefobject.c b/Objects/weakrefobject.c
index 7e6f364..892798a 100644
--- a/Objects/weakrefobject.c
+++ b/Objects/weakrefobject.c
@@ -24,6 +24,8 @@ init_weakref(PyWeakReference *self, PyObject *ob, PyObject *callback)
 {
     self->hash = -1;
     self->wr_object = ob;
+    self->wr_prev = NULL;
+    self->wr_next = NULL;
     Py_XINCREF(callback);
     self->wr_callback = callback;
 }
diff --git a/PC/getpathp.c b/PC/getpathp.c
index c7ddf1e..47a571e 100644
--- a/PC/getpathp.c
+++ b/PC/getpathp.c
@@ -133,7 +133,7 @@ exists(wchar_t *filename)
    may extend 'filename' by one character.
 */
 static int
-ismodule(wchar_t *filename, int update_filename) /* Is module -- check for .pyc/.pyo too */
+ismodule(wchar_t *filename, int update_filename) /* Is module -- check for .pyc too */
 {
     int n;
 
@@ -144,7 +144,7 @@ ismodule(wchar_t *filename, int update_filename) /* Is module -- check for .pyc/
     n = wcsnlen_s(filename, MAXPATHLEN+1);
     if (n < MAXPATHLEN) {
         int exist = 0;
-        filename[n] = Py_OptimizeFlag ? L'o' : L'c';
+        filename[n] = L'c';
         filename[n + 1] = L'\0';
         exist = exists(filename);
         if (!update_filename)
diff --git a/PC/msvcrtmodule.c b/PC/msvcrtmodule.c
index b0739d0..423afea 100644
--- a/PC/msvcrtmodule.c
+++ b/PC/msvcrtmodule.c
@@ -111,7 +111,9 @@ msvcrt_locking_impl(PyObject *module, int fd, int mode, long nbytes)
     int err;
 
     Py_BEGIN_ALLOW_THREADS
+    _Py_BEGIN_SUPPRESS_IPH
     err = _locking(fd, mode, nbytes);
+    _Py_END_SUPPRESS_IPH
     Py_END_ALLOW_THREADS
     if (err != 0)
         return PyErr_SetFromErrno(PyExc_IOError);
@@ -138,7 +140,9 @@ static long
 msvcrt_setmode_impl(PyObject *module, int fd, int flags)
 /*[clinic end generated code: output=24a9be5ea07ccb9b input=76e7c01f6b137f75]*/
 {
+    _Py_BEGIN_SUPPRESS_IPH
     flags = _setmode(fd, flags);
+    _Py_END_SUPPRESS_IPH
     if (flags == -1)
         PyErr_SetFromErrno(PyExc_IOError);
 
@@ -165,7 +169,9 @@ msvcrt_open_osfhandle_impl(PyObject *module, Py_intptr_t handle, int flags)
 {
     int fd;
 
+    _Py_BEGIN_SUPPRESS_IPH
     fd = _open_osfhandle(handle, flags);
+    _Py_END_SUPPRESS_IPH
     if (fd == -1)
         PyErr_SetFromErrno(PyExc_IOError);
 
@@ -189,16 +195,11 @@ msvcrt_get_osfhandle_impl(PyObject *module, int fd)
 {
     Py_intptr_t handle = -1;
 
-    if (!_PyVerify_fd(fd)) {
-        PyErr_SetFromErrno(PyExc_IOError);
-    }
-    else {
     _Py_BEGIN_SUPPRESS_IPH
-        handle = _get_osfhandle(fd);
+    handle = _get_osfhandle(fd);
     _Py_END_SUPPRESS_IPH
-        if (handle == -1)
-            PyErr_SetFromErrno(PyExc_IOError);
-    }
+    if (handle == -1)
+        PyErr_SetFromErrno(PyExc_IOError);
 
     return handle;
 }
@@ -308,7 +309,9 @@ static PyObject *
 msvcrt_putch_impl(PyObject *module, char char_value)
 /*[clinic end generated code: output=92ec9b81012d8f60 input=ec078dd10cb054d6]*/
 {
+    _Py_BEGIN_SUPPRESS_IPH
     _putch(char_value);
+    _Py_END_SUPPRESS_IPH
     Py_RETURN_NONE;
 }
 
@@ -325,7 +328,9 @@ static PyObject *
 msvcrt_putwch_impl(PyObject *module, int unicode_char)
 /*[clinic end generated code: output=a3bd1a8951d28eee input=996ccd0bbcbac4c3]*/
 {
+    _Py_BEGIN_SUPPRESS_IPH
     _putwch(unicode_char);
+    _Py_END_SUPPRESS_IPH
     Py_RETURN_NONE;
 
 }
@@ -347,7 +352,13 @@ static PyObject *
 msvcrt_ungetch_impl(PyObject *module, char char_value)
 /*[clinic end generated code: output=c6942a0efa119000 input=22f07ee9001bbf0f]*/
 {
-    if (_ungetch(char_value) == EOF)
+    int res;
+    
+    _Py_BEGIN_SUPPRESS_IPH
+    res = _ungetch(char_value);
+    _Py_END_SUPPRESS_IPH
+
+    if (res == EOF)
         return PyErr_SetFromErrno(PyExc_IOError);
     Py_RETURN_NONE;
 }
@@ -365,7 +376,13 @@ static PyObject *
 msvcrt_ungetwch_impl(PyObject *module, int unicode_char)
 /*[clinic end generated code: output=e63af05438b8ba3d input=83ec0492be04d564]*/
 {
-    if (_ungetwch(unicode_char) == WEOF)
+    int res;
+
+    _Py_BEGIN_SUPPRESS_IPH
+    res = _ungetwch(unicode_char);
+    _Py_END_SUPPRESS_IPH
+
+    if (res == WEOF)
         return PyErr_SetFromErrno(PyExc_IOError);
     Py_RETURN_NONE;
 }
@@ -387,7 +404,13 @@ static long
 msvcrt_CrtSetReportFile_impl(PyObject *module, int type, int file)
 /*[clinic end generated code: output=df291c7fe032eb68 input=bb8f721a604fcc45]*/
 {
-    return (long)_CrtSetReportFile(type, (_HFILE)file);
+    long res;
+
+    _Py_BEGIN_SUPPRESS_IPH
+    res = (long)_CrtSetReportFile(type, (_HFILE)file);
+    _Py_END_SUPPRESS_IPH
+
+    return res;
 }
 
 /*[clinic input]
@@ -408,7 +431,9 @@ msvcrt_CrtSetReportMode_impl(PyObject *module, int type, int mode)
 {
     int res;
 
+    _Py_BEGIN_SUPPRESS_IPH
     res = _CrtSetReportMode(type, mode);
+    _Py_END_SUPPRESS_IPH
     if (res == -1)
         PyErr_SetFromErrno(PyExc_IOError);
     return res;
@@ -429,7 +454,13 @@ static long
 msvcrt_set_error_mode_impl(PyObject *module, int mode)
 /*[clinic end generated code: output=ac4a09040d8ac4e3 input=046fca59c0f20872]*/
 {
-    return _set_error_mode(mode);
+    long res;
+
+    _Py_BEGIN_SUPPRESS_IPH
+    res = _set_error_mode(mode);
+    _Py_END_SUPPRESS_IPH
+
+    return res;
 }
 #endif /* _DEBUG */
 
@@ -448,7 +479,10 @@ msvcrt_SetErrorMode_impl(PyObject *module, unsigned int mode)
 {
     unsigned int res;
 
+    _Py_BEGIN_SUPPRESS_IPH
     res = SetErrorMode(mode);
+    _Py_END_SUPPRESS_IPH
+
     return PyLong_FromUnsignedLong(res);
 }
 
diff --git a/PC/python3.def b/PC/python3.def
index d753049..200d6bb 100644
--- a/PC/python3.def
+++ b/PC/python3.def
@@ -527,10 +527,12 @@ EXPORTS
   PySet_Pop=python35.PySet_Pop
   PySet_Size=python35.PySet_Size
   PySet_Type=python35.PySet_Type DATA
+  PySlice_AdjustIndices=python35.PySlice_AdjustIndices
   PySlice_GetIndices=python35.PySlice_GetIndices
   PySlice_GetIndicesEx=python35.PySlice_GetIndicesEx
   PySlice_New=python35.PySlice_New
   PySlice_Type=python35.PySlice_Type DATA
+  PySlice_Unpack=python35.PySlice_Unpack
   PySortWrapper_Type=python35.PySortWrapper_Type DATA
   PyState_AddModule=python35.PyState_AddModule
   PyState_FindModule=python35.PyState_FindModule
diff --git a/PCbuild/build.bat b/PCbuild/build.bat
index 9e63a84..1dbe888 100644
--- a/PCbuild/build.bat
+++ b/PCbuild/build.bat
@@ -105,9 +105,9 @@ if "%platf%"=="x64" (
     )
 )
 
-if not exist "%HG%" where hg > "%TEMP%\hg.loc" 2> nul && set /P HG= < "%TEMP%\hg.loc" & del "%TEMP%\hg.loc"
-if exist "%HG%" set HGProperty=/p:HG="%HG%"
-if not exist "%HG%" echo Cannot find Mercurial on PATH & set HGProperty=
+if not exist "%GIT%" where git > "%TEMP%\git.loc" 2> nul && set /P GIT= < "%TEMP%\git.loc" & del "%TEMP%\git.loc"
+if exist "%GIT%" set GITProperty=/p:GIT="%GIT%"
+if not exist "%GIT%" echo Cannot find Git on PATH & set GITProperty=
 
 rem Setup the environment
 call "%dir%env.bat" %vs_platf% >nul
@@ -145,7 +145,7 @@ msbuild "%dir%pcbuild.proj" /t:%target% %parallel% %verbose%^
  /p:Configuration=%conf% /p:Platform=%platf%^
  /p:IncludeExternals=%IncludeExternals%^
  /p:IncludeSSL=%IncludeSSL% /p:IncludeTkinter=%IncludeTkinter%^
- /p:UseTestMarker=%UseTestMarker% %HGProperty%^
+ /p:UseTestMarker=%UseTestMarker% %GITProperty%^
  %1 %2 %3 %4 %5 %6 %7 %8 %9
 
 @echo off
diff --git a/PCbuild/get_externals.bat b/PCbuild/get_externals.bat
index 1c3cdee..9cd1306 100644
--- a/PCbuild/get_externals.bat
+++ b/PCbuild/get_externals.bat
@@ -54,7 +54,7 @@ echo.Fetching external libraries...
 set libraries=
 set libraries=%libraries%                                    bzip2-1.0.6
 if NOT "%IncludeSSL%"=="false" set libraries=%libraries%     nasm-2.11.06
-if NOT "%IncludeSSL%"=="false" set libraries=%libraries%     openssl-1.0.2j
+if NOT "%IncludeSSL%"=="false" set libraries=%libraries%     openssl-1.0.2k
 set libraries=%libraries%                                    sqlite-3.8.11.0
 if NOT "%IncludeTkinter%"=="false" set libraries=%libraries% tcl-core-8.6.4.2
 if NOT "%IncludeTkinter%"=="false" set libraries=%libraries% tk-8.6.4.2
@@ -66,7 +66,7 @@ for %%e in (%libraries%) do (
         echo.%%e already exists, skipping.
     ) else (
         echo.Fetching %%e...
-        svn export %SVNROOT%%%e
+        svn export -q %SVNROOT%%%e
     )
 )
 
diff --git a/PCbuild/python.props b/PCbuild/python.props
index 1553731..0a6fd2a 100644
--- a/PCbuild/python.props
+++ b/PCbuild/python.props
@@ -46,7 +46,7 @@
     <sqlite3Dir>$(ExternalsDir)sqlite-3.8.11.0\</sqlite3Dir>
     <bz2Dir>$(ExternalsDir)bzip2-1.0.6\</bz2Dir>
     <lzmaDir>$(ExternalsDir)xz-5.0.5\</lzmaDir>
-    <opensslDir>$(ExternalsDir)openssl-1.0.2j\</opensslDir>
+    <opensslDir>$(ExternalsDir)openssl-1.0.2k\</opensslDir>
     <opensslIncludeDir>$(opensslDir)include32</opensslIncludeDir>
     <opensslIncludeDir Condition="'$(ArchName)' == 'amd64'">$(opensslDir)include64</opensslIncludeDir>
     <nasmDir>$(ExternalsDir)\nasm-2.11.06\</nasmDir>
diff --git a/PCbuild/pythoncore.vcxproj b/PCbuild/pythoncore.vcxproj
index 970344f..6466a6b 100644
--- a/PCbuild/pythoncore.vcxproj
+++ b/PCbuild/pythoncore.vcxproj
@@ -400,23 +400,24 @@
   </ImportGroup>
   <Target Name="_GetBuildInfo" BeforeTargets="PrepareForBuild">
     <PropertyGroup>
-      <HG Condition="$(HG) == ''">hg</HG>
-      <_HG>$(HG)</_HG>
-      <_HG Condition="$(HG.Contains(` `))">"$(HG)"</_HG>
+      <GIT Condition="$(GIT) == ''">git</GIT>
+      <_GIT>$(GIT)</_GIT>
+      <_GIT Condition="$(GIT.Contains(` `))">"$(GIT)"</_GIT>
     </PropertyGroup>
-    <Message Text="Getting build info from $(_HG)" Importance="high" />
+    <Message Text="Getting build info from $(_GIT)" Importance="high" />
     <MakeDir Directories="$(IntDir)" Condition="!Exists($(IntDir))" />
-    <Exec Command="$(_HG) id -b &gt; &quot;$(IntDir)hgbranch.txt&quot;" ContinueOnError="true" />
-    <Exec Command="$(_HG) id -i &gt; &quot;$(IntDir)hgversion.txt&quot;" ContinueOnError="true" />
-    <Exec Command="$(_HG) id -t &gt; &quot;$(IntDir)hgtag.txt&quot;" ContinueOnError="true" />
+    <Exec Command="$(_GIT) name-rev --name-only HEAD &gt; &quot;$(IntDir)gitbranch.txt&quot;" ContinueOnError="true" />
+    <Exec Command="$(_GIT) rev-parse --short HEAD &gt; &quot;$(IntDir)gitversion.txt&quot;" ContinueOnError="true" />
+    <Exec Command="$(_GIT) describe --all --always --dirty &gt; &quot;$(IntDir)gittag.txt&quot;" ContinueOnError="true" />
     <PropertyGroup>
-      <HgBranch Condition="Exists('$(IntDir)hgbranch.txt')">$([System.IO.File]::ReadAllText('$(IntDir)hgbranch.txt').Trim())</HgBranch>
-      <HgVersion Condition="Exists('$(IntDir)hgversion.txt')">$([System.IO.File]::ReadAllText('$(IntDir)hgversion.txt').Trim())</HgVersion>
-      <HgTag Condition="Exists('$(IntDir)hgtag.txt')">$([System.IO.File]::ReadAllText('$(IntDir)hgtag.txt').Trim())</HgTag>
+      <GitBranch Condition="Exists('$(IntDir)gitbranch.txt')">$([System.IO.File]::ReadAllText('$(IntDir)gitbranch.txt').Trim())</GitBranch>
+      <GitVersion Condition="Exists('$(IntDir)gitversion.txt')">$([System.IO.File]::ReadAllText('$(IntDir)gitversion.txt').Trim())</GitVersion>
+      <GitTag Condition="Exists('$(IntDir)gittag.txt')">$([System.IO.File]::ReadAllText('$(IntDir)gittag.txt').Trim())</GitTag>
     </PropertyGroup>
+    <Message Text="Building $(GitTag):$(GitVersion) $(GitBranch)" Importance="high" />
     <ItemGroup>
       <ClCompile Include="..\Modules\getbuildinfo.c">
-        <PreprocessorDefinitions>HGVERSION="$(HgVersion)";HGTAG="$(HgTag)";HGBRANCH="$(HgBranch)";%(PreprocessorDefinitions)</PreprocessorDefinitions>
+        <PreprocessorDefinitions>GITVERSION="$(GitVersion)";GITTAG="$(GitTag)";GITBRANCH="$(GitBranch)";%(PreprocessorDefinitions)</PreprocessorDefinitions>
       </ClCompile>
     </ItemGroup>
   </Target>
diff --git a/PCbuild/readme.txt b/PCbuild/readme.txt
index 2462012..6857925 100644
--- a/PCbuild/readme.txt
+++ b/PCbuild/readme.txt
@@ -169,7 +169,7 @@ _lzma
     Homepage:
         http://tukaani.org/xz/
 _ssl
-    Python wrapper for version 1.0.2j of the OpenSSL secure sockets
+    Python wrapper for version 1.0.2k of the OpenSSL secure sockets
     library, which is built by ssl.vcxproj
     Homepage:
         http://www.openssl.org/
diff --git a/PCbuild/rmpyc.py b/PCbuild/rmpyc.py
index a1e75bb..0b58f68 100644
--- a/PCbuild/rmpyc.py
+++ b/PCbuild/rmpyc.py
@@ -1,25 +1,19 @@
-# Remove all the .pyc and .pyo files under ../Lib.
+# Remove all the .pyc files under ../Lib.
 
 
 def deltree(root):
     import os
     from os.path import join
 
-    npyc = npyo = 0
+    npyc = 0
     for root, dirs, files in os.walk(root):
         for name in files:
-            delete = False
-            if name.endswith('.pyc'):
-                delete = True
+            # to be thorough
+            if name.endswith(('.pyc', '.pyo')):
                 npyc += 1
-            elif name.endswith('.pyo'):
-                delete = True
-                npyo += 1
-
-            if delete:
                 os.remove(join(root, name))
 
-    return npyc, npyo
+    return npyc
 
-npyc, npyo = deltree("../Lib")
-print(npyc, ".pyc deleted,", npyo, ".pyo deleted")
+npyc = deltree("../Lib")
+print(npyc, ".pyc deleted")
diff --git a/PCbuild/rt.bat b/PCbuild/rt.bat
index 2d93b80..2056854 100644
--- a/PCbuild/rt.bat
+++ b/PCbuild/rt.bat
@@ -4,8 +4,8 @@ rem Usage:  rt [-d] [-O] [-q] [-x64] regrtest_args
 rem -d   Run Debug build (python_d.exe).  Else release build.
 rem -O   Run python.exe or python_d.exe (see -d) with -O.
 rem -q   "quick" -- normally the tests are run twice, the first time
-rem      after deleting all the .py[co] files reachable from Lib/.
-rem      -q runs the tests just once, and without deleting .py[co] files.
+rem      after deleting all the .pyc files reachable from Lib/.
+rem      -q runs the tests just once, and without deleting .pyc files.
 rem -x64 Run the 64-bit build of python (or python_d if -d was specified)
 rem      from the 'amd64' dir instead of the 32-bit build in this dir.
 rem All leading instances of these switches are shifted off, and
@@ -45,14 +45,14 @@ set exe=%prefix%python%suffix%.exe
 set cmd="%exe%" %dashO% -Wd -E -bb "%pcbuild%..\lib\test\regrtest.py" %regrtestargs%
 if defined qmode goto Qmode
 
-echo Deleting .pyc/.pyo files ...
+echo Deleting .pyc files ...
 "%exe%" "%pcbuild%rmpyc.py"
 
 echo on
 %cmd%
 @echo off
 
-echo About to run again without deleting .pyc/.pyo first:
+echo About to run again without deleting .pyc first:
 pause
 
 :Qmode
diff --git a/Python/bltinmodule.c b/Python/bltinmodule.c
index 9f5db2a..17c074a 100644
--- a/Python/bltinmodule.c
+++ b/Python/bltinmodule.c
@@ -1892,12 +1892,15 @@ builtin_input_impl(PyObject *module, PyObject *prompt)
         PyObject *result;
         size_t len;
 
+        /* stdin is a text stream, so it must have an encoding. */
         stdin_encoding = _PyObject_GetAttrId(fin, &PyId_encoding);
         stdin_errors = _PyObject_GetAttrId(fin, &PyId_errors);
-        if (!stdin_encoding || !stdin_errors)
-            /* stdin is a text stream, so it must have an
-               encoding. */
+        if (!stdin_encoding || !stdin_errors ||
+                !PyUnicode_Check(stdin_encoding) ||
+                !PyUnicode_Check(stdin_errors)) {
+            tty = 0;
             goto _readline_errors;
+        }
         stdin_encoding_str = _PyUnicode_AsString(stdin_encoding);
         stdin_errors_str = _PyUnicode_AsString(stdin_errors);
         if (!stdin_encoding_str || !stdin_errors_str)
@@ -1913,8 +1916,12 @@ builtin_input_impl(PyObject *module, PyObject *prompt)
             PyObject *stringpo;
             stdout_encoding = _PyObject_GetAttrId(fout, &PyId_encoding);
             stdout_errors = _PyObject_GetAttrId(fout, &PyId_errors);
-            if (!stdout_encoding || !stdout_errors)
+            if (!stdout_encoding || !stdout_errors ||
+                    !PyUnicode_Check(stdout_encoding) ||
+                    !PyUnicode_Check(stdout_errors)) {
+                tty = 0;
                 goto _readline_errors;
+            }
             stdout_encoding_str = _PyUnicode_AsString(stdout_encoding);
             stdout_errors_str = _PyUnicode_AsString(stdout_errors);
             if (!stdout_encoding_str || !stdout_errors_str)
@@ -1969,13 +1976,17 @@ builtin_input_impl(PyObject *module, PyObject *prompt)
         Py_XDECREF(po);
         PyMem_FREE(s);
         return result;
+
     _readline_errors:
         Py_XDECREF(stdin_encoding);
         Py_XDECREF(stdout_encoding);
         Py_XDECREF(stdin_errors);
         Py_XDECREF(stdout_errors);
         Py_XDECREF(po);
-        return NULL;
+        if (tty)
+            return NULL;
+
+        PyErr_Clear();
     }
 
     /* Fallback if we're not interactive */
@@ -2073,7 +2084,7 @@ reverse flag can be set to request the result in descending order.
 [end disabled clinic input]*/
 
 PyDoc_STRVAR(builtin_sorted__doc__,
-"sorted($module, iterable, key=None, reverse=False)\n"
+"sorted($module, iterable, /, *, key=None, reverse=False)\n"
 "--\n"
 "\n"
 "Return a new list containing all items from the iterable in ascending order.\n"
diff --git a/Python/ceval.c b/Python/ceval.c
index 7b40518..47c5eff 100644
--- a/Python/ceval.c
+++ b/Python/ceval.c
@@ -1545,9 +1545,15 @@ PyEval_EvalFrameEx(PyFrameObject *f, int throwflag)
         TARGET(BINARY_MODULO) {
             PyObject *divisor = POP();
             PyObject *dividend = TOP();
-            PyObject *res = PyUnicode_CheckExact(dividend) ?
-                PyUnicode_Format(dividend, divisor) :
-                PyNumber_Remainder(dividend, divisor);
+            PyObject *res;
+            if (PyUnicode_CheckExact(dividend) && (
+                  !PyUnicode_Check(divisor) || PyUnicode_CheckExact(divisor))) {
+              /* fast path; string formatting, but not if the RHS is a str subclass
+                 (see issue28598) */
+              res = PyUnicode_Format(dividend, divisor);
+            } else {
+              res = PyNumber_Remainder(dividend, divisor);
+            }
             Py_DECREF(divisor);
             Py_DECREF(dividend);
             SET_TOP(res);
@@ -2666,14 +2672,22 @@ PyEval_EvalFrameEx(PyFrameObject *f, int throwflag)
                         if (PyErr_ExceptionMatches(PyExc_AttributeError) ||
                             !PyMapping_Check(arg)) {
                             int function_location = (oparg>>8) & 0xff;
-                            PyObject *func = (
-                                    PEEK(function_location + num_maps));
-                            PyErr_Format(PyExc_TypeError,
-                                    "%.200s%.200s argument after ** "
-                                    "must be a mapping, not %.200s",
-                                    PyEval_GetFuncName(func),
-                                    PyEval_GetFuncDesc(func),
-                                    arg->ob_type->tp_name);
+                            if (function_location == 1) {
+                                PyObject *func = (
+                                        PEEK(function_location + num_maps));
+                                PyErr_Format(PyExc_TypeError,
+                                        "%.200s%.200s argument after ** "
+                                        "must be a mapping, not %.200s",
+                                        PyEval_GetFuncName(func),
+                                        PyEval_GetFuncDesc(func),
+                                        arg->ob_type->tp_name);
+                            }
+                            else {
+                                PyErr_Format(PyExc_TypeError,
+                                        "argument after ** "
+                                        "must be a mapping, not %.200s",
+                                        arg->ob_type->tp_name);
+                            }
                         }
                         Py_DECREF(sum);
                         goto error;
@@ -2683,21 +2697,34 @@ PyEval_EvalFrameEx(PyFrameObject *f, int throwflag)
                         Py_ssize_t idx = 0;
                         PyObject *key;
                         int function_location = (oparg>>8) & 0xff;
-                        PyObject *func = PEEK(function_location + num_maps);
                         Py_hash_t hash;
                         _PySet_NextEntry(intersection, &idx, &key, &hash);
-                        if (!PyUnicode_Check(key)) {
-                            PyErr_Format(PyExc_TypeError,
-                                    "%.200s%.200s keywords must be strings",
-                                    PyEval_GetFuncName(func),
-                                    PyEval_GetFuncDesc(func));
-                        } else {
-                            PyErr_Format(PyExc_TypeError,
-                                    "%.200s%.200s got multiple "
-                                    "values for keyword argument '%U'",
-                                    PyEval_GetFuncName(func),
-                                    PyEval_GetFuncDesc(func),
-                                    key);
+                        if (function_location == 1) {
+                            PyObject *func = PEEK(function_location + num_maps);
+                            if (!PyUnicode_Check(key)) {
+                                PyErr_Format(PyExc_TypeError,
+                                        "%.200s%.200s keywords must be strings",
+                                        PyEval_GetFuncName(func),
+                                        PyEval_GetFuncDesc(func));
+                            } else {
+                                PyErr_Format(PyExc_TypeError,
+                                        "%.200s%.200s got multiple "
+                                        "values for keyword argument '%U'",
+                                        PyEval_GetFuncName(func),
+                                        PyEval_GetFuncDesc(func),
+                                        key);
+                            }
+                        }
+                        else {
+                            if (!PyUnicode_Check(key)) {
+                                PyErr_SetString(PyExc_TypeError,
+                                        "keywords must be strings");
+                            } else {
+                                PyErr_Format(PyExc_TypeError,
+                                        "function got multiple "
+                                        "values for keyword argument '%U'",
+                                        key);
+                            }
                         }
                         Py_DECREF(intersection);
                         Py_DECREF(sum);
@@ -2710,13 +2737,21 @@ PyEval_EvalFrameEx(PyFrameObject *f, int throwflag)
                     if (PyErr_ExceptionMatches(PyExc_AttributeError)) {
                         if (with_call) {
                             int function_location = (oparg>>8) & 0xff;
-                            PyObject *func = PEEK(function_location + num_maps);
-                            PyErr_Format(PyExc_TypeError,
-                                    "%.200s%.200s argument after ** "
-                                    "must be a mapping, not %.200s",
-                                    PyEval_GetFuncName(func),
-                                    PyEval_GetFuncDesc(func),
-                                    arg->ob_type->tp_name);
+                            if (function_location == 1) {
+                                PyObject *func = PEEK(function_location + num_maps);
+                                PyErr_Format(PyExc_TypeError,
+                                        "%.200s%.200s argument after ** "
+                                        "must be a mapping, not %.200s",
+                                        PyEval_GetFuncName(func),
+                                        PyEval_GetFuncDesc(func),
+                                        arg->ob_type->tp_name);
+                            }
+                            else {
+                                PyErr_Format(PyExc_TypeError,
+                                        "argument after ** "
+                                        "must be a mapping, not %.200s",
+                                        arg->ob_type->tp_name);
+                            }
                         }
                         else {
                             PyErr_Format(PyExc_TypeError,
@@ -2826,13 +2861,16 @@ PyEval_EvalFrameEx(PyFrameObject *f, int throwflag)
         TARGET(IMPORT_STAR) {
             PyObject *from = POP(), *locals;
             int err;
-            if (PyFrame_FastToLocalsWithError(f) < 0)
+            if (PyFrame_FastToLocalsWithError(f) < 0) {
+                Py_DECREF(from);
                 goto error;
+            }
 
             locals = f->f_locals;
             if (locals == NULL) {
                 PyErr_SetString(PyExc_SystemError,
                     "no locals found during 'import *'");
+                Py_DECREF(from);
                 goto error;
             }
             READ_TIMESTAMP(intr0);
@@ -5057,17 +5095,13 @@ ext_call_fail:
 /* Extract a slice index from a PyLong or an object with the
    nb_index slot defined, and store in *pi.
    Silently reduce values larger than PY_SSIZE_T_MAX to PY_SSIZE_T_MAX,
-   and silently boost values less than -PY_SSIZE_T_MAX-1 to -PY_SSIZE_T_MAX-1.
+   and silently boost values less than PY_SSIZE_T_MIN to PY_SSIZE_T_MIN.
    Return 0 on error, 1 on success.
 */
-/* Note:  If v is NULL, return success without storing into *pi.  This
-   is because_PyEval_SliceIndex() is called by apply_slice(), which can be
-   called by the SLICE opcode with v and/or w equal to NULL.
-*/
 int
 _PyEval_SliceIndex(PyObject *v, Py_ssize_t *pi)
 {
-    if (v != NULL) {
+    if (v != Py_None) {
         Py_ssize_t x;
         if (PyIndex_Check(v)) {
             x = PyNumber_AsSsize_t(v, NULL);
@@ -5085,6 +5119,26 @@ _PyEval_SliceIndex(PyObject *v, Py_ssize_t *pi)
     return 1;
 }
 
+int
+_PyEval_SliceIndexNotNone(PyObject *v, Py_ssize_t *pi)
+{
+    Py_ssize_t x;
+    if (PyIndex_Check(v)) {
+        x = PyNumber_AsSsize_t(v, NULL);
+        if (x == -1 && PyErr_Occurred())
+            return 0;
+    }
+    else {
+        PyErr_SetString(PyExc_TypeError,
+                        "slice indices must be integers or "
+                        "have an __index__ method");
+        return 0;
+    }
+    *pi = x;
+    return 1;
+}
+
+
 #define CANNOT_CATCH_MSG "catching classes that do not inherit from "\
                          "BaseException is not allowed"
 
diff --git a/Python/import.c b/Python/import.c
index 3579273..ea8bc00 100644
--- a/Python/import.c
+++ b/Python/import.c
@@ -483,9 +483,17 @@ PyImport_Cleanup(void)
 #undef STORE_MODULE_WEAKREF
 }
 
+/* Issue #29537: handle issue27286 bytecode incompatibility
+ *
+ * In order to avoid forcing recompilation of all extension modules, we export
+ * the legacy 3.5.0 magic number here rather than putting it in a header file.
+ *
+ * See Lib/importlib/_bootstrap_external.py for general discussion
+ */
+PY_UINT32_T _Py_BACKCOMPAT_MAGIC_NUMBER = 168627478;
+PY_UINT32_T _Py_BACKCOMPAT_HALF_MAGIC = 3350;
 
 /* Helper for pythonrun.c -- return magic number and tag. */
-
 long
 PyImport_GetMagicNumber(void)
 {
diff --git a/Python/importlib_external.h b/Python/importlib_external.h
index 5ee843a..f337c8b 100644
--- a/Python/importlib_external.h
+++ b/Python/importlib_external.h
@@ -1,8 +1,8 @@
 /* Auto-generated by Programs/_freeze_importlib.c */
 const unsigned char _Py_M__importlib_external[] = {
     99,0,0,0,0,0,0,0,0,0,0,0,0,7,0,0,
-    0,64,0,0,0,115,244,2,0,0,100,0,0,90,0,0,
-    100,96,0,90,1,0,100,97,0,90,2,0,101,2,0,101,
+    0,64,0,0,0,115,40,3,0,0,100,0,0,90,0,0,
+    100,99,0,90,1,0,100,100,0,90,2,0,101,2,0,101,
     1,0,23,90,3,0,100,4,0,100,5,0,132,0,0,90,
     4,0,100,6,0,100,7,0,132,0,0,90,5,0,100,8,
     0,100,9,0,132,0,0,90,6,0,100,10,0,100,11,0,
@@ -14,2592 +14,2605 @@ const unsigned char _Py_M__importlib_external[] = {
     0,101,14,0,101,13,0,106,15,0,131,1,0,90,16,0,
     100,25,0,106,17,0,100,26,0,100,27,0,131,2,0,100,
     28,0,23,90,18,0,101,19,0,106,20,0,101,18,0,100,
-    27,0,131,2,0,90,21,0,100,29,0,90,22,0,100,30,
-    0,90,23,0,100,31,0,103,1,0,90,24,0,100,32,0,
-    103,1,0,90,25,0,101,25,0,4,90,26,0,90,27,0,
-    100,33,0,100,34,0,100,33,0,100,35,0,100,36,0,132,
-    1,1,90,28,0,100,37,0,100,38,0,132,0,0,90,29,
-    0,100,39,0,100,40,0,132,0,0,90,30,0,100,41,0,
-    100,42,0,132,0,0,90,31,0,100,43,0,100,44,0,132,
-    0,0,90,32,0,100,45,0,100,46,0,100,47,0,100,48,
-    0,132,0,1,90,33,0,100,49,0,100,50,0,132,0,0,
-    90,34,0,100,51,0,100,52,0,132,0,0,90,35,0,100,
-    33,0,100,33,0,100,33,0,100,53,0,100,54,0,132,3,
-    0,90,36,0,100,33,0,100,33,0,100,33,0,100,55,0,
-    100,56,0,132,3,0,90,37,0,100,57,0,100,57,0,100,
-    58,0,100,59,0,132,2,0,90,38,0,100,60,0,100,61,
-    0,132,0,0,90,39,0,101,40,0,131,0,0,90,41,0,
-    100,33,0,100,62,0,100,33,0,100,63,0,101,41,0,100,
-    64,0,100,65,0,132,1,2,90,42,0,71,100,66,0,100,
-    67,0,132,0,0,100,67,0,131,2,0,90,43,0,71,100,
-    68,0,100,69,0,132,0,0,100,69,0,131,2,0,90,44,
-    0,71,100,70,0,100,71,0,132,0,0,100,71,0,101,44,
-    0,131,3,0,90,45,0,71,100,72,0,100,73,0,132,0,
-    0,100,73,0,131,2,0,90,46,0,71,100,74,0,100,75,
-    0,132,0,0,100,75,0,101,46,0,101,45,0,131,4,0,
-    90,47,0,71,100,76,0,100,77,0,132,0,0,100,77,0,
-    101,46,0,101,44,0,131,4,0,90,48,0,103,0,0,90,
-    49,0,71,100,78,0,100,79,0,132,0,0,100,79,0,101,
-    46,0,101,44,0,131,4,0,90,50,0,71,100,80,0,100,
-    81,0,132,0,0,100,81,0,131,2,0,90,51,0,71,100,
-    82,0,100,83,0,132,0,0,100,83,0,131,2,0,90,52,
-    0,71,100,84,0,100,85,0,132,0,0,100,85,0,131,2,
-    0,90,53,0,71,100,86,0,100,87,0,132,0,0,100,87,
-    0,131,2,0,90,54,0,100,33,0,100,88,0,100,89,0,
-    132,1,0,90,55,0,100,90,0,100,91,0,132,0,0,90,
-    56,0,100,92,0,100,93,0,132,0,0,90,57,0,100,94,
-    0,100,95,0,132,0,0,90,58,0,100,33,0,83,41,98,
-    97,94,1,0,0,67,111,114,101,32,105,109,112,108,101,109,
-    101,110,116,97,116,105,111,110,32,111,102,32,112,97,116,104,
-    45,98,97,115,101,100,32,105,109,112,111,114,116,46,10,10,
-    84,104,105,115,32,109,111,100,117,108,101,32,105,115,32,78,
-    79,84,32,109,101,97,110,116,32,116,111,32,98,101,32,100,
-    105,114,101,99,116,108,121,32,105,109,112,111,114,116,101,100,
-    33,32,73,116,32,104,97,115,32,98,101,101,110,32,100,101,
-    115,105,103,110,101,100,32,115,117,99,104,10,116,104,97,116,
-    32,105,116,32,99,97,110,32,98,101,32,98,111,111,116,115,
-    116,114,97,112,112,101,100,32,105,110,116,111,32,80,121,116,
-    104,111,110,32,97,115,32,116,104,101,32,105,109,112,108,101,
-    109,101,110,116,97,116,105,111,110,32,111,102,32,105,109,112,
-    111,114,116,46,32,65,115,10,115,117,99,104,32,105,116,32,
-    114,101,113,117,105,114,101,115,32,116,104,101,32,105,110,106,
-    101,99,116,105,111,110,32,111,102,32,115,112,101,99,105,102,
-    105,99,32,109,111,100,117,108,101,115,32,97,110,100,32,97,
-    116,116,114,105,98,117,116,101,115,32,105,110,32,111,114,100,
-    101,114,32,116,111,10,119,111,114,107,46,32,79,110,101,32,
-    115,104,111,117,108,100,32,117,115,101,32,105,109,112,111,114,
-    116,108,105,98,32,97,115,32,116,104,101,32,112,117,98,108,
-    105,99,45,102,97,99,105,110,103,32,118,101,114,115,105,111,
-    110,32,111,102,32,116,104,105,115,32,109,111,100,117,108,101,
-    46,10,10,218,3,119,105,110,218,6,99,121,103,119,105,110,
-    218,6,100,97,114,119,105,110,99,0,0,0,0,0,0,0,
-    0,1,0,0,0,3,0,0,0,3,0,0,0,115,88,0,
-    0,0,116,0,0,106,1,0,106,2,0,116,3,0,131,1,
-    0,114,72,0,116,0,0,106,1,0,106,2,0,116,4,0,
-    131,1,0,114,45,0,100,1,0,137,0,0,110,6,0,100,
-    2,0,137,0,0,135,0,0,102,1,0,100,3,0,100,4,
-    0,134,0,0,125,0,0,110,12,0,100,5,0,100,4,0,
-    132,0,0,125,0,0,124,0,0,83,41,6,78,90,12,80,
-    89,84,72,79,78,67,65,83,69,79,75,115,12,0,0,0,
-    80,89,84,72,79,78,67,65,83,69,79,75,99,0,0,0,
-    0,0,0,0,0,0,0,0,0,2,0,0,0,19,0,0,
-    0,115,13,0,0,0,136,0,0,116,0,0,106,1,0,107,
-    6,0,83,41,1,122,53,84,114,117,101,32,105,102,32,102,
+    27,0,131,2,0,90,21,0,101,21,0,100,29,0,107,3,
+    0,114,236,0,100,30,0,90,22,0,101,23,0,101,22,0,
+    131,1,0,130,1,0,100,31,0,106,17,0,100,26,0,100,
+    27,0,131,2,0,100,28,0,23,90,24,0,100,32,0,90,
+    25,0,100,33,0,90,26,0,100,34,0,103,1,0,90,27,
+    0,100,35,0,103,1,0,90,28,0,101,28,0,4,90,29,
+    0,90,30,0,100,36,0,100,37,0,100,36,0,100,38,0,
+    100,39,0,132,1,1,90,31,0,100,40,0,100,41,0,132,
+    0,0,90,32,0,100,42,0,100,43,0,132,0,0,90,33,
+    0,100,44,0,100,45,0,132,0,0,90,34,0,100,46,0,
+    100,47,0,132,0,0,90,35,0,100,48,0,100,49,0,100,
+    50,0,100,51,0,132,0,1,90,36,0,100,52,0,100,53,
+    0,132,0,0,90,37,0,100,54,0,100,55,0,132,0,0,
+    90,38,0,100,36,0,100,36,0,100,36,0,100,56,0,100,
+    57,0,132,3,0,90,39,0,100,36,0,100,36,0,100,36,
+    0,100,58,0,100,59,0,132,3,0,90,40,0,100,60,0,
+    100,60,0,100,61,0,100,62,0,132,2,0,90,41,0,100,
+    63,0,100,64,0,132,0,0,90,42,0,101,43,0,131,0,
+    0,90,44,0,100,36,0,100,65,0,100,36,0,100,66,0,
+    101,44,0,100,67,0,100,68,0,132,1,2,90,45,0,71,
+    100,69,0,100,70,0,132,0,0,100,70,0,131,2,0,90,
+    46,0,71,100,71,0,100,72,0,132,0,0,100,72,0,131,
+    2,0,90,47,0,71,100,73,0,100,74,0,132,0,0,100,
+    74,0,101,47,0,131,3,0,90,48,0,71,100,75,0,100,
+    76,0,132,0,0,100,76,0,131,2,0,90,49,0,71,100,
+    77,0,100,78,0,132,0,0,100,78,0,101,49,0,101,48,
+    0,131,4,0,90,50,0,71,100,79,0,100,80,0,132,0,
+    0,100,80,0,101,49,0,101,47,0,131,4,0,90,51,0,
+    103,0,0,90,52,0,71,100,81,0,100,82,0,132,0,0,
+    100,82,0,101,49,0,101,47,0,131,4,0,90,53,0,71,
+    100,83,0,100,84,0,132,0,0,100,84,0,131,2,0,90,
+    54,0,71,100,85,0,100,86,0,132,0,0,100,86,0,131,
+    2,0,90,55,0,71,100,87,0,100,88,0,132,0,0,100,
+    88,0,131,2,0,90,56,0,71,100,89,0,100,90,0,132,
+    0,0,100,90,0,131,2,0,90,57,0,100,36,0,100,91,
+    0,100,92,0,132,1,0,90,58,0,100,93,0,100,94,0,
+    132,0,0,90,59,0,100,95,0,100,96,0,132,0,0,90,
+    60,0,100,97,0,100,98,0,132,0,0,90,61,0,100,36,
+    0,83,41,101,97,94,1,0,0,67,111,114,101,32,105,109,
+    112,108,101,109,101,110,116,97,116,105,111,110,32,111,102,32,
+    112,97,116,104,45,98,97,115,101,100,32,105,109,112,111,114,
+    116,46,10,10,84,104,105,115,32,109,111,100,117,108,101,32,
+    105,115,32,78,79,84,32,109,101,97,110,116,32,116,111,32,
+    98,101,32,100,105,114,101,99,116,108,121,32,105,109,112,111,
+    114,116,101,100,33,32,73,116,32,104,97,115,32,98,101,101,
+    110,32,100,101,115,105,103,110,101,100,32,115,117,99,104,10,
+    116,104,97,116,32,105,116,32,99,97,110,32,98,101,32,98,
+    111,111,116,115,116,114,97,112,112,101,100,32,105,110,116,111,
+    32,80,121,116,104,111,110,32,97,115,32,116,104,101,32,105,
+    109,112,108,101,109,101,110,116,97,116,105,111,110,32,111,102,
+    32,105,109,112,111,114,116,46,32,65,115,10,115,117,99,104,
+    32,105,116,32,114,101,113,117,105,114,101,115,32,116,104,101,
+    32,105,110,106,101,99,116,105,111,110,32,111,102,32,115,112,
+    101,99,105,102,105,99,32,109,111,100,117,108,101,115,32,97,
+    110,100,32,97,116,116,114,105,98,117,116,101,115,32,105,110,
+    32,111,114,100,101,114,32,116,111,10,119,111,114,107,46,32,
+    79,110,101,32,115,104,111,117,108,100,32,117,115,101,32,105,
+    109,112,111,114,116,108,105,98,32,97,115,32,116,104,101,32,
+    112,117,98,108,105,99,45,102,97,99,105,110,103,32,118,101,
+    114,115,105,111,110,32,111,102,32,116,104,105,115,32,109,111,
+    100,117,108,101,46,10,10,218,3,119,105,110,218,6,99,121,
+    103,119,105,110,218,6,100,97,114,119,105,110,99,0,0,0,
+    0,0,0,0,0,1,0,0,0,3,0,0,0,3,0,0,
+    0,115,88,0,0,0,116,0,0,106,1,0,106,2,0,116,
+    3,0,131,1,0,114,72,0,116,0,0,106,1,0,106,2,
+    0,116,4,0,131,1,0,114,45,0,100,1,0,137,0,0,
+    110,6,0,100,2,0,137,0,0,135,0,0,102,1,0,100,
+    3,0,100,4,0,134,0,0,125,0,0,110,12,0,100,5,
+    0,100,4,0,132,0,0,125,0,0,124,0,0,83,41,6,
+    78,90,12,80,89,84,72,79,78,67,65,83,69,79,75,115,
+    12,0,0,0,80,89,84,72,79,78,67,65,83,69,79,75,
+    99,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,
+    0,19,0,0,0,115,13,0,0,0,136,0,0,116,0,0,
+    106,1,0,107,6,0,83,41,1,122,53,84,114,117,101,32,
+    105,102,32,102,105,108,101,110,97,109,101,115,32,109,117,115,
+    116,32,98,101,32,99,104,101,99,107,101,100,32,99,97,115,
+    101,45,105,110,115,101,110,115,105,116,105,118,101,108,121,46,
+    41,2,218,3,95,111,115,90,7,101,110,118,105,114,111,110,
+    169,0,41,1,218,3,107,101,121,114,4,0,0,0,250,38,
+    60,102,114,111,122,101,110,32,105,109,112,111,114,116,108,105,
+    98,46,95,98,111,111,116,115,116,114,97,112,95,101,120,116,
+    101,114,110,97,108,62,218,11,95,114,101,108,97,120,95,99,
+    97,115,101,37,0,0,0,115,2,0,0,0,0,2,122,37,
+    95,109,97,107,101,95,114,101,108,97,120,95,99,97,115,101,
+    46,60,108,111,99,97,108,115,62,46,95,114,101,108,97,120,
+    95,99,97,115,101,99,0,0,0,0,0,0,0,0,0,0,
+    0,0,1,0,0,0,83,0,0,0,115,4,0,0,0,100,
+    1,0,83,41,2,122,53,84,114,117,101,32,105,102,32,102,
     105,108,101,110,97,109,101,115,32,109,117,115,116,32,98,101,
     32,99,104,101,99,107,101,100,32,99,97,115,101,45,105,110,
-    115,101,110,115,105,116,105,118,101,108,121,46,41,2,218,3,
-    95,111,115,90,7,101,110,118,105,114,111,110,169,0,41,1,
-    218,3,107,101,121,114,4,0,0,0,250,38,60,102,114,111,
-    122,101,110,32,105,109,112,111,114,116,108,105,98,46,95,98,
-    111,111,116,115,116,114,97,112,95,101,120,116,101,114,110,97,
-    108,62,218,11,95,114,101,108,97,120,95,99,97,115,101,37,
-    0,0,0,115,2,0,0,0,0,2,122,37,95,109,97,107,
-    101,95,114,101,108,97,120,95,99,97,115,101,46,60,108,111,
-    99,97,108,115,62,46,95,114,101,108,97,120,95,99,97,115,
-    101,99,0,0,0,0,0,0,0,0,0,0,0,0,1,0,
-    0,0,83,0,0,0,115,4,0,0,0,100,1,0,83,41,
-    2,122,53,84,114,117,101,32,105,102,32,102,105,108,101,110,
-    97,109,101,115,32,109,117,115,116,32,98,101,32,99,104,101,
-    99,107,101,100,32,99,97,115,101,45,105,110,115,101,110,115,
-    105,116,105,118,101,108,121,46,70,114,4,0,0,0,114,4,
+    115,101,110,115,105,116,105,118,101,108,121,46,70,114,4,0,
+    0,0,114,4,0,0,0,114,4,0,0,0,114,4,0,0,
+    0,114,6,0,0,0,114,7,0,0,0,41,0,0,0,115,
+    2,0,0,0,0,2,41,5,218,3,115,121,115,218,8,112,
+    108,97,116,102,111,114,109,218,10,115,116,97,114,116,115,119,
+    105,116,104,218,27,95,67,65,83,69,95,73,78,83,69,78,
+    83,73,84,73,86,69,95,80,76,65,84,70,79,82,77,83,
+    218,35,95,67,65,83,69,95,73,78,83,69,78,83,73,84,
+    73,86,69,95,80,76,65,84,70,79,82,77,83,95,83,84,
+    82,95,75,69,89,41,1,114,7,0,0,0,114,4,0,0,
+    0,41,1,114,5,0,0,0,114,6,0,0,0,218,16,95,
+    109,97,107,101,95,114,101,108,97,120,95,99,97,115,101,30,
+    0,0,0,115,14,0,0,0,0,1,18,1,18,1,9,2,
+    6,2,21,4,12,3,114,13,0,0,0,99,1,0,0,0,
+    0,0,0,0,1,0,0,0,3,0,0,0,67,0,0,0,
+    115,26,0,0,0,116,0,0,124,0,0,131,1,0,100,1,
+    0,64,106,1,0,100,2,0,100,3,0,131,2,0,83,41,
+    4,122,42,67,111,110,118,101,114,116,32,97,32,51,50,45,
+    98,105,116,32,105,110,116,101,103,101,114,32,116,111,32,108,
+    105,116,116,108,101,45,101,110,100,105,97,110,46,108,3,0,
+    0,0,255,127,255,127,3,0,233,4,0,0,0,218,6,108,
+    105,116,116,108,101,41,2,218,3,105,110,116,218,8,116,111,
+    95,98,121,116,101,115,41,1,218,1,120,114,4,0,0,0,
+    114,4,0,0,0,114,6,0,0,0,218,7,95,119,95,108,
+    111,110,103,47,0,0,0,115,2,0,0,0,0,2,114,19,
+    0,0,0,99,1,0,0,0,0,0,0,0,1,0,0,0,
+    3,0,0,0,67,0,0,0,115,16,0,0,0,116,0,0,
+    106,1,0,124,0,0,100,1,0,131,2,0,83,41,2,122,
+    47,67,111,110,118,101,114,116,32,52,32,98,121,116,101,115,
+    32,105,110,32,108,105,116,116,108,101,45,101,110,100,105,97,
+    110,32,116,111,32,97,110,32,105,110,116,101,103,101,114,46,
+    114,15,0,0,0,41,2,114,16,0,0,0,218,10,102,114,
+    111,109,95,98,121,116,101,115,41,1,90,9,105,110,116,95,
+    98,121,116,101,115,114,4,0,0,0,114,4,0,0,0,114,
+    6,0,0,0,218,7,95,114,95,108,111,110,103,52,0,0,
+    0,115,2,0,0,0,0,2,114,21,0,0,0,99,0,0,
+    0,0,0,0,0,0,1,0,0,0,3,0,0,0,71,0,
+    0,0,115,26,0,0,0,116,0,0,106,1,0,100,1,0,
+    100,2,0,132,0,0,124,0,0,68,131,1,0,131,1,0,
+    83,41,3,122,31,82,101,112,108,97,99,101,109,101,110,116,
+    32,102,111,114,32,111,115,46,112,97,116,104,46,106,111,105,
+    110,40,41,46,99,1,0,0,0,0,0,0,0,2,0,0,
+    0,4,0,0,0,83,0,0,0,115,37,0,0,0,103,0,
+    0,124,0,0,93,27,0,125,1,0,124,1,0,114,6,0,
+    124,1,0,106,0,0,116,1,0,131,1,0,145,2,0,113,
+    6,0,83,114,4,0,0,0,41,2,218,6,114,115,116,114,
+    105,112,218,15,112,97,116,104,95,115,101,112,97,114,97,116,
+    111,114,115,41,2,218,2,46,48,218,4,112,97,114,116,114,
+    4,0,0,0,114,4,0,0,0,114,6,0,0,0,250,10,
+    60,108,105,115,116,99,111,109,112,62,59,0,0,0,115,2,
+    0,0,0,9,1,122,30,95,112,97,116,104,95,106,111,105,
+    110,46,60,108,111,99,97,108,115,62,46,60,108,105,115,116,
+    99,111,109,112,62,41,2,218,8,112,97,116,104,95,115,101,
+    112,218,4,106,111,105,110,41,1,218,10,112,97,116,104,95,
+    112,97,114,116,115,114,4,0,0,0,114,4,0,0,0,114,
+    6,0,0,0,218,10,95,112,97,116,104,95,106,111,105,110,
+    57,0,0,0,115,4,0,0,0,0,2,15,1,114,30,0,
+    0,0,99,1,0,0,0,0,0,0,0,5,0,0,0,5,
+    0,0,0,67,0,0,0,115,134,0,0,0,116,0,0,116,
+    1,0,131,1,0,100,1,0,107,2,0,114,52,0,124,0,
+    0,106,2,0,116,3,0,131,1,0,92,3,0,125,1,0,
+    125,2,0,125,3,0,124,1,0,124,3,0,102,2,0,83,
+    120,69,0,116,4,0,124,0,0,131,1,0,68,93,55,0,
+    125,4,0,124,4,0,116,1,0,107,6,0,114,65,0,124,
+    0,0,106,5,0,124,4,0,100,2,0,100,1,0,131,1,
+    1,92,2,0,125,1,0,125,3,0,124,1,0,124,3,0,
+    102,2,0,83,113,65,0,87,100,3,0,124,0,0,102,2,
+    0,83,41,4,122,32,82,101,112,108,97,99,101,109,101,110,
+    116,32,102,111,114,32,111,115,46,112,97,116,104,46,115,112,
+    108,105,116,40,41,46,233,1,0,0,0,90,8,109,97,120,
+    115,112,108,105,116,218,0,41,6,218,3,108,101,110,114,23,
+    0,0,0,218,10,114,112,97,114,116,105,116,105,111,110,114,
+    27,0,0,0,218,8,114,101,118,101,114,115,101,100,218,6,
+    114,115,112,108,105,116,41,5,218,4,112,97,116,104,90,5,
+    102,114,111,110,116,218,1,95,218,4,116,97,105,108,114,18,
     0,0,0,114,4,0,0,0,114,4,0,0,0,114,6,0,
-    0,0,114,7,0,0,0,41,0,0,0,115,2,0,0,0,
-    0,2,41,5,218,3,115,121,115,218,8,112,108,97,116,102,
-    111,114,109,218,10,115,116,97,114,116,115,119,105,116,104,218,
-    27,95,67,65,83,69,95,73,78,83,69,78,83,73,84,73,
-    86,69,95,80,76,65,84,70,79,82,77,83,218,35,95,67,
-    65,83,69,95,73,78,83,69,78,83,73,84,73,86,69,95,
-    80,76,65,84,70,79,82,77,83,95,83,84,82,95,75,69,
-    89,41,1,114,7,0,0,0,114,4,0,0,0,41,1,114,
-    5,0,0,0,114,6,0,0,0,218,16,95,109,97,107,101,
-    95,114,101,108,97,120,95,99,97,115,101,30,0,0,0,115,
-    14,0,0,0,0,1,18,1,18,1,9,2,6,2,21,4,
-    12,3,114,13,0,0,0,99,1,0,0,0,0,0,0,0,
-    1,0,0,0,3,0,0,0,67,0,0,0,115,26,0,0,
-    0,116,0,0,124,0,0,131,1,0,100,1,0,64,106,1,
-    0,100,2,0,100,3,0,131,2,0,83,41,4,122,42,67,
-    111,110,118,101,114,116,32,97,32,51,50,45,98,105,116,32,
-    105,110,116,101,103,101,114,32,116,111,32,108,105,116,116,108,
-    101,45,101,110,100,105,97,110,46,108,3,0,0,0,255,127,
-    255,127,3,0,233,4,0,0,0,218,6,108,105,116,116,108,
-    101,41,2,218,3,105,110,116,218,8,116,111,95,98,121,116,
-    101,115,41,1,218,1,120,114,4,0,0,0,114,4,0,0,
-    0,114,6,0,0,0,218,7,95,119,95,108,111,110,103,47,
-    0,0,0,115,2,0,0,0,0,2,114,19,0,0,0,99,
-    1,0,0,0,0,0,0,0,1,0,0,0,3,0,0,0,
-    67,0,0,0,115,16,0,0,0,116,0,0,106,1,0,124,
-    0,0,100,1,0,131,2,0,83,41,2,122,47,67,111,110,
-    118,101,114,116,32,52,32,98,121,116,101,115,32,105,110,32,
-    108,105,116,116,108,101,45,101,110,100,105,97,110,32,116,111,
-    32,97,110,32,105,110,116,101,103,101,114,46,114,15,0,0,
-    0,41,2,114,16,0,0,0,218,10,102,114,111,109,95,98,
-    121,116,101,115,41,1,90,9,105,110,116,95,98,121,116,101,
-    115,114,4,0,0,0,114,4,0,0,0,114,6,0,0,0,
-    218,7,95,114,95,108,111,110,103,52,0,0,0,115,2,0,
-    0,0,0,2,114,21,0,0,0,99,0,0,0,0,0,0,
-    0,0,1,0,0,0,3,0,0,0,71,0,0,0,115,26,
-    0,0,0,116,0,0,106,1,0,100,1,0,100,2,0,132,
-    0,0,124,0,0,68,131,1,0,131,1,0,83,41,3,122,
-    31,82,101,112,108,97,99,101,109,101,110,116,32,102,111,114,
-    32,111,115,46,112,97,116,104,46,106,111,105,110,40,41,46,
-    99,1,0,0,0,0,0,0,0,2,0,0,0,4,0,0,
-    0,83,0,0,0,115,37,0,0,0,103,0,0,124,0,0,
-    93,27,0,125,1,0,124,1,0,114,6,0,124,1,0,106,
-    0,0,116,1,0,131,1,0,145,2,0,113,6,0,83,114,
-    4,0,0,0,41,2,218,6,114,115,116,114,105,112,218,15,
-    112,97,116,104,95,115,101,112,97,114,97,116,111,114,115,41,
-    2,218,2,46,48,218,4,112,97,114,116,114,4,0,0,0,
-    114,4,0,0,0,114,6,0,0,0,250,10,60,108,105,115,
-    116,99,111,109,112,62,59,0,0,0,115,2,0,0,0,9,
-    1,122,30,95,112,97,116,104,95,106,111,105,110,46,60,108,
-    111,99,97,108,115,62,46,60,108,105,115,116,99,111,109,112,
-    62,41,2,218,8,112,97,116,104,95,115,101,112,218,4,106,
-    111,105,110,41,1,218,10,112,97,116,104,95,112,97,114,116,
-    115,114,4,0,0,0,114,4,0,0,0,114,6,0,0,0,
-    218,10,95,112,97,116,104,95,106,111,105,110,57,0,0,0,
-    115,4,0,0,0,0,2,15,1,114,30,0,0,0,99,1,
-    0,0,0,0,0,0,0,5,0,0,0,5,0,0,0,67,
-    0,0,0,115,134,0,0,0,116,0,0,116,1,0,131,1,
-    0,100,1,0,107,2,0,114,52,0,124,0,0,106,2,0,
-    116,3,0,131,1,0,92,3,0,125,1,0,125,2,0,125,
-    3,0,124,1,0,124,3,0,102,2,0,83,120,69,0,116,
-    4,0,124,0,0,131,1,0,68,93,55,0,125,4,0,124,
-    4,0,116,1,0,107,6,0,114,65,0,124,0,0,106,5,
-    0,124,4,0,100,2,0,100,1,0,131,1,1,92,2,0,
-    125,1,0,125,3,0,124,1,0,124,3,0,102,2,0,83,
-    113,65,0,87,100,3,0,124,0,0,102,2,0,83,41,4,
-    122,32,82,101,112,108,97,99,101,109,101,110,116,32,102,111,
-    114,32,111,115,46,112,97,116,104,46,115,112,108,105,116,40,
-    41,46,233,1,0,0,0,90,8,109,97,120,115,112,108,105,
-    116,218,0,41,6,218,3,108,101,110,114,23,0,0,0,218,
-    10,114,112,97,114,116,105,116,105,111,110,114,27,0,0,0,
-    218,8,114,101,118,101,114,115,101,100,218,6,114,115,112,108,
-    105,116,41,5,218,4,112,97,116,104,90,5,102,114,111,110,
-    116,218,1,95,218,4,116,97,105,108,114,18,0,0,0,114,
-    4,0,0,0,114,4,0,0,0,114,6,0,0,0,218,11,
-    95,112,97,116,104,95,115,112,108,105,116,63,0,0,0,115,
-    16,0,0,0,0,2,18,1,24,1,10,1,19,1,12,1,
-    27,1,14,1,114,40,0,0,0,99,1,0,0,0,0,0,
-    0,0,1,0,0,0,2,0,0,0,67,0,0,0,115,13,
-    0,0,0,116,0,0,106,1,0,124,0,0,131,1,0,83,
-    41,1,122,126,83,116,97,116,32,116,104,101,32,112,97,116,
-    104,46,10,10,32,32,32,32,77,97,100,101,32,97,32,115,
-    101,112,97,114,97,116,101,32,102,117,110,99,116,105,111,110,
-    32,116,111,32,109,97,107,101,32,105,116,32,101,97,115,105,
-    101,114,32,116,111,32,111,118,101,114,114,105,100,101,32,105,
-    110,32,101,120,112,101,114,105,109,101,110,116,115,10,32,32,
-    32,32,40,101,46,103,46,32,99,97,99,104,101,32,115,116,
-    97,116,32,114,101,115,117,108,116,115,41,46,10,10,32,32,
-    32,32,41,2,114,3,0,0,0,90,4,115,116,97,116,41,
-    1,114,37,0,0,0,114,4,0,0,0,114,4,0,0,0,
-    114,6,0,0,0,218,10,95,112,97,116,104,95,115,116,97,
-    116,75,0,0,0,115,2,0,0,0,0,7,114,41,0,0,
-    0,99,2,0,0,0,0,0,0,0,3,0,0,0,11,0,
-    0,0,67,0,0,0,115,58,0,0,0,121,16,0,116,0,
-    0,124,0,0,131,1,0,125,2,0,87,110,22,0,4,116,
-    1,0,107,10,0,114,40,0,1,1,1,100,1,0,83,89,
-    110,1,0,88,124,2,0,106,2,0,100,2,0,64,124,1,
-    0,107,2,0,83,41,3,122,49,84,101,115,116,32,119,104,
-    101,116,104,101,114,32,116,104,101,32,112,97,116,104,32,105,
-    115,32,116,104,101,32,115,112,101,99,105,102,105,101,100,32,
-    109,111,100,101,32,116,121,112,101,46,70,105,0,240,0,0,
-    41,3,114,41,0,0,0,218,7,79,83,69,114,114,111,114,
-    218,7,115,116,95,109,111,100,101,41,3,114,37,0,0,0,
-    218,4,109,111,100,101,90,9,115,116,97,116,95,105,110,102,
-    111,114,4,0,0,0,114,4,0,0,0,114,6,0,0,0,
-    218,18,95,112,97,116,104,95,105,115,95,109,111,100,101,95,
-    116,121,112,101,85,0,0,0,115,10,0,0,0,0,2,3,
-    1,16,1,13,1,9,1,114,45,0,0,0,99,1,0,0,
-    0,0,0,0,0,1,0,0,0,3,0,0,0,67,0,0,
-    0,115,13,0,0,0,116,0,0,124,0,0,100,1,0,131,
-    2,0,83,41,2,122,31,82,101,112,108,97,99,101,109,101,
+    0,0,218,11,95,112,97,116,104,95,115,112,108,105,116,63,
+    0,0,0,115,16,0,0,0,0,2,18,1,24,1,10,1,
+    19,1,12,1,27,1,14,1,114,40,0,0,0,99,1,0,
+    0,0,0,0,0,0,1,0,0,0,2,0,0,0,67,0,
+    0,0,115,13,0,0,0,116,0,0,106,1,0,124,0,0,
+    131,1,0,83,41,1,122,126,83,116,97,116,32,116,104,101,
+    32,112,97,116,104,46,10,10,32,32,32,32,77,97,100,101,
+    32,97,32,115,101,112,97,114,97,116,101,32,102,117,110,99,
+    116,105,111,110,32,116,111,32,109,97,107,101,32,105,116,32,
+    101,97,115,105,101,114,32,116,111,32,111,118,101,114,114,105,
+    100,101,32,105,110,32,101,120,112,101,114,105,109,101,110,116,
+    115,10,32,32,32,32,40,101,46,103,46,32,99,97,99,104,
+    101,32,115,116,97,116,32,114,101,115,117,108,116,115,41,46,
+    10,10,32,32,32,32,41,2,114,3,0,0,0,90,4,115,
+    116,97,116,41,1,114,37,0,0,0,114,4,0,0,0,114,
+    4,0,0,0,114,6,0,0,0,218,10,95,112,97,116,104,
+    95,115,116,97,116,75,0,0,0,115,2,0,0,0,0,7,
+    114,41,0,0,0,99,2,0,0,0,0,0,0,0,3,0,
+    0,0,11,0,0,0,67,0,0,0,115,58,0,0,0,121,
+    16,0,116,0,0,124,0,0,131,1,0,125,2,0,87,110,
+    22,0,4,116,1,0,107,10,0,114,40,0,1,1,1,100,
+    1,0,83,89,110,1,0,88,124,2,0,106,2,0,100,2,
+    0,64,124,1,0,107,2,0,83,41,3,122,49,84,101,115,
+    116,32,119,104,101,116,104,101,114,32,116,104,101,32,112,97,
+    116,104,32,105,115,32,116,104,101,32,115,112,101,99,105,102,
+    105,101,100,32,109,111,100,101,32,116,121,112,101,46,70,105,
+    0,240,0,0,41,3,114,41,0,0,0,218,7,79,83,69,
+    114,114,111,114,218,7,115,116,95,109,111,100,101,41,3,114,
+    37,0,0,0,218,4,109,111,100,101,90,9,115,116,97,116,
+    95,105,110,102,111,114,4,0,0,0,114,4,0,0,0,114,
+    6,0,0,0,218,18,95,112,97,116,104,95,105,115,95,109,
+    111,100,101,95,116,121,112,101,85,0,0,0,115,10,0,0,
+    0,0,2,3,1,16,1,13,1,9,1,114,45,0,0,0,
+    99,1,0,0,0,0,0,0,0,1,0,0,0,3,0,0,
+    0,67,0,0,0,115,13,0,0,0,116,0,0,124,0,0,
+    100,1,0,131,2,0,83,41,2,122,31,82,101,112,108,97,
+    99,101,109,101,110,116,32,102,111,114,32,111,115,46,112,97,
+    116,104,46,105,115,102,105,108,101,46,105,0,128,0,0,41,
+    1,114,45,0,0,0,41,1,114,37,0,0,0,114,4,0,
+    0,0,114,4,0,0,0,114,6,0,0,0,218,12,95,112,
+    97,116,104,95,105,115,102,105,108,101,94,0,0,0,115,2,
+    0,0,0,0,2,114,46,0,0,0,99,1,0,0,0,0,
+    0,0,0,1,0,0,0,3,0,0,0,67,0,0,0,115,
+    31,0,0,0,124,0,0,115,18,0,116,0,0,106,1,0,
+    131,0,0,125,0,0,116,2,0,124,0,0,100,1,0,131,
+    2,0,83,41,2,122,30,82,101,112,108,97,99,101,109,101,
     110,116,32,102,111,114,32,111,115,46,112,97,116,104,46,105,
-    115,102,105,108,101,46,105,0,128,0,0,41,1,114,45,0,
-    0,0,41,1,114,37,0,0,0,114,4,0,0,0,114,4,
-    0,0,0,114,6,0,0,0,218,12,95,112,97,116,104,95,
-    105,115,102,105,108,101,94,0,0,0,115,2,0,0,0,0,
-    2,114,46,0,0,0,99,1,0,0,0,0,0,0,0,1,
-    0,0,0,3,0,0,0,67,0,0,0,115,31,0,0,0,
-    124,0,0,115,18,0,116,0,0,106,1,0,131,0,0,125,
-    0,0,116,2,0,124,0,0,100,1,0,131,2,0,83,41,
-    2,122,30,82,101,112,108,97,99,101,109,101,110,116,32,102,
-    111,114,32,111,115,46,112,97,116,104,46,105,115,100,105,114,
-    46,105,0,64,0,0,41,3,114,3,0,0,0,218,6,103,
-    101,116,99,119,100,114,45,0,0,0,41,1,114,37,0,0,
-    0,114,4,0,0,0,114,4,0,0,0,114,6,0,0,0,
-    218,11,95,112,97,116,104,95,105,115,100,105,114,99,0,0,
-    0,115,6,0,0,0,0,2,6,1,12,1,114,48,0,0,
-    0,105,182,1,0,0,99,3,0,0,0,0,0,0,0,6,
-    0,0,0,17,0,0,0,67,0,0,0,115,193,0,0,0,
-    100,1,0,106,0,0,124,0,0,116,1,0,124,0,0,131,
-    1,0,131,2,0,125,3,0,116,2,0,106,3,0,124,3,
-    0,116,2,0,106,4,0,116,2,0,106,5,0,66,116,2,
-    0,106,6,0,66,124,2,0,100,2,0,64,131,3,0,125,
-    4,0,121,61,0,116,7,0,106,8,0,124,4,0,100,3,
-    0,131,2,0,143,20,0,125,5,0,124,5,0,106,9,0,
-    124,1,0,131,1,0,1,87,100,4,0,81,82,88,116,2,
-    0,106,10,0,124,3,0,124,0,0,131,2,0,1,87,110,
-    59,0,4,116,11,0,107,10,0,114,188,0,1,1,1,121,
-    17,0,116,2,0,106,12,0,124,3,0,131,1,0,1,87,
-    110,18,0,4,116,11,0,107,10,0,114,180,0,1,1,1,
-    89,110,1,0,88,130,0,0,89,110,1,0,88,100,4,0,
-    83,41,5,122,162,66,101,115,116,45,101,102,102,111,114,116,
-    32,102,117,110,99,116,105,111,110,32,116,111,32,119,114,105,
-    116,101,32,100,97,116,97,32,116,111,32,97,32,112,97,116,
-    104,32,97,116,111,109,105,99,97,108,108,121,46,10,32,32,
-    32,32,66,101,32,112,114,101,112,97,114,101,100,32,116,111,
-    32,104,97,110,100,108,101,32,97,32,70,105,108,101,69,120,
-    105,115,116,115,69,114,114,111,114,32,105,102,32,99,111,110,
-    99,117,114,114,101,110,116,32,119,114,105,116,105,110,103,32,
-    111,102,32,116,104,101,10,32,32,32,32,116,101,109,112,111,
-    114,97,114,121,32,102,105,108,101,32,105,115,32,97,116,116,
-    101,109,112,116,101,100,46,122,5,123,125,46,123,125,105,182,
-    1,0,0,90,2,119,98,78,41,13,218,6,102,111,114,109,
-    97,116,218,2,105,100,114,3,0,0,0,90,4,111,112,101,
-    110,90,6,79,95,69,88,67,76,90,7,79,95,67,82,69,
-    65,84,90,8,79,95,87,82,79,78,76,89,218,3,95,105,
-    111,218,6,70,105,108,101,73,79,218,5,119,114,105,116,101,
-    218,7,114,101,112,108,97,99,101,114,42,0,0,0,90,6,
-    117,110,108,105,110,107,41,6,114,37,0,0,0,218,4,100,
-    97,116,97,114,44,0,0,0,90,8,112,97,116,104,95,116,
-    109,112,90,2,102,100,218,4,102,105,108,101,114,4,0,0,
-    0,114,4,0,0,0,114,6,0,0,0,218,13,95,119,114,
-    105,116,101,95,97,116,111,109,105,99,106,0,0,0,115,26,
-    0,0,0,0,5,24,1,9,1,33,1,3,3,21,1,20,
-    1,20,1,13,1,3,1,17,1,13,1,5,1,114,57,0,
-    0,0,105,23,13,0,0,233,2,0,0,0,114,15,0,0,
-    0,115,2,0,0,0,13,10,90,11,95,95,112,121,99,97,
-    99,104,101,95,95,122,4,111,112,116,45,122,3,46,112,121,
-    122,4,46,112,121,99,78,218,12,111,112,116,105,109,105,122,
-    97,116,105,111,110,99,2,0,0,0,1,0,0,0,11,0,
-    0,0,6,0,0,0,67,0,0,0,115,87,1,0,0,124,
-    1,0,100,1,0,107,9,0,114,76,0,116,0,0,106,1,
-    0,100,2,0,116,2,0,131,2,0,1,124,2,0,100,1,
-    0,107,9,0,114,58,0,100,3,0,125,3,0,116,3,0,
-    124,3,0,131,1,0,130,1,0,124,1,0,114,70,0,100,
-    4,0,110,3,0,100,5,0,125,2,0,116,4,0,124,0,
-    0,131,1,0,92,2,0,125,4,0,125,5,0,124,5,0,
-    106,5,0,100,6,0,131,1,0,92,3,0,125,6,0,125,
-    7,0,125,8,0,116,6,0,106,7,0,106,8,0,125,9,
-    0,124,9,0,100,1,0,107,8,0,114,154,0,116,9,0,
-    100,7,0,131,1,0,130,1,0,100,4,0,106,10,0,124,
-    6,0,114,172,0,124,6,0,110,3,0,124,8,0,124,7,
-    0,124,9,0,103,3,0,131,1,0,125,10,0,124,2,0,
-    100,1,0,107,8,0,114,241,0,116,6,0,106,11,0,106,
-    12,0,100,8,0,107,2,0,114,229,0,100,4,0,125,2,
-    0,110,12,0,116,6,0,106,11,0,106,12,0,125,2,0,
-    116,13,0,124,2,0,131,1,0,125,2,0,124,2,0,100,
-    4,0,107,3,0,114,63,1,124,2,0,106,14,0,131,0,
-    0,115,42,1,116,15,0,100,9,0,106,16,0,124,2,0,
-    131,1,0,131,1,0,130,1,0,100,10,0,106,16,0,124,
-    10,0,116,17,0,124,2,0,131,3,0,125,10,0,116,18,
-    0,124,4,0,116,19,0,124,10,0,116,20,0,100,8,0,
-    25,23,131,3,0,83,41,11,97,254,2,0,0,71,105,118,
-    101,110,32,116,104,101,32,112,97,116,104,32,116,111,32,97,
-    32,46,112,121,32,102,105,108,101,44,32,114,101,116,117,114,
-    110,32,116,104,101,32,112,97,116,104,32,116,111,32,105,116,
-    115,32,46,112,121,99,32,102,105,108,101,46,10,10,32,32,
-    32,32,84,104,101,32,46,112,121,32,102,105,108,101,32,100,
-    111,101,115,32,110,111,116,32,110,101,101,100,32,116,111,32,
-    101,120,105,115,116,59,32,116,104,105,115,32,115,105,109,112,
-    108,121,32,114,101,116,117,114,110,115,32,116,104,101,32,112,
-    97,116,104,32,116,111,32,116,104,101,10,32,32,32,32,46,
-    112,121,99,32,102,105,108,101,32,99,97,108,99,117,108,97,
-    116,101,100,32,97,115,32,105,102,32,116,104,101,32,46,112,
-    121,32,102,105,108,101,32,119,101,114,101,32,105,109,112,111,
-    114,116,101,100,46,10,10,32,32,32,32,84,104,101,32,39,
-    111,112,116,105,109,105,122,97,116,105,111,110,39,32,112,97,
-    114,97,109,101,116,101,114,32,99,111,110,116,114,111,108,115,
-    32,116,104,101,32,112,114,101,115,117,109,101,100,32,111,112,
-    116,105,109,105,122,97,116,105,111,110,32,108,101,118,101,108,
-    32,111,102,10,32,32,32,32,116,104,101,32,98,121,116,101,
-    99,111,100,101,32,102,105,108,101,46,32,73,102,32,39,111,
-    112,116,105,109,105,122,97,116,105,111,110,39,32,105,115,32,
-    110,111,116,32,78,111,110,101,44,32,116,104,101,32,115,116,
-    114,105,110,103,32,114,101,112,114,101,115,101,110,116,97,116,
-    105,111,110,10,32,32,32,32,111,102,32,116,104,101,32,97,
-    114,103,117,109,101,110,116,32,105,115,32,116,97,107,101,110,
-    32,97,110,100,32,118,101,114,105,102,105,101,100,32,116,111,
-    32,98,101,32,97,108,112,104,97,110,117,109,101,114,105,99,
-    32,40,101,108,115,101,32,86,97,108,117,101,69,114,114,111,
-    114,10,32,32,32,32,105,115,32,114,97,105,115,101,100,41,
-    46,10,10,32,32,32,32,84,104,101,32,100,101,98,117,103,
-    95,111,118,101,114,114,105,100,101,32,112,97,114,97,109,101,
-    116,101,114,32,105,115,32,100,101,112,114,101,99,97,116,101,
-    100,46,32,73,102,32,100,101,98,117,103,95,111,118,101,114,
-    114,105,100,101,32,105,115,32,110,111,116,32,78,111,110,101,
-    44,10,32,32,32,32,97,32,84,114,117,101,32,118,97,108,
-    117,101,32,105,115,32,116,104,101,32,115,97,109,101,32,97,
-    115,32,115,101,116,116,105,110,103,32,39,111,112,116,105,109,
-    105,122,97,116,105,111,110,39,32,116,111,32,116,104,101,32,
-    101,109,112,116,121,32,115,116,114,105,110,103,10,32,32,32,
-    32,119,104,105,108,101,32,97,32,70,97,108,115,101,32,118,
-    97,108,117,101,32,105,115,32,101,113,117,105,118,97,108,101,
-    110,116,32,116,111,32,115,101,116,116,105,110,103,32,39,111,
-    112,116,105,109,105,122,97,116,105,111,110,39,32,116,111,32,
-    39,49,39,46,10,10,32,32,32,32,73,102,32,115,121,115,
-    46,105,109,112,108,101,109,101,110,116,97,116,105,111,110,46,
-    99,97,99,104,101,95,116,97,103,32,105,115,32,78,111,110,
-    101,32,116,104,101,110,32,78,111,116,73,109,112,108,101,109,
-    101,110,116,101,100,69,114,114,111,114,32,105,115,32,114,97,
-    105,115,101,100,46,10,10,32,32,32,32,78,122,70,116,104,
-    101,32,100,101,98,117,103,95,111,118,101,114,114,105,100,101,
-    32,112,97,114,97,109,101,116,101,114,32,105,115,32,100,101,
-    112,114,101,99,97,116,101,100,59,32,117,115,101,32,39,111,
-    112,116,105,109,105,122,97,116,105,111,110,39,32,105,110,115,
-    116,101,97,100,122,50,100,101,98,117,103,95,111,118,101,114,
-    114,105,100,101,32,111,114,32,111,112,116,105,109,105,122,97,
-    116,105,111,110,32,109,117,115,116,32,98,101,32,115,101,116,
-    32,116,111,32,78,111,110,101,114,32,0,0,0,114,31,0,
-    0,0,218,1,46,122,36,115,121,115,46,105,109,112,108,101,
-    109,101,110,116,97,116,105,111,110,46,99,97,99,104,101,95,
-    116,97,103,32,105,115,32,78,111,110,101,233,0,0,0,0,
-    122,24,123,33,114,125,32,105,115,32,110,111,116,32,97,108,
-    112,104,97,110,117,109,101,114,105,99,122,7,123,125,46,123,
-    125,123,125,41,21,218,9,95,119,97,114,110,105,110,103,115,
-    218,4,119,97,114,110,218,18,68,101,112,114,101,99,97,116,
-    105,111,110,87,97,114,110,105,110,103,218,9,84,121,112,101,
-    69,114,114,111,114,114,40,0,0,0,114,34,0,0,0,114,
-    8,0,0,0,218,14,105,109,112,108,101,109,101,110,116,97,
-    116,105,111,110,218,9,99,97,99,104,101,95,116,97,103,218,
-    19,78,111,116,73,109,112,108,101,109,101,110,116,101,100,69,
-    114,114,111,114,114,28,0,0,0,218,5,102,108,97,103,115,
-    218,8,111,112,116,105,109,105,122,101,218,3,115,116,114,218,
-    7,105,115,97,108,110,117,109,218,10,86,97,108,117,101,69,
-    114,114,111,114,114,49,0,0,0,218,4,95,79,80,84,114,
-    30,0,0,0,218,8,95,80,89,67,65,67,72,69,218,17,
-    66,89,84,69,67,79,68,69,95,83,85,70,70,73,88,69,
-    83,41,11,114,37,0,0,0,90,14,100,101,98,117,103,95,
-    111,118,101,114,114,105,100,101,114,59,0,0,0,218,7,109,
-    101,115,115,97,103,101,218,4,104,101,97,100,114,39,0,0,
-    0,90,4,98,97,115,101,218,3,115,101,112,218,4,114,101,
-    115,116,90,3,116,97,103,90,15,97,108,109,111,115,116,95,
-    102,105,108,101,110,97,109,101,114,4,0,0,0,114,4,0,
-    0,0,114,6,0,0,0,218,17,99,97,99,104,101,95,102,
-    114,111,109,95,115,111,117,114,99,101,254,0,0,0,115,46,
-    0,0,0,0,18,12,1,9,1,7,1,12,1,6,1,12,
-    1,18,1,18,1,24,1,12,1,12,1,12,1,36,1,12,
-    1,18,1,9,2,12,1,12,1,12,1,12,1,21,1,21,
-    1,114,81,0,0,0,99,1,0,0,0,0,0,0,0,8,
-    0,0,0,5,0,0,0,67,0,0,0,115,62,1,0,0,
-    116,0,0,106,1,0,106,2,0,100,1,0,107,8,0,114,
-    30,0,116,3,0,100,2,0,131,1,0,130,1,0,116,4,
-    0,124,0,0,131,1,0,92,2,0,125,1,0,125,2,0,
-    116,4,0,124,1,0,131,1,0,92,2,0,125,1,0,125,
-    3,0,124,3,0,116,5,0,107,3,0,114,102,0,116,6,
-    0,100,3,0,106,7,0,116,5,0,124,0,0,131,2,0,
-    131,1,0,130,1,0,124,2,0,106,8,0,100,4,0,131,
-    1,0,125,4,0,124,4,0,100,11,0,107,7,0,114,153,
-    0,116,6,0,100,7,0,106,7,0,124,2,0,131,1,0,
-    131,1,0,130,1,0,110,125,0,124,4,0,100,6,0,107,
-    2,0,114,22,1,124,2,0,106,9,0,100,4,0,100,5,
-    0,131,2,0,100,12,0,25,125,5,0,124,5,0,106,10,
-    0,116,11,0,131,1,0,115,223,0,116,6,0,100,8,0,
-    106,7,0,116,11,0,131,1,0,131,1,0,130,1,0,124,
-    5,0,116,12,0,116,11,0,131,1,0,100,1,0,133,2,
-    0,25,125,6,0,124,6,0,106,13,0,131,0,0,115,22,
-    1,116,6,0,100,9,0,106,7,0,124,5,0,131,1,0,
-    131,1,0,130,1,0,124,2,0,106,14,0,100,4,0,131,
-    1,0,100,10,0,25,125,7,0,116,15,0,124,1,0,124,
-    7,0,116,16,0,100,10,0,25,23,131,2,0,83,41,13,
-    97,110,1,0,0,71,105,118,101,110,32,116,104,101,32,112,
-    97,116,104,32,116,111,32,97,32,46,112,121,99,46,32,102,
-    105,108,101,44,32,114,101,116,117,114,110,32,116,104,101,32,
-    112,97,116,104,32,116,111,32,105,116,115,32,46,112,121,32,
-    102,105,108,101,46,10,10,32,32,32,32,84,104,101,32,46,
-    112,121,99,32,102,105,108,101,32,100,111,101,115,32,110,111,
-    116,32,110,101,101,100,32,116,111,32,101,120,105,115,116,59,
-    32,116,104,105,115,32,115,105,109,112,108,121,32,114,101,116,
-    117,114,110,115,32,116,104,101,32,112,97,116,104,32,116,111,
-    10,32,32,32,32,116,104,101,32,46,112,121,32,102,105,108,
-    101,32,99,97,108,99,117,108,97,116,101,100,32,116,111,32,
-    99,111,114,114,101,115,112,111,110,100,32,116,111,32,116,104,
-    101,32,46,112,121,99,32,102,105,108,101,46,32,32,73,102,
-    32,112,97,116,104,32,100,111,101,115,10,32,32,32,32,110,
-    111,116,32,99,111,110,102,111,114,109,32,116,111,32,80,69,
-    80,32,51,49,52,55,47,52,56,56,32,102,111,114,109,97,
-    116,44,32,86,97,108,117,101,69,114,114,111,114,32,119,105,
-    108,108,32,98,101,32,114,97,105,115,101,100,46,32,73,102,
-    10,32,32,32,32,115,121,115,46,105,109,112,108,101,109,101,
-    110,116,97,116,105,111,110,46,99,97,99,104,101,95,116,97,
-    103,32,105,115,32,78,111,110,101,32,116,104,101,110,32,78,
-    111,116,73,109,112,108,101,109,101,110,116,101,100,69,114,114,
-    111,114,32,105,115,32,114,97,105,115,101,100,46,10,10,32,
-    32,32,32,78,122,36,115,121,115,46,105,109,112,108,101,109,
-    101,110,116,97,116,105,111,110,46,99,97,99,104,101,95,116,
-    97,103,32,105,115,32,78,111,110,101,122,37,123,125,32,110,
-    111,116,32,98,111,116,116,111,109,45,108,101,118,101,108,32,
-    100,105,114,101,99,116,111,114,121,32,105,110,32,123,33,114,
-    125,114,60,0,0,0,114,58,0,0,0,233,3,0,0,0,
-    122,33,101,120,112,101,99,116,101,100,32,111,110,108,121,32,
-    50,32,111,114,32,51,32,100,111,116,115,32,105,110,32,123,
-    33,114,125,122,57,111,112,116,105,109,105,122,97,116,105,111,
-    110,32,112,111,114,116,105,111,110,32,111,102,32,102,105,108,
-    101,110,97,109,101,32,100,111,101,115,32,110,111,116,32,115,
-    116,97,114,116,32,119,105,116,104,32,123,33,114,125,122,52,
-    111,112,116,105,109,105,122,97,116,105,111,110,32,108,101,118,
-    101,108,32,123,33,114,125,32,105,115,32,110,111,116,32,97,
-    110,32,97,108,112,104,97,110,117,109,101,114,105,99,32,118,
-    97,108,117,101,114,61,0,0,0,62,2,0,0,0,114,58,
-    0,0,0,114,82,0,0,0,233,254,255,255,255,41,17,114,
-    8,0,0,0,114,66,0,0,0,114,67,0,0,0,114,68,
-    0,0,0,114,40,0,0,0,114,75,0,0,0,114,73,0,
-    0,0,114,49,0,0,0,218,5,99,111,117,110,116,114,36,
-    0,0,0,114,10,0,0,0,114,74,0,0,0,114,33,0,
-    0,0,114,72,0,0,0,218,9,112,97,114,116,105,116,105,
-    111,110,114,30,0,0,0,218,15,83,79,85,82,67,69,95,
-    83,85,70,70,73,88,69,83,41,8,114,37,0,0,0,114,
-    78,0,0,0,90,16,112,121,99,97,99,104,101,95,102,105,
-    108,101,110,97,109,101,90,7,112,121,99,97,99,104,101,90,
-    9,100,111,116,95,99,111,117,110,116,114,59,0,0,0,90,
-    9,111,112,116,95,108,101,118,101,108,90,13,98,97,115,101,
+    115,100,105,114,46,105,0,64,0,0,41,3,114,3,0,0,
+    0,218,6,103,101,116,99,119,100,114,45,0,0,0,41,1,
+    114,37,0,0,0,114,4,0,0,0,114,4,0,0,0,114,
+    6,0,0,0,218,11,95,112,97,116,104,95,105,115,100,105,
+    114,99,0,0,0,115,6,0,0,0,0,2,6,1,12,1,
+    114,48,0,0,0,105,182,1,0,0,99,3,0,0,0,0,
+    0,0,0,6,0,0,0,17,0,0,0,67,0,0,0,115,
+    193,0,0,0,100,1,0,106,0,0,124,0,0,116,1,0,
+    124,0,0,131,1,0,131,2,0,125,3,0,116,2,0,106,
+    3,0,124,3,0,116,2,0,106,4,0,116,2,0,106,5,
+    0,66,116,2,0,106,6,0,66,124,2,0,100,2,0,64,
+    131,3,0,125,4,0,121,61,0,116,7,0,106,8,0,124,
+    4,0,100,3,0,131,2,0,143,20,0,125,5,0,124,5,
+    0,106,9,0,124,1,0,131,1,0,1,87,100,4,0,81,
+    82,88,116,2,0,106,10,0,124,3,0,124,0,0,131,2,
+    0,1,87,110,59,0,4,116,11,0,107,10,0,114,188,0,
+    1,1,1,121,17,0,116,2,0,106,12,0,124,3,0,131,
+    1,0,1,87,110,18,0,4,116,11,0,107,10,0,114,180,
+    0,1,1,1,89,110,1,0,88,130,0,0,89,110,1,0,
+    88,100,4,0,83,41,5,122,162,66,101,115,116,45,101,102,
+    102,111,114,116,32,102,117,110,99,116,105,111,110,32,116,111,
+    32,119,114,105,116,101,32,100,97,116,97,32,116,111,32,97,
+    32,112,97,116,104,32,97,116,111,109,105,99,97,108,108,121,
+    46,10,32,32,32,32,66,101,32,112,114,101,112,97,114,101,
+    100,32,116,111,32,104,97,110,100,108,101,32,97,32,70,105,
+    108,101,69,120,105,115,116,115,69,114,114,111,114,32,105,102,
+    32,99,111,110,99,117,114,114,101,110,116,32,119,114,105,116,
+    105,110,103,32,111,102,32,116,104,101,10,32,32,32,32,116,
+    101,109,112,111,114,97,114,121,32,102,105,108,101,32,105,115,
+    32,97,116,116,101,109,112,116,101,100,46,122,5,123,125,46,
+    123,125,105,182,1,0,0,90,2,119,98,78,41,13,218,6,
+    102,111,114,109,97,116,218,2,105,100,114,3,0,0,0,90,
+    4,111,112,101,110,90,6,79,95,69,88,67,76,90,7,79,
+    95,67,82,69,65,84,90,8,79,95,87,82,79,78,76,89,
+    218,3,95,105,111,218,6,70,105,108,101,73,79,218,5,119,
+    114,105,116,101,218,7,114,101,112,108,97,99,101,114,42,0,
+    0,0,90,6,117,110,108,105,110,107,41,6,114,37,0,0,
+    0,218,4,100,97,116,97,114,44,0,0,0,90,8,112,97,
+    116,104,95,116,109,112,90,2,102,100,218,4,102,105,108,101,
+    114,4,0,0,0,114,4,0,0,0,114,6,0,0,0,218,
+    13,95,119,114,105,116,101,95,97,116,111,109,105,99,106,0,
+    0,0,115,26,0,0,0,0,5,24,1,9,1,33,1,3,
+    3,21,1,20,1,20,1,13,1,3,1,17,1,13,1,5,
+    1,114,57,0,0,0,105,23,13,0,0,233,2,0,0,0,
+    114,15,0,0,0,115,2,0,0,0,13,10,105,23,13,13,
+    10,122,65,77,97,103,105,99,32,110,117,109,98,101,114,32,
+    109,105,115,109,97,116,99,104,32,40,116,104,101,32,105,115,
+    115,117,101,50,55,50,56,54,32,119,111,114,107,97,114,111,
+    117,110,100,32,105,115,32,102,111,114,32,51,46,53,32,111,
+    110,108,121,41,105,22,13,0,0,90,11,95,95,112,121,99,
+    97,99,104,101,95,95,122,4,111,112,116,45,122,3,46,112,
+    121,122,4,46,112,121,99,78,218,12,111,112,116,105,109,105,
+    122,97,116,105,111,110,99,2,0,0,0,1,0,0,0,11,
+    0,0,0,6,0,0,0,67,0,0,0,115,87,1,0,0,
+    124,1,0,100,1,0,107,9,0,114,76,0,116,0,0,106,
+    1,0,100,2,0,116,2,0,131,2,0,1,124,2,0,100,
+    1,0,107,9,0,114,58,0,100,3,0,125,3,0,116,3,
+    0,124,3,0,131,1,0,130,1,0,124,1,0,114,70,0,
+    100,4,0,110,3,0,100,5,0,125,2,0,116,4,0,124,
+    0,0,131,1,0,92,2,0,125,4,0,125,5,0,124,5,
+    0,106,5,0,100,6,0,131,1,0,92,3,0,125,6,0,
+    125,7,0,125,8,0,116,6,0,106,7,0,106,8,0,125,
+    9,0,124,9,0,100,1,0,107,8,0,114,154,0,116,9,
+    0,100,7,0,131,1,0,130,1,0,100,4,0,106,10,0,
+    124,6,0,114,172,0,124,6,0,110,3,0,124,8,0,124,
+    7,0,124,9,0,103,3,0,131,1,0,125,10,0,124,2,
+    0,100,1,0,107,8,0,114,241,0,116,6,0,106,11,0,
+    106,12,0,100,8,0,107,2,0,114,229,0,100,4,0,125,
+    2,0,110,12,0,116,6,0,106,11,0,106,12,0,125,2,
+    0,116,13,0,124,2,0,131,1,0,125,2,0,124,2,0,
+    100,4,0,107,3,0,114,63,1,124,2,0,106,14,0,131,
+    0,0,115,42,1,116,15,0,100,9,0,106,16,0,124,2,
+    0,131,1,0,131,1,0,130,1,0,100,10,0,106,16,0,
+    124,10,0,116,17,0,124,2,0,131,3,0,125,10,0,116,
+    18,0,124,4,0,116,19,0,124,10,0,116,20,0,100,8,
+    0,25,23,131,3,0,83,41,11,97,254,2,0,0,71,105,
+    118,101,110,32,116,104,101,32,112,97,116,104,32,116,111,32,
+    97,32,46,112,121,32,102,105,108,101,44,32,114,101,116,117,
+    114,110,32,116,104,101,32,112,97,116,104,32,116,111,32,105,
+    116,115,32,46,112,121,99,32,102,105,108,101,46,10,10,32,
+    32,32,32,84,104,101,32,46,112,121,32,102,105,108,101,32,
+    100,111,101,115,32,110,111,116,32,110,101,101,100,32,116,111,
+    32,101,120,105,115,116,59,32,116,104,105,115,32,115,105,109,
+    112,108,121,32,114,101,116,117,114,110,115,32,116,104,101,32,
+    112,97,116,104,32,116,111,32,116,104,101,10,32,32,32,32,
+    46,112,121,99,32,102,105,108,101,32,99,97,108,99,117,108,
+    97,116,101,100,32,97,115,32,105,102,32,116,104,101,32,46,
+    112,121,32,102,105,108,101,32,119,101,114,101,32,105,109,112,
+    111,114,116,101,100,46,10,10,32,32,32,32,84,104,101,32,
+    39,111,112,116,105,109,105,122,97,116,105,111,110,39,32,112,
+    97,114,97,109,101,116,101,114,32,99,111,110,116,114,111,108,
+    115,32,116,104,101,32,112,114,101,115,117,109,101,100,32,111,
+    112,116,105,109,105,122,97,116,105,111,110,32,108,101,118,101,
+    108,32,111,102,10,32,32,32,32,116,104,101,32,98,121,116,
+    101,99,111,100,101,32,102,105,108,101,46,32,73,102,32,39,
+    111,112,116,105,109,105,122,97,116,105,111,110,39,32,105,115,
+    32,110,111,116,32,78,111,110,101,44,32,116,104,101,32,115,
+    116,114,105,110,103,32,114,101,112,114,101,115,101,110,116,97,
+    116,105,111,110,10,32,32,32,32,111,102,32,116,104,101,32,
+    97,114,103,117,109,101,110,116,32,105,115,32,116,97,107,101,
+    110,32,97,110,100,32,118,101,114,105,102,105,101,100,32,116,
+    111,32,98,101,32,97,108,112,104,97,110,117,109,101,114,105,
+    99,32,40,101,108,115,101,32,86,97,108,117,101,69,114,114,
+    111,114,10,32,32,32,32,105,115,32,114,97,105,115,101,100,
+    41,46,10,10,32,32,32,32,84,104,101,32,100,101,98,117,
+    103,95,111,118,101,114,114,105,100,101,32,112,97,114,97,109,
+    101,116,101,114,32,105,115,32,100,101,112,114,101,99,97,116,
+    101,100,46,32,73,102,32,100,101,98,117,103,95,111,118,101,
+    114,114,105,100,101,32,105,115,32,110,111,116,32,78,111,110,
+    101,44,10,32,32,32,32,97,32,84,114,117,101,32,118,97,
+    108,117,101,32,105,115,32,116,104,101,32,115,97,109,101,32,
+    97,115,32,115,101,116,116,105,110,103,32,39,111,112,116,105,
+    109,105,122,97,116,105,111,110,39,32,116,111,32,116,104,101,
+    32,101,109,112,116,121,32,115,116,114,105,110,103,10,32,32,
+    32,32,119,104,105,108,101,32,97,32,70,97,108,115,101,32,
+    118,97,108,117,101,32,105,115,32,101,113,117,105,118,97,108,
+    101,110,116,32,116,111,32,115,101,116,116,105,110,103,32,39,
+    111,112,116,105,109,105,122,97,116,105,111,110,39,32,116,111,
+    32,39,49,39,46,10,10,32,32,32,32,73,102,32,115,121,
+    115,46,105,109,112,108,101,109,101,110,116,97,116,105,111,110,
+    46,99,97,99,104,101,95,116,97,103,32,105,115,32,78,111,
+    110,101,32,116,104,101,110,32,78,111,116,73,109,112,108,101,
+    109,101,110,116,101,100,69,114,114,111,114,32,105,115,32,114,
+    97,105,115,101,100,46,10,10,32,32,32,32,78,122,70,116,
+    104,101,32,100,101,98,117,103,95,111,118,101,114,114,105,100,
+    101,32,112,97,114,97,109,101,116,101,114,32,105,115,32,100,
+    101,112,114,101,99,97,116,101,100,59,32,117,115,101,32,39,
+    111,112,116,105,109,105,122,97,116,105,111,110,39,32,105,110,
+    115,116,101,97,100,122,50,100,101,98,117,103,95,111,118,101,
+    114,114,105,100,101,32,111,114,32,111,112,116,105,109,105,122,
+    97,116,105,111,110,32,109,117,115,116,32,98,101,32,115,101,
+    116,32,116,111,32,78,111,110,101,114,32,0,0,0,114,31,
+    0,0,0,218,1,46,122,36,115,121,115,46,105,109,112,108,
+    101,109,101,110,116,97,116,105,111,110,46,99,97,99,104,101,
+    95,116,97,103,32,105,115,32,78,111,110,101,233,0,0,0,
+    0,122,24,123,33,114,125,32,105,115,32,110,111,116,32,97,
+    108,112,104,97,110,117,109,101,114,105,99,122,7,123,125,46,
+    123,125,123,125,41,21,218,9,95,119,97,114,110,105,110,103,
+    115,218,4,119,97,114,110,218,18,68,101,112,114,101,99,97,
+    116,105,111,110,87,97,114,110,105,110,103,218,9,84,121,112,
+    101,69,114,114,111,114,114,40,0,0,0,114,34,0,0,0,
+    114,8,0,0,0,218,14,105,109,112,108,101,109,101,110,116,
+    97,116,105,111,110,218,9,99,97,99,104,101,95,116,97,103,
+    218,19,78,111,116,73,109,112,108,101,109,101,110,116,101,100,
+    69,114,114,111,114,114,28,0,0,0,218,5,102,108,97,103,
+    115,218,8,111,112,116,105,109,105,122,101,218,3,115,116,114,
+    218,7,105,115,97,108,110,117,109,218,10,86,97,108,117,101,
+    69,114,114,111,114,114,49,0,0,0,218,4,95,79,80,84,
+    114,30,0,0,0,218,8,95,80,89,67,65,67,72,69,218,
+    17,66,89,84,69,67,79,68,69,95,83,85,70,70,73,88,
+    69,83,41,11,114,37,0,0,0,90,14,100,101,98,117,103,
+    95,111,118,101,114,114,105,100,101,114,59,0,0,0,218,7,
+    109,101,115,115,97,103,101,218,4,104,101,97,100,114,39,0,
+    0,0,90,4,98,97,115,101,218,3,115,101,112,218,4,114,
+    101,115,116,90,3,116,97,103,90,15,97,108,109,111,115,116,
     95,102,105,108,101,110,97,109,101,114,4,0,0,0,114,4,
-    0,0,0,114,6,0,0,0,218,17,115,111,117,114,99,101,
-    95,102,114,111,109,95,99,97,99,104,101,42,1,0,0,115,
-    44,0,0,0,0,9,18,1,12,1,18,1,18,1,12,1,
-    9,1,15,1,15,1,12,1,9,1,15,1,12,1,22,1,
-    15,1,9,1,12,1,22,1,12,1,9,1,12,1,19,1,
-    114,87,0,0,0,99,1,0,0,0,0,0,0,0,5,0,
-    0,0,12,0,0,0,67,0,0,0,115,164,0,0,0,116,
-    0,0,124,0,0,131,1,0,100,1,0,107,2,0,114,22,
-    0,100,2,0,83,124,0,0,106,1,0,100,3,0,131,1,
-    0,92,3,0,125,1,0,125,2,0,125,3,0,124,1,0,
-    12,115,81,0,124,3,0,106,2,0,131,0,0,100,7,0,
-    100,8,0,133,2,0,25,100,6,0,107,3,0,114,85,0,
-    124,0,0,83,121,16,0,116,3,0,124,0,0,131,1,0,
-    125,4,0,87,110,40,0,4,116,4,0,116,5,0,102,2,
-    0,107,10,0,114,143,0,1,1,1,124,0,0,100,2,0,
-    100,9,0,133,2,0,25,125,4,0,89,110,1,0,88,116,
-    6,0,124,4,0,131,1,0,114,160,0,124,4,0,83,124,
-    0,0,83,41,10,122,188,67,111,110,118,101,114,116,32,97,
-    32,98,121,116,101,99,111,100,101,32,102,105,108,101,32,112,
-    97,116,104,32,116,111,32,97,32,115,111,117,114,99,101,32,
-    112,97,116,104,32,40,105,102,32,112,111,115,115,105,98,108,
-    101,41,46,10,10,32,32,32,32,84,104,105,115,32,102,117,
-    110,99,116,105,111,110,32,101,120,105,115,116,115,32,112,117,
-    114,101,108,121,32,102,111,114,32,98,97,99,107,119,97,114,
-    100,115,45,99,111,109,112,97,116,105,98,105,108,105,116,121,
-    32,102,111,114,10,32,32,32,32,80,121,73,109,112,111,114,
-    116,95,69,120,101,99,67,111,100,101,77,111,100,117,108,101,
-    87,105,116,104,70,105,108,101,110,97,109,101,115,40,41,32,
-    105,110,32,116,104,101,32,67,32,65,80,73,46,10,10,32,
-    32,32,32,114,61,0,0,0,78,114,60,0,0,0,114,82,
-    0,0,0,114,31,0,0,0,90,2,112,121,233,253,255,255,
-    255,233,255,255,255,255,114,89,0,0,0,41,7,114,33,0,
-    0,0,114,34,0,0,0,218,5,108,111,119,101,114,114,87,
-    0,0,0,114,68,0,0,0,114,73,0,0,0,114,46,0,
-    0,0,41,5,218,13,98,121,116,101,99,111,100,101,95,112,
-    97,116,104,114,80,0,0,0,114,38,0,0,0,90,9,101,
-    120,116,101,110,115,105,111,110,218,11,115,111,117,114,99,101,
-    95,112,97,116,104,114,4,0,0,0,114,4,0,0,0,114,
-    6,0,0,0,218,15,95,103,101,116,95,115,111,117,114,99,
-    101,102,105,108,101,75,1,0,0,115,20,0,0,0,0,7,
-    18,1,4,1,24,1,35,1,4,1,3,1,16,1,19,1,
-    21,1,114,93,0,0,0,99,1,0,0,0,0,0,0,0,
-    1,0,0,0,11,0,0,0,67,0,0,0,115,92,0,0,
-    0,124,0,0,106,0,0,116,1,0,116,2,0,131,1,0,
-    131,1,0,114,59,0,121,14,0,116,3,0,124,0,0,131,
-    1,0,83,87,113,88,0,4,116,4,0,107,10,0,114,55,
-    0,1,1,1,89,113,88,0,88,110,29,0,124,0,0,106,
-    0,0,116,1,0,116,5,0,131,1,0,131,1,0,114,84,
-    0,124,0,0,83,100,0,0,83,100,0,0,83,41,1,78,
-    41,6,218,8,101,110,100,115,119,105,116,104,218,5,116,117,
-    112,108,101,114,86,0,0,0,114,81,0,0,0,114,68,0,
-    0,0,114,76,0,0,0,41,1,218,8,102,105,108,101,110,
-    97,109,101,114,4,0,0,0,114,4,0,0,0,114,6,0,
-    0,0,218,11,95,103,101,116,95,99,97,99,104,101,100,94,
-    1,0,0,115,16,0,0,0,0,1,21,1,3,1,14,1,
-    13,1,8,1,21,1,4,2,114,97,0,0,0,99,1,0,
-    0,0,0,0,0,0,2,0,0,0,11,0,0,0,67,0,
-    0,0,115,60,0,0,0,121,19,0,116,0,0,124,0,0,
-    131,1,0,106,1,0,125,1,0,87,110,24,0,4,116,2,
-    0,107,10,0,114,45,0,1,1,1,100,1,0,125,1,0,
-    89,110,1,0,88,124,1,0,100,2,0,79,125,1,0,124,
-    1,0,83,41,3,122,51,67,97,108,99,117,108,97,116,101,
-    32,116,104,101,32,109,111,100,101,32,112,101,114,109,105,115,
-    115,105,111,110,115,32,102,111,114,32,97,32,98,121,116,101,
-    99,111,100,101,32,102,105,108,101,46,105,182,1,0,0,233,
-    128,0,0,0,41,3,114,41,0,0,0,114,43,0,0,0,
-    114,42,0,0,0,41,2,114,37,0,0,0,114,44,0,0,
+    0,0,0,114,6,0,0,0,218,17,99,97,99,104,101,95,
+    102,114,111,109,95,115,111,117,114,99,101,20,1,0,0,115,
+    46,0,0,0,0,18,12,1,9,1,7,1,12,1,6,1,
+    12,1,18,1,18,1,24,1,12,1,12,1,12,1,36,1,
+    12,1,18,1,9,2,12,1,12,1,12,1,12,1,21,1,
+    21,1,114,81,0,0,0,99,1,0,0,0,0,0,0,0,
+    8,0,0,0,5,0,0,0,67,0,0,0,115,62,1,0,
+    0,116,0,0,106,1,0,106,2,0,100,1,0,107,8,0,
+    114,30,0,116,3,0,100,2,0,131,1,0,130,1,0,116,
+    4,0,124,0,0,131,1,0,92,2,0,125,1,0,125,2,
+    0,116,4,0,124,1,0,131,1,0,92,2,0,125,1,0,
+    125,3,0,124,3,0,116,5,0,107,3,0,114,102,0,116,
+    6,0,100,3,0,106,7,0,116,5,0,124,0,0,131,2,
+    0,131,1,0,130,1,0,124,2,0,106,8,0,100,4,0,
+    131,1,0,125,4,0,124,4,0,100,11,0,107,7,0,114,
+    153,0,116,6,0,100,7,0,106,7,0,124,2,0,131,1,
+    0,131,1,0,130,1,0,110,125,0,124,4,0,100,6,0,
+    107,2,0,114,22,1,124,2,0,106,9,0,100,4,0,100,
+    5,0,131,2,0,100,12,0,25,125,5,0,124,5,0,106,
+    10,0,116,11,0,131,1,0,115,223,0,116,6,0,100,8,
+    0,106,7,0,116,11,0,131,1,0,131,1,0,130,1,0,
+    124,5,0,116,12,0,116,11,0,131,1,0,100,1,0,133,
+    2,0,25,125,6,0,124,6,0,106,13,0,131,0,0,115,
+    22,1,116,6,0,100,9,0,106,7,0,124,5,0,131,1,
+    0,131,1,0,130,1,0,124,2,0,106,14,0,100,4,0,
+    131,1,0,100,10,0,25,125,7,0,116,15,0,124,1,0,
+    124,7,0,116,16,0,100,10,0,25,23,131,2,0,83,41,
+    13,97,110,1,0,0,71,105,118,101,110,32,116,104,101,32,
+    112,97,116,104,32,116,111,32,97,32,46,112,121,99,46,32,
+    102,105,108,101,44,32,114,101,116,117,114,110,32,116,104,101,
+    32,112,97,116,104,32,116,111,32,105,116,115,32,46,112,121,
+    32,102,105,108,101,46,10,10,32,32,32,32,84,104,101,32,
+    46,112,121,99,32,102,105,108,101,32,100,111,101,115,32,110,
+    111,116,32,110,101,101,100,32,116,111,32,101,120,105,115,116,
+    59,32,116,104,105,115,32,115,105,109,112,108,121,32,114,101,
+    116,117,114,110,115,32,116,104,101,32,112,97,116,104,32,116,
+    111,10,32,32,32,32,116,104,101,32,46,112,121,32,102,105,
+    108,101,32,99,97,108,99,117,108,97,116,101,100,32,116,111,
+    32,99,111,114,114,101,115,112,111,110,100,32,116,111,32,116,
+    104,101,32,46,112,121,99,32,102,105,108,101,46,32,32,73,
+    102,32,112,97,116,104,32,100,111,101,115,10,32,32,32,32,
+    110,111,116,32,99,111,110,102,111,114,109,32,116,111,32,80,
+    69,80,32,51,49,52,55,47,52,56,56,32,102,111,114,109,
+    97,116,44,32,86,97,108,117,101,69,114,114,111,114,32,119,
+    105,108,108,32,98,101,32,114,97,105,115,101,100,46,32,73,
+    102,10,32,32,32,32,115,121,115,46,105,109,112,108,101,109,
+    101,110,116,97,116,105,111,110,46,99,97,99,104,101,95,116,
+    97,103,32,105,115,32,78,111,110,101,32,116,104,101,110,32,
+    78,111,116,73,109,112,108,101,109,101,110,116,101,100,69,114,
+    114,111,114,32,105,115,32,114,97,105,115,101,100,46,10,10,
+    32,32,32,32,78,122,36,115,121,115,46,105,109,112,108,101,
+    109,101,110,116,97,116,105,111,110,46,99,97,99,104,101,95,
+    116,97,103,32,105,115,32,78,111,110,101,122,37,123,125,32,
+    110,111,116,32,98,111,116,116,111,109,45,108,101,118,101,108,
+    32,100,105,114,101,99,116,111,114,121,32,105,110,32,123,33,
+    114,125,114,60,0,0,0,114,58,0,0,0,233,3,0,0,
+    0,122,33,101,120,112,101,99,116,101,100,32,111,110,108,121,
+    32,50,32,111,114,32,51,32,100,111,116,115,32,105,110,32,
+    123,33,114,125,122,57,111,112,116,105,109,105,122,97,116,105,
+    111,110,32,112,111,114,116,105,111,110,32,111,102,32,102,105,
+    108,101,110,97,109,101,32,100,111,101,115,32,110,111,116,32,
+    115,116,97,114,116,32,119,105,116,104,32,123,33,114,125,122,
+    52,111,112,116,105,109,105,122,97,116,105,111,110,32,108,101,
+    118,101,108,32,123,33,114,125,32,105,115,32,110,111,116,32,
+    97,110,32,97,108,112,104,97,110,117,109,101,114,105,99,32,
+    118,97,108,117,101,114,61,0,0,0,62,2,0,0,0,114,
+    58,0,0,0,114,82,0,0,0,233,254,255,255,255,41,17,
+    114,8,0,0,0,114,66,0,0,0,114,67,0,0,0,114,
+    68,0,0,0,114,40,0,0,0,114,75,0,0,0,114,73,
+    0,0,0,114,49,0,0,0,218,5,99,111,117,110,116,114,
+    36,0,0,0,114,10,0,0,0,114,74,0,0,0,114,33,
+    0,0,0,114,72,0,0,0,218,9,112,97,114,116,105,116,
+    105,111,110,114,30,0,0,0,218,15,83,79,85,82,67,69,
+    95,83,85,70,70,73,88,69,83,41,8,114,37,0,0,0,
+    114,78,0,0,0,90,16,112,121,99,97,99,104,101,95,102,
+    105,108,101,110,97,109,101,90,7,112,121,99,97,99,104,101,
+    90,9,100,111,116,95,99,111,117,110,116,114,59,0,0,0,
+    90,9,111,112,116,95,108,101,118,101,108,90,13,98,97,115,
+    101,95,102,105,108,101,110,97,109,101,114,4,0,0,0,114,
+    4,0,0,0,114,6,0,0,0,218,17,115,111,117,114,99,
+    101,95,102,114,111,109,95,99,97,99,104,101,64,1,0,0,
+    115,44,0,0,0,0,9,18,1,12,1,18,1,18,1,12,
+    1,9,1,15,1,15,1,12,1,9,1,15,1,12,1,22,
+    1,15,1,9,1,12,1,22,1,12,1,9,1,12,1,19,
+    1,114,87,0,0,0,99,1,0,0,0,0,0,0,0,5,
+    0,0,0,12,0,0,0,67,0,0,0,115,164,0,0,0,
+    116,0,0,124,0,0,131,1,0,100,1,0,107,2,0,114,
+    22,0,100,2,0,83,124,0,0,106,1,0,100,3,0,131,
+    1,0,92,3,0,125,1,0,125,2,0,125,3,0,124,1,
+    0,12,115,81,0,124,3,0,106,2,0,131,0,0,100,7,
+    0,100,8,0,133,2,0,25,100,6,0,107,3,0,114,85,
+    0,124,0,0,83,121,16,0,116,3,0,124,0,0,131,1,
+    0,125,4,0,87,110,40,0,4,116,4,0,116,5,0,102,
+    2,0,107,10,0,114,143,0,1,1,1,124,0,0,100,2,
+    0,100,9,0,133,2,0,25,125,4,0,89,110,1,0,88,
+    116,6,0,124,4,0,131,1,0,114,160,0,124,4,0,83,
+    124,0,0,83,41,10,122,188,67,111,110,118,101,114,116,32,
+    97,32,98,121,116,101,99,111,100,101,32,102,105,108,101,32,
+    112,97,116,104,32,116,111,32,97,32,115,111,117,114,99,101,
+    32,112,97,116,104,32,40,105,102,32,112,111,115,115,105,98,
+    108,101,41,46,10,10,32,32,32,32,84,104,105,115,32,102,
+    117,110,99,116,105,111,110,32,101,120,105,115,116,115,32,112,
+    117,114,101,108,121,32,102,111,114,32,98,97,99,107,119,97,
+    114,100,115,45,99,111,109,112,97,116,105,98,105,108,105,116,
+    121,32,102,111,114,10,32,32,32,32,80,121,73,109,112,111,
+    114,116,95,69,120,101,99,67,111,100,101,77,111,100,117,108,
+    101,87,105,116,104,70,105,108,101,110,97,109,101,115,40,41,
+    32,105,110,32,116,104,101,32,67,32,65,80,73,46,10,10,
+    32,32,32,32,114,61,0,0,0,78,114,60,0,0,0,114,
+    82,0,0,0,114,31,0,0,0,90,2,112,121,233,253,255,
+    255,255,233,255,255,255,255,114,89,0,0,0,41,7,114,33,
+    0,0,0,114,34,0,0,0,218,5,108,111,119,101,114,114,
+    87,0,0,0,114,68,0,0,0,114,73,0,0,0,114,46,
+    0,0,0,41,5,218,13,98,121,116,101,99,111,100,101,95,
+    112,97,116,104,114,80,0,0,0,114,38,0,0,0,90,9,
+    101,120,116,101,110,115,105,111,110,218,11,115,111,117,114,99,
+    101,95,112,97,116,104,114,4,0,0,0,114,4,0,0,0,
+    114,6,0,0,0,218,15,95,103,101,116,95,115,111,117,114,
+    99,101,102,105,108,101,97,1,0,0,115,20,0,0,0,0,
+    7,18,1,4,1,24,1,35,1,4,1,3,1,16,1,19,
+    1,21,1,114,93,0,0,0,99,1,0,0,0,0,0,0,
+    0,1,0,0,0,11,0,0,0,67,0,0,0,115,92,0,
+    0,0,124,0,0,106,0,0,116,1,0,116,2,0,131,1,
+    0,131,1,0,114,59,0,121,14,0,116,3,0,124,0,0,
+    131,1,0,83,87,113,88,0,4,116,4,0,107,10,0,114,
+    55,0,1,1,1,89,113,88,0,88,110,29,0,124,0,0,
+    106,0,0,116,1,0,116,5,0,131,1,0,131,1,0,114,
+    84,0,124,0,0,83,100,0,0,83,100,0,0,83,41,1,
+    78,41,6,218,8,101,110,100,115,119,105,116,104,218,5,116,
+    117,112,108,101,114,86,0,0,0,114,81,0,0,0,114,68,
+    0,0,0,114,76,0,0,0,41,1,218,8,102,105,108,101,
+    110,97,109,101,114,4,0,0,0,114,4,0,0,0,114,6,
+    0,0,0,218,11,95,103,101,116,95,99,97,99,104,101,100,
+    116,1,0,0,115,16,0,0,0,0,1,21,1,3,1,14,
+    1,13,1,8,1,21,1,4,2,114,97,0,0,0,99,1,
+    0,0,0,0,0,0,0,2,0,0,0,11,0,0,0,67,
+    0,0,0,115,60,0,0,0,121,19,0,116,0,0,124,0,
+    0,131,1,0,106,1,0,125,1,0,87,110,24,0,4,116,
+    2,0,107,10,0,114,45,0,1,1,1,100,1,0,125,1,
+    0,89,110,1,0,88,124,1,0,100,2,0,79,125,1,0,
+    124,1,0,83,41,3,122,51,67,97,108,99,117,108,97,116,
+    101,32,116,104,101,32,109,111,100,101,32,112,101,114,109,105,
+    115,115,105,111,110,115,32,102,111,114,32,97,32,98,121,116,
+    101,99,111,100,101,32,102,105,108,101,46,105,182,1,0,0,
+    233,128,0,0,0,41,3,114,41,0,0,0,114,43,0,0,
+    0,114,42,0,0,0,41,2,114,37,0,0,0,114,44,0,
+    0,0,114,4,0,0,0,114,4,0,0,0,114,6,0,0,
+    0,218,10,95,99,97,108,99,95,109,111,100,101,128,1,0,
+    0,115,12,0,0,0,0,2,3,1,19,1,13,1,11,3,
+    10,1,114,99,0,0,0,218,9,118,101,114,98,111,115,105,
+    116,121,114,31,0,0,0,99,1,0,0,0,1,0,0,0,
+    3,0,0,0,4,0,0,0,71,0,0,0,115,75,0,0,
+    0,116,0,0,106,1,0,106,2,0,124,1,0,107,5,0,
+    114,71,0,124,0,0,106,3,0,100,6,0,131,1,0,115,
+    43,0,100,3,0,124,0,0,23,125,0,0,116,4,0,124,
+    0,0,106,5,0,124,2,0,140,0,0,100,4,0,116,0,
+    0,106,6,0,131,1,1,1,100,5,0,83,41,7,122,61,
+    80,114,105,110,116,32,116,104,101,32,109,101,115,115,97,103,
+    101,32,116,111,32,115,116,100,101,114,114,32,105,102,32,45,
+    118,47,80,89,84,72,79,78,86,69,82,66,79,83,69,32,
+    105,115,32,116,117,114,110,101,100,32,111,110,46,250,1,35,
+    250,7,105,109,112,111,114,116,32,122,2,35,32,114,56,0,
+    0,0,78,41,2,114,101,0,0,0,114,102,0,0,0,41,
+    7,114,8,0,0,0,114,69,0,0,0,218,7,118,101,114,
+    98,111,115,101,114,10,0,0,0,218,5,112,114,105,110,116,
+    114,49,0,0,0,218,6,115,116,100,101,114,114,41,3,114,
+    77,0,0,0,114,100,0,0,0,218,4,97,114,103,115,114,
+    4,0,0,0,114,4,0,0,0,114,6,0,0,0,218,16,
+    95,118,101,114,98,111,115,101,95,109,101,115,115,97,103,101,
+    140,1,0,0,115,8,0,0,0,0,2,18,1,15,1,10,
+    1,114,107,0,0,0,99,1,0,0,0,0,0,0,0,3,
+    0,0,0,11,0,0,0,3,0,0,0,115,84,0,0,0,
+    100,1,0,135,0,0,102,1,0,100,2,0,100,3,0,134,
+    1,0,125,1,0,121,13,0,116,0,0,106,1,0,125,2,
+    0,87,110,30,0,4,116,2,0,107,10,0,114,66,0,1,
+    1,1,100,4,0,100,5,0,132,0,0,125,2,0,89,110,
+    1,0,88,124,2,0,124,1,0,136,0,0,131,2,0,1,
+    124,1,0,83,41,6,122,252,68,101,99,111,114,97,116,111,
+    114,32,116,111,32,118,101,114,105,102,121,32,116,104,97,116,
+    32,116,104,101,32,109,111,100,117,108,101,32,98,101,105,110,
+    103,32,114,101,113,117,101,115,116,101,100,32,109,97,116,99,
+    104,101,115,32,116,104,101,32,111,110,101,32,116,104,101,10,
+    32,32,32,32,108,111,97,100,101,114,32,99,97,110,32,104,
+    97,110,100,108,101,46,10,10,32,32,32,32,84,104,101,32,
+    102,105,114,115,116,32,97,114,103,117,109,101,110,116,32,40,
+    115,101,108,102,41,32,109,117,115,116,32,100,101,102,105,110,
+    101,32,95,110,97,109,101,32,119,104,105,99,104,32,116,104,
+    101,32,115,101,99,111,110,100,32,97,114,103,117,109,101,110,
+    116,32,105,115,10,32,32,32,32,99,111,109,112,97,114,101,
+    100,32,97,103,97,105,110,115,116,46,32,73,102,32,116,104,
+    101,32,99,111,109,112,97,114,105,115,111,110,32,102,97,105,
+    108,115,32,116,104,101,110,32,73,109,112,111,114,116,69,114,
+    114,111,114,32,105,115,32,114,97,105,115,101,100,46,10,10,
+    32,32,32,32,78,99,2,0,0,0,0,0,0,0,4,0,
+    0,0,5,0,0,0,31,0,0,0,115,89,0,0,0,124,
+    1,0,100,0,0,107,8,0,114,24,0,124,0,0,106,0,
+    0,125,1,0,110,46,0,124,0,0,106,0,0,124,1,0,
+    107,3,0,114,70,0,116,1,0,100,1,0,124,0,0,106,
+    0,0,124,1,0,102,2,0,22,100,2,0,124,1,0,131,
+    1,1,130,1,0,136,0,0,124,0,0,124,1,0,124,2,
+    0,124,3,0,142,2,0,83,41,3,78,122,30,108,111,97,
+    100,101,114,32,102,111,114,32,37,115,32,99,97,110,110,111,
+    116,32,104,97,110,100,108,101,32,37,115,218,4,110,97,109,
+    101,41,2,114,108,0,0,0,218,11,73,109,112,111,114,116,
+    69,114,114,111,114,41,4,218,4,115,101,108,102,114,108,0,
+    0,0,114,106,0,0,0,90,6,107,119,97,114,103,115,41,
+    1,218,6,109,101,116,104,111,100,114,4,0,0,0,114,6,
+    0,0,0,218,19,95,99,104,101,99,107,95,110,97,109,101,
+    95,119,114,97,112,112,101,114,156,1,0,0,115,12,0,0,
+    0,0,1,12,1,12,1,15,1,6,1,25,1,122,40,95,
+    99,104,101,99,107,95,110,97,109,101,46,60,108,111,99,97,
+    108,115,62,46,95,99,104,101,99,107,95,110,97,109,101,95,
+    119,114,97,112,112,101,114,99,2,0,0,0,0,0,0,0,
+    3,0,0,0,7,0,0,0,83,0,0,0,115,92,0,0,
+    0,120,66,0,100,1,0,100,2,0,100,3,0,100,4,0,
+    103,4,0,68,93,46,0,125,2,0,116,0,0,124,1,0,
+    124,2,0,131,2,0,114,19,0,116,1,0,124,0,0,124,
+    2,0,116,2,0,124,1,0,124,2,0,131,2,0,131,3,
+    0,1,113,19,0,87,124,0,0,106,3,0,106,4,0,124,
+    1,0,106,3,0,131,1,0,1,100,0,0,83,41,5,78,
+    218,10,95,95,109,111,100,117,108,101,95,95,218,8,95,95,
+    110,97,109,101,95,95,218,12,95,95,113,117,97,108,110,97,
+    109,101,95,95,218,7,95,95,100,111,99,95,95,41,5,218,
+    7,104,97,115,97,116,116,114,218,7,115,101,116,97,116,116,
+    114,218,7,103,101,116,97,116,116,114,218,8,95,95,100,105,
+    99,116,95,95,218,6,117,112,100,97,116,101,41,3,90,3,
+    110,101,119,90,3,111,108,100,114,54,0,0,0,114,4,0,
+    0,0,114,4,0,0,0,114,6,0,0,0,218,5,95,119,
+    114,97,112,167,1,0,0,115,8,0,0,0,0,1,25,1,
+    15,1,29,1,122,26,95,99,104,101,99,107,95,110,97,109,
+    101,46,60,108,111,99,97,108,115,62,46,95,119,114,97,112,
+    41,3,218,10,95,98,111,111,116,115,116,114,97,112,114,122,
+    0,0,0,218,9,78,97,109,101,69,114,114,111,114,41,3,
+    114,111,0,0,0,114,112,0,0,0,114,122,0,0,0,114,
+    4,0,0,0,41,1,114,111,0,0,0,114,6,0,0,0,
+    218,11,95,99,104,101,99,107,95,110,97,109,101,148,1,0,
+    0,115,14,0,0,0,0,8,21,7,3,1,13,1,13,2,
+    17,5,13,1,114,125,0,0,0,99,2,0,0,0,0,0,
+    0,0,5,0,0,0,4,0,0,0,67,0,0,0,115,84,
+    0,0,0,124,0,0,106,0,0,124,1,0,131,1,0,92,
+    2,0,125,2,0,125,3,0,124,2,0,100,1,0,107,8,
+    0,114,80,0,116,1,0,124,3,0,131,1,0,114,80,0,
+    100,2,0,125,4,0,116,2,0,106,3,0,124,4,0,106,
+    4,0,124,3,0,100,3,0,25,131,1,0,116,5,0,131,
+    2,0,1,124,2,0,83,41,4,122,155,84,114,121,32,116,
+    111,32,102,105,110,100,32,97,32,108,111,97,100,101,114,32,
+    102,111,114,32,116,104,101,32,115,112,101,99,105,102,105,101,
+    100,32,109,111,100,117,108,101,32,98,121,32,100,101,108,101,
+    103,97,116,105,110,103,32,116,111,10,32,32,32,32,115,101,
+    108,102,46,102,105,110,100,95,108,111,97,100,101,114,40,41,
+    46,10,10,32,32,32,32,84,104,105,115,32,109,101,116,104,
+    111,100,32,105,115,32,100,101,112,114,101,99,97,116,101,100,
+    32,105,110,32,102,97,118,111,114,32,111,102,32,102,105,110,
+    100,101,114,46,102,105,110,100,95,115,112,101,99,40,41,46,
+    10,10,32,32,32,32,78,122,44,78,111,116,32,105,109,112,
+    111,114,116,105,110,103,32,100,105,114,101,99,116,111,114,121,
+    32,123,125,58,32,109,105,115,115,105,110,103,32,95,95,105,
+    110,105,116,95,95,114,61,0,0,0,41,6,218,11,102,105,
+    110,100,95,108,111,97,100,101,114,114,33,0,0,0,114,62,
+    0,0,0,114,63,0,0,0,114,49,0,0,0,218,13,73,
+    109,112,111,114,116,87,97,114,110,105,110,103,41,5,114,110,
+    0,0,0,218,8,102,117,108,108,110,97,109,101,218,6,108,
+    111,97,100,101,114,218,8,112,111,114,116,105,111,110,115,218,
+    3,109,115,103,114,4,0,0,0,114,4,0,0,0,114,6,
+    0,0,0,218,17,95,102,105,110,100,95,109,111,100,117,108,
+    101,95,115,104,105,109,176,1,0,0,115,10,0,0,0,0,
+    10,21,1,24,1,6,1,29,1,114,132,0,0,0,99,4,
+    0,0,0,0,0,0,0,11,0,0,0,19,0,0,0,67,
+    0,0,0,115,252,1,0,0,105,0,0,125,4,0,124,2,
+    0,100,1,0,107,9,0,114,31,0,124,2,0,124,4,0,
+    100,2,0,60,110,6,0,100,3,0,125,2,0,124,3,0,
+    100,1,0,107,9,0,114,59,0,124,3,0,124,4,0,100,
+    4,0,60,124,0,0,100,1,0,100,5,0,133,2,0,25,
+    125,5,0,124,0,0,100,5,0,100,6,0,133,2,0,25,
+    125,6,0,124,0,0,100,6,0,100,7,0,133,2,0,25,
+    125,7,0,124,5,0,116,0,0,107,3,0,114,180,0,124,
+    5,0,116,1,0,107,3,0,114,180,0,100,8,0,106,2,
+    0,124,2,0,124,5,0,131,2,0,125,8,0,116,3,0,
+    100,9,0,124,8,0,131,2,0,1,116,4,0,124,8,0,
+    124,4,0,141,1,0,130,1,0,110,119,0,116,5,0,124,
+    6,0,131,1,0,100,5,0,107,3,0,114,241,0,100,10,
+    0,106,2,0,124,2,0,131,1,0,125,8,0,116,3,0,
+    100,9,0,124,8,0,131,2,0,1,116,6,0,124,8,0,
+    131,1,0,130,1,0,110,58,0,116,5,0,124,7,0,131,
+    1,0,100,5,0,107,3,0,114,43,1,100,11,0,106,2,
+    0,124,2,0,131,1,0,125,8,0,116,3,0,100,9,0,
+    124,8,0,131,2,0,1,116,6,0,124,8,0,131,1,0,
+    130,1,0,124,1,0,100,1,0,107,9,0,114,238,1,121,
+    20,0,116,7,0,124,1,0,100,12,0,25,131,1,0,125,
+    9,0,87,110,18,0,4,116,8,0,107,10,0,114,95,1,
+    1,1,1,89,110,62,0,88,116,9,0,124,6,0,131,1,
+    0,124,9,0,107,3,0,114,157,1,100,13,0,106,2,0,
+    124,2,0,131,1,0,125,8,0,116,3,0,100,9,0,124,
+    8,0,131,2,0,1,116,4,0,124,8,0,124,4,0,141,
+    1,0,130,1,0,121,18,0,124,1,0,100,14,0,25,100,
+    15,0,64,125,10,0,87,110,18,0,4,116,8,0,107,10,
+    0,114,195,1,1,1,1,89,110,43,0,88,116,9,0,124,
+    7,0,131,1,0,124,10,0,107,3,0,114,238,1,116,4,
+    0,100,13,0,106,2,0,124,2,0,131,1,0,124,4,0,
+    141,1,0,130,1,0,124,0,0,100,7,0,100,1,0,133,
+    2,0,25,83,41,16,97,122,1,0,0,86,97,108,105,100,
+    97,116,101,32,116,104,101,32,104,101,97,100,101,114,32,111,
+    102,32,116,104,101,32,112,97,115,115,101,100,45,105,110,32,
+    98,121,116,101,99,111,100,101,32,97,103,97,105,110,115,116,
+    32,115,111,117,114,99,101,95,115,116,97,116,115,32,40,105,
+    102,10,32,32,32,32,103,105,118,101,110,41,32,97,110,100,
+    32,114,101,116,117,114,110,105,110,103,32,116,104,101,32,98,
+    121,116,101,99,111,100,101,32,116,104,97,116,32,99,97,110,
+    32,98,101,32,99,111,109,112,105,108,101,100,32,98,121,32,
+    99,111,109,112,105,108,101,40,41,46,10,10,32,32,32,32,
+    65,108,108,32,111,116,104,101,114,32,97,114,103,117,109,101,
+    110,116,115,32,97,114,101,32,117,115,101,100,32,116,111,32,
+    101,110,104,97,110,99,101,32,101,114,114,111,114,32,114,101,
+    112,111,114,116,105,110,103,46,10,10,32,32,32,32,73,109,
+    112,111,114,116,69,114,114,111,114,32,105,115,32,114,97,105,
+    115,101,100,32,119,104,101,110,32,116,104,101,32,109,97,103,
+    105,99,32,110,117,109,98,101,114,32,105,115,32,105,110,99,
+    111,114,114,101,99,116,32,111,114,32,116,104,101,32,98,121,
+    116,101,99,111,100,101,32,105,115,10,32,32,32,32,102,111,
+    117,110,100,32,116,111,32,98,101,32,115,116,97,108,101,46,
+    32,69,79,70,69,114,114,111,114,32,105,115,32,114,97,105,
+    115,101,100,32,119,104,101,110,32,116,104,101,32,100,97,116,
+    97,32,105,115,32,102,111,117,110,100,32,116,111,32,98,101,
+    10,32,32,32,32,116,114,117,110,99,97,116,101,100,46,10,
+    10,32,32,32,32,78,114,108,0,0,0,122,10,60,98,121,
+    116,101,99,111,100,101,62,114,37,0,0,0,114,14,0,0,
+    0,233,8,0,0,0,233,12,0,0,0,122,30,98,97,100,
+    32,109,97,103,105,99,32,110,117,109,98,101,114,32,105,110,
+    32,123,33,114,125,58,32,123,33,114,125,122,2,123,125,122,
+    43,114,101,97,99,104,101,100,32,69,79,70,32,119,104,105,
+    108,101,32,114,101,97,100,105,110,103,32,116,105,109,101,115,
+    116,97,109,112,32,105,110,32,123,33,114,125,122,48,114,101,
+    97,99,104,101,100,32,69,79,70,32,119,104,105,108,101,32,
+    114,101,97,100,105,110,103,32,115,105,122,101,32,111,102,32,
+    115,111,117,114,99,101,32,105,110,32,123,33,114,125,218,5,
+    109,116,105,109,101,122,26,98,121,116,101,99,111,100,101,32,
+    105,115,32,115,116,97,108,101,32,102,111,114,32,123,33,114,
+    125,218,4,115,105,122,101,108,3,0,0,0,255,127,255,127,
+    3,0,41,10,218,12,77,65,71,73,67,95,78,85,77,66,
+    69,82,218,24,95,66,65,67,75,67,79,77,80,65,84,95,
+    77,65,71,73,67,95,78,85,77,66,69,82,114,49,0,0,
+    0,114,107,0,0,0,114,109,0,0,0,114,33,0,0,0,
+    218,8,69,79,70,69,114,114,111,114,114,16,0,0,0,218,
+    8,75,101,121,69,114,114,111,114,114,21,0,0,0,41,11,
+    114,55,0,0,0,218,12,115,111,117,114,99,101,95,115,116,
+    97,116,115,114,108,0,0,0,114,37,0,0,0,90,11,101,
+    120,99,95,100,101,116,97,105,108,115,90,5,109,97,103,105,
+    99,90,13,114,97,119,95,116,105,109,101,115,116,97,109,112,
+    90,8,114,97,119,95,115,105,122,101,114,77,0,0,0,218,
+    12,115,111,117,114,99,101,95,109,116,105,109,101,218,11,115,
+    111,117,114,99,101,95,115,105,122,101,114,4,0,0,0,114,
+    4,0,0,0,114,6,0,0,0,218,25,95,118,97,108,105,
+    100,97,116,101,95,98,121,116,101,99,111,100,101,95,104,101,
+    97,100,101,114,193,1,0,0,115,78,0,0,0,0,11,6,
+    1,12,1,13,3,6,1,12,1,10,1,16,1,16,1,16,
+    1,12,2,12,1,18,1,13,1,18,1,18,1,15,1,13,
+    1,15,1,18,1,15,1,13,1,12,1,12,1,3,1,20,
+    1,13,1,5,2,18,1,15,1,13,1,15,1,3,1,18,
+    1,13,1,5,2,18,1,15,1,9,1,114,144,0,0,0,
+    99,4,0,0,0,0,0,0,0,5,0,0,0,6,0,0,
+    0,67,0,0,0,115,112,0,0,0,116,0,0,106,1,0,
+    124,0,0,131,1,0,125,4,0,116,2,0,124,4,0,116,
+    3,0,131,2,0,114,75,0,116,4,0,100,1,0,124,2,
+    0,131,2,0,1,124,3,0,100,2,0,107,9,0,114,71,
+    0,116,5,0,106,6,0,124,4,0,124,3,0,131,2,0,
+    1,124,4,0,83,116,7,0,100,3,0,106,8,0,124,2,
+    0,131,1,0,100,4,0,124,1,0,100,5,0,124,2,0,
+    131,1,2,130,1,0,100,2,0,83,41,6,122,60,67,111,
+    109,112,105,108,101,32,98,121,116,101,99,111,100,101,32,97,
+    115,32,114,101,116,117,114,110,101,100,32,98,121,32,95,118,
+    97,108,105,100,97,116,101,95,98,121,116,101,99,111,100,101,
+    95,104,101,97,100,101,114,40,41,46,122,21,99,111,100,101,
+    32,111,98,106,101,99,116,32,102,114,111,109,32,123,33,114,
+    125,78,122,23,78,111,110,45,99,111,100,101,32,111,98,106,
+    101,99,116,32,105,110,32,123,33,114,125,114,108,0,0,0,
+    114,37,0,0,0,41,9,218,7,109,97,114,115,104,97,108,
+    90,5,108,111,97,100,115,218,10,105,115,105,110,115,116,97,
+    110,99,101,218,10,95,99,111,100,101,95,116,121,112,101,114,
+    107,0,0,0,218,4,95,105,109,112,90,16,95,102,105,120,
+    95,99,111,95,102,105,108,101,110,97,109,101,114,109,0,0,
+    0,114,49,0,0,0,41,5,114,55,0,0,0,114,108,0,
+    0,0,114,91,0,0,0,114,92,0,0,0,218,4,99,111,
+    100,101,114,4,0,0,0,114,4,0,0,0,114,6,0,0,
+    0,218,17,95,99,111,109,112,105,108,101,95,98,121,116,101,
+    99,111,100,101,250,1,0,0,115,16,0,0,0,0,2,15,
+    1,15,1,13,1,12,1,16,1,4,2,18,1,114,150,0,
+    0,0,114,61,0,0,0,99,3,0,0,0,0,0,0,0,
+    4,0,0,0,3,0,0,0,67,0,0,0,115,76,0,0,
+    0,116,0,0,116,1,0,131,1,0,125,3,0,124,3,0,
+    106,2,0,116,3,0,124,1,0,131,1,0,131,1,0,1,
+    124,3,0,106,2,0,116,3,0,124,2,0,131,1,0,131,
+    1,0,1,124,3,0,106,2,0,116,4,0,106,5,0,124,
+    0,0,131,1,0,131,1,0,1,124,3,0,83,41,1,122,
+    80,67,111,109,112,105,108,101,32,97,32,99,111,100,101,32,
+    111,98,106,101,99,116,32,105,110,116,111,32,98,121,116,101,
+    99,111,100,101,32,102,111,114,32,119,114,105,116,105,110,103,
+    32,111,117,116,32,116,111,32,97,32,98,121,116,101,45,99,
+    111,109,112,105,108,101,100,10,32,32,32,32,102,105,108,101,
+    46,41,6,218,9,98,121,116,101,97,114,114,97,121,114,137,
+    0,0,0,218,6,101,120,116,101,110,100,114,19,0,0,0,
+    114,145,0,0,0,90,5,100,117,109,112,115,41,4,114,149,
+    0,0,0,114,135,0,0,0,114,143,0,0,0,114,55,0,
+    0,0,114,4,0,0,0,114,4,0,0,0,114,6,0,0,
+    0,218,17,95,99,111,100,101,95,116,111,95,98,121,116,101,
+    99,111,100,101,6,2,0,0,115,10,0,0,0,0,3,12,
+    1,19,1,19,1,22,1,114,153,0,0,0,99,1,0,0,
+    0,0,0,0,0,5,0,0,0,4,0,0,0,67,0,0,
+    0,115,89,0,0,0,100,1,0,100,2,0,108,0,0,125,
+    1,0,116,1,0,106,2,0,124,0,0,131,1,0,106,3,
+    0,125,2,0,124,1,0,106,4,0,124,2,0,131,1,0,
+    125,3,0,116,1,0,106,5,0,100,2,0,100,3,0,131,
+    2,0,125,4,0,124,4,0,106,6,0,124,0,0,106,6,
+    0,124,3,0,100,1,0,25,131,1,0,131,1,0,83,41,
+    4,122,121,68,101,99,111,100,101,32,98,121,116,101,115,32,
+    114,101,112,114,101,115,101,110,116,105,110,103,32,115,111,117,
+    114,99,101,32,99,111,100,101,32,97,110,100,32,114,101,116,
+    117,114,110,32,116,104,101,32,115,116,114,105,110,103,46,10,
+    10,32,32,32,32,85,110,105,118,101,114,115,97,108,32,110,
+    101,119,108,105,110,101,32,115,117,112,112,111,114,116,32,105,
+    115,32,117,115,101,100,32,105,110,32,116,104,101,32,100,101,
+    99,111,100,105,110,103,46,10,32,32,32,32,114,61,0,0,
+    0,78,84,41,7,218,8,116,111,107,101,110,105,122,101,114,
+    51,0,0,0,90,7,66,121,116,101,115,73,79,90,8,114,
+    101,97,100,108,105,110,101,90,15,100,101,116,101,99,116,95,
+    101,110,99,111,100,105,110,103,90,25,73,110,99,114,101,109,
+    101,110,116,97,108,78,101,119,108,105,110,101,68,101,99,111,
+    100,101,114,218,6,100,101,99,111,100,101,41,5,218,12,115,
+    111,117,114,99,101,95,98,121,116,101,115,114,154,0,0,0,
+    90,21,115,111,117,114,99,101,95,98,121,116,101,115,95,114,
+    101,97,100,108,105,110,101,218,8,101,110,99,111,100,105,110,
+    103,90,15,110,101,119,108,105,110,101,95,100,101,99,111,100,
+    101,114,114,4,0,0,0,114,4,0,0,0,114,6,0,0,
+    0,218,13,100,101,99,111,100,101,95,115,111,117,114,99,101,
+    16,2,0,0,115,10,0,0,0,0,5,12,1,18,1,15,
+    1,18,1,114,158,0,0,0,114,129,0,0,0,218,26,115,
+    117,98,109,111,100,117,108,101,95,115,101,97,114,99,104,95,
+    108,111,99,97,116,105,111,110,115,99,2,0,0,0,2,0,
+    0,0,9,0,0,0,19,0,0,0,67,0,0,0,115,89,
+    1,0,0,124,1,0,100,1,0,107,8,0,114,73,0,100,
+    2,0,125,1,0,116,0,0,124,2,0,100,3,0,131,2,
+    0,114,73,0,121,19,0,124,2,0,106,1,0,124,0,0,
+    131,1,0,125,1,0,87,110,18,0,4,116,2,0,107,10,
+    0,114,72,0,1,1,1,89,110,1,0,88,116,3,0,106,
+    4,0,124,0,0,124,2,0,100,4,0,124,1,0,131,2,
+    1,125,4,0,100,5,0,124,4,0,95,5,0,124,2,0,
+    100,1,0,107,8,0,114,194,0,120,73,0,116,6,0,131,
+    0,0,68,93,58,0,92,2,0,125,5,0,125,6,0,124,
+    1,0,106,7,0,116,8,0,124,6,0,131,1,0,131,1,
+    0,114,128,0,124,5,0,124,0,0,124,1,0,131,2,0,
+    125,2,0,124,2,0,124,4,0,95,9,0,80,113,128,0,
+    87,100,1,0,83,124,3,0,116,10,0,107,8,0,114,23,
+    1,116,0,0,124,2,0,100,6,0,131,2,0,114,32,1,
+    121,19,0,124,2,0,106,11,0,124,0,0,131,1,0,125,
+    7,0,87,110,18,0,4,116,2,0,107,10,0,114,4,1,
+    1,1,1,89,113,32,1,88,124,7,0,114,32,1,103,0,
+    0,124,4,0,95,12,0,110,9,0,124,3,0,124,4,0,
+    95,12,0,124,4,0,106,12,0,103,0,0,107,2,0,114,
+    85,1,124,1,0,114,85,1,116,13,0,124,1,0,131,1,
+    0,100,7,0,25,125,8,0,124,4,0,106,12,0,106,14,
+    0,124,8,0,131,1,0,1,124,4,0,83,41,8,97,61,
+    1,0,0,82,101,116,117,114,110,32,97,32,109,111,100,117,
+    108,101,32,115,112,101,99,32,98,97,115,101,100,32,111,110,
+    32,97,32,102,105,108,101,32,108,111,99,97,116,105,111,110,
+    46,10,10,32,32,32,32,84,111,32,105,110,100,105,99,97,
+    116,101,32,116,104,97,116,32,116,104,101,32,109,111,100,117,
+    108,101,32,105,115,32,97,32,112,97,99,107,97,103,101,44,
+    32,115,101,116,10,32,32,32,32,115,117,98,109,111,100,117,
+    108,101,95,115,101,97,114,99,104,95,108,111,99,97,116,105,
+    111,110,115,32,116,111,32,97,32,108,105,115,116,32,111,102,
+    32,100,105,114,101,99,116,111,114,121,32,112,97,116,104,115,
+    46,32,32,65,110,10,32,32,32,32,101,109,112,116,121,32,
+    108,105,115,116,32,105,115,32,115,117,102,102,105,99,105,101,
+    110,116,44,32,116,104,111,117,103,104,32,105,116,115,32,110,
+    111,116,32,111,116,104,101,114,119,105,115,101,32,117,115,101,
+    102,117,108,32,116,111,32,116,104,101,10,32,32,32,32,105,
+    109,112,111,114,116,32,115,121,115,116,101,109,46,10,10,32,
+    32,32,32,84,104,101,32,108,111,97,100,101,114,32,109,117,
+    115,116,32,116,97,107,101,32,97,32,115,112,101,99,32,97,
+    115,32,105,116,115,32,111,110,108,121,32,95,95,105,110,105,
+    116,95,95,40,41,32,97,114,103,46,10,10,32,32,32,32,
+    78,122,9,60,117,110,107,110,111,119,110,62,218,12,103,101,
+    116,95,102,105,108,101,110,97,109,101,218,6,111,114,105,103,
+    105,110,84,218,10,105,115,95,112,97,99,107,97,103,101,114,
+    61,0,0,0,41,15,114,117,0,0,0,114,160,0,0,0,
+    114,109,0,0,0,114,123,0,0,0,218,10,77,111,100,117,
+    108,101,83,112,101,99,90,13,95,115,101,116,95,102,105,108,
+    101,97,116,116,114,218,27,95,103,101,116,95,115,117,112,112,
+    111,114,116,101,100,95,102,105,108,101,95,108,111,97,100,101,
+    114,115,114,94,0,0,0,114,95,0,0,0,114,129,0,0,
+    0,218,9,95,80,79,80,85,76,65,84,69,114,162,0,0,
+    0,114,159,0,0,0,114,40,0,0,0,218,6,97,112,112,
+    101,110,100,41,9,114,108,0,0,0,90,8,108,111,99,97,
+    116,105,111,110,114,129,0,0,0,114,159,0,0,0,218,4,
+    115,112,101,99,218,12,108,111,97,100,101,114,95,99,108,97,
+    115,115,218,8,115,117,102,102,105,120,101,115,114,162,0,0,
+    0,90,7,100,105,114,110,97,109,101,114,4,0,0,0,114,
+    4,0,0,0,114,6,0,0,0,218,23,115,112,101,99,95,
+    102,114,111,109,95,102,105,108,101,95,108,111,99,97,116,105,
+    111,110,33,2,0,0,115,60,0,0,0,0,12,12,4,6,
+    1,15,2,3,1,19,1,13,1,5,8,24,1,9,3,12,
+    1,22,1,21,1,15,1,9,1,5,2,4,3,12,2,15,
+    1,3,1,19,1,13,1,5,2,6,1,12,2,9,1,15,
+    1,6,1,16,1,16,2,114,170,0,0,0,99,0,0,0,
+    0,0,0,0,0,0,0,0,0,5,0,0,0,64,0,0,
+    0,115,121,0,0,0,101,0,0,90,1,0,100,0,0,90,
+    2,0,100,1,0,90,3,0,100,2,0,90,4,0,100,3,
+    0,90,5,0,100,4,0,90,6,0,101,7,0,100,5,0,
+    100,6,0,132,0,0,131,1,0,90,8,0,101,7,0,100,
+    7,0,100,8,0,132,0,0,131,1,0,90,9,0,101,7,
+    0,100,9,0,100,9,0,100,10,0,100,11,0,132,2,0,
+    131,1,0,90,10,0,101,7,0,100,9,0,100,12,0,100,
+    13,0,132,1,0,131,1,0,90,11,0,100,9,0,83,41,
+    14,218,21,87,105,110,100,111,119,115,82,101,103,105,115,116,
+    114,121,70,105,110,100,101,114,122,62,77,101,116,97,32,112,
+    97,116,104,32,102,105,110,100,101,114,32,102,111,114,32,109,
+    111,100,117,108,101,115,32,100,101,99,108,97,114,101,100,32,
+    105,110,32,116,104,101,32,87,105,110,100,111,119,115,32,114,
+    101,103,105,115,116,114,121,46,122,59,83,111,102,116,119,97,
+    114,101,92,80,121,116,104,111,110,92,80,121,116,104,111,110,
+    67,111,114,101,92,123,115,121,115,95,118,101,114,115,105,111,
+    110,125,92,77,111,100,117,108,101,115,92,123,102,117,108,108,
+    110,97,109,101,125,122,65,83,111,102,116,119,97,114,101,92,
+    80,121,116,104,111,110,92,80,121,116,104,111,110,67,111,114,
+    101,92,123,115,121,115,95,118,101,114,115,105,111,110,125,92,
+    77,111,100,117,108,101,115,92,123,102,117,108,108,110,97,109,
+    101,125,92,68,101,98,117,103,70,99,2,0,0,0,0,0,
+    0,0,2,0,0,0,11,0,0,0,67,0,0,0,115,67,
+    0,0,0,121,23,0,116,0,0,106,1,0,116,0,0,106,
+    2,0,124,1,0,131,2,0,83,87,110,37,0,4,116,3,
+    0,107,10,0,114,62,0,1,1,1,116,0,0,106,1,0,
+    116,0,0,106,4,0,124,1,0,131,2,0,83,89,110,1,
+    0,88,100,0,0,83,41,1,78,41,5,218,7,95,119,105,
+    110,114,101,103,90,7,79,112,101,110,75,101,121,90,17,72,
+    75,69,89,95,67,85,82,82,69,78,84,95,85,83,69,82,
+    114,42,0,0,0,90,18,72,75,69,89,95,76,79,67,65,
+    76,95,77,65,67,72,73,78,69,41,2,218,3,99,108,115,
+    114,5,0,0,0,114,4,0,0,0,114,4,0,0,0,114,
+    6,0,0,0,218,14,95,111,112,101,110,95,114,101,103,105,
+    115,116,114,121,111,2,0,0,115,8,0,0,0,0,2,3,
+    1,23,1,13,1,122,36,87,105,110,100,111,119,115,82,101,
+    103,105,115,116,114,121,70,105,110,100,101,114,46,95,111,112,
+    101,110,95,114,101,103,105,115,116,114,121,99,2,0,0,0,
+    0,0,0,0,6,0,0,0,16,0,0,0,67,0,0,0,
+    115,143,0,0,0,124,0,0,106,0,0,114,21,0,124,0,
+    0,106,1,0,125,2,0,110,9,0,124,0,0,106,2,0,
+    125,2,0,124,2,0,106,3,0,100,1,0,124,1,0,100,
+    2,0,116,4,0,106,5,0,100,0,0,100,3,0,133,2,
+    0,25,131,0,2,125,3,0,121,47,0,124,0,0,106,6,
+    0,124,3,0,131,1,0,143,25,0,125,4,0,116,7,0,
+    106,8,0,124,4,0,100,4,0,131,2,0,125,5,0,87,
+    100,0,0,81,82,88,87,110,22,0,4,116,9,0,107,10,
+    0,114,138,0,1,1,1,100,0,0,83,89,110,1,0,88,
+    124,5,0,83,41,5,78,114,128,0,0,0,90,11,115,121,
+    115,95,118,101,114,115,105,111,110,114,82,0,0,0,114,32,
+    0,0,0,41,10,218,11,68,69,66,85,71,95,66,85,73,
+    76,68,218,18,82,69,71,73,83,84,82,89,95,75,69,89,
+    95,68,69,66,85,71,218,12,82,69,71,73,83,84,82,89,
+    95,75,69,89,114,49,0,0,0,114,8,0,0,0,218,7,
+    118,101,114,115,105,111,110,114,174,0,0,0,114,172,0,0,
+    0,90,10,81,117,101,114,121,86,97,108,117,101,114,42,0,
+    0,0,41,6,114,173,0,0,0,114,128,0,0,0,90,12,
+    114,101,103,105,115,116,114,121,95,107,101,121,114,5,0,0,
+    0,90,4,104,107,101,121,218,8,102,105,108,101,112,97,116,
+    104,114,4,0,0,0,114,4,0,0,0,114,6,0,0,0,
+    218,16,95,115,101,97,114,99,104,95,114,101,103,105,115,116,
+    114,121,118,2,0,0,115,22,0,0,0,0,2,9,1,12,
+    2,9,1,15,1,22,1,3,1,18,1,29,1,13,1,9,
+    1,122,38,87,105,110,100,111,119,115,82,101,103,105,115,116,
+    114,121,70,105,110,100,101,114,46,95,115,101,97,114,99,104,
+    95,114,101,103,105,115,116,114,121,78,99,4,0,0,0,0,
+    0,0,0,8,0,0,0,14,0,0,0,67,0,0,0,115,
+    158,0,0,0,124,0,0,106,0,0,124,1,0,131,1,0,
+    125,4,0,124,4,0,100,0,0,107,8,0,114,31,0,100,
+    0,0,83,121,14,0,116,1,0,124,4,0,131,1,0,1,
+    87,110,22,0,4,116,2,0,107,10,0,114,69,0,1,1,
+    1,100,0,0,83,89,110,1,0,88,120,81,0,116,3,0,
+    131,0,0,68,93,70,0,92,2,0,125,5,0,125,6,0,
+    124,4,0,106,4,0,116,5,0,124,6,0,131,1,0,131,
+    1,0,114,80,0,116,6,0,106,7,0,124,1,0,124,5,
+    0,124,1,0,124,4,0,131,2,0,100,1,0,124,4,0,
+    131,2,1,125,7,0,124,7,0,83,113,80,0,87,100,0,
+    0,83,41,2,78,114,161,0,0,0,41,8,114,180,0,0,
+    0,114,41,0,0,0,114,42,0,0,0,114,164,0,0,0,
+    114,94,0,0,0,114,95,0,0,0,114,123,0,0,0,218,
+    16,115,112,101,99,95,102,114,111,109,95,108,111,97,100,101,
+    114,41,8,114,173,0,0,0,114,128,0,0,0,114,37,0,
+    0,0,218,6,116,97,114,103,101,116,114,179,0,0,0,114,
+    129,0,0,0,114,169,0,0,0,114,167,0,0,0,114,4,
+    0,0,0,114,4,0,0,0,114,6,0,0,0,218,9,102,
+    105,110,100,95,115,112,101,99,133,2,0,0,115,26,0,0,
+    0,0,2,15,1,12,1,4,1,3,1,14,1,13,1,9,
+    1,22,1,21,1,9,1,15,1,9,1,122,31,87,105,110,
+    100,111,119,115,82,101,103,105,115,116,114,121,70,105,110,100,
+    101,114,46,102,105,110,100,95,115,112,101,99,99,3,0,0,
+    0,0,0,0,0,4,0,0,0,3,0,0,0,67,0,0,
+    0,115,45,0,0,0,124,0,0,106,0,0,124,1,0,124,
+    2,0,131,2,0,125,3,0,124,3,0,100,1,0,107,9,
+    0,114,37,0,124,3,0,106,1,0,83,100,1,0,83,100,
+    1,0,83,41,2,122,108,70,105,110,100,32,109,111,100,117,
+    108,101,32,110,97,109,101,100,32,105,110,32,116,104,101,32,
+    114,101,103,105,115,116,114,121,46,10,10,32,32,32,32,32,
+    32,32,32,84,104,105,115,32,109,101,116,104,111,100,32,105,
+    115,32,100,101,112,114,101,99,97,116,101,100,46,32,32,85,
+    115,101,32,101,120,101,99,95,109,111,100,117,108,101,40,41,
+    32,105,110,115,116,101,97,100,46,10,10,32,32,32,32,32,
+    32,32,32,78,41,2,114,183,0,0,0,114,129,0,0,0,
+    41,4,114,173,0,0,0,114,128,0,0,0,114,37,0,0,
+    0,114,167,0,0,0,114,4,0,0,0,114,4,0,0,0,
+    114,6,0,0,0,218,11,102,105,110,100,95,109,111,100,117,
+    108,101,149,2,0,0,115,8,0,0,0,0,7,18,1,12,
+    1,7,2,122,33,87,105,110,100,111,119,115,82,101,103,105,
+    115,116,114,121,70,105,110,100,101,114,46,102,105,110,100,95,
+    109,111,100,117,108,101,41,12,114,114,0,0,0,114,113,0,
+    0,0,114,115,0,0,0,114,116,0,0,0,114,177,0,0,
+    0,114,176,0,0,0,114,175,0,0,0,218,11,99,108,97,
+    115,115,109,101,116,104,111,100,114,174,0,0,0,114,180,0,
+    0,0,114,183,0,0,0,114,184,0,0,0,114,4,0,0,
     0,114,4,0,0,0,114,4,0,0,0,114,6,0,0,0,
-    218,10,95,99,97,108,99,95,109,111,100,101,106,1,0,0,
-    115,12,0,0,0,0,2,3,1,19,1,13,1,11,3,10,
-    1,114,99,0,0,0,218,9,118,101,114,98,111,115,105,116,
-    121,114,31,0,0,0,99,1,0,0,0,1,0,0,0,3,
-    0,0,0,4,0,0,0,71,0,0,0,115,75,0,0,0,
-    116,0,0,106,1,0,106,2,0,124,1,0,107,5,0,114,
-    71,0,124,0,0,106,3,0,100,6,0,131,1,0,115,43,
-    0,100,3,0,124,0,0,23,125,0,0,116,4,0,124,0,
-    0,106,5,0,124,2,0,140,0,0,100,4,0,116,0,0,
-    106,6,0,131,1,1,1,100,5,0,83,41,7,122,61,80,
-    114,105,110,116,32,116,104,101,32,109,101,115,115,97,103,101,
-    32,116,111,32,115,116,100,101,114,114,32,105,102,32,45,118,
-    47,80,89,84,72,79,78,86,69,82,66,79,83,69,32,105,
-    115,32,116,117,114,110,101,100,32,111,110,46,250,1,35,250,
-    7,105,109,112,111,114,116,32,122,2,35,32,114,56,0,0,
-    0,78,41,2,114,101,0,0,0,114,102,0,0,0,41,7,
-    114,8,0,0,0,114,69,0,0,0,218,7,118,101,114,98,
-    111,115,101,114,10,0,0,0,218,5,112,114,105,110,116,114,
-    49,0,0,0,218,6,115,116,100,101,114,114,41,3,114,77,
-    0,0,0,114,100,0,0,0,218,4,97,114,103,115,114,4,
-    0,0,0,114,4,0,0,0,114,6,0,0,0,218,16,95,
-    118,101,114,98,111,115,101,95,109,101,115,115,97,103,101,118,
-    1,0,0,115,8,0,0,0,0,2,18,1,15,1,10,1,
-    114,107,0,0,0,99,1,0,0,0,0,0,0,0,3,0,
-    0,0,11,0,0,0,3,0,0,0,115,84,0,0,0,100,
-    1,0,135,0,0,102,1,0,100,2,0,100,3,0,134,1,
-    0,125,1,0,121,13,0,116,0,0,106,1,0,125,2,0,
-    87,110,30,0,4,116,2,0,107,10,0,114,66,0,1,1,
-    1,100,4,0,100,5,0,132,0,0,125,2,0,89,110,1,
-    0,88,124,2,0,124,1,0,136,0,0,131,2,0,1,124,
-    1,0,83,41,6,122,252,68,101,99,111,114,97,116,111,114,
-    32,116,111,32,118,101,114,105,102,121,32,116,104,97,116,32,
-    116,104,101,32,109,111,100,117,108,101,32,98,101,105,110,103,
-    32,114,101,113,117,101,115,116,101,100,32,109,97,116,99,104,
-    101,115,32,116,104,101,32,111,110,101,32,116,104,101,10,32,
-    32,32,32,108,111,97,100,101,114,32,99,97,110,32,104,97,
-    110,100,108,101,46,10,10,32,32,32,32,84,104,101,32,102,
-    105,114,115,116,32,97,114,103,117,109,101,110,116,32,40,115,
-    101,108,102,41,32,109,117,115,116,32,100,101,102,105,110,101,
-    32,95,110,97,109,101,32,119,104,105,99,104,32,116,104,101,
-    32,115,101,99,111,110,100,32,97,114,103,117,109,101,110,116,
-    32,105,115,10,32,32,32,32,99,111,109,112,97,114,101,100,
-    32,97,103,97,105,110,115,116,46,32,73,102,32,116,104,101,
-    32,99,111,109,112,97,114,105,115,111,110,32,102,97,105,108,
-    115,32,116,104,101,110,32,73,109,112,111,114,116,69,114,114,
-    111,114,32,105,115,32,114,97,105,115,101,100,46,10,10,32,
-    32,32,32,78,99,2,0,0,0,0,0,0,0,4,0,0,
-    0,5,0,0,0,31,0,0,0,115,89,0,0,0,124,1,
-    0,100,0,0,107,8,0,114,24,0,124,0,0,106,0,0,
-    125,1,0,110,46,0,124,0,0,106,0,0,124,1,0,107,
-    3,0,114,70,0,116,1,0,100,1,0,124,0,0,106,0,
-    0,124,1,0,102,2,0,22,100,2,0,124,1,0,131,1,
-    1,130,1,0,136,0,0,124,0,0,124,1,0,124,2,0,
-    124,3,0,142,2,0,83,41,3,78,122,30,108,111,97,100,
-    101,114,32,102,111,114,32,37,115,32,99,97,110,110,111,116,
-    32,104,97,110,100,108,101,32,37,115,218,4,110,97,109,101,
-    41,2,114,108,0,0,0,218,11,73,109,112,111,114,116,69,
-    114,114,111,114,41,4,218,4,115,101,108,102,114,108,0,0,
-    0,114,106,0,0,0,90,6,107,119,97,114,103,115,41,1,
-    218,6,109,101,116,104,111,100,114,4,0,0,0,114,6,0,
-    0,0,218,19,95,99,104,101,99,107,95,110,97,109,101,95,
-    119,114,97,112,112,101,114,134,1,0,0,115,12,0,0,0,
-    0,1,12,1,12,1,15,1,6,1,25,1,122,40,95,99,
-    104,101,99,107,95,110,97,109,101,46,60,108,111,99,97,108,
-    115,62,46,95,99,104,101,99,107,95,110,97,109,101,95,119,
-    114,97,112,112,101,114,99,2,0,0,0,0,0,0,0,3,
-    0,0,0,7,0,0,0,83,0,0,0,115,92,0,0,0,
-    120,66,0,100,1,0,100,2,0,100,3,0,100,4,0,103,
-    4,0,68,93,46,0,125,2,0,116,0,0,124,1,0,124,
-    2,0,131,2,0,114,19,0,116,1,0,124,0,0,124,2,
-    0,116,2,0,124,1,0,124,2,0,131,2,0,131,3,0,
-    1,113,19,0,87,124,0,0,106,3,0,106,4,0,124,1,
-    0,106,3,0,131,1,0,1,100,0,0,83,41,5,78,218,
-    10,95,95,109,111,100,117,108,101,95,95,218,8,95,95,110,
-    97,109,101,95,95,218,12,95,95,113,117,97,108,110,97,109,
-    101,95,95,218,7,95,95,100,111,99,95,95,41,5,218,7,
-    104,97,115,97,116,116,114,218,7,115,101,116,97,116,116,114,
-    218,7,103,101,116,97,116,116,114,218,8,95,95,100,105,99,
-    116,95,95,218,6,117,112,100,97,116,101,41,3,90,3,110,
-    101,119,90,3,111,108,100,114,54,0,0,0,114,4,0,0,
-    0,114,4,0,0,0,114,6,0,0,0,218,5,95,119,114,
-    97,112,145,1,0,0,115,8,0,0,0,0,1,25,1,15,
-    1,29,1,122,26,95,99,104,101,99,107,95,110,97,109,101,
-    46,60,108,111,99,97,108,115,62,46,95,119,114,97,112,41,
-    3,218,10,95,98,111,111,116,115,116,114,97,112,114,122,0,
-    0,0,218,9,78,97,109,101,69,114,114,111,114,41,3,114,
-    111,0,0,0,114,112,0,0,0,114,122,0,0,0,114,4,
-    0,0,0,41,1,114,111,0,0,0,114,6,0,0,0,218,
-    11,95,99,104,101,99,107,95,110,97,109,101,126,1,0,0,
-    115,14,0,0,0,0,8,21,7,3,1,13,1,13,2,17,
-    5,13,1,114,125,0,0,0,99,2,0,0,0,0,0,0,
-    0,5,0,0,0,4,0,0,0,67,0,0,0,115,84,0,
-    0,0,124,0,0,106,0,0,124,1,0,131,1,0,92,2,
-    0,125,2,0,125,3,0,124,2,0,100,1,0,107,8,0,
-    114,80,0,116,1,0,124,3,0,131,1,0,114,80,0,100,
-    2,0,125,4,0,116,2,0,106,3,0,124,4,0,106,4,
-    0,124,3,0,100,3,0,25,131,1,0,116,5,0,131,2,
-    0,1,124,2,0,83,41,4,122,155,84,114,121,32,116,111,
-    32,102,105,110,100,32,97,32,108,111,97,100,101,114,32,102,
-    111,114,32,116,104,101,32,115,112,101,99,105,102,105,101,100,
-    32,109,111,100,117,108,101,32,98,121,32,100,101,108,101,103,
-    97,116,105,110,103,32,116,111,10,32,32,32,32,115,101,108,
-    102,46,102,105,110,100,95,108,111,97,100,101,114,40,41,46,
-    10,10,32,32,32,32,84,104,105,115,32,109,101,116,104,111,
-    100,32,105,115,32,100,101,112,114,101,99,97,116,101,100,32,
-    105,110,32,102,97,118,111,114,32,111,102,32,102,105,110,100,
-    101,114,46,102,105,110,100,95,115,112,101,99,40,41,46,10,
-    10,32,32,32,32,78,122,44,78,111,116,32,105,109,112,111,
-    114,116,105,110,103,32,100,105,114,101,99,116,111,114,121,32,
-    123,125,58,32,109,105,115,115,105,110,103,32,95,95,105,110,
-    105,116,95,95,114,61,0,0,0,41,6,218,11,102,105,110,
-    100,95,108,111,97,100,101,114,114,33,0,0,0,114,62,0,
-    0,0,114,63,0,0,0,114,49,0,0,0,218,13,73,109,
-    112,111,114,116,87,97,114,110,105,110,103,41,5,114,110,0,
-    0,0,218,8,102,117,108,108,110,97,109,101,218,6,108,111,
-    97,100,101,114,218,8,112,111,114,116,105,111,110,115,218,3,
-    109,115,103,114,4,0,0,0,114,4,0,0,0,114,6,0,
-    0,0,218,17,95,102,105,110,100,95,109,111,100,117,108,101,
-    95,115,104,105,109,154,1,0,0,115,10,0,0,0,0,10,
-    21,1,24,1,6,1,29,1,114,132,0,0,0,99,4,0,
-    0,0,0,0,0,0,11,0,0,0,19,0,0,0,67,0,
-    0,0,115,240,1,0,0,105,0,0,125,4,0,124,2,0,
-    100,1,0,107,9,0,114,31,0,124,2,0,124,4,0,100,
-    2,0,60,110,6,0,100,3,0,125,2,0,124,3,0,100,
-    1,0,107,9,0,114,59,0,124,3,0,124,4,0,100,4,
-    0,60,124,0,0,100,1,0,100,5,0,133,2,0,25,125,
-    5,0,124,0,0,100,5,0,100,6,0,133,2,0,25,125,
-    6,0,124,0,0,100,6,0,100,7,0,133,2,0,25,125,
-    7,0,124,5,0,116,0,0,107,3,0,114,168,0,100,8,
-    0,106,1,0,124,2,0,124,5,0,131,2,0,125,8,0,
-    116,2,0,100,9,0,124,8,0,131,2,0,1,116,3,0,
-    124,8,0,124,4,0,141,1,0,130,1,0,110,119,0,116,
-    4,0,124,6,0,131,1,0,100,5,0,107,3,0,114,229,
-    0,100,10,0,106,1,0,124,2,0,131,1,0,125,8,0,
-    116,2,0,100,9,0,124,8,0,131,2,0,1,116,5,0,
-    124,8,0,131,1,0,130,1,0,110,58,0,116,4,0,124,
-    7,0,131,1,0,100,5,0,107,3,0,114,31,1,100,11,
-    0,106,1,0,124,2,0,131,1,0,125,8,0,116,2,0,
-    100,9,0,124,8,0,131,2,0,1,116,5,0,124,8,0,
-    131,1,0,130,1,0,124,1,0,100,1,0,107,9,0,114,
-    226,1,121,20,0,116,6,0,124,1,0,100,12,0,25,131,
-    1,0,125,9,0,87,110,18,0,4,116,7,0,107,10,0,
-    114,83,1,1,1,1,89,110,62,0,88,116,8,0,124,6,
-    0,131,1,0,124,9,0,107,3,0,114,145,1,100,13,0,
-    106,1,0,124,2,0,131,1,0,125,8,0,116,2,0,100,
-    9,0,124,8,0,131,2,0,1,116,3,0,124,8,0,124,
-    4,0,141,1,0,130,1,0,121,18,0,124,1,0,100,14,
-    0,25,100,15,0,64,125,10,0,87,110,18,0,4,116,7,
-    0,107,10,0,114,183,1,1,1,1,89,110,43,0,88,116,
-    8,0,124,7,0,131,1,0,124,10,0,107,3,0,114,226,
-    1,116,3,0,100,13,0,106,1,0,124,2,0,131,1,0,
-    124,4,0,141,1,0,130,1,0,124,0,0,100,7,0,100,
-    1,0,133,2,0,25,83,41,16,97,122,1,0,0,86,97,
-    108,105,100,97,116,101,32,116,104,101,32,104,101,97,100,101,
-    114,32,111,102,32,116,104,101,32,112,97,115,115,101,100,45,
-    105,110,32,98,121,116,101,99,111,100,101,32,97,103,97,105,
-    110,115,116,32,115,111,117,114,99,101,95,115,116,97,116,115,
-    32,40,105,102,10,32,32,32,32,103,105,118,101,110,41,32,
-    97,110,100,32,114,101,116,117,114,110,105,110,103,32,116,104,
-    101,32,98,121,116,101,99,111,100,101,32,116,104,97,116,32,
-    99,97,110,32,98,101,32,99,111,109,112,105,108,101,100,32,
-    98,121,32,99,111,109,112,105,108,101,40,41,46,10,10,32,
-    32,32,32,65,108,108,32,111,116,104,101,114,32,97,114,103,
-    117,109,101,110,116,115,32,97,114,101,32,117,115,101,100,32,
-    116,111,32,101,110,104,97,110,99,101,32,101,114,114,111,114,
-    32,114,101,112,111,114,116,105,110,103,46,10,10,32,32,32,
-    32,73,109,112,111,114,116,69,114,114,111,114,32,105,115,32,
-    114,97,105,115,101,100,32,119,104,101,110,32,116,104,101,32,
-    109,97,103,105,99,32,110,117,109,98,101,114,32,105,115,32,
-    105,110,99,111,114,114,101,99,116,32,111,114,32,116,104,101,
-    32,98,121,116,101,99,111,100,101,32,105,115,10,32,32,32,
-    32,102,111,117,110,100,32,116,111,32,98,101,32,115,116,97,
-    108,101,46,32,69,79,70,69,114,114,111,114,32,105,115,32,
-    114,97,105,115,101,100,32,119,104,101,110,32,116,104,101,32,
-    100,97,116,97,32,105,115,32,102,111,117,110,100,32,116,111,
-    32,98,101,10,32,32,32,32,116,114,117,110,99,97,116,101,
-    100,46,10,10,32,32,32,32,78,114,108,0,0,0,122,10,
-    60,98,121,116,101,99,111,100,101,62,114,37,0,0,0,114,
-    14,0,0,0,233,8,0,0,0,233,12,0,0,0,122,30,
-    98,97,100,32,109,97,103,105,99,32,110,117,109,98,101,114,
-    32,105,110,32,123,33,114,125,58,32,123,33,114,125,122,2,
-    123,125,122,43,114,101,97,99,104,101,100,32,69,79,70,32,
-    119,104,105,108,101,32,114,101,97,100,105,110,103,32,116,105,
-    109,101,115,116,97,109,112,32,105,110,32,123,33,114,125,122,
-    48,114,101,97,99,104,101,100,32,69,79,70,32,119,104,105,
-    108,101,32,114,101,97,100,105,110,103,32,115,105,122,101,32,
-    111,102,32,115,111,117,114,99,101,32,105,110,32,123,33,114,
-    125,218,5,109,116,105,109,101,122,26,98,121,116,101,99,111,
-    100,101,32,105,115,32,115,116,97,108,101,32,102,111,114,32,
-    123,33,114,125,218,4,115,105,122,101,108,3,0,0,0,255,
-    127,255,127,3,0,41,9,218,12,77,65,71,73,67,95,78,
-    85,77,66,69,82,114,49,0,0,0,114,107,0,0,0,114,
-    109,0,0,0,114,33,0,0,0,218,8,69,79,70,69,114,
-    114,111,114,114,16,0,0,0,218,8,75,101,121,69,114,114,
-    111,114,114,21,0,0,0,41,11,114,55,0,0,0,218,12,
-    115,111,117,114,99,101,95,115,116,97,116,115,114,108,0,0,
-    0,114,37,0,0,0,90,11,101,120,99,95,100,101,116,97,
-    105,108,115,90,5,109,97,103,105,99,90,13,114,97,119,95,
-    116,105,109,101,115,116,97,109,112,90,8,114,97,119,95,115,
-    105,122,101,114,77,0,0,0,218,12,115,111,117,114,99,101,
-    95,109,116,105,109,101,218,11,115,111,117,114,99,101,95,115,
-    105,122,101,114,4,0,0,0,114,4,0,0,0,114,6,0,
-    0,0,218,25,95,118,97,108,105,100,97,116,101,95,98,121,
-    116,101,99,111,100,101,95,104,101,97,100,101,114,171,1,0,
-    0,115,76,0,0,0,0,11,6,1,12,1,13,3,6,1,
-    12,1,10,1,16,1,16,1,16,1,12,1,18,1,13,1,
-    18,1,18,1,15,1,13,1,15,1,18,1,15,1,13,1,
-    12,1,12,1,3,1,20,1,13,1,5,2,18,1,15,1,
-    13,1,15,1,3,1,18,1,13,1,5,2,18,1,15,1,
-    9,1,114,143,0,0,0,99,4,0,0,0,0,0,0,0,
-    5,0,0,0,6,0,0,0,67,0,0,0,115,112,0,0,
-    0,116,0,0,106,1,0,124,0,0,131,1,0,125,4,0,
-    116,2,0,124,4,0,116,3,0,131,2,0,114,75,0,116,
-    4,0,100,1,0,124,2,0,131,2,0,1,124,3,0,100,
-    2,0,107,9,0,114,71,0,116,5,0,106,6,0,124,4,
-    0,124,3,0,131,2,0,1,124,4,0,83,116,7,0,100,
-    3,0,106,8,0,124,2,0,131,1,0,100,4,0,124,1,
-    0,100,5,0,124,2,0,131,1,2,130,1,0,100,2,0,
-    83,41,6,122,60,67,111,109,112,105,108,101,32,98,121,116,
-    101,99,111,100,101,32,97,115,32,114,101,116,117,114,110,101,
-    100,32,98,121,32,95,118,97,108,105,100,97,116,101,95,98,
-    121,116,101,99,111,100,101,95,104,101,97,100,101,114,40,41,
-    46,122,21,99,111,100,101,32,111,98,106,101,99,116,32,102,
-    114,111,109,32,123,33,114,125,78,122,23,78,111,110,45,99,
-    111,100,101,32,111,98,106,101,99,116,32,105,110,32,123,33,
-    114,125,114,108,0,0,0,114,37,0,0,0,41,9,218,7,
-    109,97,114,115,104,97,108,90,5,108,111,97,100,115,218,10,
-    105,115,105,110,115,116,97,110,99,101,218,10,95,99,111,100,
-    101,95,116,121,112,101,114,107,0,0,0,218,4,95,105,109,
-    112,90,16,95,102,105,120,95,99,111,95,102,105,108,101,110,
-    97,109,101,114,109,0,0,0,114,49,0,0,0,41,5,114,
-    55,0,0,0,114,108,0,0,0,114,91,0,0,0,114,92,
-    0,0,0,218,4,99,111,100,101,114,4,0,0,0,114,4,
-    0,0,0,114,6,0,0,0,218,17,95,99,111,109,112,105,
-    108,101,95,98,121,116,101,99,111,100,101,226,1,0,0,115,
-    16,0,0,0,0,2,15,1,15,1,13,1,12,1,16,1,
-    4,2,18,1,114,149,0,0,0,114,61,0,0,0,99,3,
-    0,0,0,0,0,0,0,4,0,0,0,3,0,0,0,67,
-    0,0,0,115,76,0,0,0,116,0,0,116,1,0,131,1,
-    0,125,3,0,124,3,0,106,2,0,116,3,0,124,1,0,
-    131,1,0,131,1,0,1,124,3,0,106,2,0,116,3,0,
-    124,2,0,131,1,0,131,1,0,1,124,3,0,106,2,0,
-    116,4,0,106,5,0,124,0,0,131,1,0,131,1,0,1,
-    124,3,0,83,41,1,122,80,67,111,109,112,105,108,101,32,
-    97,32,99,111,100,101,32,111,98,106,101,99,116,32,105,110,
-    116,111,32,98,121,116,101,99,111,100,101,32,102,111,114,32,
-    119,114,105,116,105,110,103,32,111,117,116,32,116,111,32,97,
-    32,98,121,116,101,45,99,111,109,112,105,108,101,100,10,32,
-    32,32,32,102,105,108,101,46,41,6,218,9,98,121,116,101,
-    97,114,114,97,121,114,137,0,0,0,218,6,101,120,116,101,
-    110,100,114,19,0,0,0,114,144,0,0,0,90,5,100,117,
-    109,112,115,41,4,114,148,0,0,0,114,135,0,0,0,114,
-    142,0,0,0,114,55,0,0,0,114,4,0,0,0,114,4,
-    0,0,0,114,6,0,0,0,218,17,95,99,111,100,101,95,
-    116,111,95,98,121,116,101,99,111,100,101,238,1,0,0,115,
-    10,0,0,0,0,3,12,1,19,1,19,1,22,1,114,152,
-    0,0,0,99,1,0,0,0,0,0,0,0,5,0,0,0,
-    4,0,0,0,67,0,0,0,115,89,0,0,0,100,1,0,
-    100,2,0,108,0,0,125,1,0,116,1,0,106,2,0,124,
-    0,0,131,1,0,106,3,0,125,2,0,124,1,0,106,4,
-    0,124,2,0,131,1,0,125,3,0,116,1,0,106,5,0,
-    100,2,0,100,3,0,131,2,0,125,4,0,124,4,0,106,
-    6,0,124,0,0,106,6,0,124,3,0,100,1,0,25,131,
-    1,0,131,1,0,83,41,4,122,121,68,101,99,111,100,101,
-    32,98,121,116,101,115,32,114,101,112,114,101,115,101,110,116,
-    105,110,103,32,115,111,117,114,99,101,32,99,111,100,101,32,
-    97,110,100,32,114,101,116,117,114,110,32,116,104,101,32,115,
-    116,114,105,110,103,46,10,10,32,32,32,32,85,110,105,118,
-    101,114,115,97,108,32,110,101,119,108,105,110,101,32,115,117,
-    112,112,111,114,116,32,105,115,32,117,115,101,100,32,105,110,
-    32,116,104,101,32,100,101,99,111,100,105,110,103,46,10,32,
-    32,32,32,114,61,0,0,0,78,84,41,7,218,8,116,111,
-    107,101,110,105,122,101,114,51,0,0,0,90,7,66,121,116,
-    101,115,73,79,90,8,114,101,97,100,108,105,110,101,90,15,
-    100,101,116,101,99,116,95,101,110,99,111,100,105,110,103,90,
-    25,73,110,99,114,101,109,101,110,116,97,108,78,101,119,108,
-    105,110,101,68,101,99,111,100,101,114,218,6,100,101,99,111,
-    100,101,41,5,218,12,115,111,117,114,99,101,95,98,121,116,
-    101,115,114,153,0,0,0,90,21,115,111,117,114,99,101,95,
-    98,121,116,101,115,95,114,101,97,100,108,105,110,101,218,8,
-    101,110,99,111,100,105,110,103,90,15,110,101,119,108,105,110,
-    101,95,100,101,99,111,100,101,114,114,4,0,0,0,114,4,
-    0,0,0,114,6,0,0,0,218,13,100,101,99,111,100,101,
-    95,115,111,117,114,99,101,248,1,0,0,115,10,0,0,0,
-    0,5,12,1,18,1,15,1,18,1,114,157,0,0,0,114,
-    129,0,0,0,218,26,115,117,98,109,111,100,117,108,101,95,
-    115,101,97,114,99,104,95,108,111,99,97,116,105,111,110,115,
-    99,2,0,0,0,2,0,0,0,9,0,0,0,19,0,0,
-    0,67,0,0,0,115,89,1,0,0,124,1,0,100,1,0,
-    107,8,0,114,73,0,100,2,0,125,1,0,116,0,0,124,
-    2,0,100,3,0,131,2,0,114,73,0,121,19,0,124,2,
-    0,106,1,0,124,0,0,131,1,0,125,1,0,87,110,18,
-    0,4,116,2,0,107,10,0,114,72,0,1,1,1,89,110,
-    1,0,88,116,3,0,106,4,0,124,0,0,124,2,0,100,
-    4,0,124,1,0,131,2,1,125,4,0,100,5,0,124,4,
-    0,95,5,0,124,2,0,100,1,0,107,8,0,114,194,0,
-    120,73,0,116,6,0,131,0,0,68,93,58,0,92,2,0,
-    125,5,0,125,6,0,124,1,0,106,7,0,116,8,0,124,
-    6,0,131,1,0,131,1,0,114,128,0,124,5,0,124,0,
-    0,124,1,0,131,2,0,125,2,0,124,2,0,124,4,0,
-    95,9,0,80,113,128,0,87,100,1,0,83,124,3,0,116,
-    10,0,107,8,0,114,23,1,116,0,0,124,2,0,100,6,
-    0,131,2,0,114,32,1,121,19,0,124,2,0,106,11,0,
-    124,0,0,131,1,0,125,7,0,87,110,18,0,4,116,2,
-    0,107,10,0,114,4,1,1,1,1,89,113,32,1,88,124,
-    7,0,114,32,1,103,0,0,124,4,0,95,12,0,110,9,
-    0,124,3,0,124,4,0,95,12,0,124,4,0,106,12,0,
-    103,0,0,107,2,0,114,85,1,124,1,0,114,85,1,116,
-    13,0,124,1,0,131,1,0,100,7,0,25,125,8,0,124,
-    4,0,106,12,0,106,14,0,124,8,0,131,1,0,1,124,
-    4,0,83,41,8,97,61,1,0,0,82,101,116,117,114,110,
-    32,97,32,109,111,100,117,108,101,32,115,112,101,99,32,98,
-    97,115,101,100,32,111,110,32,97,32,102,105,108,101,32,108,
-    111,99,97,116,105,111,110,46,10,10,32,32,32,32,84,111,
-    32,105,110,100,105,99,97,116,101,32,116,104,97,116,32,116,
-    104,101,32,109,111,100,117,108,101,32,105,115,32,97,32,112,
-    97,99,107,97,103,101,44,32,115,101,116,10,32,32,32,32,
-    115,117,98,109,111,100,117,108,101,95,115,101,97,114,99,104,
-    95,108,111,99,97,116,105,111,110,115,32,116,111,32,97,32,
-    108,105,115,116,32,111,102,32,100,105,114,101,99,116,111,114,
-    121,32,112,97,116,104,115,46,32,32,65,110,10,32,32,32,
-    32,101,109,112,116,121,32,108,105,115,116,32,105,115,32,115,
-    117,102,102,105,99,105,101,110,116,44,32,116,104,111,117,103,
-    104,32,105,116,115,32,110,111,116,32,111,116,104,101,114,119,
-    105,115,101,32,117,115,101,102,117,108,32,116,111,32,116,104,
-    101,10,32,32,32,32,105,109,112,111,114,116,32,115,121,115,
-    116,101,109,46,10,10,32,32,32,32,84,104,101,32,108,111,
-    97,100,101,114,32,109,117,115,116,32,116,97,107,101,32,97,
-    32,115,112,101,99,32,97,115,32,105,116,115,32,111,110,108,
-    121,32,95,95,105,110,105,116,95,95,40,41,32,97,114,103,
-    46,10,10,32,32,32,32,78,122,9,60,117,110,107,110,111,
-    119,110,62,218,12,103,101,116,95,102,105,108,101,110,97,109,
-    101,218,6,111,114,105,103,105,110,84,218,10,105,115,95,112,
-    97,99,107,97,103,101,114,61,0,0,0,41,15,114,117,0,
-    0,0,114,159,0,0,0,114,109,0,0,0,114,123,0,0,
-    0,218,10,77,111,100,117,108,101,83,112,101,99,90,13,95,
-    115,101,116,95,102,105,108,101,97,116,116,114,218,27,95,103,
-    101,116,95,115,117,112,112,111,114,116,101,100,95,102,105,108,
-    101,95,108,111,97,100,101,114,115,114,94,0,0,0,114,95,
-    0,0,0,114,129,0,0,0,218,9,95,80,79,80,85,76,
-    65,84,69,114,161,0,0,0,114,158,0,0,0,114,40,0,
-    0,0,218,6,97,112,112,101,110,100,41,9,114,108,0,0,
-    0,90,8,108,111,99,97,116,105,111,110,114,129,0,0,0,
-    114,158,0,0,0,218,4,115,112,101,99,218,12,108,111,97,
-    100,101,114,95,99,108,97,115,115,218,8,115,117,102,102,105,
-    120,101,115,114,161,0,0,0,90,7,100,105,114,110,97,109,
-    101,114,4,0,0,0,114,4,0,0,0,114,6,0,0,0,
-    218,23,115,112,101,99,95,102,114,111,109,95,102,105,108,101,
-    95,108,111,99,97,116,105,111,110,9,2,0,0,115,60,0,
-    0,0,0,12,12,4,6,1,15,2,3,1,19,1,13,1,
-    5,8,24,1,9,3,12,1,22,1,21,1,15,1,9,1,
-    5,2,4,3,12,2,15,1,3,1,19,1,13,1,5,2,
-    6,1,12,2,9,1,15,1,6,1,16,1,16,2,114,169,
+    114,171,0,0,0,99,2,0,0,115,20,0,0,0,12,2,
+    6,3,6,3,6,2,6,2,18,7,18,15,3,1,21,15,
+    3,1,114,171,0,0,0,99,0,0,0,0,0,0,0,0,
+    0,0,0,0,2,0,0,0,64,0,0,0,115,70,0,0,
+    0,101,0,0,90,1,0,100,0,0,90,2,0,100,1,0,
+    90,3,0,100,2,0,100,3,0,132,0,0,90,4,0,100,
+    4,0,100,5,0,132,0,0,90,5,0,100,6,0,100,7,
+    0,132,0,0,90,6,0,100,8,0,100,9,0,132,0,0,
+    90,7,0,100,10,0,83,41,11,218,13,95,76,111,97,100,
+    101,114,66,97,115,105,99,115,122,83,66,97,115,101,32,99,
+    108,97,115,115,32,111,102,32,99,111,109,109,111,110,32,99,
+    111,100,101,32,110,101,101,100,101,100,32,98,121,32,98,111,
+    116,104,32,83,111,117,114,99,101,76,111,97,100,101,114,32,
+    97,110,100,10,32,32,32,32,83,111,117,114,99,101,108,101,
+    115,115,70,105,108,101,76,111,97,100,101,114,46,99,2,0,
+    0,0,0,0,0,0,5,0,0,0,3,0,0,0,67,0,
+    0,0,115,88,0,0,0,116,0,0,124,0,0,106,1,0,
+    124,1,0,131,1,0,131,1,0,100,1,0,25,125,2,0,
+    124,2,0,106,2,0,100,2,0,100,1,0,131,2,0,100,
+    3,0,25,125,3,0,124,1,0,106,3,0,100,2,0,131,
+    1,0,100,4,0,25,125,4,0,124,3,0,100,5,0,107,
+    2,0,111,87,0,124,4,0,100,5,0,107,3,0,83,41,
+    6,122,141,67,111,110,99,114,101,116,101,32,105,109,112,108,
+    101,109,101,110,116,97,116,105,111,110,32,111,102,32,73,110,
+    115,112,101,99,116,76,111,97,100,101,114,46,105,115,95,112,
+    97,99,107,97,103,101,32,98,121,32,99,104,101,99,107,105,
+    110,103,32,105,102,10,32,32,32,32,32,32,32,32,116,104,
+    101,32,112,97,116,104,32,114,101,116,117,114,110,101,100,32,
+    98,121,32,103,101,116,95,102,105,108,101,110,97,109,101,32,
+    104,97,115,32,97,32,102,105,108,101,110,97,109,101,32,111,
+    102,32,39,95,95,105,110,105,116,95,95,46,112,121,39,46,
+    114,31,0,0,0,114,60,0,0,0,114,61,0,0,0,114,
+    58,0,0,0,218,8,95,95,105,110,105,116,95,95,41,4,
+    114,40,0,0,0,114,160,0,0,0,114,36,0,0,0,114,
+    34,0,0,0,41,5,114,110,0,0,0,114,128,0,0,0,
+    114,96,0,0,0,90,13,102,105,108,101,110,97,109,101,95,
+    98,97,115,101,90,9,116,97,105,108,95,110,97,109,101,114,
+    4,0,0,0,114,4,0,0,0,114,6,0,0,0,114,162,
+    0,0,0,168,2,0,0,115,8,0,0,0,0,3,25,1,
+    22,1,19,1,122,24,95,76,111,97,100,101,114,66,97,115,
+    105,99,115,46,105,115,95,112,97,99,107,97,103,101,99,2,
+    0,0,0,0,0,0,0,2,0,0,0,1,0,0,0,67,
+    0,0,0,115,4,0,0,0,100,1,0,83,41,2,122,42,
+    85,115,101,32,100,101,102,97,117,108,116,32,115,101,109,97,
+    110,116,105,99,115,32,102,111,114,32,109,111,100,117,108,101,
+    32,99,114,101,97,116,105,111,110,46,78,114,4,0,0,0,
+    41,2,114,110,0,0,0,114,167,0,0,0,114,4,0,0,
+    0,114,4,0,0,0,114,6,0,0,0,218,13,99,114,101,
+    97,116,101,95,109,111,100,117,108,101,176,2,0,0,115,0,
+    0,0,0,122,27,95,76,111,97,100,101,114,66,97,115,105,
+    99,115,46,99,114,101,97,116,101,95,109,111,100,117,108,101,
+    99,2,0,0,0,0,0,0,0,3,0,0,0,4,0,0,
+    0,67,0,0,0,115,80,0,0,0,124,0,0,106,0,0,
+    124,1,0,106,1,0,131,1,0,125,2,0,124,2,0,100,
+    1,0,107,8,0,114,54,0,116,2,0,100,2,0,106,3,
+    0,124,1,0,106,1,0,131,1,0,131,1,0,130,1,0,
+    116,4,0,106,5,0,116,6,0,124,2,0,124,1,0,106,
+    7,0,131,3,0,1,100,1,0,83,41,3,122,19,69,120,
+    101,99,117,116,101,32,116,104,101,32,109,111,100,117,108,101,
+    46,78,122,52,99,97,110,110,111,116,32,108,111,97,100,32,
+    109,111,100,117,108,101,32,123,33,114,125,32,119,104,101,110,
+    32,103,101,116,95,99,111,100,101,40,41,32,114,101,116,117,
+    114,110,115,32,78,111,110,101,41,8,218,8,103,101,116,95,
+    99,111,100,101,114,114,0,0,0,114,109,0,0,0,114,49,
+    0,0,0,114,123,0,0,0,218,25,95,99,97,108,108,95,
+    119,105,116,104,95,102,114,97,109,101,115,95,114,101,109,111,
+    118,101,100,218,4,101,120,101,99,114,120,0,0,0,41,3,
+    114,110,0,0,0,218,6,109,111,100,117,108,101,114,149,0,
+    0,0,114,4,0,0,0,114,4,0,0,0,114,6,0,0,
+    0,218,11,101,120,101,99,95,109,111,100,117,108,101,179,2,
+    0,0,115,10,0,0,0,0,2,18,1,12,1,9,1,15,
+    1,122,25,95,76,111,97,100,101,114,66,97,115,105,99,115,
+    46,101,120,101,99,95,109,111,100,117,108,101,99,2,0,0,
+    0,0,0,0,0,2,0,0,0,3,0,0,0,67,0,0,
+    0,115,16,0,0,0,116,0,0,106,1,0,124,0,0,124,
+    1,0,131,2,0,83,41,1,78,41,2,114,123,0,0,0,
+    218,17,95,108,111,97,100,95,109,111,100,117,108,101,95,115,
+    104,105,109,41,2,114,110,0,0,0,114,128,0,0,0,114,
+    4,0,0,0,114,4,0,0,0,114,6,0,0,0,218,11,
+    108,111,97,100,95,109,111,100,117,108,101,187,2,0,0,115,
+    2,0,0,0,0,1,122,25,95,76,111,97,100,101,114,66,
+    97,115,105,99,115,46,108,111,97,100,95,109,111,100,117,108,
+    101,78,41,8,114,114,0,0,0,114,113,0,0,0,114,115,
+    0,0,0,114,116,0,0,0,114,162,0,0,0,114,188,0,
+    0,0,114,193,0,0,0,114,195,0,0,0,114,4,0,0,
+    0,114,4,0,0,0,114,4,0,0,0,114,6,0,0,0,
+    114,186,0,0,0,163,2,0,0,115,10,0,0,0,12,3,
+    6,2,12,8,12,3,12,8,114,186,0,0,0,99,0,0,
+    0,0,0,0,0,0,0,0,0,0,4,0,0,0,64,0,
+    0,0,115,106,0,0,0,101,0,0,90,1,0,100,0,0,
+    90,2,0,100,1,0,100,2,0,132,0,0,90,3,0,100,
+    3,0,100,4,0,132,0,0,90,4,0,100,5,0,100,6,
+    0,132,0,0,90,5,0,100,7,0,100,8,0,132,0,0,
+    90,6,0,100,9,0,100,10,0,132,0,0,90,7,0,100,
+    11,0,100,18,0,100,13,0,100,14,0,132,0,1,90,8,
+    0,100,15,0,100,16,0,132,0,0,90,9,0,100,17,0,
+    83,41,19,218,12,83,111,117,114,99,101,76,111,97,100,101,
+    114,99,2,0,0,0,0,0,0,0,2,0,0,0,1,0,
+    0,0,67,0,0,0,115,10,0,0,0,116,0,0,130,1,
+    0,100,1,0,83,41,2,122,178,79,112,116,105,111,110,97,
+    108,32,109,101,116,104,111,100,32,116,104,97,116,32,114,101,
+    116,117,114,110,115,32,116,104,101,32,109,111,100,105,102,105,
+    99,97,116,105,111,110,32,116,105,109,101,32,40,97,110,32,
+    105,110,116,41,32,102,111,114,32,116,104,101,10,32,32,32,
+    32,32,32,32,32,115,112,101,99,105,102,105,101,100,32,112,
+    97,116,104,44,32,119,104,101,114,101,32,112,97,116,104,32,
+    105,115,32,97,32,115,116,114,46,10,10,32,32,32,32,32,
+    32,32,32,82,97,105,115,101,115,32,73,79,69,114,114,111,
+    114,32,119,104,101,110,32,116,104,101,32,112,97,116,104,32,
+    99,97,110,110,111,116,32,98,101,32,104,97,110,100,108,101,
+    100,46,10,32,32,32,32,32,32,32,32,78,41,1,218,7,
+    73,79,69,114,114,111,114,41,2,114,110,0,0,0,114,37,
+    0,0,0,114,4,0,0,0,114,4,0,0,0,114,6,0,
+    0,0,218,10,112,97,116,104,95,109,116,105,109,101,193,2,
+    0,0,115,2,0,0,0,0,6,122,23,83,111,117,114,99,
+    101,76,111,97,100,101,114,46,112,97,116,104,95,109,116,105,
+    109,101,99,2,0,0,0,0,0,0,0,2,0,0,0,3,
+    0,0,0,67,0,0,0,115,19,0,0,0,100,1,0,124,
+    0,0,106,0,0,124,1,0,131,1,0,105,1,0,83,41,
+    2,97,170,1,0,0,79,112,116,105,111,110,97,108,32,109,
+    101,116,104,111,100,32,114,101,116,117,114,110,105,110,103,32,
+    97,32,109,101,116,97,100,97,116,97,32,100,105,99,116,32,
+    102,111,114,32,116,104,101,32,115,112,101,99,105,102,105,101,
+    100,32,112,97,116,104,10,32,32,32,32,32,32,32,32,116,
+    111,32,98,121,32,116,104,101,32,112,97,116,104,32,40,115,
+    116,114,41,46,10,32,32,32,32,32,32,32,32,80,111,115,
+    115,105,98,108,101,32,107,101,121,115,58,10,32,32,32,32,
+    32,32,32,32,45,32,39,109,116,105,109,101,39,32,40,109,
+    97,110,100,97,116,111,114,121,41,32,105,115,32,116,104,101,
+    32,110,117,109,101,114,105,99,32,116,105,109,101,115,116,97,
+    109,112,32,111,102,32,108,97,115,116,32,115,111,117,114,99,
+    101,10,32,32,32,32,32,32,32,32,32,32,99,111,100,101,
+    32,109,111,100,105,102,105,99,97,116,105,111,110,59,10,32,
+    32,32,32,32,32,32,32,45,32,39,115,105,122,101,39,32,
+    40,111,112,116,105,111,110,97,108,41,32,105,115,32,116,104,
+    101,32,115,105,122,101,32,105,110,32,98,121,116,101,115,32,
+    111,102,32,116,104,101,32,115,111,117,114,99,101,32,99,111,
+    100,101,46,10,10,32,32,32,32,32,32,32,32,73,109,112,
+    108,101,109,101,110,116,105,110,103,32,116,104,105,115,32,109,
+    101,116,104,111,100,32,97,108,108,111,119,115,32,116,104,101,
+    32,108,111,97,100,101,114,32,116,111,32,114,101,97,100,32,
+    98,121,116,101,99,111,100,101,32,102,105,108,101,115,46,10,
+    32,32,32,32,32,32,32,32,82,97,105,115,101,115,32,73,
+    79,69,114,114,111,114,32,119,104,101,110,32,116,104,101,32,
+    112,97,116,104,32,99,97,110,110,111,116,32,98,101,32,104,
+    97,110,100,108,101,100,46,10,32,32,32,32,32,32,32,32,
+    114,135,0,0,0,41,1,114,198,0,0,0,41,2,114,110,
+    0,0,0,114,37,0,0,0,114,4,0,0,0,114,4,0,
+    0,0,114,6,0,0,0,218,10,112,97,116,104,95,115,116,
+    97,116,115,201,2,0,0,115,2,0,0,0,0,11,122,23,
+    83,111,117,114,99,101,76,111,97,100,101,114,46,112,97,116,
+    104,95,115,116,97,116,115,99,4,0,0,0,0,0,0,0,
+    4,0,0,0,3,0,0,0,67,0,0,0,115,16,0,0,
+    0,124,0,0,106,0,0,124,2,0,124,3,0,131,2,0,
+    83,41,1,122,228,79,112,116,105,111,110,97,108,32,109,101,
+    116,104,111,100,32,119,104,105,99,104,32,119,114,105,116,101,
+    115,32,100,97,116,97,32,40,98,121,116,101,115,41,32,116,
+    111,32,97,32,102,105,108,101,32,112,97,116,104,32,40,97,
+    32,115,116,114,41,46,10,10,32,32,32,32,32,32,32,32,
+    73,109,112,108,101,109,101,110,116,105,110,103,32,116,104,105,
+    115,32,109,101,116,104,111,100,32,97,108,108,111,119,115,32,
+    102,111,114,32,116,104,101,32,119,114,105,116,105,110,103,32,
+    111,102,32,98,121,116,101,99,111,100,101,32,102,105,108,101,
+    115,46,10,10,32,32,32,32,32,32,32,32,84,104,101,32,
+    115,111,117,114,99,101,32,112,97,116,104,32,105,115,32,110,
+    101,101,100,101,100,32,105,110,32,111,114,100,101,114,32,116,
+    111,32,99,111,114,114,101,99,116,108,121,32,116,114,97,110,
+    115,102,101,114,32,112,101,114,109,105,115,115,105,111,110,115,
+    10,32,32,32,32,32,32,32,32,41,1,218,8,115,101,116,
+    95,100,97,116,97,41,4,114,110,0,0,0,114,92,0,0,
+    0,90,10,99,97,99,104,101,95,112,97,116,104,114,55,0,
+    0,0,114,4,0,0,0,114,4,0,0,0,114,6,0,0,
+    0,218,15,95,99,97,99,104,101,95,98,121,116,101,99,111,
+    100,101,214,2,0,0,115,2,0,0,0,0,8,122,28,83,
+    111,117,114,99,101,76,111,97,100,101,114,46,95,99,97,99,
+    104,101,95,98,121,116,101,99,111,100,101,99,3,0,0,0,
+    0,0,0,0,3,0,0,0,1,0,0,0,67,0,0,0,
+    115,4,0,0,0,100,1,0,83,41,2,122,150,79,112,116,
+    105,111,110,97,108,32,109,101,116,104,111,100,32,119,104,105,
+    99,104,32,119,114,105,116,101,115,32,100,97,116,97,32,40,
+    98,121,116,101,115,41,32,116,111,32,97,32,102,105,108,101,
+    32,112,97,116,104,32,40,97,32,115,116,114,41,46,10,10,
+    32,32,32,32,32,32,32,32,73,109,112,108,101,109,101,110,
+    116,105,110,103,32,116,104,105,115,32,109,101,116,104,111,100,
+    32,97,108,108,111,119,115,32,102,111,114,32,116,104,101,32,
+    119,114,105,116,105,110,103,32,111,102,32,98,121,116,101,99,
+    111,100,101,32,102,105,108,101,115,46,10,32,32,32,32,32,
+    32,32,32,78,114,4,0,0,0,41,3,114,110,0,0,0,
+    114,37,0,0,0,114,55,0,0,0,114,4,0,0,0,114,
+    4,0,0,0,114,6,0,0,0,114,200,0,0,0,224,2,
+    0,0,115,0,0,0,0,122,21,83,111,117,114,99,101,76,
+    111,97,100,101,114,46,115,101,116,95,100,97,116,97,99,2,
+    0,0,0,0,0,0,0,5,0,0,0,16,0,0,0,67,
+    0,0,0,115,105,0,0,0,124,0,0,106,0,0,124,1,
+    0,131,1,0,125,2,0,121,19,0,124,0,0,106,1,0,
+    124,2,0,131,1,0,125,3,0,87,110,58,0,4,116,2,
+    0,107,10,0,114,94,0,1,125,4,0,1,122,26,0,116,
+    3,0,100,1,0,100,2,0,124,1,0,131,1,1,124,4,
+    0,130,2,0,87,89,100,3,0,100,3,0,125,4,0,126,
+    4,0,88,110,1,0,88,116,4,0,124,3,0,131,1,0,
+    83,41,4,122,52,67,111,110,99,114,101,116,101,32,105,109,
+    112,108,101,109,101,110,116,97,116,105,111,110,32,111,102,32,
+    73,110,115,112,101,99,116,76,111,97,100,101,114,46,103,101,
+    116,95,115,111,117,114,99,101,46,122,39,115,111,117,114,99,
+    101,32,110,111,116,32,97,118,97,105,108,97,98,108,101,32,
+    116,104,114,111,117,103,104,32,103,101,116,95,100,97,116,97,
+    40,41,114,108,0,0,0,78,41,5,114,160,0,0,0,218,
+    8,103,101,116,95,100,97,116,97,114,42,0,0,0,114,109,
+    0,0,0,114,158,0,0,0,41,5,114,110,0,0,0,114,
+    128,0,0,0,114,37,0,0,0,114,156,0,0,0,218,3,
+    101,120,99,114,4,0,0,0,114,4,0,0,0,114,6,0,
+    0,0,218,10,103,101,116,95,115,111,117,114,99,101,231,2,
+    0,0,115,14,0,0,0,0,2,15,1,3,1,19,1,18,
+    1,9,1,31,1,122,23,83,111,117,114,99,101,76,111,97,
+    100,101,114,46,103,101,116,95,115,111,117,114,99,101,218,9,
+    95,111,112,116,105,109,105,122,101,114,31,0,0,0,99,3,
+    0,0,0,1,0,0,0,4,0,0,0,9,0,0,0,67,
+    0,0,0,115,34,0,0,0,116,0,0,106,1,0,116,2,
+    0,124,1,0,124,2,0,100,1,0,100,2,0,100,3,0,
+    100,4,0,124,3,0,131,4,2,83,41,5,122,130,82,101,
+    116,117,114,110,32,116,104,101,32,99,111,100,101,32,111,98,
+    106,101,99,116,32,99,111,109,112,105,108,101,100,32,102,114,
+    111,109,32,115,111,117,114,99,101,46,10,10,32,32,32,32,
+    32,32,32,32,84,104,101,32,39,100,97,116,97,39,32,97,
+    114,103,117,109,101,110,116,32,99,97,110,32,98,101,32,97,
+    110,121,32,111,98,106,101,99,116,32,116,121,112,101,32,116,
+    104,97,116,32,99,111,109,112,105,108,101,40,41,32,115,117,
+    112,112,111,114,116,115,46,10,32,32,32,32,32,32,32,32,
+    114,191,0,0,0,218,12,100,111,110,116,95,105,110,104,101,
+    114,105,116,84,114,70,0,0,0,41,3,114,123,0,0,0,
+    114,190,0,0,0,218,7,99,111,109,112,105,108,101,41,4,
+    114,110,0,0,0,114,55,0,0,0,114,37,0,0,0,114,
+    205,0,0,0,114,4,0,0,0,114,4,0,0,0,114,6,
+    0,0,0,218,14,115,111,117,114,99,101,95,116,111,95,99,
+    111,100,101,241,2,0,0,115,4,0,0,0,0,5,21,1,
+    122,27,83,111,117,114,99,101,76,111,97,100,101,114,46,115,
+    111,117,114,99,101,95,116,111,95,99,111,100,101,99,2,0,
+    0,0,0,0,0,0,10,0,0,0,43,0,0,0,67,0,
+    0,0,115,174,1,0,0,124,0,0,106,0,0,124,1,0,
+    131,1,0,125,2,0,100,1,0,125,3,0,121,16,0,116,
+    1,0,124,2,0,131,1,0,125,4,0,87,110,24,0,4,
+    116,2,0,107,10,0,114,63,0,1,1,1,100,1,0,125,
+    4,0,89,110,202,0,88,121,19,0,124,0,0,106,3,0,
+    124,2,0,131,1,0,125,5,0,87,110,18,0,4,116,4,
+    0,107,10,0,114,103,0,1,1,1,89,110,162,0,88,116,
+    5,0,124,5,0,100,2,0,25,131,1,0,125,3,0,121,
+    19,0,124,0,0,106,6,0,124,4,0,131,1,0,125,6,
+    0,87,110,18,0,4,116,7,0,107,10,0,114,159,0,1,
+    1,1,89,110,106,0,88,121,34,0,116,8,0,124,6,0,
+    100,3,0,124,5,0,100,4,0,124,1,0,100,5,0,124,
+    4,0,131,1,3,125,7,0,87,110,24,0,4,116,9,0,
+    116,10,0,102,2,0,107,10,0,114,220,0,1,1,1,89,
+    110,45,0,88,116,11,0,100,6,0,124,4,0,124,2,0,
+    131,3,0,1,116,12,0,124,7,0,100,4,0,124,1,0,
+    100,7,0,124,4,0,100,8,0,124,2,0,131,1,3,83,
+    124,0,0,106,6,0,124,2,0,131,1,0,125,8,0,124,
+    0,0,106,13,0,124,8,0,124,2,0,131,2,0,125,9,
+    0,116,11,0,100,9,0,124,2,0,131,2,0,1,116,14,
+    0,106,15,0,12,114,170,1,124,4,0,100,1,0,107,9,
+    0,114,170,1,124,3,0,100,1,0,107,9,0,114,170,1,
+    116,16,0,124,9,0,124,3,0,116,17,0,124,8,0,131,
+    1,0,131,3,0,125,6,0,121,36,0,124,0,0,106,18,
+    0,124,2,0,124,4,0,124,6,0,131,3,0,1,116,11,
+    0,100,10,0,124,4,0,131,2,0,1,87,110,18,0,4,
+    116,2,0,107,10,0,114,169,1,1,1,1,89,110,1,0,
+    88,124,9,0,83,41,11,122,190,67,111,110,99,114,101,116,
+    101,32,105,109,112,108,101,109,101,110,116,97,116,105,111,110,
+    32,111,102,32,73,110,115,112,101,99,116,76,111,97,100,101,
+    114,46,103,101,116,95,99,111,100,101,46,10,10,32,32,32,
+    32,32,32,32,32,82,101,97,100,105,110,103,32,111,102,32,
+    98,121,116,101,99,111,100,101,32,114,101,113,117,105,114,101,
+    115,32,112,97,116,104,95,115,116,97,116,115,32,116,111,32,
+    98,101,32,105,109,112,108,101,109,101,110,116,101,100,46,32,
+    84,111,32,119,114,105,116,101,10,32,32,32,32,32,32,32,
+    32,98,121,116,101,99,111,100,101,44,32,115,101,116,95,100,
+    97,116,97,32,109,117,115,116,32,97,108,115,111,32,98,101,
+    32,105,109,112,108,101,109,101,110,116,101,100,46,10,10,32,
+    32,32,32,32,32,32,32,78,114,135,0,0,0,114,141,0,
+    0,0,114,108,0,0,0,114,37,0,0,0,122,13,123,125,
+    32,109,97,116,99,104,101,115,32,123,125,114,91,0,0,0,
+    114,92,0,0,0,122,19,99,111,100,101,32,111,98,106,101,
+    99,116,32,102,114,111,109,32,123,125,122,10,119,114,111,116,
+    101,32,123,33,114,125,41,19,114,160,0,0,0,114,81,0,
+    0,0,114,68,0,0,0,114,199,0,0,0,114,197,0,0,
+    0,114,16,0,0,0,114,202,0,0,0,114,42,0,0,0,
+    114,144,0,0,0,114,109,0,0,0,114,139,0,0,0,114,
+    107,0,0,0,114,150,0,0,0,114,208,0,0,0,114,8,
+    0,0,0,218,19,100,111,110,116,95,119,114,105,116,101,95,
+    98,121,116,101,99,111,100,101,114,153,0,0,0,114,33,0,
+    0,0,114,201,0,0,0,41,10,114,110,0,0,0,114,128,
+    0,0,0,114,92,0,0,0,114,142,0,0,0,114,91,0,
+    0,0,218,2,115,116,114,55,0,0,0,218,10,98,121,116,
+    101,115,95,100,97,116,97,114,156,0,0,0,90,11,99,111,
+    100,101,95,111,98,106,101,99,116,114,4,0,0,0,114,4,
+    0,0,0,114,6,0,0,0,114,189,0,0,0,249,2,0,
+    0,115,78,0,0,0,0,7,15,1,6,1,3,1,16,1,
+    13,1,11,2,3,1,19,1,13,1,5,2,16,1,3,1,
+    19,1,13,1,5,2,3,1,9,1,12,1,13,1,19,1,
+    5,2,9,1,7,1,15,1,6,1,7,1,15,1,18,1,
+    13,1,22,1,12,1,9,1,15,1,3,1,19,1,17,1,
+    13,1,5,1,122,21,83,111,117,114,99,101,76,111,97,100,
+    101,114,46,103,101,116,95,99,111,100,101,78,114,89,0,0,
+    0,41,10,114,114,0,0,0,114,113,0,0,0,114,115,0,
+    0,0,114,198,0,0,0,114,199,0,0,0,114,201,0,0,
+    0,114,200,0,0,0,114,204,0,0,0,114,208,0,0,0,
+    114,189,0,0,0,114,4,0,0,0,114,4,0,0,0,114,
+    4,0,0,0,114,6,0,0,0,114,196,0,0,0,191,2,
+    0,0,115,14,0,0,0,12,2,12,8,12,13,12,10,12,
+    7,12,10,18,8,114,196,0,0,0,99,0,0,0,0,0,
+    0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,115,
+    112,0,0,0,101,0,0,90,1,0,100,0,0,90,2,0,
+    100,1,0,90,3,0,100,2,0,100,3,0,132,0,0,90,
+    4,0,100,4,0,100,5,0,132,0,0,90,5,0,100,6,
+    0,100,7,0,132,0,0,90,6,0,101,7,0,135,0,0,
+    102,1,0,100,8,0,100,9,0,134,0,0,131,1,0,90,
+    8,0,101,7,0,100,10,0,100,11,0,132,0,0,131,1,
+    0,90,9,0,100,12,0,100,13,0,132,0,0,90,10,0,
+    135,0,0,83,41,14,218,10,70,105,108,101,76,111,97,100,
+    101,114,122,103,66,97,115,101,32,102,105,108,101,32,108,111,
+    97,100,101,114,32,99,108,97,115,115,32,119,104,105,99,104,
+    32,105,109,112,108,101,109,101,110,116,115,32,116,104,101,32,
+    108,111,97,100,101,114,32,112,114,111,116,111,99,111,108,32,
+    109,101,116,104,111,100,115,32,116,104,97,116,10,32,32,32,
+    32,114,101,113,117,105,114,101,32,102,105,108,101,32,115,121,
+    115,116,101,109,32,117,115,97,103,101,46,99,3,0,0,0,
+    0,0,0,0,3,0,0,0,2,0,0,0,67,0,0,0,
+    115,22,0,0,0,124,1,0,124,0,0,95,0,0,124,2,
+    0,124,0,0,95,1,0,100,1,0,83,41,2,122,75,67,
+    97,99,104,101,32,116,104,101,32,109,111,100,117,108,101,32,
+    110,97,109,101,32,97,110,100,32,116,104,101,32,112,97,116,
+    104,32,116,111,32,116,104,101,32,102,105,108,101,32,102,111,
+    117,110,100,32,98,121,32,116,104,101,10,32,32,32,32,32,
+    32,32,32,102,105,110,100,101,114,46,78,41,2,114,108,0,
+    0,0,114,37,0,0,0,41,3,114,110,0,0,0,114,128,
+    0,0,0,114,37,0,0,0,114,4,0,0,0,114,4,0,
+    0,0,114,6,0,0,0,114,187,0,0,0,50,3,0,0,
+    115,4,0,0,0,0,3,9,1,122,19,70,105,108,101,76,
+    111,97,100,101,114,46,95,95,105,110,105,116,95,95,99,2,
+    0,0,0,0,0,0,0,2,0,0,0,2,0,0,0,67,
+    0,0,0,115,34,0,0,0,124,0,0,106,0,0,124,1,
+    0,106,0,0,107,2,0,111,33,0,124,0,0,106,1,0,
+    124,1,0,106,1,0,107,2,0,83,41,1,78,41,2,218,
+    9,95,95,99,108,97,115,115,95,95,114,120,0,0,0,41,
+    2,114,110,0,0,0,218,5,111,116,104,101,114,114,4,0,
+    0,0,114,4,0,0,0,114,6,0,0,0,218,6,95,95,
+    101,113,95,95,56,3,0,0,115,4,0,0,0,0,1,18,
+    1,122,17,70,105,108,101,76,111,97,100,101,114,46,95,95,
+    101,113,95,95,99,1,0,0,0,0,0,0,0,1,0,0,
+    0,3,0,0,0,67,0,0,0,115,26,0,0,0,116,0,
+    0,124,0,0,106,1,0,131,1,0,116,0,0,124,0,0,
+    106,2,0,131,1,0,65,83,41,1,78,41,3,218,4,104,
+    97,115,104,114,108,0,0,0,114,37,0,0,0,41,1,114,
+    110,0,0,0,114,4,0,0,0,114,4,0,0,0,114,6,
+    0,0,0,218,8,95,95,104,97,115,104,95,95,60,3,0,
+    0,115,2,0,0,0,0,1,122,19,70,105,108,101,76,111,
+    97,100,101,114,46,95,95,104,97,115,104,95,95,99,2,0,
+    0,0,0,0,0,0,2,0,0,0,3,0,0,0,3,0,
+    0,0,115,22,0,0,0,116,0,0,116,1,0,124,0,0,
+    131,2,0,106,2,0,124,1,0,131,1,0,83,41,1,122,
+    100,76,111,97,100,32,97,32,109,111,100,117,108,101,32,102,
+    114,111,109,32,97,32,102,105,108,101,46,10,10,32,32,32,
+    32,32,32,32,32,84,104,105,115,32,109,101,116,104,111,100,
+    32,105,115,32,100,101,112,114,101,99,97,116,101,100,46,32,
+    32,85,115,101,32,101,120,101,99,95,109,111,100,117,108,101,
+    40,41,32,105,110,115,116,101,97,100,46,10,10,32,32,32,
+    32,32,32,32,32,41,3,218,5,115,117,112,101,114,114,212,
+    0,0,0,114,195,0,0,0,41,2,114,110,0,0,0,114,
+    128,0,0,0,41,1,114,213,0,0,0,114,4,0,0,0,
+    114,6,0,0,0,114,195,0,0,0,63,3,0,0,115,2,
+    0,0,0,0,10,122,22,70,105,108,101,76,111,97,100,101,
+    114,46,108,111,97,100,95,109,111,100,117,108,101,99,2,0,
+    0,0,0,0,0,0,2,0,0,0,1,0,0,0,67,0,
+    0,0,115,7,0,0,0,124,0,0,106,0,0,83,41,1,
+    122,58,82,101,116,117,114,110,32,116,104,101,32,112,97,116,
+    104,32,116,111,32,116,104,101,32,115,111,117,114,99,101,32,
+    102,105,108,101,32,97,115,32,102,111,117,110,100,32,98,121,
+    32,116,104,101,32,102,105,110,100,101,114,46,41,1,114,37,
+    0,0,0,41,2,114,110,0,0,0,114,128,0,0,0,114,
+    4,0,0,0,114,4,0,0,0,114,6,0,0,0,114,160,
+    0,0,0,75,3,0,0,115,2,0,0,0,0,3,122,23,
+    70,105,108,101,76,111,97,100,101,114,46,103,101,116,95,102,
+    105,108,101,110,97,109,101,99,2,0,0,0,0,0,0,0,
+    3,0,0,0,9,0,0,0,67,0,0,0,115,42,0,0,
+    0,116,0,0,106,1,0,124,1,0,100,1,0,131,2,0,
+    143,17,0,125,2,0,124,2,0,106,2,0,131,0,0,83,
+    87,100,2,0,81,82,88,100,2,0,83,41,3,122,39,82,
+    101,116,117,114,110,32,116,104,101,32,100,97,116,97,32,102,
+    114,111,109,32,112,97,116,104,32,97,115,32,114,97,119,32,
+    98,121,116,101,115,46,218,1,114,78,41,3,114,51,0,0,
+    0,114,52,0,0,0,90,4,114,101,97,100,41,3,114,110,
+    0,0,0,114,37,0,0,0,114,56,0,0,0,114,4,0,
+    0,0,114,4,0,0,0,114,6,0,0,0,114,202,0,0,
+    0,80,3,0,0,115,4,0,0,0,0,2,21,1,122,19,
+    70,105,108,101,76,111,97,100,101,114,46,103,101,116,95,100,
+    97,116,97,41,11,114,114,0,0,0,114,113,0,0,0,114,
+    115,0,0,0,114,116,0,0,0,114,187,0,0,0,114,215,
+    0,0,0,114,217,0,0,0,114,125,0,0,0,114,195,0,
+    0,0,114,160,0,0,0,114,202,0,0,0,114,4,0,0,
+    0,114,4,0,0,0,41,1,114,213,0,0,0,114,6,0,
+    0,0,114,212,0,0,0,45,3,0,0,115,14,0,0,0,
+    12,3,6,2,12,6,12,4,12,3,24,12,18,5,114,212,
     0,0,0,99,0,0,0,0,0,0,0,0,0,0,0,0,
-    5,0,0,0,64,0,0,0,115,121,0,0,0,101,0,0,
+    4,0,0,0,64,0,0,0,115,64,0,0,0,101,0,0,
     90,1,0,100,0,0,90,2,0,100,1,0,90,3,0,100,
-    2,0,90,4,0,100,3,0,90,5,0,100,4,0,90,6,
-    0,101,7,0,100,5,0,100,6,0,132,0,0,131,1,0,
-    90,8,0,101,7,0,100,7,0,100,8,0,132,0,0,131,
-    1,0,90,9,0,101,7,0,100,9,0,100,9,0,100,10,
-    0,100,11,0,132,2,0,131,1,0,90,10,0,101,7,0,
-    100,9,0,100,12,0,100,13,0,132,1,0,131,1,0,90,
-    11,0,100,9,0,83,41,14,218,21,87,105,110,100,111,119,
-    115,82,101,103,105,115,116,114,121,70,105,110,100,101,114,122,
-    62,77,101,116,97,32,112,97,116,104,32,102,105,110,100,101,
-    114,32,102,111,114,32,109,111,100,117,108,101,115,32,100,101,
-    99,108,97,114,101,100,32,105,110,32,116,104,101,32,87,105,
-    110,100,111,119,115,32,114,101,103,105,115,116,114,121,46,122,
-    59,83,111,102,116,119,97,114,101,92,80,121,116,104,111,110,
-    92,80,121,116,104,111,110,67,111,114,101,92,123,115,121,115,
-    95,118,101,114,115,105,111,110,125,92,77,111,100,117,108,101,
-    115,92,123,102,117,108,108,110,97,109,101,125,122,65,83,111,
-    102,116,119,97,114,101,92,80,121,116,104,111,110,92,80,121,
-    116,104,111,110,67,111,114,101,92,123,115,121,115,95,118,101,
-    114,115,105,111,110,125,92,77,111,100,117,108,101,115,92,123,
-    102,117,108,108,110,97,109,101,125,92,68,101,98,117,103,70,
-    99,2,0,0,0,0,0,0,0,2,0,0,0,11,0,0,
-    0,67,0,0,0,115,67,0,0,0,121,23,0,116,0,0,
-    106,1,0,116,0,0,106,2,0,124,1,0,131,2,0,83,
-    87,110,37,0,4,116,3,0,107,10,0,114,62,0,1,1,
-    1,116,0,0,106,1,0,116,0,0,106,4,0,124,1,0,
-    131,2,0,83,89,110,1,0,88,100,0,0,83,41,1,78,
-    41,5,218,7,95,119,105,110,114,101,103,90,7,79,112,101,
-    110,75,101,121,90,17,72,75,69,89,95,67,85,82,82,69,
-    78,84,95,85,83,69,82,114,42,0,0,0,90,18,72,75,
-    69,89,95,76,79,67,65,76,95,77,65,67,72,73,78,69,
-    41,2,218,3,99,108,115,114,5,0,0,0,114,4,0,0,
-    0,114,4,0,0,0,114,6,0,0,0,218,14,95,111,112,
-    101,110,95,114,101,103,105,115,116,114,121,87,2,0,0,115,
-    8,0,0,0,0,2,3,1,23,1,13,1,122,36,87,105,
-    110,100,111,119,115,82,101,103,105,115,116,114,121,70,105,110,
-    100,101,114,46,95,111,112,101,110,95,114,101,103,105,115,116,
-    114,121,99,2,0,0,0,0,0,0,0,6,0,0,0,16,
-    0,0,0,67,0,0,0,115,143,0,0,0,124,0,0,106,
-    0,0,114,21,0,124,0,0,106,1,0,125,2,0,110,9,
-    0,124,0,0,106,2,0,125,2,0,124,2,0,106,3,0,
-    100,1,0,124,1,0,100,2,0,116,4,0,106,5,0,100,
-    0,0,100,3,0,133,2,0,25,131,0,2,125,3,0,121,
-    47,0,124,0,0,106,6,0,124,3,0,131,1,0,143,25,
-    0,125,4,0,116,7,0,106,8,0,124,4,0,100,4,0,
-    131,2,0,125,5,0,87,100,0,0,81,82,88,87,110,22,
-    0,4,116,9,0,107,10,0,114,138,0,1,1,1,100,0,
-    0,83,89,110,1,0,88,124,5,0,83,41,5,78,114,128,
-    0,0,0,90,11,115,121,115,95,118,101,114,115,105,111,110,
-    114,82,0,0,0,114,32,0,0,0,41,10,218,11,68,69,
-    66,85,71,95,66,85,73,76,68,218,18,82,69,71,73,83,
-    84,82,89,95,75,69,89,95,68,69,66,85,71,218,12,82,
-    69,71,73,83,84,82,89,95,75,69,89,114,49,0,0,0,
-    114,8,0,0,0,218,7,118,101,114,115,105,111,110,114,173,
-    0,0,0,114,171,0,0,0,90,10,81,117,101,114,121,86,
-    97,108,117,101,114,42,0,0,0,41,6,114,172,0,0,0,
-    114,128,0,0,0,90,12,114,101,103,105,115,116,114,121,95,
-    107,101,121,114,5,0,0,0,90,4,104,107,101,121,218,8,
-    102,105,108,101,112,97,116,104,114,4,0,0,0,114,4,0,
-    0,0,114,6,0,0,0,218,16,95,115,101,97,114,99,104,
-    95,114,101,103,105,115,116,114,121,94,2,0,0,115,22,0,
-    0,0,0,2,9,1,12,2,9,1,15,1,22,1,3,1,
-    18,1,29,1,13,1,9,1,122,38,87,105,110,100,111,119,
-    115,82,101,103,105,115,116,114,121,70,105,110,100,101,114,46,
-    95,115,101,97,114,99,104,95,114,101,103,105,115,116,114,121,
-    78,99,4,0,0,0,0,0,0,0,8,0,0,0,14,0,
-    0,0,67,0,0,0,115,158,0,0,0,124,0,0,106,0,
-    0,124,1,0,131,1,0,125,4,0,124,4,0,100,0,0,
-    107,8,0,114,31,0,100,0,0,83,121,14,0,116,1,0,
-    124,4,0,131,1,0,1,87,110,22,0,4,116,2,0,107,
-    10,0,114,69,0,1,1,1,100,0,0,83,89,110,1,0,
-    88,120,81,0,116,3,0,131,0,0,68,93,70,0,92,2,
-    0,125,5,0,125,6,0,124,4,0,106,4,0,116,5,0,
-    124,6,0,131,1,0,131,1,0,114,80,0,116,6,0,106,
-    7,0,124,1,0,124,5,0,124,1,0,124,4,0,131,2,
-    0,100,1,0,124,4,0,131,2,1,125,7,0,124,7,0,
-    83,113,80,0,87,100,0,0,83,41,2,78,114,160,0,0,
-    0,41,8,114,179,0,0,0,114,41,0,0,0,114,42,0,
-    0,0,114,163,0,0,0,114,94,0,0,0,114,95,0,0,
-    0,114,123,0,0,0,218,16,115,112,101,99,95,102,114,111,
-    109,95,108,111,97,100,101,114,41,8,114,172,0,0,0,114,
-    128,0,0,0,114,37,0,0,0,218,6,116,97,114,103,101,
-    116,114,178,0,0,0,114,129,0,0,0,114,168,0,0,0,
-    114,166,0,0,0,114,4,0,0,0,114,4,0,0,0,114,
-    6,0,0,0,218,9,102,105,110,100,95,115,112,101,99,109,
-    2,0,0,115,26,0,0,0,0,2,15,1,12,1,4,1,
-    3,1,14,1,13,1,9,1,22,1,21,1,9,1,15,1,
-    9,1,122,31,87,105,110,100,111,119,115,82,101,103,105,115,
-    116,114,121,70,105,110,100,101,114,46,102,105,110,100,95,115,
-    112,101,99,99,3,0,0,0,0,0,0,0,4,0,0,0,
-    3,0,0,0,67,0,0,0,115,45,0,0,0,124,0,0,
-    106,0,0,124,1,0,124,2,0,131,2,0,125,3,0,124,
-    3,0,100,1,0,107,9,0,114,37,0,124,3,0,106,1,
-    0,83,100,1,0,83,100,1,0,83,41,2,122,108,70,105,
-    110,100,32,109,111,100,117,108,101,32,110,97,109,101,100,32,
-    105,110,32,116,104,101,32,114,101,103,105,115,116,114,121,46,
-    10,10,32,32,32,32,32,32,32,32,84,104,105,115,32,109,
-    101,116,104,111,100,32,105,115,32,100,101,112,114,101,99,97,
-    116,101,100,46,32,32,85,115,101,32,101,120,101,99,95,109,
-    111,100,117,108,101,40,41,32,105,110,115,116,101,97,100,46,
-    10,10,32,32,32,32,32,32,32,32,78,41,2,114,182,0,
-    0,0,114,129,0,0,0,41,4,114,172,0,0,0,114,128,
-    0,0,0,114,37,0,0,0,114,166,0,0,0,114,4,0,
-    0,0,114,4,0,0,0,114,6,0,0,0,218,11,102,105,
-    110,100,95,109,111,100,117,108,101,125,2,0,0,115,8,0,
-    0,0,0,7,18,1,12,1,7,2,122,33,87,105,110,100,
-    111,119,115,82,101,103,105,115,116,114,121,70,105,110,100,101,
-    114,46,102,105,110,100,95,109,111,100,117,108,101,41,12,114,
+    2,0,100,3,0,132,0,0,90,4,0,100,4,0,100,5,
+    0,132,0,0,90,5,0,100,6,0,100,7,0,100,8,0,
+    100,9,0,132,0,1,90,6,0,100,10,0,83,41,11,218,
+    16,83,111,117,114,99,101,70,105,108,101,76,111,97,100,101,
+    114,122,62,67,111,110,99,114,101,116,101,32,105,109,112,108,
+    101,109,101,110,116,97,116,105,111,110,32,111,102,32,83,111,
+    117,114,99,101,76,111,97,100,101,114,32,117,115,105,110,103,
+    32,116,104,101,32,102,105,108,101,32,115,121,115,116,101,109,
+    46,99,2,0,0,0,0,0,0,0,3,0,0,0,4,0,
+    0,0,67,0,0,0,115,34,0,0,0,116,0,0,124,1,
+    0,131,1,0,125,2,0,100,1,0,124,2,0,106,1,0,
+    100,2,0,124,2,0,106,2,0,105,2,0,83,41,3,122,
+    33,82,101,116,117,114,110,32,116,104,101,32,109,101,116,97,
+    100,97,116,97,32,102,111,114,32,116,104,101,32,112,97,116,
+    104,46,114,135,0,0,0,114,136,0,0,0,41,3,114,41,
+    0,0,0,218,8,115,116,95,109,116,105,109,101,90,7,115,
+    116,95,115,105,122,101,41,3,114,110,0,0,0,114,37,0,
+    0,0,114,210,0,0,0,114,4,0,0,0,114,4,0,0,
+    0,114,6,0,0,0,114,199,0,0,0,90,3,0,0,115,
+    4,0,0,0,0,2,12,1,122,27,83,111,117,114,99,101,
+    70,105,108,101,76,111,97,100,101,114,46,112,97,116,104,95,
+    115,116,97,116,115,99,4,0,0,0,0,0,0,0,5,0,
+    0,0,5,0,0,0,67,0,0,0,115,34,0,0,0,116,
+    0,0,124,1,0,131,1,0,125,4,0,124,0,0,106,1,
+    0,124,2,0,124,3,0,100,1,0,124,4,0,131,2,1,
+    83,41,2,78,218,5,95,109,111,100,101,41,2,114,99,0,
+    0,0,114,200,0,0,0,41,5,114,110,0,0,0,114,92,
+    0,0,0,114,91,0,0,0,114,55,0,0,0,114,44,0,
+    0,0,114,4,0,0,0,114,4,0,0,0,114,6,0,0,
+    0,114,201,0,0,0,95,3,0,0,115,4,0,0,0,0,
+    2,12,1,122,32,83,111,117,114,99,101,70,105,108,101,76,
+    111,97,100,101,114,46,95,99,97,99,104,101,95,98,121,116,
+    101,99,111,100,101,114,222,0,0,0,105,182,1,0,0,99,
+    3,0,0,0,1,0,0,0,9,0,0,0,17,0,0,0,
+    67,0,0,0,115,53,1,0,0,116,0,0,124,1,0,131,
+    1,0,92,2,0,125,4,0,125,5,0,103,0,0,125,6,
+    0,120,54,0,124,4,0,114,80,0,116,1,0,124,4,0,
+    131,1,0,12,114,80,0,116,0,0,124,4,0,131,1,0,
+    92,2,0,125,4,0,125,7,0,124,6,0,106,2,0,124,
+    7,0,131,1,0,1,113,27,0,87,120,132,0,116,3,0,
+    124,6,0,131,1,0,68,93,118,0,125,7,0,116,4,0,
+    124,4,0,124,7,0,131,2,0,125,4,0,121,17,0,116,
+    5,0,106,6,0,124,4,0,131,1,0,1,87,113,94,0,
+    4,116,7,0,107,10,0,114,155,0,1,1,1,119,94,0,
+    89,113,94,0,4,116,8,0,107,10,0,114,211,0,1,125,
+    8,0,1,122,25,0,116,9,0,100,1,0,124,4,0,124,
+    8,0,131,3,0,1,100,2,0,83,87,89,100,2,0,100,
+    2,0,125,8,0,126,8,0,88,113,94,0,88,113,94,0,
+    87,121,33,0,116,10,0,124,1,0,124,2,0,124,3,0,
+    131,3,0,1,116,9,0,100,3,0,124,1,0,131,2,0,
+    1,87,110,53,0,4,116,8,0,107,10,0,114,48,1,1,
+    125,8,0,1,122,21,0,116,9,0,100,1,0,124,1,0,
+    124,8,0,131,3,0,1,87,89,100,2,0,100,2,0,125,
+    8,0,126,8,0,88,110,1,0,88,100,2,0,83,41,4,
+    122,27,87,114,105,116,101,32,98,121,116,101,115,32,100,97,
+    116,97,32,116,111,32,97,32,102,105,108,101,46,122,27,99,
+    111,117,108,100,32,110,111,116,32,99,114,101,97,116,101,32,
+    123,33,114,125,58,32,123,33,114,125,78,122,12,99,114,101,
+    97,116,101,100,32,123,33,114,125,41,11,114,40,0,0,0,
+    114,48,0,0,0,114,166,0,0,0,114,35,0,0,0,114,
+    30,0,0,0,114,3,0,0,0,90,5,109,107,100,105,114,
+    218,15,70,105,108,101,69,120,105,115,116,115,69,114,114,111,
+    114,114,42,0,0,0,114,107,0,0,0,114,57,0,0,0,
+    41,9,114,110,0,0,0,114,37,0,0,0,114,55,0,0,
+    0,114,222,0,0,0,218,6,112,97,114,101,110,116,114,96,
+    0,0,0,114,29,0,0,0,114,25,0,0,0,114,203,0,
+    0,0,114,4,0,0,0,114,4,0,0,0,114,6,0,0,
+    0,114,200,0,0,0,100,3,0,0,115,38,0,0,0,0,
+    2,18,1,6,2,22,1,18,1,17,2,19,1,15,1,3,
+    1,17,1,13,2,7,1,18,3,16,1,27,1,3,1,16,
+    1,17,1,18,2,122,25,83,111,117,114,99,101,70,105,108,
+    101,76,111,97,100,101,114,46,115,101,116,95,100,97,116,97,
+    78,41,7,114,114,0,0,0,114,113,0,0,0,114,115,0,
+    0,0,114,116,0,0,0,114,199,0,0,0,114,201,0,0,
+    0,114,200,0,0,0,114,4,0,0,0,114,4,0,0,0,
+    114,4,0,0,0,114,6,0,0,0,114,220,0,0,0,86,
+    3,0,0,115,8,0,0,0,12,2,6,2,12,5,12,5,
+    114,220,0,0,0,99,0,0,0,0,0,0,0,0,0,0,
+    0,0,2,0,0,0,64,0,0,0,115,46,0,0,0,101,
+    0,0,90,1,0,100,0,0,90,2,0,100,1,0,90,3,
+    0,100,2,0,100,3,0,132,0,0,90,4,0,100,4,0,
+    100,5,0,132,0,0,90,5,0,100,6,0,83,41,7,218,
+    20,83,111,117,114,99,101,108,101,115,115,70,105,108,101,76,
+    111,97,100,101,114,122,45,76,111,97,100,101,114,32,119,104,
+    105,99,104,32,104,97,110,100,108,101,115,32,115,111,117,114,
+    99,101,108,101,115,115,32,102,105,108,101,32,105,109,112,111,
+    114,116,115,46,99,2,0,0,0,0,0,0,0,5,0,0,
+    0,6,0,0,0,67,0,0,0,115,76,0,0,0,124,0,
+    0,106,0,0,124,1,0,131,1,0,125,2,0,124,0,0,
+    106,1,0,124,2,0,131,1,0,125,3,0,116,2,0,124,
+    3,0,100,1,0,124,1,0,100,2,0,124,2,0,131,1,
+    2,125,4,0,116,3,0,124,4,0,100,1,0,124,1,0,
+    100,3,0,124,2,0,131,1,2,83,41,4,78,114,108,0,
+    0,0,114,37,0,0,0,114,91,0,0,0,41,4,114,160,
+    0,0,0,114,202,0,0,0,114,144,0,0,0,114,150,0,
+    0,0,41,5,114,110,0,0,0,114,128,0,0,0,114,37,
+    0,0,0,114,55,0,0,0,114,211,0,0,0,114,4,0,
+    0,0,114,4,0,0,0,114,6,0,0,0,114,189,0,0,
+    0,133,3,0,0,115,8,0,0,0,0,1,15,1,15,1,
+    24,1,122,29,83,111,117,114,99,101,108,101,115,115,70,105,
+    108,101,76,111,97,100,101,114,46,103,101,116,95,99,111,100,
+    101,99,2,0,0,0,0,0,0,0,2,0,0,0,1,0,
+    0,0,67,0,0,0,115,4,0,0,0,100,1,0,83,41,
+    2,122,39,82,101,116,117,114,110,32,78,111,110,101,32,97,
+    115,32,116,104,101,114,101,32,105,115,32,110,111,32,115,111,
+    117,114,99,101,32,99,111,100,101,46,78,114,4,0,0,0,
+    41,2,114,110,0,0,0,114,128,0,0,0,114,4,0,0,
+    0,114,4,0,0,0,114,6,0,0,0,114,204,0,0,0,
+    139,3,0,0,115,2,0,0,0,0,2,122,31,83,111,117,
+    114,99,101,108,101,115,115,70,105,108,101,76,111,97,100,101,
+    114,46,103,101,116,95,115,111,117,114,99,101,78,41,6,114,
     114,0,0,0,114,113,0,0,0,114,115,0,0,0,114,116,
-    0,0,0,114,176,0,0,0,114,175,0,0,0,114,174,0,
-    0,0,218,11,99,108,97,115,115,109,101,116,104,111,100,114,
-    173,0,0,0,114,179,0,0,0,114,182,0,0,0,114,183,
-    0,0,0,114,4,0,0,0,114,4,0,0,0,114,4,0,
-    0,0,114,6,0,0,0,114,170,0,0,0,75,2,0,0,
-    115,20,0,0,0,12,2,6,3,6,3,6,2,6,2,18,
-    7,18,15,3,1,21,15,3,1,114,170,0,0,0,99,0,
-    0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,64,
-    0,0,0,115,70,0,0,0,101,0,0,90,1,0,100,0,
-    0,90,2,0,100,1,0,90,3,0,100,2,0,100,3,0,
-    132,0,0,90,4,0,100,4,0,100,5,0,132,0,0,90,
-    5,0,100,6,0,100,7,0,132,0,0,90,6,0,100,8,
-    0,100,9,0,132,0,0,90,7,0,100,10,0,83,41,11,
-    218,13,95,76,111,97,100,101,114,66,97,115,105,99,115,122,
-    83,66,97,115,101,32,99,108,97,115,115,32,111,102,32,99,
-    111,109,109,111,110,32,99,111,100,101,32,110,101,101,100,101,
-    100,32,98,121,32,98,111,116,104,32,83,111,117,114,99,101,
-    76,111,97,100,101,114,32,97,110,100,10,32,32,32,32,83,
-    111,117,114,99,101,108,101,115,115,70,105,108,101,76,111,97,
-    100,101,114,46,99,2,0,0,0,0,0,0,0,5,0,0,
-    0,3,0,0,0,67,0,0,0,115,88,0,0,0,116,0,
-    0,124,0,0,106,1,0,124,1,0,131,1,0,131,1,0,
-    100,1,0,25,125,2,0,124,2,0,106,2,0,100,2,0,
-    100,1,0,131,2,0,100,3,0,25,125,3,0,124,1,0,
-    106,3,0,100,2,0,131,1,0,100,4,0,25,125,4,0,
-    124,3,0,100,5,0,107,2,0,111,87,0,124,4,0,100,
-    5,0,107,3,0,83,41,6,122,141,67,111,110,99,114,101,
-    116,101,32,105,109,112,108,101,109,101,110,116,97,116,105,111,
-    110,32,111,102,32,73,110,115,112,101,99,116,76,111,97,100,
-    101,114,46,105,115,95,112,97,99,107,97,103,101,32,98,121,
-    32,99,104,101,99,107,105,110,103,32,105,102,10,32,32,32,
-    32,32,32,32,32,116,104,101,32,112,97,116,104,32,114,101,
-    116,117,114,110,101,100,32,98,121,32,103,101,116,95,102,105,
-    108,101,110,97,109,101,32,104,97,115,32,97,32,102,105,108,
-    101,110,97,109,101,32,111,102,32,39,95,95,105,110,105,116,
-    95,95,46,112,121,39,46,114,31,0,0,0,114,60,0,0,
-    0,114,61,0,0,0,114,58,0,0,0,218,8,95,95,105,
-    110,105,116,95,95,41,4,114,40,0,0,0,114,159,0,0,
-    0,114,36,0,0,0,114,34,0,0,0,41,5,114,110,0,
-    0,0,114,128,0,0,0,114,96,0,0,0,90,13,102,105,
-    108,101,110,97,109,101,95,98,97,115,101,90,9,116,97,105,
-    108,95,110,97,109,101,114,4,0,0,0,114,4,0,0,0,
-    114,6,0,0,0,114,161,0,0,0,144,2,0,0,115,8,
-    0,0,0,0,3,25,1,22,1,19,1,122,24,95,76,111,
-    97,100,101,114,66,97,115,105,99,115,46,105,115,95,112,97,
-    99,107,97,103,101,99,2,0,0,0,0,0,0,0,2,0,
-    0,0,1,0,0,0,67,0,0,0,115,4,0,0,0,100,
-    1,0,83,41,2,122,42,85,115,101,32,100,101,102,97,117,
-    108,116,32,115,101,109,97,110,116,105,99,115,32,102,111,114,
-    32,109,111,100,117,108,101,32,99,114,101,97,116,105,111,110,
-    46,78,114,4,0,0,0,41,2,114,110,0,0,0,114,166,
-    0,0,0,114,4,0,0,0,114,4,0,0,0,114,6,0,
-    0,0,218,13,99,114,101,97,116,101,95,109,111,100,117,108,
-    101,152,2,0,0,115,0,0,0,0,122,27,95,76,111,97,
-    100,101,114,66,97,115,105,99,115,46,99,114,101,97,116,101,
-    95,109,111,100,117,108,101,99,2,0,0,0,0,0,0,0,
-    3,0,0,0,4,0,0,0,67,0,0,0,115,80,0,0,
-    0,124,0,0,106,0,0,124,1,0,106,1,0,131,1,0,
-    125,2,0,124,2,0,100,1,0,107,8,0,114,54,0,116,
-    2,0,100,2,0,106,3,0,124,1,0,106,1,0,131,1,
-    0,131,1,0,130,1,0,116,4,0,106,5,0,116,6,0,
-    124,2,0,124,1,0,106,7,0,131,3,0,1,100,1,0,
-    83,41,3,122,19,69,120,101,99,117,116,101,32,116,104,101,
-    32,109,111,100,117,108,101,46,78,122,52,99,97,110,110,111,
-    116,32,108,111,97,100,32,109,111,100,117,108,101,32,123,33,
-    114,125,32,119,104,101,110,32,103,101,116,95,99,111,100,101,
-    40,41,32,114,101,116,117,114,110,115,32,78,111,110,101,41,
-    8,218,8,103,101,116,95,99,111,100,101,114,114,0,0,0,
-    114,109,0,0,0,114,49,0,0,0,114,123,0,0,0,218,
-    25,95,99,97,108,108,95,119,105,116,104,95,102,114,97,109,
-    101,115,95,114,101,109,111,118,101,100,218,4,101,120,101,99,
-    114,120,0,0,0,41,3,114,110,0,0,0,218,6,109,111,
-    100,117,108,101,114,148,0,0,0,114,4,0,0,0,114,4,
-    0,0,0,114,6,0,0,0,218,11,101,120,101,99,95,109,
-    111,100,117,108,101,155,2,0,0,115,10,0,0,0,0,2,
-    18,1,12,1,9,1,15,1,122,25,95,76,111,97,100,101,
-    114,66,97,115,105,99,115,46,101,120,101,99,95,109,111,100,
-    117,108,101,99,2,0,0,0,0,0,0,0,2,0,0,0,
-    3,0,0,0,67,0,0,0,115,16,0,0,0,116,0,0,
-    106,1,0,124,0,0,124,1,0,131,2,0,83,41,1,78,
-    41,2,114,123,0,0,0,218,17,95,108,111,97,100,95,109,
-    111,100,117,108,101,95,115,104,105,109,41,2,114,110,0,0,
-    0,114,128,0,0,0,114,4,0,0,0,114,4,0,0,0,
-    114,6,0,0,0,218,11,108,111,97,100,95,109,111,100,117,
-    108,101,163,2,0,0,115,2,0,0,0,0,1,122,25,95,
-    76,111,97,100,101,114,66,97,115,105,99,115,46,108,111,97,
-    100,95,109,111,100,117,108,101,78,41,8,114,114,0,0,0,
-    114,113,0,0,0,114,115,0,0,0,114,116,0,0,0,114,
-    161,0,0,0,114,187,0,0,0,114,192,0,0,0,114,194,
-    0,0,0,114,4,0,0,0,114,4,0,0,0,114,4,0,
-    0,0,114,6,0,0,0,114,185,0,0,0,139,2,0,0,
-    115,10,0,0,0,12,3,6,2,12,8,12,3,12,8,114,
-    185,0,0,0,99,0,0,0,0,0,0,0,0,0,0,0,
-    0,4,0,0,0,64,0,0,0,115,106,0,0,0,101,0,
-    0,90,1,0,100,0,0,90,2,0,100,1,0,100,2,0,
-    132,0,0,90,3,0,100,3,0,100,4,0,132,0,0,90,
-    4,0,100,5,0,100,6,0,132,0,0,90,5,0,100,7,
-    0,100,8,0,132,0,0,90,6,0,100,9,0,100,10,0,
-    132,0,0,90,7,0,100,11,0,100,18,0,100,13,0,100,
-    14,0,132,0,1,90,8,0,100,15,0,100,16,0,132,0,
-    0,90,9,0,100,17,0,83,41,19,218,12,83,111,117,114,
-    99,101,76,111,97,100,101,114,99,2,0,0,0,0,0,0,
-    0,2,0,0,0,1,0,0,0,67,0,0,0,115,10,0,
-    0,0,116,0,0,130,1,0,100,1,0,83,41,2,122,178,
-    79,112,116,105,111,110,97,108,32,109,101,116,104,111,100,32,
-    116,104,97,116,32,114,101,116,117,114,110,115,32,116,104,101,
-    32,109,111,100,105,102,105,99,97,116,105,111,110,32,116,105,
-    109,101,32,40,97,110,32,105,110,116,41,32,102,111,114,32,
-    116,104,101,10,32,32,32,32,32,32,32,32,115,112,101,99,
-    105,102,105,101,100,32,112,97,116,104,44,32,119,104,101,114,
-    101,32,112,97,116,104,32,105,115,32,97,32,115,116,114,46,
-    10,10,32,32,32,32,32,32,32,32,82,97,105,115,101,115,
-    32,73,79,69,114,114,111,114,32,119,104,101,110,32,116,104,
-    101,32,112,97,116,104,32,99,97,110,110,111,116,32,98,101,
-    32,104,97,110,100,108,101,100,46,10,32,32,32,32,32,32,
-    32,32,78,41,1,218,7,73,79,69,114,114,111,114,41,2,
-    114,110,0,0,0,114,37,0,0,0,114,4,0,0,0,114,
-    4,0,0,0,114,6,0,0,0,218,10,112,97,116,104,95,
-    109,116,105,109,101,169,2,0,0,115,2,0,0,0,0,6,
-    122,23,83,111,117,114,99,101,76,111,97,100,101,114,46,112,
-    97,116,104,95,109,116,105,109,101,99,2,0,0,0,0,0,
-    0,0,2,0,0,0,3,0,0,0,67,0,0,0,115,19,
-    0,0,0,100,1,0,124,0,0,106,0,0,124,1,0,131,
-    1,0,105,1,0,83,41,2,97,170,1,0,0,79,112,116,
-    105,111,110,97,108,32,109,101,116,104,111,100,32,114,101,116,
-    117,114,110,105,110,103,32,97,32,109,101,116,97,100,97,116,
-    97,32,100,105,99,116,32,102,111,114,32,116,104,101,32,115,
-    112,101,99,105,102,105,101,100,32,112,97,116,104,10,32,32,
-    32,32,32,32,32,32,116,111,32,98,121,32,116,104,101,32,
-    112,97,116,104,32,40,115,116,114,41,46,10,32,32,32,32,
-    32,32,32,32,80,111,115,115,105,98,108,101,32,107,101,121,
-    115,58,10,32,32,32,32,32,32,32,32,45,32,39,109,116,
-    105,109,101,39,32,40,109,97,110,100,97,116,111,114,121,41,
-    32,105,115,32,116,104,101,32,110,117,109,101,114,105,99,32,
-    116,105,109,101,115,116,97,109,112,32,111,102,32,108,97,115,
-    116,32,115,111,117,114,99,101,10,32,32,32,32,32,32,32,
-    32,32,32,99,111,100,101,32,109,111,100,105,102,105,99,97,
-    116,105,111,110,59,10,32,32,32,32,32,32,32,32,45,32,
-    39,115,105,122,101,39,32,40,111,112,116,105,111,110,97,108,
-    41,32,105,115,32,116,104,101,32,115,105,122,101,32,105,110,
-    32,98,121,116,101,115,32,111,102,32,116,104,101,32,115,111,
-    117,114,99,101,32,99,111,100,101,46,10,10,32,32,32,32,
-    32,32,32,32,73,109,112,108,101,109,101,110,116,105,110,103,
-    32,116,104,105,115,32,109,101,116,104,111,100,32,97,108,108,
-    111,119,115,32,116,104,101,32,108,111,97,100,101,114,32,116,
-    111,32,114,101,97,100,32,98,121,116,101,99,111,100,101,32,
-    102,105,108,101,115,46,10,32,32,32,32,32,32,32,32,82,
-    97,105,115,101,115,32,73,79,69,114,114,111,114,32,119,104,
-    101,110,32,116,104,101,32,112,97,116,104,32,99,97,110,110,
-    111,116,32,98,101,32,104,97,110,100,108,101,100,46,10,32,
-    32,32,32,32,32,32,32,114,135,0,0,0,41,1,114,197,
-    0,0,0,41,2,114,110,0,0,0,114,37,0,0,0,114,
-    4,0,0,0,114,4,0,0,0,114,6,0,0,0,218,10,
-    112,97,116,104,95,115,116,97,116,115,177,2,0,0,115,2,
-    0,0,0,0,11,122,23,83,111,117,114,99,101,76,111,97,
-    100,101,114,46,112,97,116,104,95,115,116,97,116,115,99,4,
-    0,0,0,0,0,0,0,4,0,0,0,3,0,0,0,67,
-    0,0,0,115,16,0,0,0,124,0,0,106,0,0,124,2,
-    0,124,3,0,131,2,0,83,41,1,122,228,79,112,116,105,
-    111,110,97,108,32,109,101,116,104,111,100,32,119,104,105,99,
-    104,32,119,114,105,116,101,115,32,100,97,116,97,32,40,98,
-    121,116,101,115,41,32,116,111,32,97,32,102,105,108,101,32,
-    112,97,116,104,32,40,97,32,115,116,114,41,46,10,10,32,
-    32,32,32,32,32,32,32,73,109,112,108,101,109,101,110,116,
-    105,110,103,32,116,104,105,115,32,109,101,116,104,111,100,32,
-    97,108,108,111,119,115,32,102,111,114,32,116,104,101,32,119,
-    114,105,116,105,110,103,32,111,102,32,98,121,116,101,99,111,
-    100,101,32,102,105,108,101,115,46,10,10,32,32,32,32,32,
-    32,32,32,84,104,101,32,115,111,117,114,99,101,32,112,97,
-    116,104,32,105,115,32,110,101,101,100,101,100,32,105,110,32,
-    111,114,100,101,114,32,116,111,32,99,111,114,114,101,99,116,
-    108,121,32,116,114,97,110,115,102,101,114,32,112,101,114,109,
-    105,115,115,105,111,110,115,10,32,32,32,32,32,32,32,32,
-    41,1,218,8,115,101,116,95,100,97,116,97,41,4,114,110,
-    0,0,0,114,92,0,0,0,90,10,99,97,99,104,101,95,
-    112,97,116,104,114,55,0,0,0,114,4,0,0,0,114,4,
-    0,0,0,114,6,0,0,0,218,15,95,99,97,99,104,101,
-    95,98,121,116,101,99,111,100,101,190,2,0,0,115,2,0,
-    0,0,0,8,122,28,83,111,117,114,99,101,76,111,97,100,
-    101,114,46,95,99,97,99,104,101,95,98,121,116,101,99,111,
-    100,101,99,3,0,0,0,0,0,0,0,3,0,0,0,1,
-    0,0,0,67,0,0,0,115,4,0,0,0,100,1,0,83,
-    41,2,122,150,79,112,116,105,111,110,97,108,32,109,101,116,
-    104,111,100,32,119,104,105,99,104,32,119,114,105,116,101,115,
-    32,100,97,116,97,32,40,98,121,116,101,115,41,32,116,111,
-    32,97,32,102,105,108,101,32,112,97,116,104,32,40,97,32,
-    115,116,114,41,46,10,10,32,32,32,32,32,32,32,32,73,
-    109,112,108,101,109,101,110,116,105,110,103,32,116,104,105,115,
-    32,109,101,116,104,111,100,32,97,108,108,111,119,115,32,102,
-    111,114,32,116,104,101,32,119,114,105,116,105,110,103,32,111,
-    102,32,98,121,116,101,99,111,100,101,32,102,105,108,101,115,
-    46,10,32,32,32,32,32,32,32,32,78,114,4,0,0,0,
-    41,3,114,110,0,0,0,114,37,0,0,0,114,55,0,0,
-    0,114,4,0,0,0,114,4,0,0,0,114,6,0,0,0,
-    114,199,0,0,0,200,2,0,0,115,0,0,0,0,122,21,
-    83,111,117,114,99,101,76,111,97,100,101,114,46,115,101,116,
-    95,100,97,116,97,99,2,0,0,0,0,0,0,0,5,0,
-    0,0,16,0,0,0,67,0,0,0,115,105,0,0,0,124,
-    0,0,106,0,0,124,1,0,131,1,0,125,2,0,121,19,
-    0,124,0,0,106,1,0,124,2,0,131,1,0,125,3,0,
-    87,110,58,0,4,116,2,0,107,10,0,114,94,0,1,125,
-    4,0,1,122,26,0,116,3,0,100,1,0,100,2,0,124,
-    1,0,131,1,1,124,4,0,130,2,0,87,89,100,3,0,
-    100,3,0,125,4,0,126,4,0,88,110,1,0,88,116,4,
-    0,124,3,0,131,1,0,83,41,4,122,52,67,111,110,99,
-    114,101,116,101,32,105,109,112,108,101,109,101,110,116,97,116,
-    105,111,110,32,111,102,32,73,110,115,112,101,99,116,76,111,
-    97,100,101,114,46,103,101,116,95,115,111,117,114,99,101,46,
-    122,39,115,111,117,114,99,101,32,110,111,116,32,97,118,97,
-    105,108,97,98,108,101,32,116,104,114,111,117,103,104,32,103,
-    101,116,95,100,97,116,97,40,41,114,108,0,0,0,78,41,
-    5,114,159,0,0,0,218,8,103,101,116,95,100,97,116,97,
-    114,42,0,0,0,114,109,0,0,0,114,157,0,0,0,41,
-    5,114,110,0,0,0,114,128,0,0,0,114,37,0,0,0,
-    114,155,0,0,0,218,3,101,120,99,114,4,0,0,0,114,
-    4,0,0,0,114,6,0,0,0,218,10,103,101,116,95,115,
-    111,117,114,99,101,207,2,0,0,115,14,0,0,0,0,2,
-    15,1,3,1,19,1,18,1,9,1,31,1,122,23,83,111,
-    117,114,99,101,76,111,97,100,101,114,46,103,101,116,95,115,
-    111,117,114,99,101,218,9,95,111,112,116,105,109,105,122,101,
-    114,31,0,0,0,99,3,0,0,0,1,0,0,0,4,0,
-    0,0,9,0,0,0,67,0,0,0,115,34,0,0,0,116,
-    0,0,106,1,0,116,2,0,124,1,0,124,2,0,100,1,
-    0,100,2,0,100,3,0,100,4,0,124,3,0,131,4,2,
-    83,41,5,122,130,82,101,116,117,114,110,32,116,104,101,32,
-    99,111,100,101,32,111,98,106,101,99,116,32,99,111,109,112,
-    105,108,101,100,32,102,114,111,109,32,115,111,117,114,99,101,
-    46,10,10,32,32,32,32,32,32,32,32,84,104,101,32,39,
-    100,97,116,97,39,32,97,114,103,117,109,101,110,116,32,99,
-    97,110,32,98,101,32,97,110,121,32,111,98,106,101,99,116,
-    32,116,121,112,101,32,116,104,97,116,32,99,111,109,112,105,
-    108,101,40,41,32,115,117,112,112,111,114,116,115,46,10,32,
-    32,32,32,32,32,32,32,114,190,0,0,0,218,12,100,111,
-    110,116,95,105,110,104,101,114,105,116,84,114,70,0,0,0,
-    41,3,114,123,0,0,0,114,189,0,0,0,218,7,99,111,
-    109,112,105,108,101,41,4,114,110,0,0,0,114,55,0,0,
-    0,114,37,0,0,0,114,204,0,0,0,114,4,0,0,0,
-    114,4,0,0,0,114,6,0,0,0,218,14,115,111,117,114,
-    99,101,95,116,111,95,99,111,100,101,217,2,0,0,115,4,
-    0,0,0,0,5,21,1,122,27,83,111,117,114,99,101,76,
-    111,97,100,101,114,46,115,111,117,114,99,101,95,116,111,95,
-    99,111,100,101,99,2,0,0,0,0,0,0,0,10,0,0,
-    0,43,0,0,0,67,0,0,0,115,174,1,0,0,124,0,
-    0,106,0,0,124,1,0,131,1,0,125,2,0,100,1,0,
-    125,3,0,121,16,0,116,1,0,124,2,0,131,1,0,125,
-    4,0,87,110,24,0,4,116,2,0,107,10,0,114,63,0,
-    1,1,1,100,1,0,125,4,0,89,110,202,0,88,121,19,
-    0,124,0,0,106,3,0,124,2,0,131,1,0,125,5,0,
-    87,110,18,0,4,116,4,0,107,10,0,114,103,0,1,1,
-    1,89,110,162,0,88,116,5,0,124,5,0,100,2,0,25,
-    131,1,0,125,3,0,121,19,0,124,0,0,106,6,0,124,
-    4,0,131,1,0,125,6,0,87,110,18,0,4,116,7,0,
-    107,10,0,114,159,0,1,1,1,89,110,106,0,88,121,34,
-    0,116,8,0,124,6,0,100,3,0,124,5,0,100,4,0,
-    124,1,0,100,5,0,124,4,0,131,1,3,125,7,0,87,
-    110,24,0,4,116,9,0,116,10,0,102,2,0,107,10,0,
-    114,220,0,1,1,1,89,110,45,0,88,116,11,0,100,6,
-    0,124,4,0,124,2,0,131,3,0,1,116,12,0,124,7,
-    0,100,4,0,124,1,0,100,7,0,124,4,0,100,8,0,
-    124,2,0,131,1,3,83,124,0,0,106,6,0,124,2,0,
-    131,1,0,125,8,0,124,0,0,106,13,0,124,8,0,124,
-    2,0,131,2,0,125,9,0,116,11,0,100,9,0,124,2,
-    0,131,2,0,1,116,14,0,106,15,0,12,114,170,1,124,
-    4,0,100,1,0,107,9,0,114,170,1,124,3,0,100,1,
-    0,107,9,0,114,170,1,116,16,0,124,9,0,124,3,0,
-    116,17,0,124,8,0,131,1,0,131,3,0,125,6,0,121,
-    36,0,124,0,0,106,18,0,124,2,0,124,4,0,124,6,
-    0,131,3,0,1,116,11,0,100,10,0,124,4,0,131,2,
-    0,1,87,110,18,0,4,116,2,0,107,10,0,114,169,1,
-    1,1,1,89,110,1,0,88,124,9,0,83,41,11,122,190,
-    67,111,110,99,114,101,116,101,32,105,109,112,108,101,109,101,
-    110,116,97,116,105,111,110,32,111,102,32,73,110,115,112,101,
-    99,116,76,111,97,100,101,114,46,103,101,116,95,99,111,100,
-    101,46,10,10,32,32,32,32,32,32,32,32,82,101,97,100,
-    105,110,103,32,111,102,32,98,121,116,101,99,111,100,101,32,
-    114,101,113,117,105,114,101,115,32,112,97,116,104,95,115,116,
-    97,116,115,32,116,111,32,98,101,32,105,109,112,108,101,109,
-    101,110,116,101,100,46,32,84,111,32,119,114,105,116,101,10,
-    32,32,32,32,32,32,32,32,98,121,116,101,99,111,100,101,
-    44,32,115,101,116,95,100,97,116,97,32,109,117,115,116,32,
-    97,108,115,111,32,98,101,32,105,109,112,108,101,109,101,110,
-    116,101,100,46,10,10,32,32,32,32,32,32,32,32,78,114,
-    135,0,0,0,114,140,0,0,0,114,108,0,0,0,114,37,
-    0,0,0,122,13,123,125,32,109,97,116,99,104,101,115,32,
-    123,125,114,91,0,0,0,114,92,0,0,0,122,19,99,111,
-    100,101,32,111,98,106,101,99,116,32,102,114,111,109,32,123,
-    125,122,10,119,114,111,116,101,32,123,33,114,125,41,19,114,
-    159,0,0,0,114,81,0,0,0,114,68,0,0,0,114,198,
-    0,0,0,114,196,0,0,0,114,16,0,0,0,114,201,0,
-    0,0,114,42,0,0,0,114,143,0,0,0,114,109,0,0,
-    0,114,138,0,0,0,114,107,0,0,0,114,149,0,0,0,
-    114,207,0,0,0,114,8,0,0,0,218,19,100,111,110,116,
-    95,119,114,105,116,101,95,98,121,116,101,99,111,100,101,114,
-    152,0,0,0,114,33,0,0,0,114,200,0,0,0,41,10,
-    114,110,0,0,0,114,128,0,0,0,114,92,0,0,0,114,
-    141,0,0,0,114,91,0,0,0,218,2,115,116,114,55,0,
-    0,0,218,10,98,121,116,101,115,95,100,97,116,97,114,155,
-    0,0,0,90,11,99,111,100,101,95,111,98,106,101,99,116,
-    114,4,0,0,0,114,4,0,0,0,114,6,0,0,0,114,
-    188,0,0,0,225,2,0,0,115,78,0,0,0,0,7,15,
-    1,6,1,3,1,16,1,13,1,11,2,3,1,19,1,13,
-    1,5,2,16,1,3,1,19,1,13,1,5,2,3,1,9,
-    1,12,1,13,1,19,1,5,2,9,1,7,1,15,1,6,
-    1,7,1,15,1,18,1,13,1,22,1,12,1,9,1,15,
-    1,3,1,19,1,17,1,13,1,5,1,122,21,83,111,117,
-    114,99,101,76,111,97,100,101,114,46,103,101,116,95,99,111,
-    100,101,78,114,89,0,0,0,41,10,114,114,0,0,0,114,
-    113,0,0,0,114,115,0,0,0,114,197,0,0,0,114,198,
-    0,0,0,114,200,0,0,0,114,199,0,0,0,114,203,0,
-    0,0,114,207,0,0,0,114,188,0,0,0,114,4,0,0,
-    0,114,4,0,0,0,114,4,0,0,0,114,6,0,0,0,
-    114,195,0,0,0,167,2,0,0,115,14,0,0,0,12,2,
-    12,8,12,13,12,10,12,7,12,10,18,8,114,195,0,0,
-    0,99,0,0,0,0,0,0,0,0,0,0,0,0,4,0,
-    0,0,0,0,0,0,115,112,0,0,0,101,0,0,90,1,
-    0,100,0,0,90,2,0,100,1,0,90,3,0,100,2,0,
-    100,3,0,132,0,0,90,4,0,100,4,0,100,5,0,132,
-    0,0,90,5,0,100,6,0,100,7,0,132,0,0,90,6,
-    0,101,7,0,135,0,0,102,1,0,100,8,0,100,9,0,
-    134,0,0,131,1,0,90,8,0,101,7,0,100,10,0,100,
-    11,0,132,0,0,131,1,0,90,9,0,100,12,0,100,13,
-    0,132,0,0,90,10,0,135,0,0,83,41,14,218,10,70,
-    105,108,101,76,111,97,100,101,114,122,103,66,97,115,101,32,
-    102,105,108,101,32,108,111,97,100,101,114,32,99,108,97,115,
-    115,32,119,104,105,99,104,32,105,109,112,108,101,109,101,110,
-    116,115,32,116,104,101,32,108,111,97,100,101,114,32,112,114,
-    111,116,111,99,111,108,32,109,101,116,104,111,100,115,32,116,
-    104,97,116,10,32,32,32,32,114,101,113,117,105,114,101,32,
-    102,105,108,101,32,115,121,115,116,101,109,32,117,115,97,103,
-    101,46,99,3,0,0,0,0,0,0,0,3,0,0,0,2,
-    0,0,0,67,0,0,0,115,22,0,0,0,124,1,0,124,
-    0,0,95,0,0,124,2,0,124,0,0,95,1,0,100,1,
-    0,83,41,2,122,75,67,97,99,104,101,32,116,104,101,32,
-    109,111,100,117,108,101,32,110,97,109,101,32,97,110,100,32,
-    116,104,101,32,112,97,116,104,32,116,111,32,116,104,101,32,
-    102,105,108,101,32,102,111,117,110,100,32,98,121,32,116,104,
-    101,10,32,32,32,32,32,32,32,32,102,105,110,100,101,114,
-    46,78,41,2,114,108,0,0,0,114,37,0,0,0,41,3,
-    114,110,0,0,0,114,128,0,0,0,114,37,0,0,0,114,
-    4,0,0,0,114,4,0,0,0,114,6,0,0,0,114,186,
-    0,0,0,26,3,0,0,115,4,0,0,0,0,3,9,1,
-    122,19,70,105,108,101,76,111,97,100,101,114,46,95,95,105,
-    110,105,116,95,95,99,2,0,0,0,0,0,0,0,2,0,
-    0,0,2,0,0,0,67,0,0,0,115,34,0,0,0,124,
-    0,0,106,0,0,124,1,0,106,0,0,107,2,0,111,33,
-    0,124,0,0,106,1,0,124,1,0,106,1,0,107,2,0,
-    83,41,1,78,41,2,218,9,95,95,99,108,97,115,115,95,
-    95,114,120,0,0,0,41,2,114,110,0,0,0,218,5,111,
-    116,104,101,114,114,4,0,0,0,114,4,0,0,0,114,6,
-    0,0,0,218,6,95,95,101,113,95,95,32,3,0,0,115,
-    4,0,0,0,0,1,18,1,122,17,70,105,108,101,76,111,
-    97,100,101,114,46,95,95,101,113,95,95,99,1,0,0,0,
-    0,0,0,0,1,0,0,0,3,0,0,0,67,0,0,0,
-    115,26,0,0,0,116,0,0,124,0,0,106,1,0,131,1,
-    0,116,0,0,124,0,0,106,2,0,131,1,0,65,83,41,
-    1,78,41,3,218,4,104,97,115,104,114,108,0,0,0,114,
-    37,0,0,0,41,1,114,110,0,0,0,114,4,0,0,0,
-    114,4,0,0,0,114,6,0,0,0,218,8,95,95,104,97,
-    115,104,95,95,36,3,0,0,115,2,0,0,0,0,1,122,
-    19,70,105,108,101,76,111,97,100,101,114,46,95,95,104,97,
-    115,104,95,95,99,2,0,0,0,0,0,0,0,2,0,0,
-    0,3,0,0,0,3,0,0,0,115,22,0,0,0,116,0,
-    0,116,1,0,124,0,0,131,2,0,106,2,0,124,1,0,
-    131,1,0,83,41,1,122,100,76,111,97,100,32,97,32,109,
-    111,100,117,108,101,32,102,114,111,109,32,97,32,102,105,108,
-    101,46,10,10,32,32,32,32,32,32,32,32,84,104,105,115,
-    32,109,101,116,104,111,100,32,105,115,32,100,101,112,114,101,
-    99,97,116,101,100,46,32,32,85,115,101,32,101,120,101,99,
-    95,109,111,100,117,108,101,40,41,32,105,110,115,116,101,97,
-    100,46,10,10,32,32,32,32,32,32,32,32,41,3,218,5,
-    115,117,112,101,114,114,211,0,0,0,114,194,0,0,0,41,
-    2,114,110,0,0,0,114,128,0,0,0,41,1,114,212,0,
-    0,0,114,4,0,0,0,114,6,0,0,0,114,194,0,0,
-    0,39,3,0,0,115,2,0,0,0,0,10,122,22,70,105,
-    108,101,76,111,97,100,101,114,46,108,111,97,100,95,109,111,
-    100,117,108,101,99,2,0,0,0,0,0,0,0,2,0,0,
-    0,1,0,0,0,67,0,0,0,115,7,0,0,0,124,0,
-    0,106,0,0,83,41,1,122,58,82,101,116,117,114,110,32,
-    116,104,101,32,112,97,116,104,32,116,111,32,116,104,101,32,
-    115,111,117,114,99,101,32,102,105,108,101,32,97,115,32,102,
-    111,117,110,100,32,98,121,32,116,104,101,32,102,105,110,100,
-    101,114,46,41,1,114,37,0,0,0,41,2,114,110,0,0,
-    0,114,128,0,0,0,114,4,0,0,0,114,4,0,0,0,
-    114,6,0,0,0,114,159,0,0,0,51,3,0,0,115,2,
-    0,0,0,0,3,122,23,70,105,108,101,76,111,97,100,101,
-    114,46,103,101,116,95,102,105,108,101,110,97,109,101,99,2,
-    0,0,0,0,0,0,0,3,0,0,0,9,0,0,0,67,
-    0,0,0,115,42,0,0,0,116,0,0,106,1,0,124,1,
-    0,100,1,0,131,2,0,143,17,0,125,2,0,124,2,0,
-    106,2,0,131,0,0,83,87,100,2,0,81,82,88,100,2,
-    0,83,41,3,122,39,82,101,116,117,114,110,32,116,104,101,
-    32,100,97,116,97,32,102,114,111,109,32,112,97,116,104,32,
-    97,115,32,114,97,119,32,98,121,116,101,115,46,218,1,114,
-    78,41,3,114,51,0,0,0,114,52,0,0,0,90,4,114,
-    101,97,100,41,3,114,110,0,0,0,114,37,0,0,0,114,
-    56,0,0,0,114,4,0,0,0,114,4,0,0,0,114,6,
-    0,0,0,114,201,0,0,0,56,3,0,0,115,4,0,0,
-    0,0,2,21,1,122,19,70,105,108,101,76,111,97,100,101,
-    114,46,103,101,116,95,100,97,116,97,41,11,114,114,0,0,
-    0,114,113,0,0,0,114,115,0,0,0,114,116,0,0,0,
-    114,186,0,0,0,114,214,0,0,0,114,216,0,0,0,114,
-    125,0,0,0,114,194,0,0,0,114,159,0,0,0,114,201,
-    0,0,0,114,4,0,0,0,114,4,0,0,0,41,1,114,
-    212,0,0,0,114,6,0,0,0,114,211,0,0,0,21,3,
-    0,0,115,14,0,0,0,12,3,6,2,12,6,12,4,12,
-    3,24,12,18,5,114,211,0,0,0,99,0,0,0,0,0,
-    0,0,0,0,0,0,0,4,0,0,0,64,0,0,0,115,
-    64,0,0,0,101,0,0,90,1,0,100,0,0,90,2,0,
+    0,0,0,114,189,0,0,0,114,204,0,0,0,114,4,0,
+    0,0,114,4,0,0,0,114,4,0,0,0,114,6,0,0,
+    0,114,225,0,0,0,129,3,0,0,115,6,0,0,0,12,
+    2,6,2,12,6,114,225,0,0,0,99,0,0,0,0,0,
+    0,0,0,0,0,0,0,3,0,0,0,64,0,0,0,115,
+    136,0,0,0,101,0,0,90,1,0,100,0,0,90,2,0,
     100,1,0,90,3,0,100,2,0,100,3,0,132,0,0,90,
     4,0,100,4,0,100,5,0,132,0,0,90,5,0,100,6,
-    0,100,7,0,100,8,0,100,9,0,132,0,1,90,6,0,
-    100,10,0,83,41,11,218,16,83,111,117,114,99,101,70,105,
-    108,101,76,111,97,100,101,114,122,62,67,111,110,99,114,101,
-    116,101,32,105,109,112,108,101,109,101,110,116,97,116,105,111,
-    110,32,111,102,32,83,111,117,114,99,101,76,111,97,100,101,
-    114,32,117,115,105,110,103,32,116,104,101,32,102,105,108,101,
-    32,115,121,115,116,101,109,46,99,2,0,0,0,0,0,0,
-    0,3,0,0,0,4,0,0,0,67,0,0,0,115,34,0,
-    0,0,116,0,0,124,1,0,131,1,0,125,2,0,100,1,
-    0,124,2,0,106,1,0,100,2,0,124,2,0,106,2,0,
-    105,2,0,83,41,3,122,33,82,101,116,117,114,110,32,116,
-    104,101,32,109,101,116,97,100,97,116,97,32,102,111,114,32,
-    116,104,101,32,112,97,116,104,46,114,135,0,0,0,114,136,
-    0,0,0,41,3,114,41,0,0,0,218,8,115,116,95,109,
-    116,105,109,101,90,7,115,116,95,115,105,122,101,41,3,114,
-    110,0,0,0,114,37,0,0,0,114,209,0,0,0,114,4,
-    0,0,0,114,4,0,0,0,114,6,0,0,0,114,198,0,
-    0,0,66,3,0,0,115,4,0,0,0,0,2,12,1,122,
-    27,83,111,117,114,99,101,70,105,108,101,76,111,97,100,101,
-    114,46,112,97,116,104,95,115,116,97,116,115,99,4,0,0,
-    0,0,0,0,0,5,0,0,0,5,0,0,0,67,0,0,
-    0,115,34,0,0,0,116,0,0,124,1,0,131,1,0,125,
-    4,0,124,0,0,106,1,0,124,2,0,124,3,0,100,1,
-    0,124,4,0,131,2,1,83,41,2,78,218,5,95,109,111,
-    100,101,41,2,114,99,0,0,0,114,199,0,0,0,41,5,
-    114,110,0,0,0,114,92,0,0,0,114,91,0,0,0,114,
-    55,0,0,0,114,44,0,0,0,114,4,0,0,0,114,4,
-    0,0,0,114,6,0,0,0,114,200,0,0,0,71,3,0,
-    0,115,4,0,0,0,0,2,12,1,122,32,83,111,117,114,
-    99,101,70,105,108,101,76,111,97,100,101,114,46,95,99,97,
-    99,104,101,95,98,121,116,101,99,111,100,101,114,221,0,0,
-    0,105,182,1,0,0,99,3,0,0,0,1,0,0,0,9,
-    0,0,0,17,0,0,0,67,0,0,0,115,53,1,0,0,
-    116,0,0,124,1,0,131,1,0,92,2,0,125,4,0,125,
-    5,0,103,0,0,125,6,0,120,54,0,124,4,0,114,80,
-    0,116,1,0,124,4,0,131,1,0,12,114,80,0,116,0,
-    0,124,4,0,131,1,0,92,2,0,125,4,0,125,7,0,
-    124,6,0,106,2,0,124,7,0,131,1,0,1,113,27,0,
-    87,120,132,0,116,3,0,124,6,0,131,1,0,68,93,118,
-    0,125,7,0,116,4,0,124,4,0,124,7,0,131,2,0,
-    125,4,0,121,17,0,116,5,0,106,6,0,124,4,0,131,
-    1,0,1,87,113,94,0,4,116,7,0,107,10,0,114,155,
-    0,1,1,1,119,94,0,89,113,94,0,4,116,8,0,107,
-    10,0,114,211,0,1,125,8,0,1,122,25,0,116,9,0,
-    100,1,0,124,4,0,124,8,0,131,3,0,1,100,2,0,
-    83,87,89,100,2,0,100,2,0,125,8,0,126,8,0,88,
-    113,94,0,88,113,94,0,87,121,33,0,116,10,0,124,1,
-    0,124,2,0,124,3,0,131,3,0,1,116,9,0,100,3,
-    0,124,1,0,131,2,0,1,87,110,53,0,4,116,8,0,
-    107,10,0,114,48,1,1,125,8,0,1,122,21,0,116,9,
-    0,100,1,0,124,1,0,124,8,0,131,3,0,1,87,89,
-    100,2,0,100,2,0,125,8,0,126,8,0,88,110,1,0,
-    88,100,2,0,83,41,4,122,27,87,114,105,116,101,32,98,
-    121,116,101,115,32,100,97,116,97,32,116,111,32,97,32,102,
-    105,108,101,46,122,27,99,111,117,108,100,32,110,111,116,32,
-    99,114,101,97,116,101,32,123,33,114,125,58,32,123,33,114,
-    125,78,122,12,99,114,101,97,116,101,100,32,123,33,114,125,
-    41,11,114,40,0,0,0,114,48,0,0,0,114,165,0,0,
-    0,114,35,0,0,0,114,30,0,0,0,114,3,0,0,0,
-    90,5,109,107,100,105,114,218,15,70,105,108,101,69,120,105,
-    115,116,115,69,114,114,111,114,114,42,0,0,0,114,107,0,
-    0,0,114,57,0,0,0,41,9,114,110,0,0,0,114,37,
-    0,0,0,114,55,0,0,0,114,221,0,0,0,218,6,112,
-    97,114,101,110,116,114,96,0,0,0,114,29,0,0,0,114,
-    25,0,0,0,114,202,0,0,0,114,4,0,0,0,114,4,
-    0,0,0,114,6,0,0,0,114,199,0,0,0,76,3,0,
-    0,115,38,0,0,0,0,2,18,1,6,2,22,1,18,1,
-    17,2,19,1,15,1,3,1,17,1,13,2,7,1,18,3,
-    16,1,27,1,3,1,16,1,17,1,18,2,122,25,83,111,
-    117,114,99,101,70,105,108,101,76,111,97,100,101,114,46,115,
-    101,116,95,100,97,116,97,78,41,7,114,114,0,0,0,114,
-    113,0,0,0,114,115,0,0,0,114,116,0,0,0,114,198,
-    0,0,0,114,200,0,0,0,114,199,0,0,0,114,4,0,
+    0,100,7,0,132,0,0,90,6,0,100,8,0,100,9,0,
+    132,0,0,90,7,0,100,10,0,100,11,0,132,0,0,90,
+    8,0,100,12,0,100,13,0,132,0,0,90,9,0,100,14,
+    0,100,15,0,132,0,0,90,10,0,100,16,0,100,17,0,
+    132,0,0,90,11,0,101,12,0,100,18,0,100,19,0,132,
+    0,0,131,1,0,90,13,0,100,20,0,83,41,21,218,19,
+    69,120,116,101,110,115,105,111,110,70,105,108,101,76,111,97,
+    100,101,114,122,93,76,111,97,100,101,114,32,102,111,114,32,
+    101,120,116,101,110,115,105,111,110,32,109,111,100,117,108,101,
+    115,46,10,10,32,32,32,32,84,104,101,32,99,111,110,115,
+    116,114,117,99,116,111,114,32,105,115,32,100,101,115,105,103,
+    110,101,100,32,116,111,32,119,111,114,107,32,119,105,116,104,
+    32,70,105,108,101,70,105,110,100,101,114,46,10,10,32,32,
+    32,32,99,3,0,0,0,0,0,0,0,3,0,0,0,2,
+    0,0,0,67,0,0,0,115,22,0,0,0,124,1,0,124,
+    0,0,95,0,0,124,2,0,124,0,0,95,1,0,100,0,
+    0,83,41,1,78,41,2,114,108,0,0,0,114,37,0,0,
+    0,41,3,114,110,0,0,0,114,108,0,0,0,114,37,0,
     0,0,114,4,0,0,0,114,4,0,0,0,114,6,0,0,
-    0,114,219,0,0,0,62,3,0,0,115,8,0,0,0,12,
-    2,6,2,12,5,12,5,114,219,0,0,0,99,0,0,0,
-    0,0,0,0,0,0,0,0,0,2,0,0,0,64,0,0,
-    0,115,46,0,0,0,101,0,0,90,1,0,100,0,0,90,
-    2,0,100,1,0,90,3,0,100,2,0,100,3,0,132,0,
-    0,90,4,0,100,4,0,100,5,0,132,0,0,90,5,0,
-    100,6,0,83,41,7,218,20,83,111,117,114,99,101,108,101,
-    115,115,70,105,108,101,76,111,97,100,101,114,122,45,76,111,
-    97,100,101,114,32,119,104,105,99,104,32,104,97,110,100,108,
-    101,115,32,115,111,117,114,99,101,108,101,115,115,32,102,105,
-    108,101,32,105,109,112,111,114,116,115,46,99,2,0,0,0,
-    0,0,0,0,5,0,0,0,6,0,0,0,67,0,0,0,
-    115,76,0,0,0,124,0,0,106,0,0,124,1,0,131,1,
-    0,125,2,0,124,0,0,106,1,0,124,2,0,131,1,0,
-    125,3,0,116,2,0,124,3,0,100,1,0,124,1,0,100,
-    2,0,124,2,0,131,1,2,125,4,0,116,3,0,124,4,
-    0,100,1,0,124,1,0,100,3,0,124,2,0,131,1,2,
-    83,41,4,78,114,108,0,0,0,114,37,0,0,0,114,91,
-    0,0,0,41,4,114,159,0,0,0,114,201,0,0,0,114,
-    143,0,0,0,114,149,0,0,0,41,5,114,110,0,0,0,
-    114,128,0,0,0,114,37,0,0,0,114,55,0,0,0,114,
-    210,0,0,0,114,4,0,0,0,114,4,0,0,0,114,6,
-    0,0,0,114,188,0,0,0,109,3,0,0,115,8,0,0,
-    0,0,1,15,1,15,1,24,1,122,29,83,111,117,114,99,
-    101,108,101,115,115,70,105,108,101,76,111,97,100,101,114,46,
-    103,101,116,95,99,111,100,101,99,2,0,0,0,0,0,0,
+    0,114,187,0,0,0,156,3,0,0,115,4,0,0,0,0,
+    1,9,1,122,28,69,120,116,101,110,115,105,111,110,70,105,
+    108,101,76,111,97,100,101,114,46,95,95,105,110,105,116,95,
+    95,99,2,0,0,0,0,0,0,0,2,0,0,0,2,0,
+    0,0,67,0,0,0,115,34,0,0,0,124,0,0,106,0,
+    0,124,1,0,106,0,0,107,2,0,111,33,0,124,0,0,
+    106,1,0,124,1,0,106,1,0,107,2,0,83,41,1,78,
+    41,2,114,213,0,0,0,114,120,0,0,0,41,2,114,110,
+    0,0,0,114,214,0,0,0,114,4,0,0,0,114,4,0,
+    0,0,114,6,0,0,0,114,215,0,0,0,160,3,0,0,
+    115,4,0,0,0,0,1,18,1,122,26,69,120,116,101,110,
+    115,105,111,110,70,105,108,101,76,111,97,100,101,114,46,95,
+    95,101,113,95,95,99,1,0,0,0,0,0,0,0,1,0,
+    0,0,3,0,0,0,67,0,0,0,115,26,0,0,0,116,
+    0,0,124,0,0,106,1,0,131,1,0,116,0,0,124,0,
+    0,106,2,0,131,1,0,65,83,41,1,78,41,3,114,216,
+    0,0,0,114,108,0,0,0,114,37,0,0,0,41,1,114,
+    110,0,0,0,114,4,0,0,0,114,4,0,0,0,114,6,
+    0,0,0,114,217,0,0,0,164,3,0,0,115,2,0,0,
+    0,0,1,122,28,69,120,116,101,110,115,105,111,110,70,105,
+    108,101,76,111,97,100,101,114,46,95,95,104,97,115,104,95,
+    95,99,2,0,0,0,0,0,0,0,3,0,0,0,4,0,
+    0,0,67,0,0,0,115,47,0,0,0,116,0,0,106,1,
+    0,116,2,0,106,3,0,124,1,0,131,2,0,125,2,0,
+    116,4,0,100,1,0,124,1,0,106,5,0,124,0,0,106,
+    6,0,131,3,0,1,124,2,0,83,41,2,122,38,67,114,
+    101,97,116,101,32,97,110,32,117,110,105,116,105,97,108,105,
+    122,101,100,32,101,120,116,101,110,115,105,111,110,32,109,111,
+    100,117,108,101,122,38,101,120,116,101,110,115,105,111,110,32,
+    109,111,100,117,108,101,32,123,33,114,125,32,108,111,97,100,
+    101,100,32,102,114,111,109,32,123,33,114,125,41,7,114,123,
+    0,0,0,114,190,0,0,0,114,148,0,0,0,90,14,99,
+    114,101,97,116,101,95,100,121,110,97,109,105,99,114,107,0,
+    0,0,114,108,0,0,0,114,37,0,0,0,41,3,114,110,
+    0,0,0,114,167,0,0,0,114,192,0,0,0,114,4,0,
+    0,0,114,4,0,0,0,114,6,0,0,0,114,188,0,0,
+    0,167,3,0,0,115,10,0,0,0,0,2,6,1,15,1,
+    6,1,16,1,122,33,69,120,116,101,110,115,105,111,110,70,
+    105,108,101,76,111,97,100,101,114,46,99,114,101,97,116,101,
+    95,109,111,100,117,108,101,99,2,0,0,0,0,0,0,0,
+    2,0,0,0,4,0,0,0,67,0,0,0,115,45,0,0,
+    0,116,0,0,106,1,0,116,2,0,106,3,0,124,1,0,
+    131,2,0,1,116,4,0,100,1,0,124,0,0,106,5,0,
+    124,0,0,106,6,0,131,3,0,1,100,2,0,83,41,3,
+    122,30,73,110,105,116,105,97,108,105,122,101,32,97,110,32,
+    101,120,116,101,110,115,105,111,110,32,109,111,100,117,108,101,
+    122,40,101,120,116,101,110,115,105,111,110,32,109,111,100,117,
+    108,101,32,123,33,114,125,32,101,120,101,99,117,116,101,100,
+    32,102,114,111,109,32,123,33,114,125,78,41,7,114,123,0,
+    0,0,114,190,0,0,0,114,148,0,0,0,90,12,101,120,
+    101,99,95,100,121,110,97,109,105,99,114,107,0,0,0,114,
+    108,0,0,0,114,37,0,0,0,41,2,114,110,0,0,0,
+    114,192,0,0,0,114,4,0,0,0,114,4,0,0,0,114,
+    6,0,0,0,114,193,0,0,0,175,3,0,0,115,6,0,
+    0,0,0,2,19,1,6,1,122,31,69,120,116,101,110,115,
+    105,111,110,70,105,108,101,76,111,97,100,101,114,46,101,120,
+    101,99,95,109,111,100,117,108,101,99,2,0,0,0,0,0,
+    0,0,2,0,0,0,4,0,0,0,3,0,0,0,115,48,
+    0,0,0,116,0,0,124,0,0,106,1,0,131,1,0,100,
+    1,0,25,137,0,0,116,2,0,135,0,0,102,1,0,100,
+    2,0,100,3,0,134,0,0,116,3,0,68,131,1,0,131,
+    1,0,83,41,4,122,49,82,101,116,117,114,110,32,84,114,
+    117,101,32,105,102,32,116,104,101,32,101,120,116,101,110,115,
+    105,111,110,32,109,111,100,117,108,101,32,105,115,32,97,32,
+    112,97,99,107,97,103,101,46,114,31,0,0,0,99,1,0,
+    0,0,0,0,0,0,2,0,0,0,4,0,0,0,51,0,
+    0,0,115,31,0,0,0,124,0,0,93,21,0,125,1,0,
+    136,0,0,100,0,0,124,1,0,23,107,2,0,86,1,113,
+    3,0,100,1,0,83,41,2,114,187,0,0,0,78,114,4,
+    0,0,0,41,2,114,24,0,0,0,218,6,115,117,102,102,
+    105,120,41,1,218,9,102,105,108,101,95,110,97,109,101,114,
+    4,0,0,0,114,6,0,0,0,250,9,60,103,101,110,101,
+    120,112,114,62,184,3,0,0,115,2,0,0,0,6,1,122,
+    49,69,120,116,101,110,115,105,111,110,70,105,108,101,76,111,
+    97,100,101,114,46,105,115,95,112,97,99,107,97,103,101,46,
+    60,108,111,99,97,108,115,62,46,60,103,101,110,101,120,112,
+    114,62,41,4,114,40,0,0,0,114,37,0,0,0,218,3,
+    97,110,121,218,18,69,88,84,69,78,83,73,79,78,95,83,
+    85,70,70,73,88,69,83,41,2,114,110,0,0,0,114,128,
+    0,0,0,114,4,0,0,0,41,1,114,228,0,0,0,114,
+    6,0,0,0,114,162,0,0,0,181,3,0,0,115,6,0,
+    0,0,0,2,19,1,18,1,122,30,69,120,116,101,110,115,
+    105,111,110,70,105,108,101,76,111,97,100,101,114,46,105,115,
+    95,112,97,99,107,97,103,101,99,2,0,0,0,0,0,0,
     0,2,0,0,0,1,0,0,0,67,0,0,0,115,4,0,
-    0,0,100,1,0,83,41,2,122,39,82,101,116,117,114,110,
-    32,78,111,110,101,32,97,115,32,116,104,101,114,101,32,105,
-    115,32,110,111,32,115,111,117,114,99,101,32,99,111,100,101,
-    46,78,114,4,0,0,0,41,2,114,110,0,0,0,114,128,
-    0,0,0,114,4,0,0,0,114,4,0,0,0,114,6,0,
-    0,0,114,203,0,0,0,115,3,0,0,115,2,0,0,0,
-    0,2,122,31,83,111,117,114,99,101,108,101,115,115,70,105,
-    108,101,76,111,97,100,101,114,46,103,101,116,95,115,111,117,
-    114,99,101,78,41,6,114,114,0,0,0,114,113,0,0,0,
-    114,115,0,0,0,114,116,0,0,0,114,188,0,0,0,114,
-    203,0,0,0,114,4,0,0,0,114,4,0,0,0,114,4,
-    0,0,0,114,6,0,0,0,114,224,0,0,0,105,3,0,
-    0,115,6,0,0,0,12,2,6,2,12,6,114,224,0,0,
-    0,99,0,0,0,0,0,0,0,0,0,0,0,0,3,0,
-    0,0,64,0,0,0,115,136,0,0,0,101,0,0,90,1,
-    0,100,0,0,90,2,0,100,1,0,90,3,0,100,2,0,
-    100,3,0,132,0,0,90,4,0,100,4,0,100,5,0,132,
-    0,0,90,5,0,100,6,0,100,7,0,132,0,0,90,6,
-    0,100,8,0,100,9,0,132,0,0,90,7,0,100,10,0,
-    100,11,0,132,0,0,90,8,0,100,12,0,100,13,0,132,
-    0,0,90,9,0,100,14,0,100,15,0,132,0,0,90,10,
-    0,100,16,0,100,17,0,132,0,0,90,11,0,101,12,0,
-    100,18,0,100,19,0,132,0,0,131,1,0,90,13,0,100,
-    20,0,83,41,21,218,19,69,120,116,101,110,115,105,111,110,
-    70,105,108,101,76,111,97,100,101,114,122,93,76,111,97,100,
-    101,114,32,102,111,114,32,101,120,116,101,110,115,105,111,110,
-    32,109,111,100,117,108,101,115,46,10,10,32,32,32,32,84,
-    104,101,32,99,111,110,115,116,114,117,99,116,111,114,32,105,
-    115,32,100,101,115,105,103,110,101,100,32,116,111,32,119,111,
-    114,107,32,119,105,116,104,32,70,105,108,101,70,105,110,100,
-    101,114,46,10,10,32,32,32,32,99,3,0,0,0,0,0,
-    0,0,3,0,0,0,2,0,0,0,67,0,0,0,115,22,
-    0,0,0,124,1,0,124,0,0,95,0,0,124,2,0,124,
-    0,0,95,1,0,100,0,0,83,41,1,78,41,2,114,108,
-    0,0,0,114,37,0,0,0,41,3,114,110,0,0,0,114,
-    108,0,0,0,114,37,0,0,0,114,4,0,0,0,114,4,
-    0,0,0,114,6,0,0,0,114,186,0,0,0,132,3,0,
-    0,115,4,0,0,0,0,1,9,1,122,28,69,120,116,101,
-    110,115,105,111,110,70,105,108,101,76,111,97,100,101,114,46,
-    95,95,105,110,105,116,95,95,99,2,0,0,0,0,0,0,
-    0,2,0,0,0,2,0,0,0,67,0,0,0,115,34,0,
-    0,0,124,0,0,106,0,0,124,1,0,106,0,0,107,2,
-    0,111,33,0,124,0,0,106,1,0,124,1,0,106,1,0,
-    107,2,0,83,41,1,78,41,2,114,212,0,0,0,114,120,
-    0,0,0,41,2,114,110,0,0,0,114,213,0,0,0,114,
-    4,0,0,0,114,4,0,0,0,114,6,0,0,0,114,214,
-    0,0,0,136,3,0,0,115,4,0,0,0,0,1,18,1,
-    122,26,69,120,116,101,110,115,105,111,110,70,105,108,101,76,
-    111,97,100,101,114,46,95,95,101,113,95,95,99,1,0,0,
-    0,0,0,0,0,1,0,0,0,3,0,0,0,67,0,0,
-    0,115,26,0,0,0,116,0,0,124,0,0,106,1,0,131,
-    1,0,116,0,0,124,0,0,106,2,0,131,1,0,65,83,
-    41,1,78,41,3,114,215,0,0,0,114,108,0,0,0,114,
-    37,0,0,0,41,1,114,110,0,0,0,114,4,0,0,0,
-    114,4,0,0,0,114,6,0,0,0,114,216,0,0,0,140,
-    3,0,0,115,2,0,0,0,0,1,122,28,69,120,116,101,
+    0,0,100,1,0,83,41,2,122,63,82,101,116,117,114,110,
+    32,78,111,110,101,32,97,115,32,97,110,32,101,120,116,101,
+    110,115,105,111,110,32,109,111,100,117,108,101,32,99,97,110,
+    110,111,116,32,99,114,101,97,116,101,32,97,32,99,111,100,
+    101,32,111,98,106,101,99,116,46,78,114,4,0,0,0,41,
+    2,114,110,0,0,0,114,128,0,0,0,114,4,0,0,0,
+    114,4,0,0,0,114,6,0,0,0,114,189,0,0,0,187,
+    3,0,0,115,2,0,0,0,0,2,122,28,69,120,116,101,
     110,115,105,111,110,70,105,108,101,76,111,97,100,101,114,46,
-    95,95,104,97,115,104,95,95,99,2,0,0,0,0,0,0,
-    0,3,0,0,0,4,0,0,0,67,0,0,0,115,47,0,
-    0,0,116,0,0,106,1,0,116,2,0,106,3,0,124,1,
-    0,131,2,0,125,2,0,116,4,0,100,1,0,124,1,0,
-    106,5,0,124,0,0,106,6,0,131,3,0,1,124,2,0,
-    83,41,2,122,38,67,114,101,97,116,101,32,97,110,32,117,
-    110,105,116,105,97,108,105,122,101,100,32,101,120,116,101,110,
-    115,105,111,110,32,109,111,100,117,108,101,122,38,101,120,116,
-    101,110,115,105,111,110,32,109,111,100,117,108,101,32,123,33,
-    114,125,32,108,111,97,100,101,100,32,102,114,111,109,32,123,
-    33,114,125,41,7,114,123,0,0,0,114,189,0,0,0,114,
-    147,0,0,0,90,14,99,114,101,97,116,101,95,100,121,110,
-    97,109,105,99,114,107,0,0,0,114,108,0,0,0,114,37,
-    0,0,0,41,3,114,110,0,0,0,114,166,0,0,0,114,
-    191,0,0,0,114,4,0,0,0,114,4,0,0,0,114,6,
-    0,0,0,114,187,0,0,0,143,3,0,0,115,10,0,0,
-    0,0,2,6,1,15,1,6,1,16,1,122,33,69,120,116,
-    101,110,115,105,111,110,70,105,108,101,76,111,97,100,101,114,
-    46,99,114,101,97,116,101,95,109,111,100,117,108,101,99,2,
-    0,0,0,0,0,0,0,2,0,0,0,4,0,0,0,67,
-    0,0,0,115,45,0,0,0,116,0,0,106,1,0,116,2,
-    0,106,3,0,124,1,0,131,2,0,1,116,4,0,100,1,
-    0,124,0,0,106,5,0,124,0,0,106,6,0,131,3,0,
-    1,100,2,0,83,41,3,122,30,73,110,105,116,105,97,108,
-    105,122,101,32,97,110,32,101,120,116,101,110,115,105,111,110,
-    32,109,111,100,117,108,101,122,40,101,120,116,101,110,115,105,
-    111,110,32,109,111,100,117,108,101,32,123,33,114,125,32,101,
-    120,101,99,117,116,101,100,32,102,114,111,109,32,123,33,114,
-    125,78,41,7,114,123,0,0,0,114,189,0,0,0,114,147,
-    0,0,0,90,12,101,120,101,99,95,100,121,110,97,109,105,
-    99,114,107,0,0,0,114,108,0,0,0,114,37,0,0,0,
-    41,2,114,110,0,0,0,114,191,0,0,0,114,4,0,0,
-    0,114,4,0,0,0,114,6,0,0,0,114,192,0,0,0,
-    151,3,0,0,115,6,0,0,0,0,2,19,1,6,1,122,
-    31,69,120,116,101,110,115,105,111,110,70,105,108,101,76,111,
-    97,100,101,114,46,101,120,101,99,95,109,111,100,117,108,101,
-    99,2,0,0,0,0,0,0,0,2,0,0,0,4,0,0,
-    0,3,0,0,0,115,48,0,0,0,116,0,0,124,0,0,
-    106,1,0,131,1,0,100,1,0,25,137,0,0,116,2,0,
-    135,0,0,102,1,0,100,2,0,100,3,0,134,0,0,116,
-    3,0,68,131,1,0,131,1,0,83,41,4,122,49,82,101,
-    116,117,114,110,32,84,114,117,101,32,105,102,32,116,104,101,
-    32,101,120,116,101,110,115,105,111,110,32,109,111,100,117,108,
-    101,32,105,115,32,97,32,112,97,99,107,97,103,101,46,114,
-    31,0,0,0,99,1,0,0,0,0,0,0,0,2,0,0,
-    0,4,0,0,0,51,0,0,0,115,31,0,0,0,124,0,
-    0,93,21,0,125,1,0,136,0,0,100,0,0,124,1,0,
-    23,107,2,0,86,1,113,3,0,100,1,0,83,41,2,114,
-    186,0,0,0,78,114,4,0,0,0,41,2,114,24,0,0,
-    0,218,6,115,117,102,102,105,120,41,1,218,9,102,105,108,
-    101,95,110,97,109,101,114,4,0,0,0,114,6,0,0,0,
-    250,9,60,103,101,110,101,120,112,114,62,160,3,0,0,115,
-    2,0,0,0,6,1,122,49,69,120,116,101,110,115,105,111,
-    110,70,105,108,101,76,111,97,100,101,114,46,105,115,95,112,
-    97,99,107,97,103,101,46,60,108,111,99,97,108,115,62,46,
-    60,103,101,110,101,120,112,114,62,41,4,114,40,0,0,0,
-    114,37,0,0,0,218,3,97,110,121,218,18,69,88,84,69,
-    78,83,73,79,78,95,83,85,70,70,73,88,69,83,41,2,
-    114,110,0,0,0,114,128,0,0,0,114,4,0,0,0,41,
-    1,114,227,0,0,0,114,6,0,0,0,114,161,0,0,0,
-    157,3,0,0,115,6,0,0,0,0,2,19,1,18,1,122,
-    30,69,120,116,101,110,115,105,111,110,70,105,108,101,76,111,
-    97,100,101,114,46,105,115,95,112,97,99,107,97,103,101,99,
-    2,0,0,0,0,0,0,0,2,0,0,0,1,0,0,0,
-    67,0,0,0,115,4,0,0,0,100,1,0,83,41,2,122,
-    63,82,101,116,117,114,110,32,78,111,110,101,32,97,115,32,
-    97,110,32,101,120,116,101,110,115,105,111,110,32,109,111,100,
-    117,108,101,32,99,97,110,110,111,116,32,99,114,101,97,116,
-    101,32,97,32,99,111,100,101,32,111,98,106,101,99,116,46,
-    78,114,4,0,0,0,41,2,114,110,0,0,0,114,128,0,
+    103,101,116,95,99,111,100,101,99,2,0,0,0,0,0,0,
+    0,2,0,0,0,1,0,0,0,67,0,0,0,115,4,0,
+    0,0,100,1,0,83,41,2,122,53,82,101,116,117,114,110,
+    32,78,111,110,101,32,97,115,32,101,120,116,101,110,115,105,
+    111,110,32,109,111,100,117,108,101,115,32,104,97,118,101,32,
+    110,111,32,115,111,117,114,99,101,32,99,111,100,101,46,78,
+    114,4,0,0,0,41,2,114,110,0,0,0,114,128,0,0,
+    0,114,4,0,0,0,114,4,0,0,0,114,6,0,0,0,
+    114,204,0,0,0,191,3,0,0,115,2,0,0,0,0,2,
+    122,30,69,120,116,101,110,115,105,111,110,70,105,108,101,76,
+    111,97,100,101,114,46,103,101,116,95,115,111,117,114,99,101,
+    99,2,0,0,0,0,0,0,0,2,0,0,0,1,0,0,
+    0,67,0,0,0,115,7,0,0,0,124,0,0,106,0,0,
+    83,41,1,122,58,82,101,116,117,114,110,32,116,104,101,32,
+    112,97,116,104,32,116,111,32,116,104,101,32,115,111,117,114,
+    99,101,32,102,105,108,101,32,97,115,32,102,111,117,110,100,
+    32,98,121,32,116,104,101,32,102,105,110,100,101,114,46,41,
+    1,114,37,0,0,0,41,2,114,110,0,0,0,114,128,0,
     0,0,114,4,0,0,0,114,4,0,0,0,114,6,0,0,
-    0,114,188,0,0,0,163,3,0,0,115,2,0,0,0,0,
-    2,122,28,69,120,116,101,110,115,105,111,110,70,105,108,101,
-    76,111,97,100,101,114,46,103,101,116,95,99,111,100,101,99,
-    2,0,0,0,0,0,0,0,2,0,0,0,1,0,0,0,
-    67,0,0,0,115,4,0,0,0,100,1,0,83,41,2,122,
-    53,82,101,116,117,114,110,32,78,111,110,101,32,97,115,32,
-    101,120,116,101,110,115,105,111,110,32,109,111,100,117,108,101,
-    115,32,104,97,118,101,32,110,111,32,115,111,117,114,99,101,
-    32,99,111,100,101,46,78,114,4,0,0,0,41,2,114,110,
-    0,0,0,114,128,0,0,0,114,4,0,0,0,114,4,0,
-    0,0,114,6,0,0,0,114,203,0,0,0,167,3,0,0,
-    115,2,0,0,0,0,2,122,30,69,120,116,101,110,115,105,
-    111,110,70,105,108,101,76,111,97,100,101,114,46,103,101,116,
-    95,115,111,117,114,99,101,99,2,0,0,0,0,0,0,0,
-    2,0,0,0,1,0,0,0,67,0,0,0,115,7,0,0,
-    0,124,0,0,106,0,0,83,41,1,122,58,82,101,116,117,
-    114,110,32,116,104,101,32,112,97,116,104,32,116,111,32,116,
-    104,101,32,115,111,117,114,99,101,32,102,105,108,101,32,97,
-    115,32,102,111,117,110,100,32,98,121,32,116,104,101,32,102,
-    105,110,100,101,114,46,41,1,114,37,0,0,0,41,2,114,
-    110,0,0,0,114,128,0,0,0,114,4,0,0,0,114,4,
-    0,0,0,114,6,0,0,0,114,159,0,0,0,171,3,0,
-    0,115,2,0,0,0,0,3,122,32,69,120,116,101,110,115,
-    105,111,110,70,105,108,101,76,111,97,100,101,114,46,103,101,
-    116,95,102,105,108,101,110,97,109,101,78,41,14,114,114,0,
-    0,0,114,113,0,0,0,114,115,0,0,0,114,116,0,0,
-    0,114,186,0,0,0,114,214,0,0,0,114,216,0,0,0,
-    114,187,0,0,0,114,192,0,0,0,114,161,0,0,0,114,
-    188,0,0,0,114,203,0,0,0,114,125,0,0,0,114,159,
-    0,0,0,114,4,0,0,0,114,4,0,0,0,114,4,0,
-    0,0,114,6,0,0,0,114,225,0,0,0,124,3,0,0,
-    115,20,0,0,0,12,6,6,2,12,4,12,4,12,3,12,
-    8,12,6,12,6,12,4,12,4,114,225,0,0,0,99,0,
-    0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,64,
-    0,0,0,115,130,0,0,0,101,0,0,90,1,0,100,0,
-    0,90,2,0,100,1,0,90,3,0,100,2,0,100,3,0,
-    132,0,0,90,4,0,100,4,0,100,5,0,132,0,0,90,
-    5,0,100,6,0,100,7,0,132,0,0,90,6,0,100,8,
-    0,100,9,0,132,0,0,90,7,0,100,10,0,100,11,0,
-    132,0,0,90,8,0,100,12,0,100,13,0,132,0,0,90,
-    9,0,100,14,0,100,15,0,132,0,0,90,10,0,100,16,
-    0,100,17,0,132,0,0,90,11,0,100,18,0,100,19,0,
-    132,0,0,90,12,0,100,20,0,83,41,21,218,14,95,78,
-    97,109,101,115,112,97,99,101,80,97,116,104,97,38,1,0,
-    0,82,101,112,114,101,115,101,110,116,115,32,97,32,110,97,
-    109,101,115,112,97,99,101,32,112,97,99,107,97,103,101,39,
-    115,32,112,97,116,104,46,32,32,73,116,32,117,115,101,115,
-    32,116,104,101,32,109,111,100,117,108,101,32,110,97,109,101,
-    10,32,32,32,32,116,111,32,102,105,110,100,32,105,116,115,
-    32,112,97,114,101,110,116,32,109,111,100,117,108,101,44,32,
-    97,110,100,32,102,114,111,109,32,116,104,101,114,101,32,105,
-    116,32,108,111,111,107,115,32,117,112,32,116,104,101,32,112,
-    97,114,101,110,116,39,115,10,32,32,32,32,95,95,112,97,
-    116,104,95,95,46,32,32,87,104,101,110,32,116,104,105,115,
-    32,99,104,97,110,103,101,115,44,32,116,104,101,32,109,111,
-    100,117,108,101,39,115,32,111,119,110,32,112,97,116,104,32,
-    105,115,32,114,101,99,111,109,112,117,116,101,100,44,10,32,
-    32,32,32,117,115,105,110,103,32,112,97,116,104,95,102,105,
-    110,100,101,114,46,32,32,70,111,114,32,116,111,112,45,108,
-    101,118,101,108,32,109,111,100,117,108,101,115,44,32,116,104,
-    101,32,112,97,114,101,110,116,32,109,111,100,117,108,101,39,
-    115,32,112,97,116,104,10,32,32,32,32,105,115,32,115,121,
-    115,46,112,97,116,104,46,99,4,0,0,0,0,0,0,0,
-    4,0,0,0,2,0,0,0,67,0,0,0,115,52,0,0,
-    0,124,1,0,124,0,0,95,0,0,124,2,0,124,0,0,
-    95,1,0,116,2,0,124,0,0,106,3,0,131,0,0,131,
-    1,0,124,0,0,95,4,0,124,3,0,124,0,0,95,5,
-    0,100,0,0,83,41,1,78,41,6,218,5,95,110,97,109,
-    101,218,5,95,112,97,116,104,114,95,0,0,0,218,16,95,
-    103,101,116,95,112,97,114,101,110,116,95,112,97,116,104,218,
-    17,95,108,97,115,116,95,112,97,114,101,110,116,95,112,97,
-    116,104,218,12,95,112,97,116,104,95,102,105,110,100,101,114,
-    41,4,114,110,0,0,0,114,108,0,0,0,114,37,0,0,
-    0,218,11,112,97,116,104,95,102,105,110,100,101,114,114,4,
-    0,0,0,114,4,0,0,0,114,6,0,0,0,114,186,0,
-    0,0,184,3,0,0,115,8,0,0,0,0,1,9,1,9,
-    1,21,1,122,23,95,78,97,109,101,115,112,97,99,101,80,
-    97,116,104,46,95,95,105,110,105,116,95,95,99,1,0,0,
-    0,0,0,0,0,4,0,0,0,3,0,0,0,67,0,0,
-    0,115,53,0,0,0,124,0,0,106,0,0,106,1,0,100,
-    1,0,131,1,0,92,3,0,125,1,0,125,2,0,125,3,
-    0,124,2,0,100,2,0,107,2,0,114,43,0,100,6,0,
-    83,124,1,0,100,5,0,102,2,0,83,41,7,122,62,82,
-    101,116,117,114,110,115,32,97,32,116,117,112,108,101,32,111,
-    102,32,40,112,97,114,101,110,116,45,109,111,100,117,108,101,
-    45,110,97,109,101,44,32,112,97,114,101,110,116,45,112,97,
-    116,104,45,97,116,116,114,45,110,97,109,101,41,114,60,0,
-    0,0,114,32,0,0,0,114,8,0,0,0,114,37,0,0,
-    0,90,8,95,95,112,97,116,104,95,95,41,2,114,8,0,
-    0,0,114,37,0,0,0,41,2,114,232,0,0,0,114,34,
-    0,0,0,41,4,114,110,0,0,0,114,223,0,0,0,218,
-    3,100,111,116,90,2,109,101,114,4,0,0,0,114,4,0,
-    0,0,114,6,0,0,0,218,23,95,102,105,110,100,95,112,
-    97,114,101,110,116,95,112,97,116,104,95,110,97,109,101,115,
-    190,3,0,0,115,8,0,0,0,0,2,27,1,12,2,4,
-    3,122,38,95,78,97,109,101,115,112,97,99,101,80,97,116,
-    104,46,95,102,105,110,100,95,112,97,114,101,110,116,95,112,
-    97,116,104,95,110,97,109,101,115,99,1,0,0,0,0,0,
-    0,0,3,0,0,0,3,0,0,0,67,0,0,0,115,38,
-    0,0,0,124,0,0,106,0,0,131,0,0,92,2,0,125,
-    1,0,125,2,0,116,1,0,116,2,0,106,3,0,124,1,
-    0,25,124,2,0,131,2,0,83,41,1,78,41,4,114,239,
-    0,0,0,114,119,0,0,0,114,8,0,0,0,218,7,109,
-    111,100,117,108,101,115,41,3,114,110,0,0,0,90,18,112,
-    97,114,101,110,116,95,109,111,100,117,108,101,95,110,97,109,
-    101,90,14,112,97,116,104,95,97,116,116,114,95,110,97,109,
+    0,114,160,0,0,0,195,3,0,0,115,2,0,0,0,0,
+    3,122,32,69,120,116,101,110,115,105,111,110,70,105,108,101,
+    76,111,97,100,101,114,46,103,101,116,95,102,105,108,101,110,
+    97,109,101,78,41,14,114,114,0,0,0,114,113,0,0,0,
+    114,115,0,0,0,114,116,0,0,0,114,187,0,0,0,114,
+    215,0,0,0,114,217,0,0,0,114,188,0,0,0,114,193,
+    0,0,0,114,162,0,0,0,114,189,0,0,0,114,204,0,
+    0,0,114,125,0,0,0,114,160,0,0,0,114,4,0,0,
+    0,114,4,0,0,0,114,4,0,0,0,114,6,0,0,0,
+    114,226,0,0,0,148,3,0,0,115,20,0,0,0,12,6,
+    6,2,12,4,12,4,12,3,12,8,12,6,12,6,12,4,
+    12,4,114,226,0,0,0,99,0,0,0,0,0,0,0,0,
+    0,0,0,0,2,0,0,0,64,0,0,0,115,130,0,0,
+    0,101,0,0,90,1,0,100,0,0,90,2,0,100,1,0,
+    90,3,0,100,2,0,100,3,0,132,0,0,90,4,0,100,
+    4,0,100,5,0,132,0,0,90,5,0,100,6,0,100,7,
+    0,132,0,0,90,6,0,100,8,0,100,9,0,132,0,0,
+    90,7,0,100,10,0,100,11,0,132,0,0,90,8,0,100,
+    12,0,100,13,0,132,0,0,90,9,0,100,14,0,100,15,
+    0,132,0,0,90,10,0,100,16,0,100,17,0,132,0,0,
+    90,11,0,100,18,0,100,19,0,132,0,0,90,12,0,100,
+    20,0,83,41,21,218,14,95,78,97,109,101,115,112,97,99,
+    101,80,97,116,104,97,38,1,0,0,82,101,112,114,101,115,
+    101,110,116,115,32,97,32,110,97,109,101,115,112,97,99,101,
+    32,112,97,99,107,97,103,101,39,115,32,112,97,116,104,46,
+    32,32,73,116,32,117,115,101,115,32,116,104,101,32,109,111,
+    100,117,108,101,32,110,97,109,101,10,32,32,32,32,116,111,
+    32,102,105,110,100,32,105,116,115,32,112,97,114,101,110,116,
+    32,109,111,100,117,108,101,44,32,97,110,100,32,102,114,111,
+    109,32,116,104,101,114,101,32,105,116,32,108,111,111,107,115,
+    32,117,112,32,116,104,101,32,112,97,114,101,110,116,39,115,
+    10,32,32,32,32,95,95,112,97,116,104,95,95,46,32,32,
+    87,104,101,110,32,116,104,105,115,32,99,104,97,110,103,101,
+    115,44,32,116,104,101,32,109,111,100,117,108,101,39,115,32,
+    111,119,110,32,112,97,116,104,32,105,115,32,114,101,99,111,
+    109,112,117,116,101,100,44,10,32,32,32,32,117,115,105,110,
+    103,32,112,97,116,104,95,102,105,110,100,101,114,46,32,32,
+    70,111,114,32,116,111,112,45,108,101,118,101,108,32,109,111,
+    100,117,108,101,115,44,32,116,104,101,32,112,97,114,101,110,
+    116,32,109,111,100,117,108,101,39,115,32,112,97,116,104,10,
+    32,32,32,32,105,115,32,115,121,115,46,112,97,116,104,46,
+    99,4,0,0,0,0,0,0,0,4,0,0,0,2,0,0,
+    0,67,0,0,0,115,52,0,0,0,124,1,0,124,0,0,
+    95,0,0,124,2,0,124,0,0,95,1,0,116,2,0,124,
+    0,0,106,3,0,131,0,0,131,1,0,124,0,0,95,4,
+    0,124,3,0,124,0,0,95,5,0,100,0,0,83,41,1,
+    78,41,6,218,5,95,110,97,109,101,218,5,95,112,97,116,
+    104,114,95,0,0,0,218,16,95,103,101,116,95,112,97,114,
+    101,110,116,95,112,97,116,104,218,17,95,108,97,115,116,95,
+    112,97,114,101,110,116,95,112,97,116,104,218,12,95,112,97,
+    116,104,95,102,105,110,100,101,114,41,4,114,110,0,0,0,
+    114,108,0,0,0,114,37,0,0,0,218,11,112,97,116,104,
+    95,102,105,110,100,101,114,114,4,0,0,0,114,4,0,0,
+    0,114,6,0,0,0,114,187,0,0,0,208,3,0,0,115,
+    8,0,0,0,0,1,9,1,9,1,21,1,122,23,95,78,
+    97,109,101,115,112,97,99,101,80,97,116,104,46,95,95,105,
+    110,105,116,95,95,99,1,0,0,0,0,0,0,0,4,0,
+    0,0,3,0,0,0,67,0,0,0,115,53,0,0,0,124,
+    0,0,106,0,0,106,1,0,100,1,0,131,1,0,92,3,
+    0,125,1,0,125,2,0,125,3,0,124,2,0,100,2,0,
+    107,2,0,114,43,0,100,6,0,83,124,1,0,100,5,0,
+    102,2,0,83,41,7,122,62,82,101,116,117,114,110,115,32,
+    97,32,116,117,112,108,101,32,111,102,32,40,112,97,114,101,
+    110,116,45,109,111,100,117,108,101,45,110,97,109,101,44,32,
+    112,97,114,101,110,116,45,112,97,116,104,45,97,116,116,114,
+    45,110,97,109,101,41,114,60,0,0,0,114,32,0,0,0,
+    114,8,0,0,0,114,37,0,0,0,90,8,95,95,112,97,
+    116,104,95,95,41,2,114,8,0,0,0,114,37,0,0,0,
+    41,2,114,233,0,0,0,114,34,0,0,0,41,4,114,110,
+    0,0,0,114,224,0,0,0,218,3,100,111,116,90,2,109,
     101,114,4,0,0,0,114,4,0,0,0,114,6,0,0,0,
-    114,234,0,0,0,200,3,0,0,115,4,0,0,0,0,1,
-    18,1,122,31,95,78,97,109,101,115,112,97,99,101,80,97,
-    116,104,46,95,103,101,116,95,112,97,114,101,110,116,95,112,
-    97,116,104,99,1,0,0,0,0,0,0,0,3,0,0,0,
-    3,0,0,0,67,0,0,0,115,118,0,0,0,116,0,0,
-    124,0,0,106,1,0,131,0,0,131,1,0,125,1,0,124,
-    1,0,124,0,0,106,2,0,107,3,0,114,111,0,124,0,
-    0,106,3,0,124,0,0,106,4,0,124,1,0,131,2,0,
-    125,2,0,124,2,0,100,0,0,107,9,0,114,102,0,124,
-    2,0,106,5,0,100,0,0,107,8,0,114,102,0,124,2,
-    0,106,6,0,114,102,0,124,2,0,106,6,0,124,0,0,
-    95,7,0,124,1,0,124,0,0,95,2,0,124,0,0,106,
-    7,0,83,41,1,78,41,8,114,95,0,0,0,114,234,0,
-    0,0,114,235,0,0,0,114,236,0,0,0,114,232,0,0,
-    0,114,129,0,0,0,114,158,0,0,0,114,233,0,0,0,
-    41,3,114,110,0,0,0,90,11,112,97,114,101,110,116,95,
-    112,97,116,104,114,166,0,0,0,114,4,0,0,0,114,4,
-    0,0,0,114,6,0,0,0,218,12,95,114,101,99,97,108,
-    99,117,108,97,116,101,204,3,0,0,115,16,0,0,0,0,
-    2,18,1,15,1,21,3,27,1,9,1,12,1,9,1,122,
-    27,95,78,97,109,101,115,112,97,99,101,80,97,116,104,46,
-    95,114,101,99,97,108,99,117,108,97,116,101,99,1,0,0,
-    0,0,0,0,0,1,0,0,0,2,0,0,0,67,0,0,
-    0,115,16,0,0,0,116,0,0,124,0,0,106,1,0,131,
-    0,0,131,1,0,83,41,1,78,41,2,218,4,105,116,101,
-    114,114,241,0,0,0,41,1,114,110,0,0,0,114,4,0,
-    0,0,114,4,0,0,0,114,6,0,0,0,218,8,95,95,
-    105,116,101,114,95,95,217,3,0,0,115,2,0,0,0,0,
-    1,122,23,95,78,97,109,101,115,112,97,99,101,80,97,116,
-    104,46,95,95,105,116,101,114,95,95,99,1,0,0,0,0,
-    0,0,0,1,0,0,0,2,0,0,0,67,0,0,0,115,
-    16,0,0,0,116,0,0,124,0,0,106,1,0,131,0,0,
-    131,1,0,83,41,1,78,41,2,114,33,0,0,0,114,241,
-    0,0,0,41,1,114,110,0,0,0,114,4,0,0,0,114,
-    4,0,0,0,114,6,0,0,0,218,7,95,95,108,101,110,
-    95,95,220,3,0,0,115,2,0,0,0,0,1,122,22,95,
-    78,97,109,101,115,112,97,99,101,80,97,116,104,46,95,95,
-    108,101,110,95,95,99,1,0,0,0,0,0,0,0,1,0,
-    0,0,2,0,0,0,67,0,0,0,115,16,0,0,0,100,
-    1,0,106,0,0,124,0,0,106,1,0,131,1,0,83,41,
-    2,78,122,20,95,78,97,109,101,115,112,97,99,101,80,97,
-    116,104,40,123,33,114,125,41,41,2,114,49,0,0,0,114,
-    233,0,0,0,41,1,114,110,0,0,0,114,4,0,0,0,
-    114,4,0,0,0,114,6,0,0,0,218,8,95,95,114,101,
-    112,114,95,95,223,3,0,0,115,2,0,0,0,0,1,122,
-    23,95,78,97,109,101,115,112,97,99,101,80,97,116,104,46,
-    95,95,114,101,112,114,95,95,99,2,0,0,0,0,0,0,
-    0,2,0,0,0,2,0,0,0,67,0,0,0,115,16,0,
-    0,0,124,1,0,124,0,0,106,0,0,131,0,0,107,6,
-    0,83,41,1,78,41,1,114,241,0,0,0,41,2,114,110,
-    0,0,0,218,4,105,116,101,109,114,4,0,0,0,114,4,
-    0,0,0,114,6,0,0,0,218,12,95,95,99,111,110,116,
-    97,105,110,115,95,95,226,3,0,0,115,2,0,0,0,0,
-    1,122,27,95,78,97,109,101,115,112,97,99,101,80,97,116,
-    104,46,95,95,99,111,110,116,97,105,110,115,95,95,99,2,
-    0,0,0,0,0,0,0,2,0,0,0,2,0,0,0,67,
-    0,0,0,115,20,0,0,0,124,0,0,106,0,0,106,1,
-    0,124,1,0,131,1,0,1,100,0,0,83,41,1,78,41,
-    2,114,233,0,0,0,114,165,0,0,0,41,2,114,110,0,
-    0,0,114,246,0,0,0,114,4,0,0,0,114,4,0,0,
-    0,114,6,0,0,0,114,165,0,0,0,229,3,0,0,115,
-    2,0,0,0,0,1,122,21,95,78,97,109,101,115,112,97,
-    99,101,80,97,116,104,46,97,112,112,101,110,100,78,41,13,
-    114,114,0,0,0,114,113,0,0,0,114,115,0,0,0,114,
-    116,0,0,0,114,186,0,0,0,114,239,0,0,0,114,234,
-    0,0,0,114,241,0,0,0,114,243,0,0,0,114,244,0,
-    0,0,114,245,0,0,0,114,247,0,0,0,114,165,0,0,
-    0,114,4,0,0,0,114,4,0,0,0,114,4,0,0,0,
-    114,6,0,0,0,114,231,0,0,0,177,3,0,0,115,20,
-    0,0,0,12,5,6,2,12,6,12,10,12,4,12,13,12,
-    3,12,3,12,3,12,3,114,231,0,0,0,99,0,0,0,
-    0,0,0,0,0,0,0,0,0,3,0,0,0,64,0,0,
-    0,115,118,0,0,0,101,0,0,90,1,0,100,0,0,90,
-    2,0,100,1,0,100,2,0,132,0,0,90,3,0,101,4,
-    0,100,3,0,100,4,0,132,0,0,131,1,0,90,5,0,
-    100,5,0,100,6,0,132,0,0,90,6,0,100,7,0,100,
-    8,0,132,0,0,90,7,0,100,9,0,100,10,0,132,0,
-    0,90,8,0,100,11,0,100,12,0,132,0,0,90,9,0,
-    100,13,0,100,14,0,132,0,0,90,10,0,100,15,0,100,
-    16,0,132,0,0,90,11,0,100,17,0,83,41,18,218,16,
-    95,78,97,109,101,115,112,97,99,101,76,111,97,100,101,114,
-    99,4,0,0,0,0,0,0,0,4,0,0,0,4,0,0,
-    0,67,0,0,0,115,25,0,0,0,116,0,0,124,1,0,
-    124,2,0,124,3,0,131,3,0,124,0,0,95,1,0,100,
-    0,0,83,41,1,78,41,2,114,231,0,0,0,114,233,0,
-    0,0,41,4,114,110,0,0,0,114,108,0,0,0,114,37,
-    0,0,0,114,237,0,0,0,114,4,0,0,0,114,4,0,
-    0,0,114,6,0,0,0,114,186,0,0,0,235,3,0,0,
-    115,2,0,0,0,0,1,122,25,95,78,97,109,101,115,112,
-    97,99,101,76,111,97,100,101,114,46,95,95,105,110,105,116,
-    95,95,99,2,0,0,0,0,0,0,0,2,0,0,0,2,
-    0,0,0,67,0,0,0,115,16,0,0,0,100,1,0,106,
-    0,0,124,1,0,106,1,0,131,1,0,83,41,2,122,115,
-    82,101,116,117,114,110,32,114,101,112,114,32,102,111,114,32,
-    116,104,101,32,109,111,100,117,108,101,46,10,10,32,32,32,
-    32,32,32,32,32,84,104,101,32,109,101,116,104,111,100,32,
-    105,115,32,100,101,112,114,101,99,97,116,101,100,46,32,32,
-    84,104,101,32,105,109,112,111,114,116,32,109,97,99,104,105,
-    110,101,114,121,32,100,111,101,115,32,116,104,101,32,106,111,
-    98,32,105,116,115,101,108,102,46,10,10,32,32,32,32,32,
-    32,32,32,122,25,60,109,111,100,117,108,101,32,123,33,114,
-    125,32,40,110,97,109,101,115,112,97,99,101,41,62,41,2,
-    114,49,0,0,0,114,114,0,0,0,41,2,114,172,0,0,
-    0,114,191,0,0,0,114,4,0,0,0,114,4,0,0,0,
-    114,6,0,0,0,218,11,109,111,100,117,108,101,95,114,101,
-    112,114,238,3,0,0,115,2,0,0,0,0,7,122,28,95,
-    78,97,109,101,115,112,97,99,101,76,111,97,100,101,114,46,
-    109,111,100,117,108,101,95,114,101,112,114,99,2,0,0,0,
-    0,0,0,0,2,0,0,0,1,0,0,0,67,0,0,0,
-    115,4,0,0,0,100,1,0,83,41,2,78,84,114,4,0,
-    0,0,41,2,114,110,0,0,0,114,128,0,0,0,114,4,
-    0,0,0,114,4,0,0,0,114,6,0,0,0,114,161,0,
-    0,0,247,3,0,0,115,2,0,0,0,0,1,122,27,95,
-    78,97,109,101,115,112,97,99,101,76,111,97,100,101,114,46,
-    105,115,95,112,97,99,107,97,103,101,99,2,0,0,0,0,
-    0,0,0,2,0,0,0,1,0,0,0,67,0,0,0,115,
-    4,0,0,0,100,1,0,83,41,2,78,114,32,0,0,0,
-    114,4,0,0,0,41,2,114,110,0,0,0,114,128,0,0,
+    218,23,95,102,105,110,100,95,112,97,114,101,110,116,95,112,
+    97,116,104,95,110,97,109,101,115,214,3,0,0,115,8,0,
+    0,0,0,2,27,1,12,2,4,3,122,38,95,78,97,109,
+    101,115,112,97,99,101,80,97,116,104,46,95,102,105,110,100,
+    95,112,97,114,101,110,116,95,112,97,116,104,95,110,97,109,
+    101,115,99,1,0,0,0,0,0,0,0,3,0,0,0,3,
+    0,0,0,67,0,0,0,115,38,0,0,0,124,0,0,106,
+    0,0,131,0,0,92,2,0,125,1,0,125,2,0,116,1,
+    0,116,2,0,106,3,0,124,1,0,25,124,2,0,131,2,
+    0,83,41,1,78,41,4,114,240,0,0,0,114,119,0,0,
+    0,114,8,0,0,0,218,7,109,111,100,117,108,101,115,41,
+    3,114,110,0,0,0,90,18,112,97,114,101,110,116,95,109,
+    111,100,117,108,101,95,110,97,109,101,90,14,112,97,116,104,
+    95,97,116,116,114,95,110,97,109,101,114,4,0,0,0,114,
+    4,0,0,0,114,6,0,0,0,114,235,0,0,0,224,3,
+    0,0,115,4,0,0,0,0,1,18,1,122,31,95,78,97,
+    109,101,115,112,97,99,101,80,97,116,104,46,95,103,101,116,
+    95,112,97,114,101,110,116,95,112,97,116,104,99,1,0,0,
+    0,0,0,0,0,3,0,0,0,3,0,0,0,67,0,0,
+    0,115,118,0,0,0,116,0,0,124,0,0,106,1,0,131,
+    0,0,131,1,0,125,1,0,124,1,0,124,0,0,106,2,
+    0,107,3,0,114,111,0,124,0,0,106,3,0,124,0,0,
+    106,4,0,124,1,0,131,2,0,125,2,0,124,2,0,100,
+    0,0,107,9,0,114,102,0,124,2,0,106,5,0,100,0,
+    0,107,8,0,114,102,0,124,2,0,106,6,0,114,102,0,
+    124,2,0,106,6,0,124,0,0,95,7,0,124,1,0,124,
+    0,0,95,2,0,124,0,0,106,7,0,83,41,1,78,41,
+    8,114,95,0,0,0,114,235,0,0,0,114,236,0,0,0,
+    114,237,0,0,0,114,233,0,0,0,114,129,0,0,0,114,
+    159,0,0,0,114,234,0,0,0,41,3,114,110,0,0,0,
+    90,11,112,97,114,101,110,116,95,112,97,116,104,114,167,0,
+    0,0,114,4,0,0,0,114,4,0,0,0,114,6,0,0,
+    0,218,12,95,114,101,99,97,108,99,117,108,97,116,101,228,
+    3,0,0,115,16,0,0,0,0,2,18,1,15,1,21,3,
+    27,1,9,1,12,1,9,1,122,27,95,78,97,109,101,115,
+    112,97,99,101,80,97,116,104,46,95,114,101,99,97,108,99,
+    117,108,97,116,101,99,1,0,0,0,0,0,0,0,1,0,
+    0,0,2,0,0,0,67,0,0,0,115,16,0,0,0,116,
+    0,0,124,0,0,106,1,0,131,0,0,131,1,0,83,41,
+    1,78,41,2,218,4,105,116,101,114,114,242,0,0,0,41,
+    1,114,110,0,0,0,114,4,0,0,0,114,4,0,0,0,
+    114,6,0,0,0,218,8,95,95,105,116,101,114,95,95,241,
+    3,0,0,115,2,0,0,0,0,1,122,23,95,78,97,109,
+    101,115,112,97,99,101,80,97,116,104,46,95,95,105,116,101,
+    114,95,95,99,1,0,0,0,0,0,0,0,1,0,0,0,
+    2,0,0,0,67,0,0,0,115,16,0,0,0,116,0,0,
+    124,0,0,106,1,0,131,0,0,131,1,0,83,41,1,78,
+    41,2,114,33,0,0,0,114,242,0,0,0,41,1,114,110,
+    0,0,0,114,4,0,0,0,114,4,0,0,0,114,6,0,
+    0,0,218,7,95,95,108,101,110,95,95,244,3,0,0,115,
+    2,0,0,0,0,1,122,22,95,78,97,109,101,115,112,97,
+    99,101,80,97,116,104,46,95,95,108,101,110,95,95,99,1,
+    0,0,0,0,0,0,0,1,0,0,0,2,0,0,0,67,
+    0,0,0,115,16,0,0,0,100,1,0,106,0,0,124,0,
+    0,106,1,0,131,1,0,83,41,2,78,122,20,95,78,97,
+    109,101,115,112,97,99,101,80,97,116,104,40,123,33,114,125,
+    41,41,2,114,49,0,0,0,114,234,0,0,0,41,1,114,
+    110,0,0,0,114,4,0,0,0,114,4,0,0,0,114,6,
+    0,0,0,218,8,95,95,114,101,112,114,95,95,247,3,0,
+    0,115,2,0,0,0,0,1,122,23,95,78,97,109,101,115,
+    112,97,99,101,80,97,116,104,46,95,95,114,101,112,114,95,
+    95,99,2,0,0,0,0,0,0,0,2,0,0,0,2,0,
+    0,0,67,0,0,0,115,16,0,0,0,124,1,0,124,0,
+    0,106,0,0,131,0,0,107,6,0,83,41,1,78,41,1,
+    114,242,0,0,0,41,2,114,110,0,0,0,218,4,105,116,
+    101,109,114,4,0,0,0,114,4,0,0,0,114,6,0,0,
+    0,218,12,95,95,99,111,110,116,97,105,110,115,95,95,250,
+    3,0,0,115,2,0,0,0,0,1,122,27,95,78,97,109,
+    101,115,112,97,99,101,80,97,116,104,46,95,95,99,111,110,
+    116,97,105,110,115,95,95,99,2,0,0,0,0,0,0,0,
+    2,0,0,0,2,0,0,0,67,0,0,0,115,20,0,0,
+    0,124,0,0,106,0,0,106,1,0,124,1,0,131,1,0,
+    1,100,0,0,83,41,1,78,41,2,114,234,0,0,0,114,
+    166,0,0,0,41,2,114,110,0,0,0,114,247,0,0,0,
+    114,4,0,0,0,114,4,0,0,0,114,6,0,0,0,114,
+    166,0,0,0,253,3,0,0,115,2,0,0,0,0,1,122,
+    21,95,78,97,109,101,115,112,97,99,101,80,97,116,104,46,
+    97,112,112,101,110,100,78,41,13,114,114,0,0,0,114,113,
+    0,0,0,114,115,0,0,0,114,116,0,0,0,114,187,0,
+    0,0,114,240,0,0,0,114,235,0,0,0,114,242,0,0,
+    0,114,244,0,0,0,114,245,0,0,0,114,246,0,0,0,
+    114,248,0,0,0,114,166,0,0,0,114,4,0,0,0,114,
+    4,0,0,0,114,4,0,0,0,114,6,0,0,0,114,232,
+    0,0,0,201,3,0,0,115,20,0,0,0,12,5,6,2,
+    12,6,12,10,12,4,12,13,12,3,12,3,12,3,12,3,
+    114,232,0,0,0,99,0,0,0,0,0,0,0,0,0,0,
+    0,0,3,0,0,0,64,0,0,0,115,118,0,0,0,101,
+    0,0,90,1,0,100,0,0,90,2,0,100,1,0,100,2,
+    0,132,0,0,90,3,0,101,4,0,100,3,0,100,4,0,
+    132,0,0,131,1,0,90,5,0,100,5,0,100,6,0,132,
+    0,0,90,6,0,100,7,0,100,8,0,132,0,0,90,7,
+    0,100,9,0,100,10,0,132,0,0,90,8,0,100,11,0,
+    100,12,0,132,0,0,90,9,0,100,13,0,100,14,0,132,
+    0,0,90,10,0,100,15,0,100,16,0,132,0,0,90,11,
+    0,100,17,0,83,41,18,218,16,95,78,97,109,101,115,112,
+    97,99,101,76,111,97,100,101,114,99,4,0,0,0,0,0,
+    0,0,4,0,0,0,4,0,0,0,67,0,0,0,115,25,
+    0,0,0,116,0,0,124,1,0,124,2,0,124,3,0,131,
+    3,0,124,0,0,95,1,0,100,0,0,83,41,1,78,41,
+    2,114,232,0,0,0,114,234,0,0,0,41,4,114,110,0,
+    0,0,114,108,0,0,0,114,37,0,0,0,114,238,0,0,
     0,114,4,0,0,0,114,4,0,0,0,114,6,0,0,0,
-    114,203,0,0,0,250,3,0,0,115,2,0,0,0,0,1,
-    122,27,95,78,97,109,101,115,112,97,99,101,76,111,97,100,
-    101,114,46,103,101,116,95,115,111,117,114,99,101,99,2,0,
-    0,0,0,0,0,0,2,0,0,0,6,0,0,0,67,0,
-    0,0,115,22,0,0,0,116,0,0,100,1,0,100,2,0,
-    100,3,0,100,4,0,100,5,0,131,3,1,83,41,6,78,
-    114,32,0,0,0,122,8,60,115,116,114,105,110,103,62,114,
-    190,0,0,0,114,205,0,0,0,84,41,1,114,206,0,0,
-    0,41,2,114,110,0,0,0,114,128,0,0,0,114,4,0,
-    0,0,114,4,0,0,0,114,6,0,0,0,114,188,0,0,
-    0,253,3,0,0,115,2,0,0,0,0,1,122,25,95,78,
-    97,109,101,115,112,97,99,101,76,111,97,100,101,114,46,103,
-    101,116,95,99,111,100,101,99,2,0,0,0,0,0,0,0,
-    2,0,0,0,1,0,0,0,67,0,0,0,115,4,0,0,
-    0,100,1,0,83,41,2,122,42,85,115,101,32,100,101,102,
-    97,117,108,116,32,115,101,109,97,110,116,105,99,115,32,102,
-    111,114,32,109,111,100,117,108,101,32,99,114,101,97,116,105,
-    111,110,46,78,114,4,0,0,0,41,2,114,110,0,0,0,
-    114,166,0,0,0,114,4,0,0,0,114,4,0,0,0,114,
-    6,0,0,0,114,187,0,0,0,0,4,0,0,115,0,0,
-    0,0,122,30,95,78,97,109,101,115,112,97,99,101,76,111,
-    97,100,101,114,46,99,114,101,97,116,101,95,109,111,100,117,
-    108,101,99,2,0,0,0,0,0,0,0,2,0,0,0,1,
-    0,0,0,67,0,0,0,115,4,0,0,0,100,0,0,83,
-    41,1,78,114,4,0,0,0,41,2,114,110,0,0,0,114,
-    191,0,0,0,114,4,0,0,0,114,4,0,0,0,114,6,
-    0,0,0,114,192,0,0,0,3,4,0,0,115,2,0,0,
-    0,0,1,122,28,95,78,97,109,101,115,112,97,99,101,76,
-    111,97,100,101,114,46,101,120,101,99,95,109,111,100,117,108,
-    101,99,2,0,0,0,0,0,0,0,2,0,0,0,3,0,
-    0,0,67,0,0,0,115,32,0,0,0,116,0,0,100,1,
-    0,124,0,0,106,1,0,131,2,0,1,116,2,0,106,3,
-    0,124,0,0,124,1,0,131,2,0,83,41,2,122,98,76,
-    111,97,100,32,97,32,110,97,109,101,115,112,97,99,101,32,
-    109,111,100,117,108,101,46,10,10,32,32,32,32,32,32,32,
-    32,84,104,105,115,32,109,101,116,104,111,100,32,105,115,32,
-    100,101,112,114,101,99,97,116,101,100,46,32,32,85,115,101,
-    32,101,120,101,99,95,109,111,100,117,108,101,40,41,32,105,
-    110,115,116,101,97,100,46,10,10,32,32,32,32,32,32,32,
-    32,122,38,110,97,109,101,115,112,97,99,101,32,109,111,100,
-    117,108,101,32,108,111,97,100,101,100,32,119,105,116,104,32,
-    112,97,116,104,32,123,33,114,125,41,4,114,107,0,0,0,
-    114,233,0,0,0,114,123,0,0,0,114,193,0,0,0,41,
-    2,114,110,0,0,0,114,128,0,0,0,114,4,0,0,0,
-    114,4,0,0,0,114,6,0,0,0,114,194,0,0,0,6,
-    4,0,0,115,4,0,0,0,0,7,16,1,122,28,95,78,
-    97,109,101,115,112,97,99,101,76,111,97,100,101,114,46,108,
-    111,97,100,95,109,111,100,117,108,101,78,41,12,114,114,0,
-    0,0,114,113,0,0,0,114,115,0,0,0,114,186,0,0,
-    0,114,184,0,0,0,114,249,0,0,0,114,161,0,0,0,
-    114,203,0,0,0,114,188,0,0,0,114,187,0,0,0,114,
-    192,0,0,0,114,194,0,0,0,114,4,0,0,0,114,4,
-    0,0,0,114,4,0,0,0,114,6,0,0,0,114,248,0,
-    0,0,234,3,0,0,115,16,0,0,0,12,1,12,3,18,
-    9,12,3,12,3,12,3,12,3,12,3,114,248,0,0,0,
-    99,0,0,0,0,0,0,0,0,0,0,0,0,5,0,0,
-    0,64,0,0,0,115,160,0,0,0,101,0,0,90,1,0,
-    100,0,0,90,2,0,100,1,0,90,3,0,101,4,0,100,
-    2,0,100,3,0,132,0,0,131,1,0,90,5,0,101,4,
-    0,100,4,0,100,5,0,132,0,0,131,1,0,90,6,0,
-    101,4,0,100,6,0,100,7,0,132,0,0,131,1,0,90,
-    7,0,101,4,0,100,8,0,100,9,0,132,0,0,131,1,
-    0,90,8,0,101,4,0,100,10,0,100,11,0,100,12,0,
-    132,1,0,131,1,0,90,9,0,101,4,0,100,10,0,100,
-    10,0,100,13,0,100,14,0,132,2,0,131,1,0,90,10,
-    0,101,4,0,100,10,0,100,15,0,100,16,0,132,1,0,
-    131,1,0,90,11,0,100,10,0,83,41,17,218,10,80,97,
-    116,104,70,105,110,100,101,114,122,62,77,101,116,97,32,112,
-    97,116,104,32,102,105,110,100,101,114,32,102,111,114,32,115,
-    121,115,46,112,97,116,104,32,97,110,100,32,112,97,99,107,
-    97,103,101,32,95,95,112,97,116,104,95,95,32,97,116,116,
-    114,105,98,117,116,101,115,46,99,1,0,0,0,0,0,0,
-    0,2,0,0,0,4,0,0,0,67,0,0,0,115,55,0,
-    0,0,120,48,0,116,0,0,106,1,0,106,2,0,131,0,
-    0,68,93,31,0,125,1,0,116,3,0,124,1,0,100,1,
-    0,131,2,0,114,16,0,124,1,0,106,4,0,131,0,0,
-    1,113,16,0,87,100,2,0,83,41,3,122,125,67,97,108,
-    108,32,116,104,101,32,105,110,118,97,108,105,100,97,116,101,
-    95,99,97,99,104,101,115,40,41,32,109,101,116,104,111,100,
-    32,111,110,32,97,108,108,32,112,97,116,104,32,101,110,116,
-    114,121,32,102,105,110,100,101,114,115,10,32,32,32,32,32,
-    32,32,32,115,116,111,114,101,100,32,105,110,32,115,121,115,
-    46,112,97,116,104,95,105,109,112,111,114,116,101,114,95,99,
-    97,99,104,101,115,32,40,119,104,101,114,101,32,105,109,112,
-    108,101,109,101,110,116,101,100,41,46,218,17,105,110,118,97,
-    108,105,100,97,116,101,95,99,97,99,104,101,115,78,41,5,
-    114,8,0,0,0,218,19,112,97,116,104,95,105,109,112,111,
-    114,116,101,114,95,99,97,99,104,101,218,6,118,97,108,117,
-    101,115,114,117,0,0,0,114,251,0,0,0,41,2,114,172,
-    0,0,0,218,6,102,105,110,100,101,114,114,4,0,0,0,
-    114,4,0,0,0,114,6,0,0,0,114,251,0,0,0,23,
-    4,0,0,115,6,0,0,0,0,4,22,1,15,1,122,28,
-    80,97,116,104,70,105,110,100,101,114,46,105,110,118,97,108,
-    105,100,97,116,101,95,99,97,99,104,101,115,99,2,0,0,
-    0,0,0,0,0,3,0,0,0,12,0,0,0,67,0,0,
-    0,115,107,0,0,0,116,0,0,106,1,0,100,1,0,107,
-    9,0,114,41,0,116,0,0,106,1,0,12,114,41,0,116,
-    2,0,106,3,0,100,2,0,116,4,0,131,2,0,1,120,
-    59,0,116,0,0,106,1,0,68,93,44,0,125,2,0,121,
-    14,0,124,2,0,124,1,0,131,1,0,83,87,113,51,0,
-    4,116,5,0,107,10,0,114,94,0,1,1,1,119,51,0,
-    89,113,51,0,88,113,51,0,87,100,1,0,83,100,1,0,
-    83,41,3,122,113,83,101,97,114,99,104,32,115,101,113,117,
-    101,110,99,101,32,111,102,32,104,111,111,107,115,32,102,111,
-    114,32,97,32,102,105,110,100,101,114,32,102,111,114,32,39,
-    112,97,116,104,39,46,10,10,32,32,32,32,32,32,32,32,
-    73,102,32,39,104,111,111,107,115,39,32,105,115,32,102,97,
-    108,115,101,32,116,104,101,110,32,117,115,101,32,115,121,115,
-    46,112,97,116,104,95,104,111,111,107,115,46,10,10,32,32,
-    32,32,32,32,32,32,78,122,23,115,121,115,46,112,97,116,
-    104,95,104,111,111,107,115,32,105,115,32,101,109,112,116,121,
-    41,6,114,8,0,0,0,218,10,112,97,116,104,95,104,111,
-    111,107,115,114,62,0,0,0,114,63,0,0,0,114,127,0,
-    0,0,114,109,0,0,0,41,3,114,172,0,0,0,114,37,
-    0,0,0,90,4,104,111,111,107,114,4,0,0,0,114,4,
-    0,0,0,114,6,0,0,0,218,11,95,112,97,116,104,95,
-    104,111,111,107,115,31,4,0,0,115,16,0,0,0,0,7,
-    25,1,16,1,16,1,3,1,14,1,13,1,12,2,122,22,
-    80,97,116,104,70,105,110,100,101,114,46,95,112,97,116,104,
-    95,104,111,111,107,115,99,2,0,0,0,0,0,0,0,3,
-    0,0,0,19,0,0,0,67,0,0,0,115,123,0,0,0,
-    124,1,0,100,1,0,107,2,0,114,53,0,121,16,0,116,
-    0,0,106,1,0,131,0,0,125,1,0,87,110,22,0,4,
-    116,2,0,107,10,0,114,52,0,1,1,1,100,2,0,83,
-    89,110,1,0,88,121,17,0,116,3,0,106,4,0,124,1,
-    0,25,125,2,0,87,110,46,0,4,116,5,0,107,10,0,
-    114,118,0,1,1,1,124,0,0,106,6,0,124,1,0,131,
-    1,0,125,2,0,124,2,0,116,3,0,106,4,0,124,1,
-    0,60,89,110,1,0,88,124,2,0,83,41,3,122,210,71,
-    101,116,32,116,104,101,32,102,105,110,100,101,114,32,102,111,
-    114,32,116,104,101,32,112,97,116,104,32,101,110,116,114,121,
-    32,102,114,111,109,32,115,121,115,46,112,97,116,104,95,105,
-    109,112,111,114,116,101,114,95,99,97,99,104,101,46,10,10,
-    32,32,32,32,32,32,32,32,73,102,32,116,104,101,32,112,
-    97,116,104,32,101,110,116,114,121,32,105,115,32,110,111,116,
-    32,105,110,32,116,104,101,32,99,97,99,104,101,44,32,102,
-    105,110,100,32,116,104,101,32,97,112,112,114,111,112,114,105,
-    97,116,101,32,102,105,110,100,101,114,10,32,32,32,32,32,
-    32,32,32,97,110,100,32,99,97,99,104,101,32,105,116,46,
-    32,73,102,32,110,111,32,102,105,110,100,101,114,32,105,115,
-    32,97,118,97,105,108,97,98,108,101,44,32,115,116,111,114,
-    101,32,78,111,110,101,46,10,10,32,32,32,32,32,32,32,
-    32,114,32,0,0,0,78,41,7,114,3,0,0,0,114,47,
-    0,0,0,218,17,70,105,108,101,78,111,116,70,111,117,110,
-    100,69,114,114,111,114,114,8,0,0,0,114,252,0,0,0,
-    114,139,0,0,0,114,0,1,0,0,41,3,114,172,0,0,
-    0,114,37,0,0,0,114,254,0,0,0,114,4,0,0,0,
-    114,4,0,0,0,114,6,0,0,0,218,20,95,112,97,116,
-    104,95,105,109,112,111,114,116,101,114,95,99,97,99,104,101,
-    48,4,0,0,115,22,0,0,0,0,8,12,1,3,1,16,
-    1,13,3,9,1,3,1,17,1,13,1,15,1,18,1,122,
-    31,80,97,116,104,70,105,110,100,101,114,46,95,112,97,116,
-    104,95,105,109,112,111,114,116,101,114,95,99,97,99,104,101,
-    99,3,0,0,0,0,0,0,0,6,0,0,0,3,0,0,
-    0,67,0,0,0,115,119,0,0,0,116,0,0,124,2,0,
-    100,1,0,131,2,0,114,39,0,124,2,0,106,1,0,124,
-    1,0,131,1,0,92,2,0,125,3,0,125,4,0,110,21,
-    0,124,2,0,106,2,0,124,1,0,131,1,0,125,3,0,
-    103,0,0,125,4,0,124,3,0,100,0,0,107,9,0,114,
-    88,0,116,3,0,106,4,0,124,1,0,124,3,0,131,2,
-    0,83,116,3,0,106,5,0,124,1,0,100,0,0,131,2,
-    0,125,5,0,124,4,0,124,5,0,95,6,0,124,5,0,
-    83,41,2,78,114,126,0,0,0,41,7,114,117,0,0,0,
-    114,126,0,0,0,114,183,0,0,0,114,123,0,0,0,114,
-    180,0,0,0,114,162,0,0,0,114,158,0,0,0,41,6,
-    114,172,0,0,0,114,128,0,0,0,114,254,0,0,0,114,
-    129,0,0,0,114,130,0,0,0,114,166,0,0,0,114,4,
-    0,0,0,114,4,0,0,0,114,6,0,0,0,218,16,95,
-    108,101,103,97,99,121,95,103,101,116,95,115,112,101,99,70,
-    4,0,0,115,18,0,0,0,0,4,15,1,24,2,15,1,
-    6,1,12,1,16,1,18,1,9,1,122,27,80,97,116,104,
-    70,105,110,100,101,114,46,95,108,101,103,97,99,121,95,103,
-    101,116,95,115,112,101,99,78,99,4,0,0,0,0,0,0,
-    0,9,0,0,0,5,0,0,0,67,0,0,0,115,243,0,
-    0,0,103,0,0,125,4,0,120,230,0,124,2,0,68,93,
-    191,0,125,5,0,116,0,0,124,5,0,116,1,0,116,2,
-    0,102,2,0,131,2,0,115,43,0,113,13,0,124,0,0,
-    106,3,0,124,5,0,131,1,0,125,6,0,124,6,0,100,
-    1,0,107,9,0,114,13,0,116,4,0,124,6,0,100,2,
-    0,131,2,0,114,106,0,124,6,0,106,5,0,124,1,0,
-    124,3,0,131,2,0,125,7,0,110,18,0,124,0,0,106,
-    6,0,124,1,0,124,6,0,131,2,0,125,7,0,124,7,
-    0,100,1,0,107,8,0,114,139,0,113,13,0,124,7,0,
-    106,7,0,100,1,0,107,9,0,114,158,0,124,7,0,83,
-    124,7,0,106,8,0,125,8,0,124,8,0,100,1,0,107,
-    8,0,114,191,0,116,9,0,100,3,0,131,1,0,130,1,
-    0,124,4,0,106,10,0,124,8,0,131,1,0,1,113,13,
-    0,87,116,11,0,106,12,0,124,1,0,100,1,0,131,2,
-    0,125,7,0,124,4,0,124,7,0,95,8,0,124,7,0,
-    83,100,1,0,83,41,4,122,63,70,105,110,100,32,116,104,
-    101,32,108,111,97,100,101,114,32,111,114,32,110,97,109,101,
-    115,112,97,99,101,95,112,97,116,104,32,102,111,114,32,116,
-    104,105,115,32,109,111,100,117,108,101,47,112,97,99,107,97,
-    103,101,32,110,97,109,101,46,78,114,182,0,0,0,122,19,
-    115,112,101,99,32,109,105,115,115,105,110,103,32,108,111,97,
-    100,101,114,41,13,114,145,0,0,0,114,71,0,0,0,218,
-    5,98,121,116,101,115,114,2,1,0,0,114,117,0,0,0,
-    114,182,0,0,0,114,3,1,0,0,114,129,0,0,0,114,
-    158,0,0,0,114,109,0,0,0,114,151,0,0,0,114,123,
-    0,0,0,114,162,0,0,0,41,9,114,172,0,0,0,114,
-    128,0,0,0,114,37,0,0,0,114,181,0,0,0,218,14,
-    110,97,109,101,115,112,97,99,101,95,112,97,116,104,90,5,
-    101,110,116,114,121,114,254,0,0,0,114,166,0,0,0,114,
-    130,0,0,0,114,4,0,0,0,114,4,0,0,0,114,6,
-    0,0,0,218,9,95,103,101,116,95,115,112,101,99,85,4,
-    0,0,115,40,0,0,0,0,5,6,1,13,1,21,1,3,
-    1,15,1,12,1,15,1,21,2,18,1,12,1,3,1,15,
-    1,4,1,9,1,12,1,12,5,17,2,18,1,9,1,122,
-    20,80,97,116,104,70,105,110,100,101,114,46,95,103,101,116,
-    95,115,112,101,99,99,4,0,0,0,0,0,0,0,6,0,
-    0,0,4,0,0,0,67,0,0,0,115,140,0,0,0,124,
-    2,0,100,1,0,107,8,0,114,21,0,116,0,0,106,1,
-    0,125,2,0,124,0,0,106,2,0,124,1,0,124,2,0,
-    124,3,0,131,3,0,125,4,0,124,4,0,100,1,0,107,
-    8,0,114,58,0,100,1,0,83,124,4,0,106,3,0,100,
-    1,0,107,8,0,114,132,0,124,4,0,106,4,0,125,5,
-    0,124,5,0,114,125,0,100,2,0,124,4,0,95,5,0,
-    116,6,0,124,1,0,124,5,0,124,0,0,106,2,0,131,
-    3,0,124,4,0,95,4,0,124,4,0,83,100,1,0,83,
-    110,4,0,124,4,0,83,100,1,0,83,41,3,122,98,102,
+    114,187,0,0,0,3,4,0,0,115,2,0,0,0,0,1,
+    122,25,95,78,97,109,101,115,112,97,99,101,76,111,97,100,
+    101,114,46,95,95,105,110,105,116,95,95,99,2,0,0,0,
+    0,0,0,0,2,0,0,0,2,0,0,0,67,0,0,0,
+    115,16,0,0,0,100,1,0,106,0,0,124,1,0,106,1,
+    0,131,1,0,83,41,2,122,115,82,101,116,117,114,110,32,
+    114,101,112,114,32,102,111,114,32,116,104,101,32,109,111,100,
+    117,108,101,46,10,10,32,32,32,32,32,32,32,32,84,104,
+    101,32,109,101,116,104,111,100,32,105,115,32,100,101,112,114,
+    101,99,97,116,101,100,46,32,32,84,104,101,32,105,109,112,
+    111,114,116,32,109,97,99,104,105,110,101,114,121,32,100,111,
+    101,115,32,116,104,101,32,106,111,98,32,105,116,115,101,108,
+    102,46,10,10,32,32,32,32,32,32,32,32,122,25,60,109,
+    111,100,117,108,101,32,123,33,114,125,32,40,110,97,109,101,
+    115,112,97,99,101,41,62,41,2,114,49,0,0,0,114,114,
+    0,0,0,41,2,114,173,0,0,0,114,192,0,0,0,114,
+    4,0,0,0,114,4,0,0,0,114,6,0,0,0,218,11,
+    109,111,100,117,108,101,95,114,101,112,114,6,4,0,0,115,
+    2,0,0,0,0,7,122,28,95,78,97,109,101,115,112,97,
+    99,101,76,111,97,100,101,114,46,109,111,100,117,108,101,95,
+    114,101,112,114,99,2,0,0,0,0,0,0,0,2,0,0,
+    0,1,0,0,0,67,0,0,0,115,4,0,0,0,100,1,
+    0,83,41,2,78,84,114,4,0,0,0,41,2,114,110,0,
+    0,0,114,128,0,0,0,114,4,0,0,0,114,4,0,0,
+    0,114,6,0,0,0,114,162,0,0,0,15,4,0,0,115,
+    2,0,0,0,0,1,122,27,95,78,97,109,101,115,112,97,
+    99,101,76,111,97,100,101,114,46,105,115,95,112,97,99,107,
+    97,103,101,99,2,0,0,0,0,0,0,0,2,0,0,0,
+    1,0,0,0,67,0,0,0,115,4,0,0,0,100,1,0,
+    83,41,2,78,114,32,0,0,0,114,4,0,0,0,41,2,
+    114,110,0,0,0,114,128,0,0,0,114,4,0,0,0,114,
+    4,0,0,0,114,6,0,0,0,114,204,0,0,0,18,4,
+    0,0,115,2,0,0,0,0,1,122,27,95,78,97,109,101,
+    115,112,97,99,101,76,111,97,100,101,114,46,103,101,116,95,
+    115,111,117,114,99,101,99,2,0,0,0,0,0,0,0,2,
+    0,0,0,6,0,0,0,67,0,0,0,115,22,0,0,0,
+    116,0,0,100,1,0,100,2,0,100,3,0,100,4,0,100,
+    5,0,131,3,1,83,41,6,78,114,32,0,0,0,122,8,
+    60,115,116,114,105,110,103,62,114,191,0,0,0,114,206,0,
+    0,0,84,41,1,114,207,0,0,0,41,2,114,110,0,0,
+    0,114,128,0,0,0,114,4,0,0,0,114,4,0,0,0,
+    114,6,0,0,0,114,189,0,0,0,21,4,0,0,115,2,
+    0,0,0,0,1,122,25,95,78,97,109,101,115,112,97,99,
+    101,76,111,97,100,101,114,46,103,101,116,95,99,111,100,101,
+    99,2,0,0,0,0,0,0,0,2,0,0,0,1,0,0,
+    0,67,0,0,0,115,4,0,0,0,100,1,0,83,41,2,
+    122,42,85,115,101,32,100,101,102,97,117,108,116,32,115,101,
+    109,97,110,116,105,99,115,32,102,111,114,32,109,111,100,117,
+    108,101,32,99,114,101,97,116,105,111,110,46,78,114,4,0,
+    0,0,41,2,114,110,0,0,0,114,167,0,0,0,114,4,
+    0,0,0,114,4,0,0,0,114,6,0,0,0,114,188,0,
+    0,0,24,4,0,0,115,0,0,0,0,122,30,95,78,97,
+    109,101,115,112,97,99,101,76,111,97,100,101,114,46,99,114,
+    101,97,116,101,95,109,111,100,117,108,101,99,2,0,0,0,
+    0,0,0,0,2,0,0,0,1,0,0,0,67,0,0,0,
+    115,4,0,0,0,100,0,0,83,41,1,78,114,4,0,0,
+    0,41,2,114,110,0,0,0,114,192,0,0,0,114,4,0,
+    0,0,114,4,0,0,0,114,6,0,0,0,114,193,0,0,
+    0,27,4,0,0,115,2,0,0,0,0,1,122,28,95,78,
+    97,109,101,115,112,97,99,101,76,111,97,100,101,114,46,101,
+    120,101,99,95,109,111,100,117,108,101,99,2,0,0,0,0,
+    0,0,0,2,0,0,0,3,0,0,0,67,0,0,0,115,
+    32,0,0,0,116,0,0,100,1,0,124,0,0,106,1,0,
+    131,2,0,1,116,2,0,106,3,0,124,0,0,124,1,0,
+    131,2,0,83,41,2,122,98,76,111,97,100,32,97,32,110,
+    97,109,101,115,112,97,99,101,32,109,111,100,117,108,101,46,
+    10,10,32,32,32,32,32,32,32,32,84,104,105,115,32,109,
+    101,116,104,111,100,32,105,115,32,100,101,112,114,101,99,97,
+    116,101,100,46,32,32,85,115,101,32,101,120,101,99,95,109,
+    111,100,117,108,101,40,41,32,105,110,115,116,101,97,100,46,
+    10,10,32,32,32,32,32,32,32,32,122,38,110,97,109,101,
+    115,112,97,99,101,32,109,111,100,117,108,101,32,108,111,97,
+    100,101,100,32,119,105,116,104,32,112,97,116,104,32,123,33,
+    114,125,41,4,114,107,0,0,0,114,234,0,0,0,114,123,
+    0,0,0,114,194,0,0,0,41,2,114,110,0,0,0,114,
+    128,0,0,0,114,4,0,0,0,114,4,0,0,0,114,6,
+    0,0,0,114,195,0,0,0,30,4,0,0,115,4,0,0,
+    0,0,7,16,1,122,28,95,78,97,109,101,115,112,97,99,
+    101,76,111,97,100,101,114,46,108,111,97,100,95,109,111,100,
+    117,108,101,78,41,12,114,114,0,0,0,114,113,0,0,0,
+    114,115,0,0,0,114,187,0,0,0,114,185,0,0,0,114,
+    250,0,0,0,114,162,0,0,0,114,204,0,0,0,114,189,
+    0,0,0,114,188,0,0,0,114,193,0,0,0,114,195,0,
+    0,0,114,4,0,0,0,114,4,0,0,0,114,4,0,0,
+    0,114,6,0,0,0,114,249,0,0,0,2,4,0,0,115,
+    16,0,0,0,12,1,12,3,18,9,12,3,12,3,12,3,
+    12,3,12,3,114,249,0,0,0,99,0,0,0,0,0,0,
+    0,0,0,0,0,0,5,0,0,0,64,0,0,0,115,160,
+    0,0,0,101,0,0,90,1,0,100,0,0,90,2,0,100,
+    1,0,90,3,0,101,4,0,100,2,0,100,3,0,132,0,
+    0,131,1,0,90,5,0,101,4,0,100,4,0,100,5,0,
+    132,0,0,131,1,0,90,6,0,101,4,0,100,6,0,100,
+    7,0,132,0,0,131,1,0,90,7,0,101,4,0,100,8,
+    0,100,9,0,132,0,0,131,1,0,90,8,0,101,4,0,
+    100,10,0,100,11,0,100,12,0,132,1,0,131,1,0,90,
+    9,0,101,4,0,100,10,0,100,10,0,100,13,0,100,14,
+    0,132,2,0,131,1,0,90,10,0,101,4,0,100,10,0,
+    100,15,0,100,16,0,132,1,0,131,1,0,90,11,0,100,
+    10,0,83,41,17,218,10,80,97,116,104,70,105,110,100,101,
+    114,122,62,77,101,116,97,32,112,97,116,104,32,102,105,110,
+    100,101,114,32,102,111,114,32,115,121,115,46,112,97,116,104,
+    32,97,110,100,32,112,97,99,107,97,103,101,32,95,95,112,
+    97,116,104,95,95,32,97,116,116,114,105,98,117,116,101,115,
+    46,99,1,0,0,0,0,0,0,0,2,0,0,0,4,0,
+    0,0,67,0,0,0,115,55,0,0,0,120,48,0,116,0,
+    0,106,1,0,106,2,0,131,0,0,68,93,31,0,125,1,
+    0,116,3,0,124,1,0,100,1,0,131,2,0,114,16,0,
+    124,1,0,106,4,0,131,0,0,1,113,16,0,87,100,2,
+    0,83,41,3,122,125,67,97,108,108,32,116,104,101,32,105,
+    110,118,97,108,105,100,97,116,101,95,99,97,99,104,101,115,
+    40,41,32,109,101,116,104,111,100,32,111,110,32,97,108,108,
+    32,112,97,116,104,32,101,110,116,114,121,32,102,105,110,100,
+    101,114,115,10,32,32,32,32,32,32,32,32,115,116,111,114,
+    101,100,32,105,110,32,115,121,115,46,112,97,116,104,95,105,
+    109,112,111,114,116,101,114,95,99,97,99,104,101,115,32,40,
+    119,104,101,114,101,32,105,109,112,108,101,109,101,110,116,101,
+    100,41,46,218,17,105,110,118,97,108,105,100,97,116,101,95,
+    99,97,99,104,101,115,78,41,5,114,8,0,0,0,218,19,
+    112,97,116,104,95,105,109,112,111,114,116,101,114,95,99,97,
+    99,104,101,218,6,118,97,108,117,101,115,114,117,0,0,0,
+    114,252,0,0,0,41,2,114,173,0,0,0,218,6,102,105,
+    110,100,101,114,114,4,0,0,0,114,4,0,0,0,114,6,
+    0,0,0,114,252,0,0,0,47,4,0,0,115,6,0,0,
+    0,0,4,22,1,15,1,122,28,80,97,116,104,70,105,110,
+    100,101,114,46,105,110,118,97,108,105,100,97,116,101,95,99,
+    97,99,104,101,115,99,2,0,0,0,0,0,0,0,3,0,
+    0,0,12,0,0,0,67,0,0,0,115,107,0,0,0,116,
+    0,0,106,1,0,100,1,0,107,9,0,114,41,0,116,0,
+    0,106,1,0,12,114,41,0,116,2,0,106,3,0,100,2,
+    0,116,4,0,131,2,0,1,120,59,0,116,0,0,106,1,
+    0,68,93,44,0,125,2,0,121,14,0,124,2,0,124,1,
+    0,131,1,0,83,87,113,51,0,4,116,5,0,107,10,0,
+    114,94,0,1,1,1,119,51,0,89,113,51,0,88,113,51,
+    0,87,100,1,0,83,100,1,0,83,41,3,122,113,83,101,
+    97,114,99,104,32,115,101,113,117,101,110,99,101,32,111,102,
+    32,104,111,111,107,115,32,102,111,114,32,97,32,102,105,110,
+    100,101,114,32,102,111,114,32,39,112,97,116,104,39,46,10,
+    10,32,32,32,32,32,32,32,32,73,102,32,39,104,111,111,
+    107,115,39,32,105,115,32,102,97,108,115,101,32,116,104,101,
+    110,32,117,115,101,32,115,121,115,46,112,97,116,104,95,104,
+    111,111,107,115,46,10,10,32,32,32,32,32,32,32,32,78,
+    122,23,115,121,115,46,112,97,116,104,95,104,111,111,107,115,
+    32,105,115,32,101,109,112,116,121,41,6,114,8,0,0,0,
+    218,10,112,97,116,104,95,104,111,111,107,115,114,62,0,0,
+    0,114,63,0,0,0,114,127,0,0,0,114,109,0,0,0,
+    41,3,114,173,0,0,0,114,37,0,0,0,90,4,104,111,
+    111,107,114,4,0,0,0,114,4,0,0,0,114,6,0,0,
+    0,218,11,95,112,97,116,104,95,104,111,111,107,115,55,4,
+    0,0,115,16,0,0,0,0,7,25,1,16,1,16,1,3,
+    1,14,1,13,1,12,2,122,22,80,97,116,104,70,105,110,
+    100,101,114,46,95,112,97,116,104,95,104,111,111,107,115,99,
+    2,0,0,0,0,0,0,0,3,0,0,0,19,0,0,0,
+    67,0,0,0,115,123,0,0,0,124,1,0,100,1,0,107,
+    2,0,114,53,0,121,16,0,116,0,0,106,1,0,131,0,
+    0,125,1,0,87,110,22,0,4,116,2,0,107,10,0,114,
+    52,0,1,1,1,100,2,0,83,89,110,1,0,88,121,17,
+    0,116,3,0,106,4,0,124,1,0,25,125,2,0,87,110,
+    46,0,4,116,5,0,107,10,0,114,118,0,1,1,1,124,
+    0,0,106,6,0,124,1,0,131,1,0,125,2,0,124,2,
+    0,116,3,0,106,4,0,124,1,0,60,89,110,1,0,88,
+    124,2,0,83,41,3,122,210,71,101,116,32,116,104,101,32,
+    102,105,110,100,101,114,32,102,111,114,32,116,104,101,32,112,
+    97,116,104,32,101,110,116,114,121,32,102,114,111,109,32,115,
+    121,115,46,112,97,116,104,95,105,109,112,111,114,116,101,114,
+    95,99,97,99,104,101,46,10,10,32,32,32,32,32,32,32,
+    32,73,102,32,116,104,101,32,112,97,116,104,32,101,110,116,
+    114,121,32,105,115,32,110,111,116,32,105,110,32,116,104,101,
+    32,99,97,99,104,101,44,32,102,105,110,100,32,116,104,101,
+    32,97,112,112,114,111,112,114,105,97,116,101,32,102,105,110,
+    100,101,114,10,32,32,32,32,32,32,32,32,97,110,100,32,
+    99,97,99,104,101,32,105,116,46,32,73,102,32,110,111,32,
+    102,105,110,100,101,114,32,105,115,32,97,118,97,105,108,97,
+    98,108,101,44,32,115,116,111,114,101,32,78,111,110,101,46,
+    10,10,32,32,32,32,32,32,32,32,114,32,0,0,0,78,
+    41,7,114,3,0,0,0,114,47,0,0,0,218,17,70,105,
+    108,101,78,111,116,70,111,117,110,100,69,114,114,111,114,114,
+    8,0,0,0,114,253,0,0,0,114,140,0,0,0,114,1,
+    1,0,0,41,3,114,173,0,0,0,114,37,0,0,0,114,
+    255,0,0,0,114,4,0,0,0,114,4,0,0,0,114,6,
+    0,0,0,218,20,95,112,97,116,104,95,105,109,112,111,114,
+    116,101,114,95,99,97,99,104,101,72,4,0,0,115,22,0,
+    0,0,0,8,12,1,3,1,16,1,13,3,9,1,3,1,
+    17,1,13,1,15,1,18,1,122,31,80,97,116,104,70,105,
+    110,100,101,114,46,95,112,97,116,104,95,105,109,112,111,114,
+    116,101,114,95,99,97,99,104,101,99,3,0,0,0,0,0,
+    0,0,6,0,0,0,3,0,0,0,67,0,0,0,115,119,
+    0,0,0,116,0,0,124,2,0,100,1,0,131,2,0,114,
+    39,0,124,2,0,106,1,0,124,1,0,131,1,0,92,2,
+    0,125,3,0,125,4,0,110,21,0,124,2,0,106,2,0,
+    124,1,0,131,1,0,125,3,0,103,0,0,125,4,0,124,
+    3,0,100,0,0,107,9,0,114,88,0,116,3,0,106,4,
+    0,124,1,0,124,3,0,131,2,0,83,116,3,0,106,5,
+    0,124,1,0,100,0,0,131,2,0,125,5,0,124,4,0,
+    124,5,0,95,6,0,124,5,0,83,41,2,78,114,126,0,
+    0,0,41,7,114,117,0,0,0,114,126,0,0,0,114,184,
+    0,0,0,114,123,0,0,0,114,181,0,0,0,114,163,0,
+    0,0,114,159,0,0,0,41,6,114,173,0,0,0,114,128,
+    0,0,0,114,255,0,0,0,114,129,0,0,0,114,130,0,
+    0,0,114,167,0,0,0,114,4,0,0,0,114,4,0,0,
+    0,114,6,0,0,0,218,16,95,108,101,103,97,99,121,95,
+    103,101,116,95,115,112,101,99,94,4,0,0,115,18,0,0,
+    0,0,4,15,1,24,2,15,1,6,1,12,1,16,1,18,
+    1,9,1,122,27,80,97,116,104,70,105,110,100,101,114,46,
+    95,108,101,103,97,99,121,95,103,101,116,95,115,112,101,99,
+    78,99,4,0,0,0,0,0,0,0,9,0,0,0,5,0,
+    0,0,67,0,0,0,115,243,0,0,0,103,0,0,125,4,
+    0,120,230,0,124,2,0,68,93,191,0,125,5,0,116,0,
+    0,124,5,0,116,1,0,116,2,0,102,2,0,131,2,0,
+    115,43,0,113,13,0,124,0,0,106,3,0,124,5,0,131,
+    1,0,125,6,0,124,6,0,100,1,0,107,9,0,114,13,
+    0,116,4,0,124,6,0,100,2,0,131,2,0,114,106,0,
+    124,6,0,106,5,0,124,1,0,124,3,0,131,2,0,125,
+    7,0,110,18,0,124,0,0,106,6,0,124,1,0,124,6,
+    0,131,2,0,125,7,0,124,7,0,100,1,0,107,8,0,
+    114,139,0,113,13,0,124,7,0,106,7,0,100,1,0,107,
+    9,0,114,158,0,124,7,0,83,124,7,0,106,8,0,125,
+    8,0,124,8,0,100,1,0,107,8,0,114,191,0,116,9,
+    0,100,3,0,131,1,0,130,1,0,124,4,0,106,10,0,
+    124,8,0,131,1,0,1,113,13,0,87,116,11,0,106,12,
+    0,124,1,0,100,1,0,131,2,0,125,7,0,124,4,0,
+    124,7,0,95,8,0,124,7,0,83,100,1,0,83,41,4,
+    122,63,70,105,110,100,32,116,104,101,32,108,111,97,100,101,
+    114,32,111,114,32,110,97,109,101,115,112,97,99,101,95,112,
+    97,116,104,32,102,111,114,32,116,104,105,115,32,109,111,100,
+    117,108,101,47,112,97,99,107,97,103,101,32,110,97,109,101,
+    46,78,114,183,0,0,0,122,19,115,112,101,99,32,109,105,
+    115,115,105,110,103,32,108,111,97,100,101,114,41,13,114,146,
+    0,0,0,114,71,0,0,0,218,5,98,121,116,101,115,114,
+    3,1,0,0,114,117,0,0,0,114,183,0,0,0,114,4,
+    1,0,0,114,129,0,0,0,114,159,0,0,0,114,109,0,
+    0,0,114,152,0,0,0,114,123,0,0,0,114,163,0,0,
+    0,41,9,114,173,0,0,0,114,128,0,0,0,114,37,0,
+    0,0,114,182,0,0,0,218,14,110,97,109,101,115,112,97,
+    99,101,95,112,97,116,104,90,5,101,110,116,114,121,114,255,
+    0,0,0,114,167,0,0,0,114,130,0,0,0,114,4,0,
+    0,0,114,4,0,0,0,114,6,0,0,0,218,9,95,103,
+    101,116,95,115,112,101,99,109,4,0,0,115,40,0,0,0,
+    0,5,6,1,13,1,21,1,3,1,15,1,12,1,15,1,
+    21,2,18,1,12,1,3,1,15,1,4,1,9,1,12,1,
+    12,5,17,2,18,1,9,1,122,20,80,97,116,104,70,105,
+    110,100,101,114,46,95,103,101,116,95,115,112,101,99,99,4,
+    0,0,0,0,0,0,0,6,0,0,0,4,0,0,0,67,
+    0,0,0,115,140,0,0,0,124,2,0,100,1,0,107,8,
+    0,114,21,0,116,0,0,106,1,0,125,2,0,124,0,0,
+    106,2,0,124,1,0,124,2,0,124,3,0,131,3,0,125,
+    4,0,124,4,0,100,1,0,107,8,0,114,58,0,100,1,
+    0,83,124,4,0,106,3,0,100,1,0,107,8,0,114,132,
+    0,124,4,0,106,4,0,125,5,0,124,5,0,114,125,0,
+    100,2,0,124,4,0,95,5,0,116,6,0,124,1,0,124,
+    5,0,124,0,0,106,2,0,131,3,0,124,4,0,95,4,
+    0,124,4,0,83,100,1,0,83,110,4,0,124,4,0,83,
+    100,1,0,83,41,3,122,98,102,105,110,100,32,116,104,101,
+    32,109,111,100,117,108,101,32,111,110,32,115,121,115,46,112,
+    97,116,104,32,111,114,32,39,112,97,116,104,39,32,98,97,
+    115,101,100,32,111,110,32,115,121,115,46,112,97,116,104,95,
+    104,111,111,107,115,32,97,110,100,10,32,32,32,32,32,32,
+    32,32,115,121,115,46,112,97,116,104,95,105,109,112,111,114,
+    116,101,114,95,99,97,99,104,101,46,78,90,9,110,97,109,
+    101,115,112,97,99,101,41,7,114,8,0,0,0,114,37,0,
+    0,0,114,7,1,0,0,114,129,0,0,0,114,159,0,0,
+    0,114,161,0,0,0,114,232,0,0,0,41,6,114,173,0,
+    0,0,114,128,0,0,0,114,37,0,0,0,114,182,0,0,
+    0,114,167,0,0,0,114,6,1,0,0,114,4,0,0,0,
+    114,4,0,0,0,114,6,0,0,0,114,183,0,0,0,141,
+    4,0,0,115,26,0,0,0,0,4,12,1,9,1,21,1,
+    12,1,4,1,15,1,9,1,6,3,9,1,24,1,4,2,
+    7,2,122,20,80,97,116,104,70,105,110,100,101,114,46,102,
+    105,110,100,95,115,112,101,99,99,3,0,0,0,0,0,0,
+    0,4,0,0,0,3,0,0,0,67,0,0,0,115,41,0,
+    0,0,124,0,0,106,0,0,124,1,0,124,2,0,131,2,
+    0,125,3,0,124,3,0,100,1,0,107,8,0,114,34,0,
+    100,1,0,83,124,3,0,106,1,0,83,41,2,122,170,102,
     105,110,100,32,116,104,101,32,109,111,100,117,108,101,32,111,
     110,32,115,121,115,46,112,97,116,104,32,111,114,32,39,112,
     97,116,104,39,32,98,97,115,101,100,32,111,110,32,115,121,
     115,46,112,97,116,104,95,104,111,111,107,115,32,97,110,100,
     10,32,32,32,32,32,32,32,32,115,121,115,46,112,97,116,
     104,95,105,109,112,111,114,116,101,114,95,99,97,99,104,101,
-    46,78,90,9,110,97,109,101,115,112,97,99,101,41,7,114,
-    8,0,0,0,114,37,0,0,0,114,6,1,0,0,114,129,
-    0,0,0,114,158,0,0,0,114,160,0,0,0,114,231,0,
-    0,0,41,6,114,172,0,0,0,114,128,0,0,0,114,37,
-    0,0,0,114,181,0,0,0,114,166,0,0,0,114,5,1,
-    0,0,114,4,0,0,0,114,4,0,0,0,114,6,0,0,
-    0,114,182,0,0,0,117,4,0,0,115,26,0,0,0,0,
-    4,12,1,9,1,21,1,12,1,4,1,15,1,9,1,6,
-    3,9,1,24,1,4,2,7,2,122,20,80,97,116,104,70,
-    105,110,100,101,114,46,102,105,110,100,95,115,112,101,99,99,
-    3,0,0,0,0,0,0,0,4,0,0,0,3,0,0,0,
-    67,0,0,0,115,41,0,0,0,124,0,0,106,0,0,124,
-    1,0,124,2,0,131,2,0,125,3,0,124,3,0,100,1,
-    0,107,8,0,114,34,0,100,1,0,83,124,3,0,106,1,
-    0,83,41,2,122,170,102,105,110,100,32,116,104,101,32,109,
-    111,100,117,108,101,32,111,110,32,115,121,115,46,112,97,116,
-    104,32,111,114,32,39,112,97,116,104,39,32,98,97,115,101,
-    100,32,111,110,32,115,121,115,46,112,97,116,104,95,104,111,
-    111,107,115,32,97,110,100,10,32,32,32,32,32,32,32,32,
-    115,121,115,46,112,97,116,104,95,105,109,112,111,114,116,101,
-    114,95,99,97,99,104,101,46,10,10,32,32,32,32,32,32,
-    32,32,84,104,105,115,32,109,101,116,104,111,100,32,105,115,
-    32,100,101,112,114,101,99,97,116,101,100,46,32,32,85,115,
-    101,32,102,105,110,100,95,115,112,101,99,40,41,32,105,110,
-    115,116,101,97,100,46,10,10,32,32,32,32,32,32,32,32,
-    78,41,2,114,182,0,0,0,114,129,0,0,0,41,4,114,
-    172,0,0,0,114,128,0,0,0,114,37,0,0,0,114,166,
-    0,0,0,114,4,0,0,0,114,4,0,0,0,114,6,0,
-    0,0,114,183,0,0,0,139,4,0,0,115,8,0,0,0,
-    0,8,18,1,12,1,4,1,122,22,80,97,116,104,70,105,
-    110,100,101,114,46,102,105,110,100,95,109,111,100,117,108,101,
-    41,12,114,114,0,0,0,114,113,0,0,0,114,115,0,0,
-    0,114,116,0,0,0,114,184,0,0,0,114,251,0,0,0,
-    114,0,1,0,0,114,2,1,0,0,114,3,1,0,0,114,
-    6,1,0,0,114,182,0,0,0,114,183,0,0,0,114,4,
-    0,0,0,114,4,0,0,0,114,4,0,0,0,114,6,0,
-    0,0,114,250,0,0,0,19,4,0,0,115,22,0,0,0,
-    12,2,6,2,18,8,18,17,18,22,18,15,3,1,18,31,
-    3,1,21,21,3,1,114,250,0,0,0,99,0,0,0,0,
-    0,0,0,0,0,0,0,0,3,0,0,0,64,0,0,0,
-    115,133,0,0,0,101,0,0,90,1,0,100,0,0,90,2,
-    0,100,1,0,90,3,0,100,2,0,100,3,0,132,0,0,
-    90,4,0,100,4,0,100,5,0,132,0,0,90,5,0,101,
-    6,0,90,7,0,100,6,0,100,7,0,132,0,0,90,8,
-    0,100,8,0,100,9,0,132,0,0,90,9,0,100,10,0,
-    100,11,0,100,12,0,132,1,0,90,10,0,100,13,0,100,
-    14,0,132,0,0,90,11,0,101,12,0,100,15,0,100,16,
-    0,132,0,0,131,1,0,90,13,0,100,17,0,100,18,0,
-    132,0,0,90,14,0,100,10,0,83,41,19,218,10,70,105,
-    108,101,70,105,110,100,101,114,122,172,70,105,108,101,45,98,
-    97,115,101,100,32,102,105,110,100,101,114,46,10,10,32,32,
-    32,32,73,110,116,101,114,97,99,116,105,111,110,115,32,119,
-    105,116,104,32,116,104,101,32,102,105,108,101,32,115,121,115,
-    116,101,109,32,97,114,101,32,99,97,99,104,101,100,32,102,
-    111,114,32,112,101,114,102,111,114,109,97,110,99,101,44,32,
-    98,101,105,110,103,10,32,32,32,32,114,101,102,114,101,115,
-    104,101,100,32,119,104,101,110,32,116,104,101,32,100,105,114,
-    101,99,116,111,114,121,32,116,104,101,32,102,105,110,100,101,
-    114,32,105,115,32,104,97,110,100,108,105,110,103,32,104,97,
-    115,32,98,101,101,110,32,109,111,100,105,102,105,101,100,46,
-    10,10,32,32,32,32,99,2,0,0,0,0,0,0,0,5,
-    0,0,0,5,0,0,0,7,0,0,0,115,122,0,0,0,
-    103,0,0,125,3,0,120,52,0,124,2,0,68,93,44,0,
-    92,2,0,137,0,0,125,4,0,124,3,0,106,0,0,135,
-    0,0,102,1,0,100,1,0,100,2,0,134,0,0,124,4,
-    0,68,131,1,0,131,1,0,1,113,13,0,87,124,3,0,
-    124,0,0,95,1,0,124,1,0,112,79,0,100,3,0,124,
-    0,0,95,2,0,100,6,0,124,0,0,95,3,0,116,4,
-    0,131,0,0,124,0,0,95,5,0,116,4,0,131,0,0,
-    124,0,0,95,6,0,100,5,0,83,41,7,122,154,73,110,
-    105,116,105,97,108,105,122,101,32,119,105,116,104,32,116,104,
-    101,32,112,97,116,104,32,116,111,32,115,101,97,114,99,104,
-    32,111,110,32,97,110,100,32,97,32,118,97,114,105,97,98,
-    108,101,32,110,117,109,98,101,114,32,111,102,10,32,32,32,
-    32,32,32,32,32,50,45,116,117,112,108,101,115,32,99,111,
-    110,116,97,105,110,105,110,103,32,116,104,101,32,108,111,97,
-    100,101,114,32,97,110,100,32,116,104,101,32,102,105,108,101,
-    32,115,117,102,102,105,120,101,115,32,116,104,101,32,108,111,
-    97,100,101,114,10,32,32,32,32,32,32,32,32,114,101,99,
-    111,103,110,105,122,101,115,46,99,1,0,0,0,0,0,0,
-    0,2,0,0,0,3,0,0,0,51,0,0,0,115,27,0,
-    0,0,124,0,0,93,17,0,125,1,0,124,1,0,136,0,
-    0,102,2,0,86,1,113,3,0,100,0,0,83,41,1,78,
-    114,4,0,0,0,41,2,114,24,0,0,0,114,226,0,0,
-    0,41,1,114,129,0,0,0,114,4,0,0,0,114,6,0,
-    0,0,114,228,0,0,0,168,4,0,0,115,2,0,0,0,
-    6,0,122,38,70,105,108,101,70,105,110,100,101,114,46,95,
-    95,105,110,105,116,95,95,46,60,108,111,99,97,108,115,62,
-    46,60,103,101,110,101,120,112,114,62,114,60,0,0,0,114,
-    31,0,0,0,78,114,89,0,0,0,41,7,114,151,0,0,
-    0,218,8,95,108,111,97,100,101,114,115,114,37,0,0,0,
-    218,11,95,112,97,116,104,95,109,116,105,109,101,218,3,115,
-    101,116,218,11,95,112,97,116,104,95,99,97,99,104,101,218,
-    19,95,114,101,108,97,120,101,100,95,112,97,116,104,95,99,
-    97,99,104,101,41,5,114,110,0,0,0,114,37,0,0,0,
-    218,14,108,111,97,100,101,114,95,100,101,116,97,105,108,115,
-    90,7,108,111,97,100,101,114,115,114,168,0,0,0,114,4,
-    0,0,0,41,1,114,129,0,0,0,114,6,0,0,0,114,
-    186,0,0,0,162,4,0,0,115,16,0,0,0,0,4,6,
-    1,19,1,36,1,9,2,15,1,9,1,12,1,122,19,70,
-    105,108,101,70,105,110,100,101,114,46,95,95,105,110,105,116,
-    95,95,99,1,0,0,0,0,0,0,0,1,0,0,0,2,
-    0,0,0,67,0,0,0,115,13,0,0,0,100,3,0,124,
-    0,0,95,0,0,100,2,0,83,41,4,122,31,73,110,118,
-    97,108,105,100,97,116,101,32,116,104,101,32,100,105,114,101,
-    99,116,111,114,121,32,109,116,105,109,101,46,114,31,0,0,
-    0,78,114,89,0,0,0,41,1,114,9,1,0,0,41,1,
-    114,110,0,0,0,114,4,0,0,0,114,4,0,0,0,114,
-    6,0,0,0,114,251,0,0,0,176,4,0,0,115,2,0,
-    0,0,0,2,122,28,70,105,108,101,70,105,110,100,101,114,
-    46,105,110,118,97,108,105,100,97,116,101,95,99,97,99,104,
-    101,115,99,2,0,0,0,0,0,0,0,3,0,0,0,2,
-    0,0,0,67,0,0,0,115,59,0,0,0,124,0,0,106,
-    0,0,124,1,0,131,1,0,125,2,0,124,2,0,100,1,
-    0,107,8,0,114,37,0,100,1,0,103,0,0,102,2,0,
-    83,124,2,0,106,1,0,124,2,0,106,2,0,112,55,0,
-    103,0,0,102,2,0,83,41,2,122,197,84,114,121,32,116,
-    111,32,102,105,110,100,32,97,32,108,111,97,100,101,114,32,
-    102,111,114,32,116,104,101,32,115,112,101,99,105,102,105,101,
-    100,32,109,111,100,117,108,101,44,32,111,114,32,116,104,101,
-    32,110,97,109,101,115,112,97,99,101,10,32,32,32,32,32,
-    32,32,32,112,97,99,107,97,103,101,32,112,111,114,116,105,
-    111,110,115,46,32,82,101,116,117,114,110,115,32,40,108,111,
-    97,100,101,114,44,32,108,105,115,116,45,111,102,45,112,111,
-    114,116,105,111,110,115,41,46,10,10,32,32,32,32,32,32,
-    32,32,84,104,105,115,32,109,101,116,104,111,100,32,105,115,
-    32,100,101,112,114,101,99,97,116,101,100,46,32,32,85,115,
-    101,32,102,105,110,100,95,115,112,101,99,40,41,32,105,110,
-    115,116,101,97,100,46,10,10,32,32,32,32,32,32,32,32,
-    78,41,3,114,182,0,0,0,114,129,0,0,0,114,158,0,
-    0,0,41,3,114,110,0,0,0,114,128,0,0,0,114,166,
-    0,0,0,114,4,0,0,0,114,4,0,0,0,114,6,0,
-    0,0,114,126,0,0,0,182,4,0,0,115,8,0,0,0,
-    0,7,15,1,12,1,10,1,122,22,70,105,108,101,70,105,
-    110,100,101,114,46,102,105,110,100,95,108,111,97,100,101,114,
-    99,6,0,0,0,0,0,0,0,7,0,0,0,7,0,0,
-    0,67,0,0,0,115,40,0,0,0,124,1,0,124,2,0,
-    124,3,0,131,2,0,125,6,0,116,0,0,124,2,0,124,
-    3,0,100,1,0,124,6,0,100,2,0,124,4,0,131,2,
-    2,83,41,3,78,114,129,0,0,0,114,158,0,0,0,41,
-    1,114,169,0,0,0,41,7,114,110,0,0,0,114,167,0,
-    0,0,114,128,0,0,0,114,37,0,0,0,90,4,115,109,
-    115,108,114,181,0,0,0,114,129,0,0,0,114,4,0,0,
-    0,114,4,0,0,0,114,6,0,0,0,114,6,1,0,0,
-    194,4,0,0,115,6,0,0,0,0,1,15,1,18,1,122,
-    20,70,105,108,101,70,105,110,100,101,114,46,95,103,101,116,
-    95,115,112,101,99,78,99,3,0,0,0,0,0,0,0,14,
-    0,0,0,15,0,0,0,67,0,0,0,115,234,1,0,0,
-    100,1,0,125,3,0,124,1,0,106,0,0,100,2,0,131,
-    1,0,100,3,0,25,125,4,0,121,34,0,116,1,0,124,
-    0,0,106,2,0,112,49,0,116,3,0,106,4,0,131,0,
-    0,131,1,0,106,5,0,125,5,0,87,110,24,0,4,116,
-    6,0,107,10,0,114,85,0,1,1,1,100,10,0,125,5,
-    0,89,110,1,0,88,124,5,0,124,0,0,106,7,0,107,
-    3,0,114,120,0,124,0,0,106,8,0,131,0,0,1,124,
-    5,0,124,0,0,95,7,0,116,9,0,131,0,0,114,153,
-    0,124,0,0,106,10,0,125,6,0,124,4,0,106,11,0,
-    131,0,0,125,7,0,110,15,0,124,0,0,106,12,0,125,
-    6,0,124,4,0,125,7,0,124,7,0,124,6,0,107,6,
-    0,114,45,1,116,13,0,124,0,0,106,2,0,124,4,0,
-    131,2,0,125,8,0,120,100,0,124,0,0,106,14,0,68,
-    93,77,0,92,2,0,125,9,0,125,10,0,100,5,0,124,
-    9,0,23,125,11,0,116,13,0,124,8,0,124,11,0,131,
-    2,0,125,12,0,116,15,0,124,12,0,131,1,0,114,208,
-    0,124,0,0,106,16,0,124,10,0,124,1,0,124,12,0,
-    124,8,0,103,1,0,124,2,0,131,5,0,83,113,208,0,
-    87,116,17,0,124,8,0,131,1,0,125,3,0,120,123,0,
-    124,0,0,106,14,0,68,93,112,0,92,2,0,125,9,0,
-    125,10,0,116,13,0,124,0,0,106,2,0,124,4,0,124,
-    9,0,23,131,2,0,125,12,0,116,18,0,100,6,0,106,
-    19,0,124,12,0,131,1,0,100,7,0,100,3,0,131,1,
-    1,1,124,7,0,124,9,0,23,124,6,0,107,6,0,114,
-    55,1,116,15,0,124,12,0,131,1,0,114,55,1,124,0,
-    0,106,16,0,124,10,0,124,1,0,124,12,0,100,8,0,
-    124,2,0,131,5,0,83,113,55,1,87,124,3,0,114,230,
-    1,116,18,0,100,9,0,106,19,0,124,8,0,131,1,0,
-    131,1,0,1,116,20,0,106,21,0,124,1,0,100,8,0,
-    131,2,0,125,13,0,124,8,0,103,1,0,124,13,0,95,
-    22,0,124,13,0,83,100,8,0,83,41,11,122,102,84,114,
-    121,32,116,111,32,102,105,110,100,32,97,32,115,112,101,99,
-    32,102,111,114,32,116,104,101,32,115,112,101,99,105,102,105,
-    101,100,32,109,111,100,117,108,101,46,32,32,82,101,116,117,
-    114,110,115,32,116,104,101,10,32,32,32,32,32,32,32,32,
-    109,97,116,99,104,105,110,103,32,115,112,101,99,44,32,111,
-    114,32,78,111,110,101,32,105,102,32,110,111,116,32,102,111,
-    117,110,100,46,70,114,60,0,0,0,114,58,0,0,0,114,
-    31,0,0,0,114,186,0,0,0,122,9,116,114,121,105,110,
-    103,32,123,125,114,100,0,0,0,78,122,25,112,111,115,115,
-    105,98,108,101,32,110,97,109,101,115,112,97,99,101,32,102,
-    111,114,32,123,125,114,89,0,0,0,41,23,114,34,0,0,
-    0,114,41,0,0,0,114,37,0,0,0,114,3,0,0,0,
-    114,47,0,0,0,114,220,0,0,0,114,42,0,0,0,114,
-    9,1,0,0,218,11,95,102,105,108,108,95,99,97,99,104,
-    101,114,7,0,0,0,114,12,1,0,0,114,90,0,0,0,
-    114,11,1,0,0,114,30,0,0,0,114,8,1,0,0,114,
-    46,0,0,0,114,6,1,0,0,114,48,0,0,0,114,107,
-    0,0,0,114,49,0,0,0,114,123,0,0,0,114,162,0,
-    0,0,114,158,0,0,0,41,14,114,110,0,0,0,114,128,
-    0,0,0,114,181,0,0,0,90,12,105,115,95,110,97,109,
-    101,115,112,97,99,101,90,11,116,97,105,108,95,109,111,100,
-    117,108,101,114,135,0,0,0,90,5,99,97,99,104,101,90,
-    12,99,97,99,104,101,95,109,111,100,117,108,101,90,9,98,
-    97,115,101,95,112,97,116,104,114,226,0,0,0,114,167,0,
-    0,0,90,13,105,110,105,116,95,102,105,108,101,110,97,109,
-    101,90,9,102,117,108,108,95,112,97,116,104,114,166,0,0,
+    46,10,10,32,32,32,32,32,32,32,32,84,104,105,115,32,
+    109,101,116,104,111,100,32,105,115,32,100,101,112,114,101,99,
+    97,116,101,100,46,32,32,85,115,101,32,102,105,110,100,95,
+    115,112,101,99,40,41,32,105,110,115,116,101,97,100,46,10,
+    10,32,32,32,32,32,32,32,32,78,41,2,114,183,0,0,
+    0,114,129,0,0,0,41,4,114,173,0,0,0,114,128,0,
+    0,0,114,37,0,0,0,114,167,0,0,0,114,4,0,0,
+    0,114,4,0,0,0,114,6,0,0,0,114,184,0,0,0,
+    163,4,0,0,115,8,0,0,0,0,8,18,1,12,1,4,
+    1,122,22,80,97,116,104,70,105,110,100,101,114,46,102,105,
+    110,100,95,109,111,100,117,108,101,41,12,114,114,0,0,0,
+    114,113,0,0,0,114,115,0,0,0,114,116,0,0,0,114,
+    185,0,0,0,114,252,0,0,0,114,1,1,0,0,114,3,
+    1,0,0,114,4,1,0,0,114,7,1,0,0,114,183,0,
+    0,0,114,184,0,0,0,114,4,0,0,0,114,4,0,0,
+    0,114,4,0,0,0,114,6,0,0,0,114,251,0,0,0,
+    43,4,0,0,115,22,0,0,0,12,2,6,2,18,8,18,
+    17,18,22,18,15,3,1,18,31,3,1,21,21,3,1,114,
+    251,0,0,0,99,0,0,0,0,0,0,0,0,0,0,0,
+    0,3,0,0,0,64,0,0,0,115,133,0,0,0,101,0,
+    0,90,1,0,100,0,0,90,2,0,100,1,0,90,3,0,
+    100,2,0,100,3,0,132,0,0,90,4,0,100,4,0,100,
+    5,0,132,0,0,90,5,0,101,6,0,90,7,0,100,6,
+    0,100,7,0,132,0,0,90,8,0,100,8,0,100,9,0,
+    132,0,0,90,9,0,100,10,0,100,11,0,100,12,0,132,
+    1,0,90,10,0,100,13,0,100,14,0,132,0,0,90,11,
+    0,101,12,0,100,15,0,100,16,0,132,0,0,131,1,0,
+    90,13,0,100,17,0,100,18,0,132,0,0,90,14,0,100,
+    10,0,83,41,19,218,10,70,105,108,101,70,105,110,100,101,
+    114,122,172,70,105,108,101,45,98,97,115,101,100,32,102,105,
+    110,100,101,114,46,10,10,32,32,32,32,73,110,116,101,114,
+    97,99,116,105,111,110,115,32,119,105,116,104,32,116,104,101,
+    32,102,105,108,101,32,115,121,115,116,101,109,32,97,114,101,
+    32,99,97,99,104,101,100,32,102,111,114,32,112,101,114,102,
+    111,114,109,97,110,99,101,44,32,98,101,105,110,103,10,32,
+    32,32,32,114,101,102,114,101,115,104,101,100,32,119,104,101,
+    110,32,116,104,101,32,100,105,114,101,99,116,111,114,121,32,
+    116,104,101,32,102,105,110,100,101,114,32,105,115,32,104,97,
+    110,100,108,105,110,103,32,104,97,115,32,98,101,101,110,32,
+    109,111,100,105,102,105,101,100,46,10,10,32,32,32,32,99,
+    2,0,0,0,0,0,0,0,5,0,0,0,5,0,0,0,
+    7,0,0,0,115,122,0,0,0,103,0,0,125,3,0,120,
+    52,0,124,2,0,68,93,44,0,92,2,0,137,0,0,125,
+    4,0,124,3,0,106,0,0,135,0,0,102,1,0,100,1,
+    0,100,2,0,134,0,0,124,4,0,68,131,1,0,131,1,
+    0,1,113,13,0,87,124,3,0,124,0,0,95,1,0,124,
+    1,0,112,79,0,100,3,0,124,0,0,95,2,0,100,6,
+    0,124,0,0,95,3,0,116,4,0,131,0,0,124,0,0,
+    95,5,0,116,4,0,131,0,0,124,0,0,95,6,0,100,
+    5,0,83,41,7,122,154,73,110,105,116,105,97,108,105,122,
+    101,32,119,105,116,104,32,116,104,101,32,112,97,116,104,32,
+    116,111,32,115,101,97,114,99,104,32,111,110,32,97,110,100,
+    32,97,32,118,97,114,105,97,98,108,101,32,110,117,109,98,
+    101,114,32,111,102,10,32,32,32,32,32,32,32,32,50,45,
+    116,117,112,108,101,115,32,99,111,110,116,97,105,110,105,110,
+    103,32,116,104,101,32,108,111,97,100,101,114,32,97,110,100,
+    32,116,104,101,32,102,105,108,101,32,115,117,102,102,105,120,
+    101,115,32,116,104,101,32,108,111,97,100,101,114,10,32,32,
+    32,32,32,32,32,32,114,101,99,111,103,110,105,122,101,115,
+    46,99,1,0,0,0,0,0,0,0,2,0,0,0,3,0,
+    0,0,51,0,0,0,115,27,0,0,0,124,0,0,93,17,
+    0,125,1,0,124,1,0,136,0,0,102,2,0,86,1,113,
+    3,0,100,0,0,83,41,1,78,114,4,0,0,0,41,2,
+    114,24,0,0,0,114,227,0,0,0,41,1,114,129,0,0,
+    0,114,4,0,0,0,114,6,0,0,0,114,229,0,0,0,
+    192,4,0,0,115,2,0,0,0,6,0,122,38,70,105,108,
+    101,70,105,110,100,101,114,46,95,95,105,110,105,116,95,95,
+    46,60,108,111,99,97,108,115,62,46,60,103,101,110,101,120,
+    112,114,62,114,60,0,0,0,114,31,0,0,0,78,114,89,
+    0,0,0,41,7,114,152,0,0,0,218,8,95,108,111,97,
+    100,101,114,115,114,37,0,0,0,218,11,95,112,97,116,104,
+    95,109,116,105,109,101,218,3,115,101,116,218,11,95,112,97,
+    116,104,95,99,97,99,104,101,218,19,95,114,101,108,97,120,
+    101,100,95,112,97,116,104,95,99,97,99,104,101,41,5,114,
+    110,0,0,0,114,37,0,0,0,218,14,108,111,97,100,101,
+    114,95,100,101,116,97,105,108,115,90,7,108,111,97,100,101,
+    114,115,114,169,0,0,0,114,4,0,0,0,41,1,114,129,
+    0,0,0,114,6,0,0,0,114,187,0,0,0,186,4,0,
+    0,115,16,0,0,0,0,4,6,1,19,1,36,1,9,2,
+    15,1,9,1,12,1,122,19,70,105,108,101,70,105,110,100,
+    101,114,46,95,95,105,110,105,116,95,95,99,1,0,0,0,
+    0,0,0,0,1,0,0,0,2,0,0,0,67,0,0,0,
+    115,13,0,0,0,100,3,0,124,0,0,95,0,0,100,2,
+    0,83,41,4,122,31,73,110,118,97,108,105,100,97,116,101,
+    32,116,104,101,32,100,105,114,101,99,116,111,114,121,32,109,
+    116,105,109,101,46,114,31,0,0,0,78,114,89,0,0,0,
+    41,1,114,10,1,0,0,41,1,114,110,0,0,0,114,4,
+    0,0,0,114,4,0,0,0,114,6,0,0,0,114,252,0,
+    0,0,200,4,0,0,115,2,0,0,0,0,2,122,28,70,
+    105,108,101,70,105,110,100,101,114,46,105,110,118,97,108,105,
+    100,97,116,101,95,99,97,99,104,101,115,99,2,0,0,0,
+    0,0,0,0,3,0,0,0,2,0,0,0,67,0,0,0,
+    115,59,0,0,0,124,0,0,106,0,0,124,1,0,131,1,
+    0,125,2,0,124,2,0,100,1,0,107,8,0,114,37,0,
+    100,1,0,103,0,0,102,2,0,83,124,2,0,106,1,0,
+    124,2,0,106,2,0,112,55,0,103,0,0,102,2,0,83,
+    41,2,122,197,84,114,121,32,116,111,32,102,105,110,100,32,
+    97,32,108,111,97,100,101,114,32,102,111,114,32,116,104,101,
+    32,115,112,101,99,105,102,105,101,100,32,109,111,100,117,108,
+    101,44,32,111,114,32,116,104,101,32,110,97,109,101,115,112,
+    97,99,101,10,32,32,32,32,32,32,32,32,112,97,99,107,
+    97,103,101,32,112,111,114,116,105,111,110,115,46,32,82,101,
+    116,117,114,110,115,32,40,108,111,97,100,101,114,44,32,108,
+    105,115,116,45,111,102,45,112,111,114,116,105,111,110,115,41,
+    46,10,10,32,32,32,32,32,32,32,32,84,104,105,115,32,
+    109,101,116,104,111,100,32,105,115,32,100,101,112,114,101,99,
+    97,116,101,100,46,32,32,85,115,101,32,102,105,110,100,95,
+    115,112,101,99,40,41,32,105,110,115,116,101,97,100,46,10,
+    10,32,32,32,32,32,32,32,32,78,41,3,114,183,0,0,
+    0,114,129,0,0,0,114,159,0,0,0,41,3,114,110,0,
+    0,0,114,128,0,0,0,114,167,0,0,0,114,4,0,0,
+    0,114,4,0,0,0,114,6,0,0,0,114,126,0,0,0,
+    206,4,0,0,115,8,0,0,0,0,7,15,1,12,1,10,
+    1,122,22,70,105,108,101,70,105,110,100,101,114,46,102,105,
+    110,100,95,108,111,97,100,101,114,99,6,0,0,0,0,0,
+    0,0,7,0,0,0,7,0,0,0,67,0,0,0,115,40,
+    0,0,0,124,1,0,124,2,0,124,3,0,131,2,0,125,
+    6,0,116,0,0,124,2,0,124,3,0,100,1,0,124,6,
+    0,100,2,0,124,4,0,131,2,2,83,41,3,78,114,129,
+    0,0,0,114,159,0,0,0,41,1,114,170,0,0,0,41,
+    7,114,110,0,0,0,114,168,0,0,0,114,128,0,0,0,
+    114,37,0,0,0,90,4,115,109,115,108,114,182,0,0,0,
+    114,129,0,0,0,114,4,0,0,0,114,4,0,0,0,114,
+    6,0,0,0,114,7,1,0,0,218,4,0,0,115,6,0,
+    0,0,0,1,15,1,18,1,122,20,70,105,108,101,70,105,
+    110,100,101,114,46,95,103,101,116,95,115,112,101,99,78,99,
+    3,0,0,0,0,0,0,0,14,0,0,0,15,0,0,0,
+    67,0,0,0,115,234,1,0,0,100,1,0,125,3,0,124,
+    1,0,106,0,0,100,2,0,131,1,0,100,3,0,25,125,
+    4,0,121,34,0,116,1,0,124,0,0,106,2,0,112,49,
+    0,116,3,0,106,4,0,131,0,0,131,1,0,106,5,0,
+    125,5,0,87,110,24,0,4,116,6,0,107,10,0,114,85,
+    0,1,1,1,100,10,0,125,5,0,89,110,1,0,88,124,
+    5,0,124,0,0,106,7,0,107,3,0,114,120,0,124,0,
+    0,106,8,0,131,0,0,1,124,5,0,124,0,0,95,7,
+    0,116,9,0,131,0,0,114,153,0,124,0,0,106,10,0,
+    125,6,0,124,4,0,106,11,0,131,0,0,125,7,0,110,
+    15,0,124,0,0,106,12,0,125,6,0,124,4,0,125,7,
+    0,124,7,0,124,6,0,107,6,0,114,45,1,116,13,0,
+    124,0,0,106,2,0,124,4,0,131,2,0,125,8,0,120,
+    100,0,124,0,0,106,14,0,68,93,77,0,92,2,0,125,
+    9,0,125,10,0,100,5,0,124,9,0,23,125,11,0,116,
+    13,0,124,8,0,124,11,0,131,2,0,125,12,0,116,15,
+    0,124,12,0,131,1,0,114,208,0,124,0,0,106,16,0,
+    124,10,0,124,1,0,124,12,0,124,8,0,103,1,0,124,
+    2,0,131,5,0,83,113,208,0,87,116,17,0,124,8,0,
+    131,1,0,125,3,0,120,123,0,124,0,0,106,14,0,68,
+    93,112,0,92,2,0,125,9,0,125,10,0,116,13,0,124,
+    0,0,106,2,0,124,4,0,124,9,0,23,131,2,0,125,
+    12,0,116,18,0,100,6,0,106,19,0,124,12,0,131,1,
+    0,100,7,0,100,3,0,131,1,1,1,124,7,0,124,9,
+    0,23,124,6,0,107,6,0,114,55,1,116,15,0,124,12,
+    0,131,1,0,114,55,1,124,0,0,106,16,0,124,10,0,
+    124,1,0,124,12,0,100,8,0,124,2,0,131,5,0,83,
+    113,55,1,87,124,3,0,114,230,1,116,18,0,100,9,0,
+    106,19,0,124,8,0,131,1,0,131,1,0,1,116,20,0,
+    106,21,0,124,1,0,100,8,0,131,2,0,125,13,0,124,
+    8,0,103,1,0,124,13,0,95,22,0,124,13,0,83,100,
+    8,0,83,41,11,122,102,84,114,121,32,116,111,32,102,105,
+    110,100,32,97,32,115,112,101,99,32,102,111,114,32,116,104,
+    101,32,115,112,101,99,105,102,105,101,100,32,109,111,100,117,
+    108,101,46,32,32,82,101,116,117,114,110,115,32,116,104,101,
+    10,32,32,32,32,32,32,32,32,109,97,116,99,104,105,110,
+    103,32,115,112,101,99,44,32,111,114,32,78,111,110,101,32,
+    105,102,32,110,111,116,32,102,111,117,110,100,46,70,114,60,
+    0,0,0,114,58,0,0,0,114,31,0,0,0,114,187,0,
+    0,0,122,9,116,114,121,105,110,103,32,123,125,114,100,0,
+    0,0,78,122,25,112,111,115,115,105,98,108,101,32,110,97,
+    109,101,115,112,97,99,101,32,102,111,114,32,123,125,114,89,
+    0,0,0,41,23,114,34,0,0,0,114,41,0,0,0,114,
+    37,0,0,0,114,3,0,0,0,114,47,0,0,0,114,221,
+    0,0,0,114,42,0,0,0,114,10,1,0,0,218,11,95,
+    102,105,108,108,95,99,97,99,104,101,114,7,0,0,0,114,
+    13,1,0,0,114,90,0,0,0,114,12,1,0,0,114,30,
+    0,0,0,114,9,1,0,0,114,46,0,0,0,114,7,1,
+    0,0,114,48,0,0,0,114,107,0,0,0,114,49,0,0,
+    0,114,123,0,0,0,114,163,0,0,0,114,159,0,0,0,
+    41,14,114,110,0,0,0,114,128,0,0,0,114,182,0,0,
+    0,90,12,105,115,95,110,97,109,101,115,112,97,99,101,90,
+    11,116,97,105,108,95,109,111,100,117,108,101,114,135,0,0,
+    0,90,5,99,97,99,104,101,90,12,99,97,99,104,101,95,
+    109,111,100,117,108,101,90,9,98,97,115,101,95,112,97,116,
+    104,114,227,0,0,0,114,168,0,0,0,90,13,105,110,105,
+    116,95,102,105,108,101,110,97,109,101,90,9,102,117,108,108,
+    95,112,97,116,104,114,167,0,0,0,114,4,0,0,0,114,
+    4,0,0,0,114,6,0,0,0,114,183,0,0,0,223,4,
+    0,0,115,68,0,0,0,0,3,6,1,19,1,3,1,34,
+    1,13,1,11,1,15,1,10,1,9,2,9,1,9,1,15,
+    2,9,1,6,2,12,1,18,1,22,1,10,1,15,1,12,
+    1,32,4,12,2,22,1,22,1,25,1,16,1,12,1,29,
+    1,6,1,19,1,18,1,12,1,4,1,122,20,70,105,108,
+    101,70,105,110,100,101,114,46,102,105,110,100,95,115,112,101,
+    99,99,1,0,0,0,0,0,0,0,9,0,0,0,13,0,
+    0,0,67,0,0,0,115,11,1,0,0,124,0,0,106,0,
+    0,125,1,0,121,31,0,116,1,0,106,2,0,124,1,0,
+    112,33,0,116,1,0,106,3,0,131,0,0,131,1,0,125,
+    2,0,87,110,33,0,4,116,4,0,116,5,0,116,6,0,
+    102,3,0,107,10,0,114,75,0,1,1,1,103,0,0,125,
+    2,0,89,110,1,0,88,116,7,0,106,8,0,106,9,0,
+    100,1,0,131,1,0,115,112,0,116,10,0,124,2,0,131,
+    1,0,124,0,0,95,11,0,110,111,0,116,10,0,131,0,
+    0,125,3,0,120,90,0,124,2,0,68,93,82,0,125,4,
+    0,124,4,0,106,12,0,100,2,0,131,1,0,92,3,0,
+    125,5,0,125,6,0,125,7,0,124,6,0,114,191,0,100,
+    3,0,106,13,0,124,5,0,124,7,0,106,14,0,131,0,
+    0,131,2,0,125,8,0,110,6,0,124,5,0,125,8,0,
+    124,3,0,106,15,0,124,8,0,131,1,0,1,113,128,0,
+    87,124,3,0,124,0,0,95,11,0,116,7,0,106,8,0,
+    106,9,0,116,16,0,131,1,0,114,7,1,100,4,0,100,
+    5,0,132,0,0,124,2,0,68,131,1,0,124,0,0,95,
+    17,0,100,6,0,83,41,7,122,68,70,105,108,108,32,116,
+    104,101,32,99,97,99,104,101,32,111,102,32,112,111,116,101,
+    110,116,105,97,108,32,109,111,100,117,108,101,115,32,97,110,
+    100,32,112,97,99,107,97,103,101,115,32,102,111,114,32,116,
+    104,105,115,32,100,105,114,101,99,116,111,114,121,46,114,0,
+    0,0,0,114,60,0,0,0,122,5,123,125,46,123,125,99,
+    1,0,0,0,0,0,0,0,2,0,0,0,3,0,0,0,
+    83,0,0,0,115,28,0,0,0,104,0,0,124,0,0,93,
+    18,0,125,1,0,124,1,0,106,0,0,131,0,0,146,2,
+    0,113,6,0,83,114,4,0,0,0,41,1,114,90,0,0,
+    0,41,2,114,24,0,0,0,90,2,102,110,114,4,0,0,
+    0,114,4,0,0,0,114,6,0,0,0,250,9,60,115,101,
+    116,99,111,109,112,62,41,5,0,0,115,2,0,0,0,9,
+    0,122,41,70,105,108,101,70,105,110,100,101,114,46,95,102,
+    105,108,108,95,99,97,99,104,101,46,60,108,111,99,97,108,
+    115,62,46,60,115,101,116,99,111,109,112,62,78,41,18,114,
+    37,0,0,0,114,3,0,0,0,90,7,108,105,115,116,100,
+    105,114,114,47,0,0,0,114,2,1,0,0,218,15,80,101,
+    114,109,105,115,115,105,111,110,69,114,114,111,114,218,18,78,
+    111,116,65,68,105,114,101,99,116,111,114,121,69,114,114,111,
+    114,114,8,0,0,0,114,9,0,0,0,114,10,0,0,0,
+    114,11,1,0,0,114,12,1,0,0,114,85,0,0,0,114,
+    49,0,0,0,114,90,0,0,0,218,3,97,100,100,114,11,
+    0,0,0,114,13,1,0,0,41,9,114,110,0,0,0,114,
+    37,0,0,0,90,8,99,111,110,116,101,110,116,115,90,21,
+    108,111,119,101,114,95,115,117,102,102,105,120,95,99,111,110,
+    116,101,110,116,115,114,247,0,0,0,114,108,0,0,0,114,
+    239,0,0,0,114,227,0,0,0,90,8,110,101,119,95,110,
+    97,109,101,114,4,0,0,0,114,4,0,0,0,114,6,0,
+    0,0,114,15,1,0,0,12,5,0,0,115,34,0,0,0,
+    0,2,9,1,3,1,31,1,22,3,11,3,18,1,18,7,
+    9,1,13,1,24,1,6,1,27,2,6,1,17,1,9,1,
+    18,1,122,22,70,105,108,101,70,105,110,100,101,114,46,95,
+    102,105,108,108,95,99,97,99,104,101,99,1,0,0,0,0,
+    0,0,0,3,0,0,0,3,0,0,0,7,0,0,0,115,
+    25,0,0,0,135,0,0,135,1,0,102,2,0,100,1,0,
+    100,2,0,134,0,0,125,2,0,124,2,0,83,41,3,97,
+    20,1,0,0,65,32,99,108,97,115,115,32,109,101,116,104,
+    111,100,32,119,104,105,99,104,32,114,101,116,117,114,110,115,
+    32,97,32,99,108,111,115,117,114,101,32,116,111,32,117,115,
+    101,32,111,110,32,115,121,115,46,112,97,116,104,95,104,111,
+    111,107,10,32,32,32,32,32,32,32,32,119,104,105,99,104,
+    32,119,105,108,108,32,114,101,116,117,114,110,32,97,110,32,
+    105,110,115,116,97,110,99,101,32,117,115,105,110,103,32,116,
+    104,101,32,115,112,101,99,105,102,105,101,100,32,108,111,97,
+    100,101,114,115,32,97,110,100,32,116,104,101,32,112,97,116,
+    104,10,32,32,32,32,32,32,32,32,99,97,108,108,101,100,
+    32,111,110,32,116,104,101,32,99,108,111,115,117,114,101,46,
+    10,10,32,32,32,32,32,32,32,32,73,102,32,116,104,101,
+    32,112,97,116,104,32,99,97,108,108,101,100,32,111,110,32,
+    116,104,101,32,99,108,111,115,117,114,101,32,105,115,32,110,
+    111,116,32,97,32,100,105,114,101,99,116,111,114,121,44,32,
+    73,109,112,111,114,116,69,114,114,111,114,32,105,115,10,32,
+    32,32,32,32,32,32,32,114,97,105,115,101,100,46,10,10,
+    32,32,32,32,32,32,32,32,99,1,0,0,0,0,0,0,
+    0,1,0,0,0,4,0,0,0,19,0,0,0,115,43,0,
+    0,0,116,0,0,124,0,0,131,1,0,115,30,0,116,1,
+    0,100,1,0,100,2,0,124,0,0,131,1,1,130,1,0,
+    136,0,0,124,0,0,136,1,0,140,1,0,83,41,3,122,
+    45,80,97,116,104,32,104,111,111,107,32,102,111,114,32,105,
+    109,112,111,114,116,108,105,98,46,109,97,99,104,105,110,101,
+    114,121,46,70,105,108,101,70,105,110,100,101,114,46,122,30,
+    111,110,108,121,32,100,105,114,101,99,116,111,114,105,101,115,
+    32,97,114,101,32,115,117,112,112,111,114,116,101,100,114,37,
+    0,0,0,41,2,114,48,0,0,0,114,109,0,0,0,41,
+    1,114,37,0,0,0,41,2,114,173,0,0,0,114,14,1,
+    0,0,114,4,0,0,0,114,6,0,0,0,218,24,112,97,
+    116,104,95,104,111,111,107,95,102,111,114,95,70,105,108,101,
+    70,105,110,100,101,114,53,5,0,0,115,6,0,0,0,0,
+    2,12,1,18,1,122,54,70,105,108,101,70,105,110,100,101,
+    114,46,112,97,116,104,95,104,111,111,107,46,60,108,111,99,
+    97,108,115,62,46,112,97,116,104,95,104,111,111,107,95,102,
+    111,114,95,70,105,108,101,70,105,110,100,101,114,114,4,0,
+    0,0,41,3,114,173,0,0,0,114,14,1,0,0,114,20,
+    1,0,0,114,4,0,0,0,41,2,114,173,0,0,0,114,
+    14,1,0,0,114,6,0,0,0,218,9,112,97,116,104,95,
+    104,111,111,107,43,5,0,0,115,4,0,0,0,0,10,21,
+    6,122,20,70,105,108,101,70,105,110,100,101,114,46,112,97,
+    116,104,95,104,111,111,107,99,1,0,0,0,0,0,0,0,
+    1,0,0,0,2,0,0,0,67,0,0,0,115,16,0,0,
+    0,100,1,0,106,0,0,124,0,0,106,1,0,131,1,0,
+    83,41,2,78,122,16,70,105,108,101,70,105,110,100,101,114,
+    40,123,33,114,125,41,41,2,114,49,0,0,0,114,37,0,
+    0,0,41,1,114,110,0,0,0,114,4,0,0,0,114,4,
+    0,0,0,114,6,0,0,0,114,246,0,0,0,61,5,0,
+    0,115,2,0,0,0,0,1,122,19,70,105,108,101,70,105,
+    110,100,101,114,46,95,95,114,101,112,114,95,95,41,15,114,
+    114,0,0,0,114,113,0,0,0,114,115,0,0,0,114,116,
+    0,0,0,114,187,0,0,0,114,252,0,0,0,114,132,0,
+    0,0,114,184,0,0,0,114,126,0,0,0,114,7,1,0,
+    0,114,183,0,0,0,114,15,1,0,0,114,185,0,0,0,
+    114,21,1,0,0,114,246,0,0,0,114,4,0,0,0,114,
+    4,0,0,0,114,4,0,0,0,114,6,0,0,0,114,8,
+    1,0,0,177,4,0,0,115,20,0,0,0,12,7,6,2,
+    12,14,12,4,6,2,12,12,12,5,15,45,12,31,18,18,
+    114,8,1,0,0,99,4,0,0,0,0,0,0,0,6,0,
+    0,0,11,0,0,0,67,0,0,0,115,195,0,0,0,124,
+    0,0,106,0,0,100,1,0,131,1,0,125,4,0,124,0,
+    0,106,0,0,100,2,0,131,1,0,125,5,0,124,4,0,
+    115,99,0,124,5,0,114,54,0,124,5,0,106,1,0,125,
+    4,0,110,45,0,124,2,0,124,3,0,107,2,0,114,84,
+    0,116,2,0,124,1,0,124,2,0,131,2,0,125,4,0,
+    110,15,0,116,3,0,124,1,0,124,2,0,131,2,0,125,
+    4,0,124,5,0,115,126,0,116,4,0,124,1,0,124,2,
+    0,100,3,0,124,4,0,131,2,1,125,5,0,121,44,0,
+    124,5,0,124,0,0,100,2,0,60,124,4,0,124,0,0,
+    100,1,0,60,124,2,0,124,0,0,100,4,0,60,124,3,
+    0,124,0,0,100,5,0,60,87,110,18,0,4,116,5,0,
+    107,10,0,114,190,0,1,1,1,89,110,1,0,88,100,0,
+    0,83,41,6,78,218,10,95,95,108,111,97,100,101,114,95,
+    95,218,8,95,95,115,112,101,99,95,95,114,129,0,0,0,
+    90,8,95,95,102,105,108,101,95,95,90,10,95,95,99,97,
+    99,104,101,100,95,95,41,6,218,3,103,101,116,114,129,0,
+    0,0,114,225,0,0,0,114,220,0,0,0,114,170,0,0,
+    0,218,9,69,120,99,101,112,116,105,111,110,41,6,90,2,
+    110,115,114,108,0,0,0,90,8,112,97,116,104,110,97,109,
+    101,90,9,99,112,97,116,104,110,97,109,101,114,129,0,0,
+    0,114,167,0,0,0,114,4,0,0,0,114,4,0,0,0,
+    114,6,0,0,0,218,14,95,102,105,120,95,117,112,95,109,
+    111,100,117,108,101,67,5,0,0,115,34,0,0,0,0,2,
+    15,1,15,1,6,1,6,1,12,1,12,1,18,2,15,1,
+    6,1,21,1,3,1,10,1,10,1,10,1,14,1,13,2,
+    114,26,1,0,0,99,0,0,0,0,0,0,0,0,3,0,
+    0,0,3,0,0,0,67,0,0,0,115,55,0,0,0,116,
+    0,0,116,1,0,106,2,0,131,0,0,102,2,0,125,0,
+    0,116,3,0,116,4,0,102,2,0,125,1,0,116,5,0,
+    116,6,0,102,2,0,125,2,0,124,0,0,124,1,0,124,
+    2,0,103,3,0,83,41,1,122,95,82,101,116,117,114,110,
+    115,32,97,32,108,105,115,116,32,111,102,32,102,105,108,101,
+    45,98,97,115,101,100,32,109,111,100,117,108,101,32,108,111,
+    97,100,101,114,115,46,10,10,32,32,32,32,69,97,99,104,
+    32,105,116,101,109,32,105,115,32,97,32,116,117,112,108,101,
+    32,40,108,111,97,100,101,114,44,32,115,117,102,102,105,120,
+    101,115,41,46,10,32,32,32,32,41,7,114,226,0,0,0,
+    114,148,0,0,0,218,18,101,120,116,101,110,115,105,111,110,
+    95,115,117,102,102,105,120,101,115,114,220,0,0,0,114,86,
+    0,0,0,114,225,0,0,0,114,76,0,0,0,41,3,90,
+    10,101,120,116,101,110,115,105,111,110,115,90,6,115,111,117,
+    114,99,101,90,8,98,121,116,101,99,111,100,101,114,4,0,
+    0,0,114,4,0,0,0,114,6,0,0,0,114,164,0,0,
+    0,90,5,0,0,115,8,0,0,0,0,5,18,1,12,1,
+    12,1,114,164,0,0,0,99,1,0,0,0,0,0,0,0,
+    12,0,0,0,12,0,0,0,67,0,0,0,115,70,2,0,
+    0,124,0,0,97,0,0,116,0,0,106,1,0,97,1,0,
+    116,0,0,106,2,0,97,2,0,116,1,0,106,3,0,116,
+    4,0,25,125,1,0,120,76,0,100,26,0,68,93,68,0,
+    125,2,0,124,2,0,116,1,0,106,3,0,107,7,0,114,
+    83,0,116,0,0,106,5,0,124,2,0,131,1,0,125,3,
+    0,110,13,0,116,1,0,106,3,0,124,2,0,25,125,3,
+    0,116,6,0,124,1,0,124,2,0,124,3,0,131,3,0,
+    1,113,44,0,87,100,5,0,100,6,0,103,1,0,102,2,
+    0,100,7,0,100,8,0,100,6,0,103,2,0,102,2,0,
+    102,2,0,125,4,0,120,149,0,124,4,0,68,93,129,0,
+    92,2,0,125,5,0,125,6,0,116,7,0,100,9,0,100,
+    10,0,132,0,0,124,6,0,68,131,1,0,131,1,0,115,
+    199,0,116,8,0,130,1,0,124,6,0,100,11,0,25,125,
+    7,0,124,5,0,116,1,0,106,3,0,107,6,0,114,241,
+    0,116,1,0,106,3,0,124,5,0,25,125,8,0,80,113,
+    156,0,121,20,0,116,0,0,106,5,0,124,5,0,131,1,
+    0,125,8,0,80,87,113,156,0,4,116,9,0,107,10,0,
+    114,28,1,1,1,1,119,156,0,89,113,156,0,88,113,156,
+    0,87,116,9,0,100,12,0,131,1,0,130,1,0,116,6,
+    0,124,1,0,100,13,0,124,8,0,131,3,0,1,116,6,
+    0,124,1,0,100,14,0,124,7,0,131,3,0,1,116,6,
+    0,124,1,0,100,15,0,100,16,0,106,10,0,124,6,0,
+    131,1,0,131,3,0,1,121,19,0,116,0,0,106,5,0,
+    100,17,0,131,1,0,125,9,0,87,110,24,0,4,116,9,
+    0,107,10,0,114,147,1,1,1,1,100,18,0,125,9,0,
+    89,110,1,0,88,116,6,0,124,1,0,100,17,0,124,9,
+    0,131,3,0,1,116,0,0,106,5,0,100,19,0,131,1,
+    0,125,10,0,116,6,0,124,1,0,100,19,0,124,10,0,
+    131,3,0,1,124,5,0,100,7,0,107,2,0,114,238,1,
+    116,0,0,106,5,0,100,20,0,131,1,0,125,11,0,116,
+    6,0,124,1,0,100,21,0,124,11,0,131,3,0,1,116,
+    6,0,124,1,0,100,22,0,116,11,0,131,0,0,131,3,
+    0,1,116,12,0,106,13,0,116,2,0,106,14,0,131,0,
+    0,131,1,0,1,124,5,0,100,7,0,107,2,0,114,66,
+    2,116,15,0,106,16,0,100,23,0,131,1,0,1,100,24,
+    0,116,12,0,107,6,0,114,66,2,100,25,0,116,17,0,
+    95,18,0,100,18,0,83,41,27,122,205,83,101,116,117,112,
+    32,116,104,101,32,112,97,116,104,45,98,97,115,101,100,32,
+    105,109,112,111,114,116,101,114,115,32,102,111,114,32,105,109,
+    112,111,114,116,108,105,98,32,98,121,32,105,109,112,111,114,
+    116,105,110,103,32,110,101,101,100,101,100,10,32,32,32,32,
+    98,117,105,108,116,45,105,110,32,109,111,100,117,108,101,115,
+    32,97,110,100,32,105,110,106,101,99,116,105,110,103,32,116,
+    104,101,109,32,105,110,116,111,32,116,104,101,32,103,108,111,
+    98,97,108,32,110,97,109,101,115,112,97,99,101,46,10,10,
+    32,32,32,32,79,116,104,101,114,32,99,111,109,112,111,110,
+    101,110,116,115,32,97,114,101,32,101,120,116,114,97,99,116,
+    101,100,32,102,114,111,109,32,116,104,101,32,99,111,114,101,
+    32,98,111,111,116,115,116,114,97,112,32,109,111,100,117,108,
+    101,46,10,10,32,32,32,32,114,51,0,0,0,114,62,0,
+    0,0,218,8,98,117,105,108,116,105,110,115,114,145,0,0,
+    0,90,5,112,111,115,105,120,250,1,47,218,2,110,116,250,
+    1,92,99,1,0,0,0,0,0,0,0,2,0,0,0,3,
+    0,0,0,115,0,0,0,115,33,0,0,0,124,0,0,93,
+    23,0,125,1,0,116,0,0,124,1,0,131,1,0,100,0,
+    0,107,2,0,86,1,113,3,0,100,1,0,83,41,2,114,
+    31,0,0,0,78,41,1,114,33,0,0,0,41,2,114,24,
+    0,0,0,114,79,0,0,0,114,4,0,0,0,114,4,0,
+    0,0,114,6,0,0,0,114,229,0,0,0,126,5,0,0,
+    115,2,0,0,0,6,0,122,25,95,115,101,116,117,112,46,
+    60,108,111,99,97,108,115,62,46,60,103,101,110,101,120,112,
+    114,62,114,61,0,0,0,122,30,105,109,112,111,114,116,108,
+    105,98,32,114,101,113,117,105,114,101,115,32,112,111,115,105,
+    120,32,111,114,32,110,116,114,3,0,0,0,114,27,0,0,
+    0,114,23,0,0,0,114,32,0,0,0,90,7,95,116,104,
+    114,101,97,100,78,90,8,95,119,101,97,107,114,101,102,90,
+    6,119,105,110,114,101,103,114,172,0,0,0,114,7,0,0,
+    0,122,4,46,112,121,119,122,6,95,100,46,112,121,100,84,
+    41,4,114,51,0,0,0,114,62,0,0,0,114,28,1,0,
+    0,114,145,0,0,0,41,19,114,123,0,0,0,114,8,0,
+    0,0,114,148,0,0,0,114,241,0,0,0,114,114,0,0,
+    0,90,18,95,98,117,105,108,116,105,110,95,102,114,111,109,
+    95,110,97,109,101,114,118,0,0,0,218,3,97,108,108,218,
+    14,65,115,115,101,114,116,105,111,110,69,114,114,111,114,114,
+    109,0,0,0,114,28,0,0,0,114,13,0,0,0,114,231,
+    0,0,0,114,152,0,0,0,114,27,1,0,0,114,86,0,
+    0,0,114,166,0,0,0,114,171,0,0,0,114,175,0,0,
+    0,41,12,218,17,95,98,111,111,116,115,116,114,97,112,95,
+    109,111,100,117,108,101,90,11,115,101,108,102,95,109,111,100,
+    117,108,101,90,12,98,117,105,108,116,105,110,95,110,97,109,
+    101,90,14,98,117,105,108,116,105,110,95,109,111,100,117,108,
+    101,90,10,111,115,95,100,101,116,97,105,108,115,90,10,98,
+    117,105,108,116,105,110,95,111,115,114,23,0,0,0,114,27,
+    0,0,0,90,9,111,115,95,109,111,100,117,108,101,90,13,
+    116,104,114,101,97,100,95,109,111,100,117,108,101,90,14,119,
+    101,97,107,114,101,102,95,109,111,100,117,108,101,90,13,119,
+    105,110,114,101,103,95,109,111,100,117,108,101,114,4,0,0,
+    0,114,4,0,0,0,114,6,0,0,0,218,6,95,115,101,
+    116,117,112,101,5,0,0,115,82,0,0,0,0,8,6,1,
+    9,1,9,3,13,1,13,1,15,1,18,2,13,1,20,3,
+    33,1,19,2,31,1,10,1,15,1,13,1,4,2,3,1,
+    15,1,5,1,13,1,12,2,12,1,16,1,16,1,25,3,
+    3,1,19,1,13,2,11,1,16,3,15,1,16,3,12,1,
+    15,1,16,3,19,1,19,1,12,1,13,1,12,1,114,35,
+    1,0,0,99,1,0,0,0,0,0,0,0,2,0,0,0,
+    3,0,0,0,67,0,0,0,115,116,0,0,0,116,0,0,
+    124,0,0,131,1,0,1,116,1,0,131,0,0,125,1,0,
+    116,2,0,106,3,0,106,4,0,116,5,0,106,6,0,124,
+    1,0,140,0,0,103,1,0,131,1,0,1,116,7,0,106,
+    8,0,100,1,0,107,2,0,114,78,0,116,2,0,106,9,
+    0,106,10,0,116,11,0,131,1,0,1,116,2,0,106,9,
+    0,106,10,0,116,12,0,131,1,0,1,116,5,0,124,0,
+    0,95,5,0,116,13,0,124,0,0,95,13,0,100,2,0,
+    83,41,3,122,41,73,110,115,116,97,108,108,32,116,104,101,
+    32,112,97,116,104,45,98,97,115,101,100,32,105,109,112,111,
+    114,116,32,99,111,109,112,111,110,101,110,116,115,46,114,30,
+    1,0,0,78,41,14,114,35,1,0,0,114,164,0,0,0,
+    114,8,0,0,0,114,0,1,0,0,114,152,0,0,0,114,
+    8,1,0,0,114,21,1,0,0,114,3,0,0,0,114,114,
+    0,0,0,218,9,109,101,116,97,95,112,97,116,104,114,166,
+    0,0,0,114,171,0,0,0,114,251,0,0,0,114,220,0,
+    0,0,41,2,114,34,1,0,0,90,17,115,117,112,112,111,
+    114,116,101,100,95,108,111,97,100,101,114,115,114,4,0,0,
+    0,114,4,0,0,0,114,6,0,0,0,218,8,95,105,110,
+    115,116,97,108,108,169,5,0,0,115,16,0,0,0,0,2,
+    10,1,9,1,28,1,15,1,16,1,16,4,9,1,114,37,
+    1,0,0,41,1,114,0,0,0,0,41,2,114,1,0,0,
+    0,114,2,0,0,0,41,62,114,116,0,0,0,114,12,0,
+    0,0,90,37,95,67,65,83,69,95,73,78,83,69,78,83,
+    73,84,73,86,69,95,80,76,65,84,70,79,82,77,83,95,
+    66,89,84,69,83,95,75,69,89,114,11,0,0,0,114,13,
+    0,0,0,114,19,0,0,0,114,21,0,0,0,114,30,0,
+    0,0,114,40,0,0,0,114,41,0,0,0,114,45,0,0,
+    0,114,46,0,0,0,114,48,0,0,0,114,57,0,0,0,
+    218,4,116,121,112,101,218,8,95,95,99,111,100,101,95,95,
+    114,147,0,0,0,114,17,0,0,0,114,137,0,0,0,114,
+    16,0,0,0,114,20,0,0,0,90,17,95,82,65,87,95,
+    77,65,71,73,67,95,78,85,77,66,69,82,90,4,95,109,
+    115,103,218,11,83,121,115,116,101,109,69,114,114,111,114,114,
+    138,0,0,0,114,75,0,0,0,114,74,0,0,0,114,86,
+    0,0,0,114,76,0,0,0,90,23,68,69,66,85,71,95,
+    66,89,84,69,67,79,68,69,95,83,85,70,70,73,88,69,
+    83,90,27,79,80,84,73,77,73,90,69,68,95,66,89,84,
+    69,67,79,68,69,95,83,85,70,70,73,88,69,83,114,81,
+    0,0,0,114,87,0,0,0,114,93,0,0,0,114,97,0,
+    0,0,114,99,0,0,0,114,107,0,0,0,114,125,0,0,
+    0,114,132,0,0,0,114,144,0,0,0,114,150,0,0,0,
+    114,153,0,0,0,114,158,0,0,0,218,6,111,98,106,101,
+    99,116,114,165,0,0,0,114,170,0,0,0,114,171,0,0,
+    0,114,186,0,0,0,114,196,0,0,0,114,212,0,0,0,
+    114,220,0,0,0,114,225,0,0,0,114,231,0,0,0,114,
+    226,0,0,0,114,232,0,0,0,114,249,0,0,0,114,251,
+    0,0,0,114,8,1,0,0,114,26,1,0,0,114,164,0,
+    0,0,114,35,1,0,0,114,37,1,0,0,114,4,0,0,
     0,114,4,0,0,0,114,4,0,0,0,114,6,0,0,0,
-    114,182,0,0,0,199,4,0,0,115,68,0,0,0,0,3,
-    6,1,19,1,3,1,34,1,13,1,11,1,15,1,10,1,
-    9,2,9,1,9,1,15,2,9,1,6,2,12,1,18,1,
-    22,1,10,1,15,1,12,1,32,4,12,2,22,1,22,1,
-    25,1,16,1,12,1,29,1,6,1,19,1,18,1,12,1,
-    4,1,122,20,70,105,108,101,70,105,110,100,101,114,46,102,
-    105,110,100,95,115,112,101,99,99,1,0,0,0,0,0,0,
-    0,9,0,0,0,13,0,0,0,67,0,0,0,115,11,1,
-    0,0,124,0,0,106,0,0,125,1,0,121,31,0,116,1,
-    0,106,2,0,124,1,0,112,33,0,116,1,0,106,3,0,
-    131,0,0,131,1,0,125,2,0,87,110,33,0,4,116,4,
-    0,116,5,0,116,6,0,102,3,0,107,10,0,114,75,0,
-    1,1,1,103,0,0,125,2,0,89,110,1,0,88,116,7,
-    0,106,8,0,106,9,0,100,1,0,131,1,0,115,112,0,
-    116,10,0,124,2,0,131,1,0,124,0,0,95,11,0,110,
-    111,0,116,10,0,131,0,0,125,3,0,120,90,0,124,2,
-    0,68,93,82,0,125,4,0,124,4,0,106,12,0,100,2,
-    0,131,1,0,92,3,0,125,5,0,125,6,0,125,7,0,
-    124,6,0,114,191,0,100,3,0,106,13,0,124,5,0,124,
-    7,0,106,14,0,131,0,0,131,2,0,125,8,0,110,6,
-    0,124,5,0,125,8,0,124,3,0,106,15,0,124,8,0,
-    131,1,0,1,113,128,0,87,124,3,0,124,0,0,95,11,
-    0,116,7,0,106,8,0,106,9,0,116,16,0,131,1,0,
-    114,7,1,100,4,0,100,5,0,132,0,0,124,2,0,68,
-    131,1,0,124,0,0,95,17,0,100,6,0,83,41,7,122,
-    68,70,105,108,108,32,116,104,101,32,99,97,99,104,101,32,
-    111,102,32,112,111,116,101,110,116,105,97,108,32,109,111,100,
-    117,108,101,115,32,97,110,100,32,112,97,99,107,97,103,101,
-    115,32,102,111,114,32,116,104,105,115,32,100,105,114,101,99,
-    116,111,114,121,46,114,0,0,0,0,114,60,0,0,0,122,
-    5,123,125,46,123,125,99,1,0,0,0,0,0,0,0,2,
-    0,0,0,3,0,0,0,83,0,0,0,115,28,0,0,0,
-    104,0,0,124,0,0,93,18,0,125,1,0,124,1,0,106,
-    0,0,131,0,0,146,2,0,113,6,0,83,114,4,0,0,
-    0,41,1,114,90,0,0,0,41,2,114,24,0,0,0,90,
-    2,102,110,114,4,0,0,0,114,4,0,0,0,114,6,0,
-    0,0,250,9,60,115,101,116,99,111,109,112,62,17,5,0,
-    0,115,2,0,0,0,9,0,122,41,70,105,108,101,70,105,
-    110,100,101,114,46,95,102,105,108,108,95,99,97,99,104,101,
-    46,60,108,111,99,97,108,115,62,46,60,115,101,116,99,111,
-    109,112,62,78,41,18,114,37,0,0,0,114,3,0,0,0,
-    90,7,108,105,115,116,100,105,114,114,47,0,0,0,114,1,
-    1,0,0,218,15,80,101,114,109,105,115,115,105,111,110,69,
-    114,114,111,114,218,18,78,111,116,65,68,105,114,101,99,116,
-    111,114,121,69,114,114,111,114,114,8,0,0,0,114,9,0,
-    0,0,114,10,0,0,0,114,10,1,0,0,114,11,1,0,
-    0,114,85,0,0,0,114,49,0,0,0,114,90,0,0,0,
-    218,3,97,100,100,114,11,0,0,0,114,12,1,0,0,41,
-    9,114,110,0,0,0,114,37,0,0,0,90,8,99,111,110,
-    116,101,110,116,115,90,21,108,111,119,101,114,95,115,117,102,
-    102,105,120,95,99,111,110,116,101,110,116,115,114,246,0,0,
-    0,114,108,0,0,0,114,238,0,0,0,114,226,0,0,0,
-    90,8,110,101,119,95,110,97,109,101,114,4,0,0,0,114,
-    4,0,0,0,114,6,0,0,0,114,14,1,0,0,244,4,
-    0,0,115,34,0,0,0,0,2,9,1,3,1,31,1,22,
-    3,11,3,18,1,18,7,9,1,13,1,24,1,6,1,27,
-    2,6,1,17,1,9,1,18,1,122,22,70,105,108,101,70,
-    105,110,100,101,114,46,95,102,105,108,108,95,99,97,99,104,
-    101,99,1,0,0,0,0,0,0,0,3,0,0,0,3,0,
-    0,0,7,0,0,0,115,25,0,0,0,135,0,0,135,1,
-    0,102,2,0,100,1,0,100,2,0,134,0,0,125,2,0,
-    124,2,0,83,41,3,97,20,1,0,0,65,32,99,108,97,
-    115,115,32,109,101,116,104,111,100,32,119,104,105,99,104,32,
-    114,101,116,117,114,110,115,32,97,32,99,108,111,115,117,114,
-    101,32,116,111,32,117,115,101,32,111,110,32,115,121,115,46,
-    112,97,116,104,95,104,111,111,107,10,32,32,32,32,32,32,
-    32,32,119,104,105,99,104,32,119,105,108,108,32,114,101,116,
-    117,114,110,32,97,110,32,105,110,115,116,97,110,99,101,32,
-    117,115,105,110,103,32,116,104,101,32,115,112,101,99,105,102,
-    105,101,100,32,108,111,97,100,101,114,115,32,97,110,100,32,
-    116,104,101,32,112,97,116,104,10,32,32,32,32,32,32,32,
-    32,99,97,108,108,101,100,32,111,110,32,116,104,101,32,99,
-    108,111,115,117,114,101,46,10,10,32,32,32,32,32,32,32,
-    32,73,102,32,116,104,101,32,112,97,116,104,32,99,97,108,
-    108,101,100,32,111,110,32,116,104,101,32,99,108,111,115,117,
-    114,101,32,105,115,32,110,111,116,32,97,32,100,105,114,101,
-    99,116,111,114,121,44,32,73,109,112,111,114,116,69,114,114,
-    111,114,32,105,115,10,32,32,32,32,32,32,32,32,114,97,
-    105,115,101,100,46,10,10,32,32,32,32,32,32,32,32,99,
-    1,0,0,0,0,0,0,0,1,0,0,0,4,0,0,0,
-    19,0,0,0,115,43,0,0,0,116,0,0,124,0,0,131,
-    1,0,115,30,0,116,1,0,100,1,0,100,2,0,124,0,
-    0,131,1,1,130,1,0,136,0,0,124,0,0,136,1,0,
-    140,1,0,83,41,3,122,45,80,97,116,104,32,104,111,111,
-    107,32,102,111,114,32,105,109,112,111,114,116,108,105,98,46,
-    109,97,99,104,105,110,101,114,121,46,70,105,108,101,70,105,
-    110,100,101,114,46,122,30,111,110,108,121,32,100,105,114,101,
-    99,116,111,114,105,101,115,32,97,114,101,32,115,117,112,112,
-    111,114,116,101,100,114,37,0,0,0,41,2,114,48,0,0,
-    0,114,109,0,0,0,41,1,114,37,0,0,0,41,2,114,
-    172,0,0,0,114,13,1,0,0,114,4,0,0,0,114,6,
-    0,0,0,218,24,112,97,116,104,95,104,111,111,107,95,102,
-    111,114,95,70,105,108,101,70,105,110,100,101,114,29,5,0,
-    0,115,6,0,0,0,0,2,12,1,18,1,122,54,70,105,
-    108,101,70,105,110,100,101,114,46,112,97,116,104,95,104,111,
-    111,107,46,60,108,111,99,97,108,115,62,46,112,97,116,104,
-    95,104,111,111,107,95,102,111,114,95,70,105,108,101,70,105,
-    110,100,101,114,114,4,0,0,0,41,3,114,172,0,0,0,
-    114,13,1,0,0,114,19,1,0,0,114,4,0,0,0,41,
-    2,114,172,0,0,0,114,13,1,0,0,114,6,0,0,0,
-    218,9,112,97,116,104,95,104,111,111,107,19,5,0,0,115,
-    4,0,0,0,0,10,21,6,122,20,70,105,108,101,70,105,
-    110,100,101,114,46,112,97,116,104,95,104,111,111,107,99,1,
-    0,0,0,0,0,0,0,1,0,0,0,2,0,0,0,67,
-    0,0,0,115,16,0,0,0,100,1,0,106,0,0,124,0,
-    0,106,1,0,131,1,0,83,41,2,78,122,16,70,105,108,
-    101,70,105,110,100,101,114,40,123,33,114,125,41,41,2,114,
-    49,0,0,0,114,37,0,0,0,41,1,114,110,0,0,0,
-    114,4,0,0,0,114,4,0,0,0,114,6,0,0,0,114,
-    245,0,0,0,37,5,0,0,115,2,0,0,0,0,1,122,
-    19,70,105,108,101,70,105,110,100,101,114,46,95,95,114,101,
-    112,114,95,95,41,15,114,114,0,0,0,114,113,0,0,0,
-    114,115,0,0,0,114,116,0,0,0,114,186,0,0,0,114,
-    251,0,0,0,114,132,0,0,0,114,183,0,0,0,114,126,
-    0,0,0,114,6,1,0,0,114,182,0,0,0,114,14,1,
-    0,0,114,184,0,0,0,114,20,1,0,0,114,245,0,0,
-    0,114,4,0,0,0,114,4,0,0,0,114,4,0,0,0,
-    114,6,0,0,0,114,7,1,0,0,153,4,0,0,115,20,
-    0,0,0,12,7,6,2,12,14,12,4,6,2,12,12,12,
-    5,15,45,12,31,18,18,114,7,1,0,0,99,4,0,0,
-    0,0,0,0,0,6,0,0,0,11,0,0,0,67,0,0,
-    0,115,195,0,0,0,124,0,0,106,0,0,100,1,0,131,
-    1,0,125,4,0,124,0,0,106,0,0,100,2,0,131,1,
-    0,125,5,0,124,4,0,115,99,0,124,5,0,114,54,0,
-    124,5,0,106,1,0,125,4,0,110,45,0,124,2,0,124,
-    3,0,107,2,0,114,84,0,116,2,0,124,1,0,124,2,
-    0,131,2,0,125,4,0,110,15,0,116,3,0,124,1,0,
-    124,2,0,131,2,0,125,4,0,124,5,0,115,126,0,116,
-    4,0,124,1,0,124,2,0,100,3,0,124,4,0,131,2,
-    1,125,5,0,121,44,0,124,5,0,124,0,0,100,2,0,
-    60,124,4,0,124,0,0,100,1,0,60,124,2,0,124,0,
-    0,100,4,0,60,124,3,0,124,0,0,100,5,0,60,87,
-    110,18,0,4,116,5,0,107,10,0,114,190,0,1,1,1,
-    89,110,1,0,88,100,0,0,83,41,6,78,218,10,95,95,
-    108,111,97,100,101,114,95,95,218,8,95,95,115,112,101,99,
-    95,95,114,129,0,0,0,90,8,95,95,102,105,108,101,95,
-    95,90,10,95,95,99,97,99,104,101,100,95,95,41,6,218,
-    3,103,101,116,114,129,0,0,0,114,224,0,0,0,114,219,
-    0,0,0,114,169,0,0,0,218,9,69,120,99,101,112,116,
-    105,111,110,41,6,90,2,110,115,114,108,0,0,0,90,8,
-    112,97,116,104,110,97,109,101,90,9,99,112,97,116,104,110,
-    97,109,101,114,129,0,0,0,114,166,0,0,0,114,4,0,
-    0,0,114,4,0,0,0,114,6,0,0,0,218,14,95,102,
-    105,120,95,117,112,95,109,111,100,117,108,101,43,5,0,0,
-    115,34,0,0,0,0,2,15,1,15,1,6,1,6,1,12,
-    1,12,1,18,2,15,1,6,1,21,1,3,1,10,1,10,
-    1,10,1,14,1,13,2,114,25,1,0,0,99,0,0,0,
-    0,0,0,0,0,3,0,0,0,3,0,0,0,67,0,0,
-    0,115,55,0,0,0,116,0,0,116,1,0,106,2,0,131,
-    0,0,102,2,0,125,0,0,116,3,0,116,4,0,102,2,
-    0,125,1,0,116,5,0,116,6,0,102,2,0,125,2,0,
-    124,0,0,124,1,0,124,2,0,103,3,0,83,41,1,122,
-    95,82,101,116,117,114,110,115,32,97,32,108,105,115,116,32,
-    111,102,32,102,105,108,101,45,98,97,115,101,100,32,109,111,
-    100,117,108,101,32,108,111,97,100,101,114,115,46,10,10,32,
-    32,32,32,69,97,99,104,32,105,116,101,109,32,105,115,32,
-    97,32,116,117,112,108,101,32,40,108,111,97,100,101,114,44,
-    32,115,117,102,102,105,120,101,115,41,46,10,32,32,32,32,
-    41,7,114,225,0,0,0,114,147,0,0,0,218,18,101,120,
-    116,101,110,115,105,111,110,95,115,117,102,102,105,120,101,115,
-    114,219,0,0,0,114,86,0,0,0,114,224,0,0,0,114,
-    76,0,0,0,41,3,90,10,101,120,116,101,110,115,105,111,
-    110,115,90,6,115,111,117,114,99,101,90,8,98,121,116,101,
-    99,111,100,101,114,4,0,0,0,114,4,0,0,0,114,6,
-    0,0,0,114,163,0,0,0,66,5,0,0,115,8,0,0,
-    0,0,5,18,1,12,1,12,1,114,163,0,0,0,99,1,
-    0,0,0,0,0,0,0,12,0,0,0,12,0,0,0,67,
-    0,0,0,115,70,2,0,0,124,0,0,97,0,0,116,0,
-    0,106,1,0,97,1,0,116,0,0,106,2,0,97,2,0,
-    116,1,0,106,3,0,116,4,0,25,125,1,0,120,76,0,
-    100,26,0,68,93,68,0,125,2,0,124,2,0,116,1,0,
-    106,3,0,107,7,0,114,83,0,116,0,0,106,5,0,124,
-    2,0,131,1,0,125,3,0,110,13,0,116,1,0,106,3,
-    0,124,2,0,25,125,3,0,116,6,0,124,1,0,124,2,
-    0,124,3,0,131,3,0,1,113,44,0,87,100,5,0,100,
-    6,0,103,1,0,102,2,0,100,7,0,100,8,0,100,6,
-    0,103,2,0,102,2,0,102,2,0,125,4,0,120,149,0,
-    124,4,0,68,93,129,0,92,2,0,125,5,0,125,6,0,
-    116,7,0,100,9,0,100,10,0,132,0,0,124,6,0,68,
-    131,1,0,131,1,0,115,199,0,116,8,0,130,1,0,124,
-    6,0,100,11,0,25,125,7,0,124,5,0,116,1,0,106,
-    3,0,107,6,0,114,241,0,116,1,0,106,3,0,124,5,
-    0,25,125,8,0,80,113,156,0,121,20,0,116,0,0,106,
-    5,0,124,5,0,131,1,0,125,8,0,80,87,113,156,0,
-    4,116,9,0,107,10,0,114,28,1,1,1,1,119,156,0,
-    89,113,156,0,88,113,156,0,87,116,9,0,100,12,0,131,
-    1,0,130,1,0,116,6,0,124,1,0,100,13,0,124,8,
-    0,131,3,0,1,116,6,0,124,1,0,100,14,0,124,7,
-    0,131,3,0,1,116,6,0,124,1,0,100,15,0,100,16,
-    0,106,10,0,124,6,0,131,1,0,131,3,0,1,121,19,
-    0,116,0,0,106,5,0,100,17,0,131,1,0,125,9,0,
-    87,110,24,0,4,116,9,0,107,10,0,114,147,1,1,1,
-    1,100,18,0,125,9,0,89,110,1,0,88,116,6,0,124,
-    1,0,100,17,0,124,9,0,131,3,0,1,116,0,0,106,
-    5,0,100,19,0,131,1,0,125,10,0,116,6,0,124,1,
-    0,100,19,0,124,10,0,131,3,0,1,124,5,0,100,7,
-    0,107,2,0,114,238,1,116,0,0,106,5,0,100,20,0,
-    131,1,0,125,11,0,116,6,0,124,1,0,100,21,0,124,
-    11,0,131,3,0,1,116,6,0,124,1,0,100,22,0,116,
-    11,0,131,0,0,131,3,0,1,116,12,0,106,13,0,116,
-    2,0,106,14,0,131,0,0,131,1,0,1,124,5,0,100,
-    7,0,107,2,0,114,66,2,116,15,0,106,16,0,100,23,
-    0,131,1,0,1,100,24,0,116,12,0,107,6,0,114,66,
-    2,100,25,0,116,17,0,95,18,0,100,18,0,83,41,27,
-    122,205,83,101,116,117,112,32,116,104,101,32,112,97,116,104,
-    45,98,97,115,101,100,32,105,109,112,111,114,116,101,114,115,
-    32,102,111,114,32,105,109,112,111,114,116,108,105,98,32,98,
-    121,32,105,109,112,111,114,116,105,110,103,32,110,101,101,100,
-    101,100,10,32,32,32,32,98,117,105,108,116,45,105,110,32,
-    109,111,100,117,108,101,115,32,97,110,100,32,105,110,106,101,
-    99,116,105,110,103,32,116,104,101,109,32,105,110,116,111,32,
-    116,104,101,32,103,108,111,98,97,108,32,110,97,109,101,115,
-    112,97,99,101,46,10,10,32,32,32,32,79,116,104,101,114,
-    32,99,111,109,112,111,110,101,110,116,115,32,97,114,101,32,
-    101,120,116,114,97,99,116,101,100,32,102,114,111,109,32,116,
-    104,101,32,99,111,114,101,32,98,111,111,116,115,116,114,97,
-    112,32,109,111,100,117,108,101,46,10,10,32,32,32,32,114,
-    51,0,0,0,114,62,0,0,0,218,8,98,117,105,108,116,
-    105,110,115,114,144,0,0,0,90,5,112,111,115,105,120,250,
-    1,47,218,2,110,116,250,1,92,99,1,0,0,0,0,0,
-    0,0,2,0,0,0,3,0,0,0,115,0,0,0,115,33,
-    0,0,0,124,0,0,93,23,0,125,1,0,116,0,0,124,
-    1,0,131,1,0,100,0,0,107,2,0,86,1,113,3,0,
-    100,1,0,83,41,2,114,31,0,0,0,78,41,1,114,33,
-    0,0,0,41,2,114,24,0,0,0,114,79,0,0,0,114,
-    4,0,0,0,114,4,0,0,0,114,6,0,0,0,114,228,
-    0,0,0,102,5,0,0,115,2,0,0,0,6,0,122,25,
-    95,115,101,116,117,112,46,60,108,111,99,97,108,115,62,46,
-    60,103,101,110,101,120,112,114,62,114,61,0,0,0,122,30,
-    105,109,112,111,114,116,108,105,98,32,114,101,113,117,105,114,
-    101,115,32,112,111,115,105,120,32,111,114,32,110,116,114,3,
-    0,0,0,114,27,0,0,0,114,23,0,0,0,114,32,0,
-    0,0,90,7,95,116,104,114,101,97,100,78,90,8,95,119,
-    101,97,107,114,101,102,90,6,119,105,110,114,101,103,114,171,
-    0,0,0,114,7,0,0,0,122,4,46,112,121,119,122,6,
-    95,100,46,112,121,100,84,41,4,114,51,0,0,0,114,62,
-    0,0,0,114,27,1,0,0,114,144,0,0,0,41,19,114,
-    123,0,0,0,114,8,0,0,0,114,147,0,0,0,114,240,
-    0,0,0,114,114,0,0,0,90,18,95,98,117,105,108,116,
-    105,110,95,102,114,111,109,95,110,97,109,101,114,118,0,0,
-    0,218,3,97,108,108,218,14,65,115,115,101,114,116,105,111,
-    110,69,114,114,111,114,114,109,0,0,0,114,28,0,0,0,
-    114,13,0,0,0,114,230,0,0,0,114,151,0,0,0,114,
-    26,1,0,0,114,86,0,0,0,114,165,0,0,0,114,170,
-    0,0,0,114,174,0,0,0,41,12,218,17,95,98,111,111,
-    116,115,116,114,97,112,95,109,111,100,117,108,101,90,11,115,
-    101,108,102,95,109,111,100,117,108,101,90,12,98,117,105,108,
-    116,105,110,95,110,97,109,101,90,14,98,117,105,108,116,105,
-    110,95,109,111,100,117,108,101,90,10,111,115,95,100,101,116,
-    97,105,108,115,90,10,98,117,105,108,116,105,110,95,111,115,
-    114,23,0,0,0,114,27,0,0,0,90,9,111,115,95,109,
-    111,100,117,108,101,90,13,116,104,114,101,97,100,95,109,111,
-    100,117,108,101,90,14,119,101,97,107,114,101,102,95,109,111,
-    100,117,108,101,90,13,119,105,110,114,101,103,95,109,111,100,
-    117,108,101,114,4,0,0,0,114,4,0,0,0,114,6,0,
-    0,0,218,6,95,115,101,116,117,112,77,5,0,0,115,82,
-    0,0,0,0,8,6,1,9,1,9,3,13,1,13,1,15,
-    1,18,2,13,1,20,3,33,1,19,2,31,1,10,1,15,
-    1,13,1,4,2,3,1,15,1,5,1,13,1,12,2,12,
-    1,16,1,16,1,25,3,3,1,19,1,13,2,11,1,16,
-    3,15,1,16,3,12,1,15,1,16,3,19,1,19,1,12,
-    1,13,1,12,1,114,34,1,0,0,99,1,0,0,0,0,
-    0,0,0,2,0,0,0,3,0,0,0,67,0,0,0,115,
-    116,0,0,0,116,0,0,124,0,0,131,1,0,1,116,1,
-    0,131,0,0,125,1,0,116,2,0,106,3,0,106,4,0,
-    116,5,0,106,6,0,124,1,0,140,0,0,103,1,0,131,
-    1,0,1,116,7,0,106,8,0,100,1,0,107,2,0,114,
-    78,0,116,2,0,106,9,0,106,10,0,116,11,0,131,1,
-    0,1,116,2,0,106,9,0,106,10,0,116,12,0,131,1,
-    0,1,116,5,0,124,0,0,95,5,0,116,13,0,124,0,
-    0,95,13,0,100,2,0,83,41,3,122,41,73,110,115,116,
-    97,108,108,32,116,104,101,32,112,97,116,104,45,98,97,115,
-    101,100,32,105,109,112,111,114,116,32,99,111,109,112,111,110,
-    101,110,116,115,46,114,29,1,0,0,78,41,14,114,34,1,
-    0,0,114,163,0,0,0,114,8,0,0,0,114,255,0,0,
-    0,114,151,0,0,0,114,7,1,0,0,114,20,1,0,0,
-    114,3,0,0,0,114,114,0,0,0,218,9,109,101,116,97,
-    95,112,97,116,104,114,165,0,0,0,114,170,0,0,0,114,
-    250,0,0,0,114,219,0,0,0,41,2,114,33,1,0,0,
-    90,17,115,117,112,112,111,114,116,101,100,95,108,111,97,100,
-    101,114,115,114,4,0,0,0,114,4,0,0,0,114,6,0,
-    0,0,218,8,95,105,110,115,116,97,108,108,145,5,0,0,
-    115,16,0,0,0,0,2,10,1,9,1,28,1,15,1,16,
-    1,16,4,9,1,114,36,1,0,0,41,1,114,0,0,0,
-    0,41,2,114,1,0,0,0,114,2,0,0,0,41,59,114,
-    116,0,0,0,114,12,0,0,0,90,37,95,67,65,83,69,
-    95,73,78,83,69,78,83,73,84,73,86,69,95,80,76,65,
-    84,70,79,82,77,83,95,66,89,84,69,83,95,75,69,89,
-    114,11,0,0,0,114,13,0,0,0,114,19,0,0,0,114,
-    21,0,0,0,114,30,0,0,0,114,40,0,0,0,114,41,
-    0,0,0,114,45,0,0,0,114,46,0,0,0,114,48,0,
-    0,0,114,57,0,0,0,218,4,116,121,112,101,218,8,95,
-    95,99,111,100,101,95,95,114,146,0,0,0,114,17,0,0,
-    0,114,137,0,0,0,114,16,0,0,0,114,20,0,0,0,
-    90,17,95,82,65,87,95,77,65,71,73,67,95,78,85,77,
-    66,69,82,114,75,0,0,0,114,74,0,0,0,114,86,0,
-    0,0,114,76,0,0,0,90,23,68,69,66,85,71,95,66,
-    89,84,69,67,79,68,69,95,83,85,70,70,73,88,69,83,
-    90,27,79,80,84,73,77,73,90,69,68,95,66,89,84,69,
-    67,79,68,69,95,83,85,70,70,73,88,69,83,114,81,0,
-    0,0,114,87,0,0,0,114,93,0,0,0,114,97,0,0,
-    0,114,99,0,0,0,114,107,0,0,0,114,125,0,0,0,
-    114,132,0,0,0,114,143,0,0,0,114,149,0,0,0,114,
-    152,0,0,0,114,157,0,0,0,218,6,111,98,106,101,99,
-    116,114,164,0,0,0,114,169,0,0,0,114,170,0,0,0,
-    114,185,0,0,0,114,195,0,0,0,114,211,0,0,0,114,
-    219,0,0,0,114,224,0,0,0,114,230,0,0,0,114,225,
-    0,0,0,114,231,0,0,0,114,248,0,0,0,114,250,0,
-    0,0,114,7,1,0,0,114,25,1,0,0,114,163,0,0,
-    0,114,34,1,0,0,114,36,1,0,0,114,4,0,0,0,
-    114,4,0,0,0,114,4,0,0,0,114,6,0,0,0,218,
-    8,60,109,111,100,117,108,101,62,8,0,0,0,115,106,0,
-    0,0,6,16,6,1,6,1,3,1,7,3,12,17,12,5,
-    12,5,12,6,12,12,12,10,12,9,12,5,12,7,15,22,
-    15,114,22,1,18,2,6,1,6,2,9,2,9,2,10,2,
-    21,44,12,33,12,19,12,12,12,12,18,8,12,28,12,17,
-    21,55,21,12,18,10,12,14,9,3,12,1,15,65,19,64,
-    19,28,22,110,19,41,25,43,25,16,6,3,25,53,19,57,
-    19,41,19,134,19,146,15,23,12,11,12,68,
+    218,8,60,109,111,100,117,108,101,62,8,0,0,0,115,114,
+    0,0,0,6,16,6,1,6,1,3,1,7,3,12,17,12,
+    5,12,5,12,6,12,12,12,10,12,9,12,5,12,7,15,
+    22,15,114,22,1,18,19,12,1,6,1,12,1,22,2,6,
+    1,6,2,9,2,9,2,10,2,21,44,12,33,12,19,12,
+    12,12,12,18,8,12,28,12,17,21,57,21,12,18,10,12,
+    14,9,3,12,1,15,65,19,64,19,28,22,110,19,41,25,
+    43,25,16,6,3,25,53,19,57,19,41,19,134,19,146,15,
+    23,12,11,12,68,
 };
diff --git a/Python/marshal.c b/Python/marshal.c
index 5b8de99..67e32c8 100644
--- a/Python/marshal.c
+++ b/Python/marshal.c
@@ -549,7 +549,7 @@ w_complex_object(PyObject *v, char flag, WFILE *p)
         w_object(co->co_lnotab, p);
     }
     else if (PyObject_CheckBuffer(v)) {
-        /* Write unknown bytes-like objects as a byte string */
+        /* Write unknown bytes-like objects as a bytes object */
         Py_buffer view;
         if (PyObject_GetBuffer(v, &view, PyBUF_SIMPLE) != 0) {
             w_byte(TYPE_UNKNOWN, p);
@@ -1079,7 +1079,7 @@ r_object(RFILE *p)
             if (PyErr_Occurred())
                 break;
             if (n < 0 || n > SIZE32_MAX) {
-                PyErr_SetString(PyExc_ValueError, "bad marshal data (string size out of range)");
+                PyErr_SetString(PyExc_ValueError, "bad marshal data (bytes object size out of range)");
                 break;
             }
             v = PyBytes_FromStringAndSize((char *)NULL, n);
@@ -1103,7 +1103,7 @@ r_object(RFILE *p)
         if (PyErr_Occurred())
             break;
         if (n < 0 || n > SIZE32_MAX) {
-            PyErr_SetString(PyExc_ValueError, "bad marshal data (unicode size out of range)");
+            PyErr_SetString(PyExc_ValueError, "bad marshal data (string size out of range)");
             break;
         }
         goto _read_ascii;
@@ -1143,7 +1143,7 @@ r_object(RFILE *p)
         if (PyErr_Occurred())
             break;
         if (n < 0 || n > SIZE32_MAX) {
-            PyErr_SetString(PyExc_ValueError, "bad marshal data (unicode size out of range)");
+            PyErr_SetString(PyExc_ValueError, "bad marshal data (string size out of range)");
             break;
         }
         if (n != 0) {
@@ -1594,7 +1594,7 @@ PyMarshal_WriteObjectToString(PyObject *x, int version)
         if (wf.ptr - base > PY_SSIZE_T_MAX) {
             Py_DECREF(wf.str);
             PyErr_SetString(PyExc_OverflowError,
-                            "too much marshal data for a string");
+                            "too much marshal data for a bytes object");
             return NULL;
         }
         if (_PyBytes_Resize(&wf.str, (Py_ssize_t)(wf.ptr - base)) < 0)
@@ -1640,8 +1640,7 @@ PyDoc_STRVAR(dump_doc,
 "dump(value, file[, version])\n\
 \n\
 Write the value on the open file. The value must be a supported type.\n\
-The file must be an open file object such as sys.stdout or returned by\n\
-open() or os.popen(). It must be opened in binary mode ('wb' or 'w+b').\n\
+The file must be a writeable binary file.\n\
 \n\
 If the value has (or contains an object that has) an unsupported type, a\n\
 ValueError exception is raised - but garbage data will also be written\n\
@@ -1697,8 +1696,7 @@ PyDoc_STRVAR(load_doc,
 Read one value from the open file and return it. If no valid value is\n\
 read (e.g. because the data has a different Python version's\n\
 incompatible marshal format), raise EOFError, ValueError or TypeError.\n\
-The file must be an open file object opened in binary mode ('rb' or\n\
-'r+b').\n\
+The file must be a readable binary file.\n\
 \n\
 Note: If an object containing an unsupported type was marshalled with\n\
 dump(), load() will substitute None for the unmarshallable type.");
@@ -1717,7 +1715,7 @@ marshal_dumps(PyObject *self, PyObject *args)
 PyDoc_STRVAR(dumps_doc,
 "dumps(value[, version])\n\
 \n\
-Return the string that would be written to a file by dump(value, file).\n\
+Return the bytes object that would be written to a file by dump(value, file).\n\
 The value must be a supported type. Raise a ValueError exception if\n\
 value has (or contains an object that has) an unsupported type.\n\
 \n\
@@ -1753,8 +1751,8 @@ marshal_loads(PyObject *self, PyObject *args)
 PyDoc_STRVAR(loads_doc,
 "loads(bytes)\n\
 \n\
-Convert the bytes object to a value. If no valid value is found, raise\n\
-EOFError, ValueError or TypeError. Extra characters in the input are\n\
+Convert the bytes-like object to a value. If no valid value is found,\n\
+raise EOFError, ValueError or TypeError. Extra bytes in the input are\n\
 ignored.");
 
 static PyMethodDef marshal_methods[] = {
@@ -1792,8 +1790,8 @@ Functions:\n\
 \n\
 dump() -- write value to a file\n\
 load() -- read value from a file\n\
-dumps() -- write value to a string\n\
-loads() -- read value from a string");
+dumps() -- marshal value as a bytes object\n\
+loads() -- read value from a bytes-like object");
 
 
 
diff --git a/Python/pylifecycle.c b/Python/pylifecycle.c
index ce52990..422454c 100644
--- a/Python/pylifecycle.c
+++ b/Python/pylifecycle.c
@@ -85,7 +85,7 @@ int Py_BytesWarningFlag; /* Warn on str(bytes) and str(buffer) */
 int Py_UseClassExceptionsFlag = 1; /* Needed by bltinmodule.c: deprecated */
 int Py_FrozenFlag; /* Needed by getpath.c */
 int Py_IgnoreEnvironmentFlag; /* e.g. PYTHONPATH, PYTHONHOME */
-int Py_DontWriteBytecodeFlag; /* Suppress writing bytecode files (*.py[co]) */
+int Py_DontWriteBytecodeFlag; /* Suppress writing bytecode files (*.pyc) */
 int Py_NoUserSiteDirectory = 0; /* for -s and site.py */
 int Py_UnbufferedStdioFlag = 0; /* Unbuffered binary std{in,out,err} */
 int Py_HashRandomizationFlag = 0; /* for -R and PYTHONHASHSEED */
@@ -968,6 +968,14 @@ initsite(void)
 static int
 is_valid_fd(int fd)
 {
+#ifdef __APPLE__
+    /* bpo-30225: On macOS Tiger, when stdout is redirected to a pipe
+       and the other side of the pipe is closed, dup(1) succeed, whereas
+       fstat(1, &st) fails with EBADF. Prefer fstat() over dup() to detect
+       such error. */
+    struct stat st;
+    return (fstat(fd, &st) == 0);
+#else
     int fd2;
     if (fd < 0 || !_PyVerify_fd(fd))
         return 0;
@@ -977,6 +985,7 @@ is_valid_fd(int fd)
         close(fd2);
     _Py_END_SUPPRESS_IPH
     return fd2 >= 0;
+#endif
 }
 
 /* returns Py_None if the fd is not valid */
diff --git a/Python/pythonrun.c b/Python/pythonrun.c
index 90cb2de..dd41a3a 100644
--- a/Python/pythonrun.c
+++ b/Python/pythonrun.c
@@ -259,6 +259,21 @@ PyRun_InteractiveOneFlags(FILE *fp, const char *filename_str, PyCompilerFlags *f
 }
 
 
+/* Issue #29537: handle issue27286 bytecode incompatibility
+ *   See Lib/importlib/_bootstrap_external.py for general discussion
+ */
+extern PY_UINT32_T _Py_BACKCOMPAT_HALF_MAGIC;
+static int
+_check_half_magic(unsigned int read_value, unsigned int halfmagic) {
+    return (read_value == halfmagic || read_value == _Py_BACKCOMPAT_HALF_MAGIC);
+}
+
+extern PY_UINT32_T _Py_BACKCOMPAT_MAGIC_NUMBER;
+static int
+_check_magic(long read_value, long magic) {
+    return (read_value == magic || read_value == _Py_BACKCOMPAT_MAGIC_NUMBER);
+}
+
 /* Check whether a file maybe a pyc file: Look at the extension,
    the file type, and, if we may close it, at the first few bytes. */
 
@@ -290,7 +305,7 @@ maybe_pyc_file(FILE *fp, const char* filename, const char* ext, int closeit)
         int ispyc = 0;
         if (ftell(fp) == 0) {
             if (fread(buf, 1, 2, fp) == 2 &&
-                ((unsigned int)buf[1]<<8 | buf[0]) == halfmagic)
+                _check_half_magic(((unsigned int)buf[1]<<8 | buf[0]), halfmagic))
                 ispyc = 1;
             rewind(fp);
         }
@@ -988,7 +1003,7 @@ run_pyc_file(FILE *fp, const char *filename, PyObject *globals,
     long PyImport_GetMagicNumber(void);
 
     magic = PyMarshal_ReadLongFromFile(fp);
-    if (magic != PyImport_GetMagicNumber()) {
+    if (!_check_magic(magic, PyImport_GetMagicNumber())) {
         if (!PyErr_Occurred())
             PyErr_SetString(PyExc_RuntimeError,
                        "Bad magic number in .pyc file");
diff --git a/Python/random.c b/Python/random.c
index d203939..31f61d0 100644
--- a/Python/random.c
+++ b/Python/random.c
@@ -1,6 +1,9 @@
 #include "Python.h"
 #ifdef MS_WINDOWS
 #  include <windows.h>
+/* All sample MSDN wincrypt programs include the header below. It is at least
+ * required with Min GW. */
+#  include <wincrypt.h>
 #else
 #  include <fcntl.h>
 #  ifdef HAVE_SYS_STAT_H
@@ -37,10 +40,9 @@ win32_urandom_init(int raise)
     return 0;
 
 error:
-    if (raise)
+    if (raise) {
         PyErr_SetFromWindowsErr(0);
-    else
-        Py_FatalError("Failed to initialize Windows random API (CryptoGen)");
+    }
     return -1;
 }
 
@@ -53,8 +55,9 @@ win32_urandom(unsigned char *buffer, Py_ssize_t size, int raise)
 
     if (hCryptProv == 0)
     {
-        if (win32_urandom_init(raise) == -1)
+        if (win32_urandom_init(raise) == -1) {
             return -1;
+        }
     }
 
     while (size > 0)
@@ -63,11 +66,9 @@ win32_urandom(unsigned char *buffer, Py_ssize_t size, int raise)
         if (!CryptGenRandom(hCryptProv, (DWORD)chunk, buffer))
         {
             /* CryptGenRandom() failed */
-            if (raise)
+            if (raise) {
                 PyErr_SetFromWindowsErr(0);
-            else
-                Py_FatalError("Failed to initialized the randomized hash "
-                        "secret using CryptoGen)");
+            }
             return -1;
         }
         buffer += chunk;
@@ -76,58 +77,23 @@ win32_urandom(unsigned char *buffer, Py_ssize_t size, int raise)
     return 0;
 }
 
-/* Issue #25003: Don't use getentropy() on Solaris (available since
- * Solaris 11.3), it is blocking whereas os.urandom() should not block. */
-#elif defined(HAVE_GETENTROPY) && !defined(sun)
-#define PY_GETENTROPY 1
-
-/* Fill buffer with size pseudo-random bytes generated by getentropy().
-   Return 0 on success, or raise an exception and return -1 on error.
-
-   If fatal is nonzero, call Py_FatalError() instead of raising an exception
-   on error. */
-static int
-py_getentropy(unsigned char *buffer, Py_ssize_t size, int fatal)
-{
-    while (size > 0) {
-        Py_ssize_t len = Py_MIN(size, 256);
-        int res;
-
-        if (!fatal) {
-            Py_BEGIN_ALLOW_THREADS
-            res = getentropy(buffer, len);
-            Py_END_ALLOW_THREADS
-
-            if (res < 0) {
-                PyErr_SetFromErrno(PyExc_OSError);
-                return -1;
-            }
-        }
-        else {
-            res = getentropy(buffer, len);
-            if (res < 0)
-                Py_FatalError("getentropy() failed");
-        }
-
-        buffer += len;
-        size -= len;
-    }
-    return 0;
-}
-
-#else
+#else /* !MS_WINDOWS */
 
 #if defined(HAVE_GETRANDOM) || defined(HAVE_GETRANDOM_SYSCALL)
 #define PY_GETRANDOM 1
 
-/* Call getrandom()
+/* Call getrandom() to get random bytes:
+
    - Return 1 on success
-   - Return 0 if getrandom() syscall is not available (failed with ENOSYS or
-     EPERM) or if getrandom(GRND_NONBLOCK) failed with EAGAIN (system urandom
-     not initialized yet) and raise=0.
+   - Return 0 if getrandom() is not available (failed with ENOSYS or EPERM),
+     or if getrandom(GRND_NONBLOCK) failed with EAGAIN (system urandom not
+     initialized yet).
    - Raise an exception (if raise is non-zero) and return -1 on error:
-     getrandom() failed with EINTR and the Python signal handler raised an
-     exception, or getrandom() failed with a different error. */
+     if getrandom() failed with EINTR, raise is non-zero and the Python signal
+     handler raised an exception, or if getrandom() failed with a different
+     error.
+
+   getrandom() is retried if it failed with EINTR: interrupted by a signal. */
 static int
 py_getrandom(void *buffer, Py_ssize_t size, int raise)
 {
@@ -142,16 +108,19 @@ py_getrandom(void *buffer, Py_ssize_t size, int raise)
      * see https://bugs.python.org/issue26839. To avoid this, use the
      * GRND_NONBLOCK flag. */
     const int flags = GRND_NONBLOCK;
+    char *dest;
     long n;
 
     if (!getrandom_works) {
         return 0;
     }
 
+    dest = buffer;
     while (0 < size) {
 #ifdef sun
         /* Issue #26735: On Solaris, getrandom() is limited to returning up
-           to 1024 bytes */
+           to 1024 bytes. Call it multiple times if more bytes are
+           requested. */
         n = Py_MIN(size, 1024);
 #else
         n = Py_MIN(size, LONG_MAX);
@@ -161,34 +130,35 @@ py_getrandom(void *buffer, Py_ssize_t size, int raise)
 #ifdef HAVE_GETRANDOM
         if (raise) {
             Py_BEGIN_ALLOW_THREADS
-            n = getrandom(buffer, n, flags);
+            n = getrandom(dest, n, flags);
             Py_END_ALLOW_THREADS
         }
         else {
-            n = getrandom(buffer, n, flags);
+            n = getrandom(dest, n, flags);
         }
 #else
         /* On Linux, use the syscall() function because the GNU libc doesn't
-         * expose the Linux getrandom() syscall yet. See:
-         * https://sourceware.org/bugzilla/show_bug.cgi?id=17252 */
+           expose the Linux getrandom() syscall yet. See:
+           https://sourceware.org/bugzilla/show_bug.cgi?id=17252 */
         if (raise) {
             Py_BEGIN_ALLOW_THREADS
-            n = syscall(SYS_getrandom, buffer, n, flags);
+            n = syscall(SYS_getrandom, dest, n, flags);
             Py_END_ALLOW_THREADS
         }
         else {
-            n = syscall(SYS_getrandom, buffer, n, flags);
+            n = syscall(SYS_getrandom, dest, n, flags);
         }
 #endif
 
         if (n < 0) {
-            /* ENOSYS: getrandom() syscall not supported by the kernel (but
-             * maybe supported by the host which built Python). EPERM:
-             * getrandom() syscall blocked by SECCOMP or something else. */
+            /* ENOSYS: the syscall is not supported by the kernel.
+               EPERM: the syscall is blocked by a security policy (ex: SECCOMP)
+               or something else. */
             if (errno == ENOSYS || errno == EPERM) {
                 getrandom_works = 0;
                 return 0;
             }
+
             if (errno == EAGAIN) {
                 /* getrandom(GRND_NONBLOCK) fails with EAGAIN if the system
                    urandom is not initialiazed yet. In this case, fall back on
@@ -202,169 +172,225 @@ py_getrandom(void *buffer, Py_ssize_t size, int raise)
             }
 
             if (errno == EINTR) {
-                if (PyErr_CheckSignals()) {
-                    if (!raise) {
-                        Py_FatalError("getrandom() interrupted by a signal");
+                if (raise) {
+                    if (PyErr_CheckSignals()) {
+                        return -1;
                     }
-                    return -1;
                 }
 
-                /* retry getrandom() */
+                /* retry getrandom() if it was interrupted by a signal */
                 continue;
             }
 
             if (raise) {
                 PyErr_SetFromErrno(PyExc_OSError);
             }
-            else {
-                Py_FatalError("getrandom() failed");
-            }
             return -1;
         }
 
-        buffer += n;
+        dest += n;
         size -= n;
     }
     return 1;
 }
-#endif
 
-static struct {
-    int fd;
-    dev_t st_dev;
-    ino_t st_ino;
-} urandom_cache = { -1 };
+#elif defined(HAVE_GETENTROPY)
+#define PY_GETENTROPY 1
 
+/* Fill buffer with size pseudo-random bytes generated by getentropy():
 
-/* Read 'size' random bytes from py_getrandom(). Fall back on reading from
-   /dev/urandom if getrandom() is not available.
+   - Return 1 on success
+   - Return 0 if getentropy() syscall is not available (failed with ENOSYS or
+     EPERM).
+   - Raise an exception (if raise is non-zero) and return -1 on error:
+     if getentropy() failed with EINTR, raise is non-zero and the Python signal
+     handler raised an exception, or if getentropy() failed with a different
+     error.
 
-   Call Py_FatalError() on error. */
-static void
-dev_urandom_noraise(unsigned char *buffer, Py_ssize_t size)
+   getentropy() is retried if it failed with EINTR: interrupted by a signal. */
+static int
+py_getentropy(char *buffer, Py_ssize_t size, int raise)
 {
-    int fd;
-    Py_ssize_t n;
+    /* Is getentropy() supported by the running kernel? Set to 0 if
+       getentropy() failed with ENOSYS or EPERM. */
+    static int getentropy_works = 1;
 
-    assert (0 < size);
-
-#ifdef PY_GETRANDOM
-    if (py_getrandom(buffer, size, 0) == 1) {
-        return;
+    if (!getentropy_works) {
+        return 0;
     }
-    /* getrandom() failed with ENOSYS or EPERM,
-       fall back on reading /dev/urandom */
-#endif
 
-    fd = _Py_open_noraise("/dev/urandom", O_RDONLY);
-    if (fd < 0) {
-        Py_FatalError("Failed to open /dev/urandom");
-    }
+    while (size > 0) {
+        /* getentropy() is limited to returning up to 256 bytes. Call it
+           multiple times if more bytes are requested. */
+        Py_ssize_t len = Py_MIN(size, 256);
+        int res;
 
-    while (0 < size)
-    {
-        do {
-            n = read(fd, buffer, (size_t)size);
-        } while (n < 0 && errno == EINTR);
+        if (raise) {
+            Py_BEGIN_ALLOW_THREADS
+            res = getentropy(buffer, len);
+            Py_END_ALLOW_THREADS
+        }
+        else {
+            res = getentropy(buffer, len);
+        }
 
-        if (n <= 0) {
-            /* read() failed or returned 0 bytes */
-            Py_FatalError("Failed to read bytes from /dev/urandom");
-            break;
+        if (res < 0) {
+            /* ENOSYS: the syscall is not supported by the running kernel.
+               EPERM: the syscall is blocked by a security policy (ex: SECCOMP)
+               or something else. */
+            if (errno == ENOSYS || errno == EPERM) {
+                getentropy_works = 0;
+                return 0;
+            }
+
+            if (errno == EINTR) {
+                if (raise) {
+                    if (PyErr_CheckSignals()) {
+                        return -1;
+                    }
+                }
+
+                /* retry getentropy() if it was interrupted by a signal */
+                continue;
+            }
+
+            if (raise) {
+                PyErr_SetFromErrno(PyExc_OSError);
+            }
+            return -1;
         }
-        buffer += n;
-        size -= n;
+
+        buffer += len;
+        size -= len;
     }
-    close(fd);
+    return 1;
 }
+#endif /* defined(HAVE_GETENTROPY) && !defined(sun) */
 
-/* Read 'size' random bytes from py_getrandom(). Fall back on reading from
-   /dev/urandom if getrandom() is not available.
 
-   Return 0 on success. Raise an exception and return -1 on error. */
+static struct {
+    int fd;
+    dev_t st_dev;
+    ino_t st_ino;
+} urandom_cache = { -1 };
+
+/* Read random bytes from the /dev/urandom device:
+
+   - Return 0 on success
+   - Raise an exception (if raise is non-zero) and return -1 on error
+
+   Possible causes of errors:
+
+   - open() failed with ENOENT, ENXIO, ENODEV, EACCES: the /dev/urandom device
+     was not found. For example, it was removed manually or not exposed in a
+     chroot or container.
+   - open() failed with a different error
+   - fstat() failed
+   - read() failed or returned 0
+
+   read() is retried if it failed with EINTR: interrupted by a signal.
+
+   The file descriptor of the device is kept open between calls to avoid using
+   many file descriptors when run in parallel from multiple threads:
+   see the issue #18756.
+
+   st_dev and st_ino fields of the file descriptor (from fstat()) are cached to
+   check if the file descriptor was replaced by a different file (which is
+   likely a bug in the application): see the issue #21207.
+
+   If the file descriptor was closed or replaced, open a new file descriptor
+   but don't close the old file descriptor: it probably points to something
+   important for some third-party code. */
 static int
-dev_urandom_python(char *buffer, Py_ssize_t size)
+dev_urandom(char *buffer, Py_ssize_t size, int raise)
 {
     int fd;
     Py_ssize_t n;
-    struct _Py_stat_struct st;
-#ifdef PY_GETRANDOM
-    int res;
-#endif
-
-    if (size <= 0)
-        return 0;
 
-#ifdef PY_GETRANDOM
-    res = py_getrandom(buffer, size, 1);
-    if (res < 0) {
-        return -1;
-    }
-    if (res == 1) {
-        return 0;
-    }
-    /* getrandom() failed with ENOSYS or EPERM,
-       fall back on reading /dev/urandom */
-#endif
+    if (raise) {
+        struct _Py_stat_struct st;
 
-    if (urandom_cache.fd >= 0) {
-        /* Does the fd point to the same thing as before? (issue #21207) */
-        if (_Py_fstat_noraise(urandom_cache.fd, &st)
-            || st.st_dev != urandom_cache.st_dev
-            || st.st_ino != urandom_cache.st_ino) {
-            /* Something changed: forget the cached fd (but don't close it,
-               since it probably points to something important for some
-               third-party code). */
-            urandom_cache.fd = -1;
-        }
-    }
-    if (urandom_cache.fd >= 0)
-        fd = urandom_cache.fd;
-    else {
-        fd = _Py_open("/dev/urandom", O_RDONLY);
-        if (fd < 0) {
-            if (errno == ENOENT || errno == ENXIO ||
-                errno == ENODEV || errno == EACCES)
-                PyErr_SetString(PyExc_NotImplementedError,
-                                "/dev/urandom (or equivalent) not found");
-            /* otherwise, keep the OSError exception raised by _Py_open() */
-            return -1;
-        }
         if (urandom_cache.fd >= 0) {
-            /* urandom_fd was initialized by another thread while we were
-               not holding the GIL, keep it. */
-            close(fd);
-            fd = urandom_cache.fd;
+            /* Does the fd point to the same thing as before? (issue #21207) */
+            if (_Py_fstat_noraise(urandom_cache.fd, &st)
+                || st.st_dev != urandom_cache.st_dev
+                || st.st_ino != urandom_cache.st_ino) {
+                /* Something changed: forget the cached fd (but don't close it,
+                   since it probably points to something important for some
+                   third-party code). */
+                urandom_cache.fd = -1;
+            }
         }
+        if (urandom_cache.fd >= 0)
+            fd = urandom_cache.fd;
         else {
-            if (_Py_fstat(fd, &st)) {
-                close(fd);
+            fd = _Py_open("/dev/urandom", O_RDONLY);
+            if (fd < 0) {
+                if (errno == ENOENT || errno == ENXIO ||
+                    errno == ENODEV || errno == EACCES) {
+                    PyErr_SetString(PyExc_NotImplementedError,
+                                    "/dev/urandom (or equivalent) not found");
+                }
+                /* otherwise, keep the OSError exception raised by _Py_open() */
                 return -1;
             }
+            if (urandom_cache.fd >= 0) {
+                /* urandom_fd was initialized by another thread while we were
+                   not holding the GIL, keep it. */
+                close(fd);
+                fd = urandom_cache.fd;
+            }
             else {
-                urandom_cache.fd = fd;
-                urandom_cache.st_dev = st.st_dev;
-                urandom_cache.st_ino = st.st_ino;
+                if (_Py_fstat(fd, &st)) {
+                    close(fd);
+                    return -1;
+                }
+                else {
+                    urandom_cache.fd = fd;
+                    urandom_cache.st_dev = st.st_dev;
+                    urandom_cache.st_ino = st.st_ino;
+                }
             }
         }
-    }
 
-    do {
-        n = _Py_read(fd, buffer, (size_t)size);
-        if (n == -1) {
-            return -1;
-        }
-        if (n == 0) {
-            PyErr_Format(PyExc_RuntimeError,
-                    "Failed to read %zi bytes from /dev/urandom",
-                    size);
+        do {
+            n = _Py_read(fd, buffer, (size_t)size);
+            if (n == -1)
+                return -1;
+            if (n == 0) {
+                PyErr_Format(PyExc_RuntimeError,
+                        "Failed to read %zi bytes from /dev/urandom",
+                        size);
+                return -1;
+            }
+
+            buffer += n;
+            size -= n;
+        } while (0 < size);
+    }
+    else {
+        fd = _Py_open_noraise("/dev/urandom", O_RDONLY);
+        if (fd < 0) {
             return -1;
         }
 
-        buffer += n;
-        size -= n;
-    } while (0 < size);
+        while (0 < size)
+        {
+            do {
+                n = read(fd, buffer, (size_t)size);
+            } while (n < 0 && errno == EINTR);
 
+            if (n <= 0) {
+                /* stop on error or if read(size) returned 0 */
+                close(fd);
+                return -1;
+            }
+
+            buffer += n;
+            size -= n;
+        }
+        close(fd);
+    }
     return 0;
 }
 
@@ -376,8 +402,8 @@ dev_urandom_close(void)
         urandom_cache.fd = -1;
     }
 }
+#endif /* !MS_WINDOWS */
 
-#endif
 
 /* Fill buffer with pseudo-random bytes generated by a linear congruent
    generator (LCG):
@@ -400,31 +426,100 @@ lcg_urandom(unsigned int x0, unsigned char *buffer, size_t size)
     }
 }
 
-/* Fill buffer with size pseudo-random bytes from the operating system random
-   number generator (RNG). It is suitable for most cryptographic purposes
-   except long living private keys for asymmetric encryption.
+/* Read random bytes:
 
-   Return 0 on success, raise an exception and return -1 on error. */
-int
-_PyOS_URandom(void *buffer, Py_ssize_t size)
+   - Return 0 on success
+   - Raise an exception (if raise is non-zero) and return -1 on error
+
+   Used sources of entropy ordered by preference, preferred source first:
+
+   - CryptGenRandom() on Windows
+   - getrandom() function (ex: Linux and Solaris): call py_getrandom()
+   - getentropy() function (ex: OpenBSD): call py_getentropy()
+   - /dev/urandom device
+
+   Read from the /dev/urandom device if getrandom() or getentropy() function
+   is not available or does not work.
+
+   Prefer getrandom() over getentropy() because getrandom() supports blocking
+   and non-blocking mode and Python requires non-blocking RNG at startup to
+   initialize its hash secret: see the PEP 524.
+
+   Prefer getrandom() and getentropy() over reading directly /dev/urandom
+   because these functions don't need file descriptors and so avoid ENFILE or
+   EMFILE errors (too many open files): see the issue #18756.
+
+   Only use RNG running in the kernel. They are more secure because it is
+   harder to get the internal state of a RNG running in the kernel land than a
+   RNG running in the user land. The kernel has a direct access to the hardware
+   and has access to hardware RNG, they are used as entropy sources.
+
+   Note: the OpenSSL RAND_pseudo_bytes() function does not automatically reseed
+   its RNG on fork(), two child processes (with the same pid) generate the same
+   random numbers: see issue #18747. Kernel RNGs don't have this issue,
+   they have access to good quality entropy sources.
+
+   If raise is zero:
+
+   - Don't raise an exception on error
+   - Don't call the Python signal handler (don't call PyErr_CheckSignals()) if
+     a function fails with EINTR: retry directly the interrupted function
+   - Don't release the GIL to call functions.
+*/
+static int
+pyurandom(void *buffer, Py_ssize_t size, int raise)
 {
+#if defined(PY_GETRANDOM) || defined(PY_GETENTROPY)
+    int res;
+#endif
+
     if (size < 0) {
-        PyErr_Format(PyExc_ValueError,
-                     "negative argument not allowed");
+        if (raise) {
+            PyErr_Format(PyExc_ValueError,
+                         "negative argument not allowed");
+        }
         return -1;
     }
-    if (size == 0)
+
+    if (size == 0) {
         return 0;
+    }
 
 #ifdef MS_WINDOWS
-    return win32_urandom((unsigned char *)buffer, size, 1);
-#elif defined(PY_GETENTROPY)
-    return py_getentropy(buffer, size, 0);
+    return win32_urandom((unsigned char *)buffer, size, raise);
+#else
+
+#if defined(PY_GETRANDOM) || defined(PY_GETENTROPY)
+#ifdef PY_GETRANDOM
+    res = py_getrandom(buffer, size, raise);
 #else
-    return dev_urandom_python((char*)buffer, size);
+    res = py_getentropy(buffer, size, raise);
+#endif
+    if (res < 0) {
+        return -1;
+    }
+    if (res == 1) {
+        return 0;
+    }
+    /* getrandom() or getentropy() function is not available: failed with
+       ENOSYS, EPERM or EAGAIN. Fall back on reading from /dev/urandom. */
+#endif
+
+    return dev_urandom(buffer, size, raise);
 #endif
 }
 
+/* Fill buffer with size pseudo-random bytes from the operating system random
+   number generator (RNG). It is suitable for most cryptographic purposes
+   except long living private keys for asymmetric encryption.
+
+   Return 0 on success. Raise an exception and return -1 on error. */
+int
+_PyOS_URandom(void *buffer, Py_ssize_t size)
+{
+    return pyurandom(buffer, size, 1);
+}
+
 void
 _PyRandom_Init(void)
 {
@@ -463,13 +558,14 @@ _PyRandom_Init(void)
         }
     }
     else {
-#ifdef MS_WINDOWS
-        (void)win32_urandom(secret, secret_size, 0);
-#elif defined(PY_GETENTROPY)
-        (void)py_getentropy(secret, secret_size, 1);
-#else
-        dev_urandom_noraise(secret, secret_size);
-#endif
+        int res;
+
+        /* _PyRandom_Init() is called very early in the Python initialization
+           and so exceptions cannot be used (use raise=0). */
+        res = pyurandom(secret, secret_size, 0);
+        if (res < 0) {
+            Py_FatalError("failed to get random numbers to initialize Python");
+        }
     }
 }
 
@@ -481,8 +577,6 @@ _PyRandom_Fini(void)
         CryptReleaseContext(hCryptProv, 0);
         hCryptProv = 0;
     }
-#elif defined(PY_GETENTROPY)
-    /* nothing to clean */
 #else
     dev_urandom_close();
 #endif
diff --git a/Python/sysmodule.c b/Python/sysmodule.c
index 1dc7d7c..d62bbf1 100644
--- a/Python/sysmodule.c
+++ b/Python/sysmodule.c
@@ -897,10 +897,10 @@ sys_getwindowsversion(PyObject *self)
         }
         PyMem_RawFree(verblock);
     }
-    PyStructSequence_SET_ITEM(version, pos++, PyTuple_Pack(3,
-        PyLong_FromLong(realMajor),
-        PyLong_FromLong(realMinor),
-        PyLong_FromLong(realBuild)
+    PyStructSequence_SET_ITEM(version, pos++, Py_BuildValue("(kkk)",
+        realMajor,
+        realMinor,
+        realBuild
     ));
 
     if (PyErr_Occurred()) {
@@ -1816,9 +1816,9 @@ _PySys_Init(void)
                          PyUnicode_FromString(Py_GetVersion()));
     SET_SYS_FROM_STRING("hexversion",
                          PyLong_FromLong(PY_VERSION_HEX));
-    SET_SYS_FROM_STRING("_mercurial",
-                        Py_BuildValue("(szz)", "CPython", _Py_hgidentifier(),
-                                      _Py_hgversion()));
+    SET_SYS_FROM_STRING("_git",
+                        Py_BuildValue("(szz)", "CPython", _Py_gitidentifier(),
+                                      _Py_gitversion()));
     SET_SYS_FROM_STRING("dont_write_bytecode",
                          PyBool_FromLong(Py_DontWriteBytecodeFlag));
     SET_SYS_FROM_STRING("api_version",
diff --git a/README b/README
index de3a091..8133b31 100644
--- a/README
+++ b/README
@@ -11,6 +11,14 @@ especially how built-in objects like dictionaries and strings work,
 have changed considerably, and a lot of deprecated features have finally
 been removed.
 
+Using Python
+------------
+
+Installable Python kits, and information about using Python, are available at
+`python.org`_.
+
+.. _python.org: https://www.python.org/
+
 
 Build Instructions
 ------------------
@@ -151,7 +159,7 @@ IMPORTANT: If the tests fail and you decide to mail a bug report, *don't*
 include the output of "make test".  It is useless.  Run the failing test
 manually, as follows:
 
-        ./python -m test -v test_whatever
+    ./python -m test -v test_whatever
 
 (substituting the top of the source tree for '.' if you built in a different
 directory).  This runs the test in verbose mode.
@@ -198,11 +206,12 @@ Proposals for enhancement
 -------------------------
 
 If you have a proposal to change Python, you may want to send an email to the
-comp.lang.python or python-ideas mailing lists for inital feedback.  A Python
+comp.lang.python or `python-ideas`_ mailing lists for initial feedback.  A Python
 Enhancement Proposal (PEP) may be submitted if your idea gains ground.  All
 current PEPs, as well as guidelines for submitting a new PEP, are listed at
 http://www.python.org/dev/peps/.
 
+.. _python-ideas: https://mail.python.org/mailman/listinfo/python-ideas/
 
 Release Schedule
 ----------------
diff --git a/Tools/README b/Tools/README
index 0d961de..edbf4fb 100644
--- a/Tools/README
+++ b/Tools/README
@@ -45,4 +45,4 @@ unittestgui     A Tkinter based GUI test runner for unittest, with test
                 discovery.
 
 
-(*) A generic benchmark suite is maintained separately at http://hg.python.org/benchmarks/
+(*) A generic benchmark suite is maintained separately at https://github.com/python/performance
diff --git a/Tools/importbench/README b/Tools/importbench/README
index 81a5544..6ba386c 100644
--- a/Tools/importbench/README
+++ b/Tools/importbench/README
@@ -3,4 +3,4 @@ Importbench is a set of micro-benchmarks for various import scenarios.
 It should not be used as an overall benchmark of import performance, but rather
 an easy way to measure impact of possible code changes. For a real-world
 benchmark of import, use the normal_startup benchmark from
-hg.python.org/benchmarks.
+https://github.com/python/performance
diff --git a/Tools/msi/buildrelease.bat b/Tools/msi/buildrelease.bat
index f296e61..706febf 100644
--- a/Tools/msi/buildrelease.bat
+++ b/Tools/msi/buildrelease.bat
@@ -64,8 +64,8 @@ if "%1" NEQ "" echo Invalid option: "%1" && exit /B 1
 
 if not defined BUILDX86 if not defined BUILDX64 (set BUILDX86=1) && (set BUILDX64=1)
 
-if not exist "%HG%" where hg > "%TEMP%\hg.loc" 2> nul && set /P HG= < "%TEMP%\hg.loc" & del "%TEMP%\hg.loc"
-if not exist "%HG%" echo Cannot find Mercurial on PATH && exit /B 1
+if not exist "%GIT%" where git > "%TEMP%\git.loc" 2> nul && set /P GIT= < "%TEMP%\git.loc" & del "%TEMP%\git.loc"
+if not exist "%GIT%" echo Cannot find Git on PATH && exit /B 1
 
 call "%D%get_externals.bat"
 
diff --git a/Tools/msi/make_zip.proj b/Tools/msi/make_zip.proj
index 1af6dd2..1ff5fc5 100644
--- a/Tools/msi/make_zip.proj
+++ b/Tools/msi/make_zip.proj
@@ -17,15 +17,12 @@
         <CleanCommand>rmdir /q/s "$(IntermediateOutputPath)\zip_$(ArchName)"</CleanCommand>
         <Arguments>"$(PythonExe)" "$(MSBuildThisFileDirectory)\make_zip.py"</Arguments>
         <Arguments>$(Arguments) -e -o "$(TargetPath)" -t "$(IntermediateOutputPath)\zip_$(ArchName)" -b "$(BuildPath.TrimEnd('\'))"</Arguments>
-        <Environment>set DOC_FILENAME=python$(PythonVersion).chm
-set VCREDIST_PATH=$(VS140COMNTOOLS)\..\..\VC\redist\$(Platform)\Microsoft.VC140.CRT</Environment>
+        <Environment>set DOC_FILENAME=python$(PythonVersion).chm</Environment>
+        <Environment Condition="Exists($(CRTRedist))">$(Environment)%0D%0Aset VCREDIST_PATH=$(CRTRedist)\$(Platform)</Environment>
     </PropertyGroup>
 
     <Target Name="_Build">
-        <Exec Command="setlocal
-$(Environment)
-$(CleanCommand)
-$(Arguments)" />
+        <Exec Command="setlocal%0D%0A$(Environment)%0D%0A$(CleanCommand)%0D%0A$(Arguments)" />
     </Target>
 
     <Target Name="AfterBuild" />
diff --git a/Tools/msi/make_zip.py b/Tools/msi/make_zip.py
index 9db96cb..6a03cbe 100644
--- a/Tools/msi/make_zip.py
+++ b/Tools/msi/make_zip.py
@@ -28,12 +28,15 @@ DEBUG_FILES = {
 
 EXCLUDE_FROM_LIBRARY = {
     '__pycache__',
-    'ensurepip',
     'idlelib',
     'pydoc_data',
     'site-packages',
     'tkinter',
     'turtledemo',
+}
+
+EXCLUDE_FROM_EMBEDDABLE_LIBRARY = {
+    'ensurepip',
     'venv',
 }
 
@@ -78,6 +81,12 @@ def include_in_lib(p):
     suffix = p.suffix.lower()
     return suffix not in {'.pyc', '.pyo', '.exe'}
 
+def include_in_embeddable_lib(p):
+    if p.is_dir() and p.name.lower() in EXCLUDE_FROM_EMBEDDABLE_LIBRARY:
+        return False
+
+    return include_in_lib(p)
+
 def include_in_libs(p):
     if not is_not_debug(p):
         return False
@@ -108,7 +117,7 @@ EMBED_LAYOUT = [
     ('/', '$build', 'python*.exe', is_not_debug),
     ('/', '$build', '*.pyd', is_not_debug),
     ('/', '$build', '*.dll', is_not_debug),
-    ('python{0.major}{0.minor}.zip'.format(sys.version_info), 'Lib', '**/*', include_in_lib),
+    ('python{0.major}{0.minor}.zip'.format(sys.version_info), 'Lib', '**/*', include_in_embeddable_lib),
 ]
 
 if os.getenv('DOC_FILENAME'):
diff --git a/Tools/msi/uploadrelease.bat b/Tools/msi/uploadrelease.bat
index 4e319ce..670836b 100644
--- a/Tools/msi/uploadrelease.bat
+++ b/Tools/msi/uploadrelease.bat
@@ -9,6 +9,8 @@ set USER=
 set TARGET=
 set DRYRUN=false
 set NOGPG=
+set PURGE_OPTION=/p:Purge=true
+set NOTEST=
 
 :CheckOpts
 if "%1" EQU "-h" goto Help
@@ -19,7 +21,11 @@ if "%1" EQU "--user" (set USER=%~2) && shift && shift && goto CheckOpts
 if "%1" EQU "-t" (set TARGET=%~2) && shift && shift && goto CheckOpts
 if "%1" EQU "--target" (set TARGET=%~2) && shift && shift && goto CheckOpts
 if "%1" EQU "--dry-run" (set DRYRUN=true) && shift && goto CheckOpts
-if "%1" EQU "--no-gpg" (set NOGPG=true) && shift && goto CheckOpts
+if "%1" EQU "--skip-gpg" (set NOGPG=true) && shift && goto CheckOpts
+if "%1" EQU "--skip-purge" (set PURGE_OPTION=) && shift && godo CheckOpts
+if "%1" EQU "--skip-test" (set NOTEST=true) && shift && godo CheckOpts
+if "%1" EQU "-T" (set NOTEST=true) && shift && godo CheckOpts
+if "%1" NEQ "" echo Unexpected argument "%1" & exit /B 1
 
 if not defined PLINK where plink > "%TEMP%\plink.loc" 2> nul && set /P PLINK= < "%TEMP%\plink.loc" & del "%TEMP%\plink.loc"
 if not defined PLINK where /R "%ProgramFiles(x86)%\PuTTY" plink > "%TEMP%\plink.loc" 2> nul && set /P PLINK= < "%TEMP%\plink.loc" & del "%TEMP%\plink.loc"
@@ -35,7 +41,7 @@ echo Found pscp.exe at %PSCP%
 
 if defined NOGPG (
     set GPG=
-    echo Skipping GPG signature generation because of --no-gpg
+    echo Skipping GPG signature generation because of --skip-gpg
 ) else  (
     if not defined GPG where gpg2 > "%TEMP%\gpg.loc" 2> nul && set /P GPG= < "%TEMP%\gpg.loc" & del "%TEMP%\gpg.loc"
     if not defined GPG where /R "%PCBUILD%..\externals\windows-installer" gpg2 > "%TEMP%\gpg.loc" 2> nul && set /P GPG= < "%TEMP%\gpg.loc" & del "%TEMP%\gpg.loc"
@@ -45,8 +51,12 @@ if defined NOGPG (
 
 call "%PCBUILD%env.bat" > nul 2> nul
 pushd "%D%"
-msbuild /v:m /nologo uploadrelease.proj /t:Upload /p:Platform=x86
-msbuild /v:m /nologo uploadrelease.proj /t:Upload /p:Platform=x64 /p:IncludeDoc=false
+msbuild /v:m /nologo uploadrelease.proj /t:Upload /p:Platform=x86 %PURGE_OPTION%
+msbuild /v:m /nologo uploadrelease.proj /t:Upload /p:Platform=x64 /p:IncludeDoc=false %PURGE_OPTION%
+if not defined NOTEST (
+    msbuild /v:m /nologo uploadrelease.proj /t:Test /p:Platform=x86
+    msbuild /v:m /nologo uploadrelease.proj /t:Test /p:Platform=x64
+)
 msbuild /v:m /nologo uploadrelease.proj /t:ShowHashes /p:Platform=x86
 msbuild /v:m /nologo uploadrelease.proj /t:ShowHashes /p:Platform=x64 /p:IncludeDoc=false
 popd
@@ -55,9 +65,12 @@ exit /B 0
 :Help
 echo uploadrelease.bat --host HOST --user USERNAME [--target TARGET] [--dry-run] [-h]
 echo.
-echo    --host (-o)     Specify the upload host (required)
-echo    --user (-u)     Specify the user on the host (required)
-echo    --target (-t)   Specify the target directory on the host
-echo    --dry-run       Display commands and filenames without executing them
-echo    -h              Display this help information
+echo    --host (-o)      Specify the upload host (required)
+echo    --user (-u)      Specify the user on the host (required)
+echo    --target (-t)    Specify the target directory on the host
+echo    --dry-run        Display commands and filenames without executing them
+echo    --skip-gpg       Does not generate GPG signatures before uploading
+echo    --skip-purge     Does not perform CDN purge after uploading
+echo    --skip-test (-T) Does not perform post-upload tests
+echo    -h               Display this help information
 echo.
diff --git a/Tools/msi/uploadrelease.proj b/Tools/msi/uploadrelease.proj
index 0d472de..75840f2 100644
--- a/Tools/msi/uploadrelease.proj
+++ b/Tools/msi/uploadrelease.proj
@@ -8,7 +8,9 @@
         <DownloadUrlBase Condition="'$(DownloadUrlBase)' == ''">$(TARGET)</DownloadUrlBase>
         <DownloadUrlBase Condition="'$(DownloadUrlBase)' == ''">/srv/www.python.org/ftp/python</DownloadUrlBase>
         <IncludeDoc Condition="'$(IncludeDoc)' == ''">true</IncludeDoc>
+        <BuildForRelease Condition="'$(BuildForRelease)' == ''">true</BuildForRelease>
         <DryRun Condition="'$(DryRun)' == ''">false</DryRun>
+        <Purge Condition="'$(Purge)' == ''">false</Purge>
     </PropertyGroup>
 
     <Import Project="msi.props" />
@@ -64,7 +66,37 @@ echo.
 echo." />
     </Target>
     
-    <Target Name="Upload" DependsOnTargets="_ValidateProperties;_RunGpg;_PrintNames;_Upload" />
+    <Target Name="_Purge" Condition="$(Purge) and !$(DryRun)">
+        <Error Condition="!Exists('$(PythonExe)')" Text="No Python executable available at $(PythonExe)" />
+        <Exec Command="&quot;$(PythonExe)&quot; purge.py $(PythonVersion)" />
+    </Target>
+    
+    <Target Name="_TestLayout">
+        <ItemGroup>
+            <WebInstaller Include="$(OutputPath)\*-webinstall.exe" />
+            <WebInstaller>
+                <SourceDir>$(TEMP)\%(Filename)_source</SourceDir>
+                <SourceExe>$(TEMP)\%(Filename)_source\%(Filename)%(Extension)</SourceExe>
+                <LayoutDir>$(TEMP)\%(Filename)_layout</LayoutDir>
+                <LogDir>$(OutputPath)\%(Filename)_layoutlog</LogDir>
+                <LogFile>$(OutputPath)\%(Filename)_layoutlog\%(Filename).log</LogFile>
+            </WebInstaller>
+        </ItemGroup>
+        <RemoveDir Directories="%(WebInstaller.SourceDir)" Condition="Exists('%(WebInstaller.SourceDir)')" />
+        <RemoveDir Directories="%(WebInstaller.LayoutDir)" Condition="Exists('%(WebInstaller.LayoutDir)')" />
+        <RemoveDir Directories="%(WebInstaller.LogDir)" Condition="Exists('%(WebInstaller.LogDir)')" />
+        <MakeDir Directories="%(WebInstaller.SourceDir)" />
+        <Copy SourceFiles="@(WebInstaller)" DestinationFiles="%(WebInstaller.SourceExe)" />
+        <Exec Command="start &quot;Install test&quot; /wait &quot;%(WebInstaller.SourceExe)&quot; /layout &quot;%(WebInstaller.LayoutDir)&quot; /passive /log &quot;%(WebInstaller.LogFile)&quot;"
+              IgnoreExitCode="false" />
+        <RemoveDir Directories="%(WebInstaller.LayoutDir)" />
+        <RemoveDir Directories="%(WebInstaller.SourceDir)" />
+        <RemoveDir Directories="%(WebInstaller.LogDir)" />
+        <Message Text="Successfully downloaded %(WebInstaller.Filename)%(WebInstaller.Extension) layout" Importance="high" />
+    </Target>
+    
+    <Target Name="Upload" DependsOnTargets="_ValidateProperties;_RunGpg;_PrintNames;_Upload;_Purge" />
+    <Target Name="Test" DependsOnTargets="_TestLayout" />
     
     <Target Name="ShowHashes">
         <ItemGroup>
diff --git a/Tools/nuget/make_pkg.proj b/Tools/nuget/make_pkg.proj
index 81b84f9..21acc2a 100644
--- a/Tools/nuget/make_pkg.proj
+++ b/Tools/nuget/make_pkg.proj
@@ -34,9 +34,8 @@
         <NugetArguments>$(NugetArguments) -Version "$(NuspecVersion)"</NugetArguments>
         <NugetArguments>$(NugetArguments) -NoPackageAnalysis -NonInteractive</NugetArguments>
         
-        <Environment>setlocal
-set DOC_FILENAME=python$(PythonVersion).chm
-set VCREDIST_PATH=$(VS140COMNTOOLS)\..\..\VC\redist\$(Platform)\Microsoft.VC140.CRT</Environment>
+        <Environment>set DOC_FILENAME=python$(PythonVersion).chm</Environment>
+        <Environment Condition="Exists($(CRTRedist))">$(Environment)%0D%0Aset VCREDIST_PATH=$(CRTRedist)\$(Platform)</Environment>
     </PropertyGroup>
 
     <Target Name="_NugetMissing" BeforeTargets="_Build" Condition="!Exists($(Nuget))">
@@ -45,8 +44,7 @@ set VCREDIST_PATH=$(VS140COMNTOOLS)\..\..\VC\redist\$(Platform)\Microsoft.VC140.
 
     <Target Name="_Build">
         <Exec Command="$(CleanCommand)" />
-        <Exec Command="$(Environment)
-$(PythonArguments)" />
+        <Exec Command="setlocal%0D%0A$(Environment)%0D%0A$(PythonArguments)" />
         <Exec Command="$(PipArguments)" />
         <Exec Command="$(PackageArguments)" Condition="$(PackageArguments) != ''" />
         <Exec Command="$(NugetArguments)" />
diff --git a/Tools/scripts/patchcheck.py b/Tools/scripts/patchcheck.py
index 58b081a..33a9fea 100755
--- a/Tools/scripts/patchcheck.py
+++ b/Tools/scripts/patchcheck.py
@@ -12,7 +12,6 @@ import untabify
 
 SRCDIR = sysconfig.get_config_var('srcdir')
 
-
 def n_files_str(count):
     """Return 'N file(s)' with the proper plurality on 'file'."""
     return "{} file{}".format(count, "s" if count != 1 else "")
@@ -46,27 +45,76 @@ def mq_patches_applied():
         return st.returncode == 0 and bstdout
 
 
+def get_git_branch():
+    """Get the symbolic name for the current git branch"""
+    cmd = "git rev-parse --abbrev-ref HEAD".split()
+    try:
+        return subprocess.check_output(cmd, stderr=subprocess.DEVNULL)
+    except subprocess.CalledProcessError:
+        return None
+
+
+def get_git_upstream_remote():
+    """Get the remote name to use for upstream branches
+
+    Uses "upstream" if it exists, "origin" otherwise
+    """
+    cmd = "git remote get-url upstream".split()
+    try:
+        subprocess.check_output(cmd, stderr=subprocess.DEVNULL)
+    except subprocess.CalledProcessError:
+        return "origin"
+    return "upstream"
+
+
+@status("Getting base branch for PR",
+        info=lambda x: x if x is not None else "not a PR branch")
+def get_base_branch():
+    if not os.path.exists(os.path.join(SRCDIR, '.git')):
+        # Not a git checkout, so there's no base branch
+        return None
+    version = sys.version_info
+    if version.releaselevel == 'alpha':
+        base_branch = "master"
+    else:
+        base_branch = "{0.major}.{0.minor}".format(version)
+    this_branch = get_git_branch()
+    if this_branch is None or this_branch == base_branch:
+        # Not on a git PR branch, so there's no base branch
+        return None
+    upstream_remote = get_git_upstream_remote()
+    return upstream_remote + "/" + base_branch
+
+
 @status("Getting the list of files that have been added/changed",
         info=lambda x: n_files_str(len(x)))
-def changed_files():
+def changed_files(base_branch=None):
     """Get the list of changed or added files from Mercurial or git."""
     if os.path.isdir(os.path.join(SRCDIR, '.hg')):
+        if base_branch is not None:
+            sys.exit('need a git checkout to check PR status')
         cmd = 'hg status --added --modified --no-status'
         if mq_patches_applied():
             cmd += ' --rev qparent'
         with subprocess.Popen(cmd.split(), stdout=subprocess.PIPE) as st:
             return [x.decode().rstrip() for x in st.stdout]
-    elif os.path.isdir(os.path.join(SRCDIR, '.git')):
-        cmd = 'git status --porcelain'
+    elif os.path.exists(os.path.join(SRCDIR, '.git')):
+        # We just use an existence check here as:
+        #  directory = normal git checkout/clone
+        #  file = git worktree directory
+        if base_branch:
+            cmd = 'git diff --name-status ' + base_branch
+        else:
+            cmd = 'git status --porcelain'
         filenames = []
         with subprocess.Popen(cmd.split(), stdout=subprocess.PIPE) as st:
             for line in st.stdout:
                 line = line.decode().rstrip()
-                status = set(line[:2])
+                status_text, filename = line.split(maxsplit=1)
+                status = set(status_text)
                 # modified, added or unmerged files
                 if not status.intersection('MAU'):
                     continue
-                filename = line[3:]
                 if ' -> ' in filename:
                     # file is renamed
                     filename = filename.split(' -> ', 2)[1].strip()
@@ -165,7 +213,8 @@ def regenerated_pyconfig_h_in(file_paths):
         return "not needed"
 
 def main():
-    file_paths = changed_files()
+    base_branch = get_base_branch()
+    file_paths = changed_files(base_branch)
     python_files = [fn for fn in file_paths if fn.endswith('.py')]
     c_files = [fn for fn in file_paths if fn.endswith(('.c', '.h'))]
     doc_files = [fn for fn in file_paths if fn.startswith('Doc') and
diff --git a/Tools/scripts/reindent.py b/Tools/scripts/reindent.py
index 18424de..f6dadaa 100755
--- a/Tools/scripts/reindent.py
+++ b/Tools/scripts/reindent.py
@@ -118,7 +118,11 @@ def check(file):
     if verbose:
         print("checking", file, "...", end=' ')
     with open(file, 'rb') as f:
-        encoding, _ = tokenize.detect_encoding(f.readline)
+        try:
+            encoding, _ = tokenize.detect_encoding(f.readline)
+        except SyntaxError as se:
+            errprint("%s: SyntaxError: %s" % (file, str(se)))
+            return
     try:
         with open(file, encoding=encoding) as f:
             r = Reindenter(f)
diff --git a/configure.ac b/configure.ac
index 49d1a37..e1731db 100644
--- a/configure.ac
+++ b/configure.ac
@@ -25,25 +25,25 @@ else
     BASECPPFLAGS=""
 fi
 
-AC_SUBST(HGVERSION)
-AC_SUBST(HGTAG)
-AC_SUBST(HGBRANCH)
+AC_SUBST(GITVERSION)
+AC_SUBST(GITTAG)
+AC_SUBST(GITBRANCH)
 
-if test -e $srcdir/.hg/dirstate
+if test -e $srcdir/.git
 then
-AC_CHECK_PROG(HAS_HG, hg, found, not-found)
+AC_CHECK_PROG(HAS_GIT, git, found, not-found)
 else
-HAS_HG=no-repository
+HAS_GIT=no-repository
 fi
-if test $HAS_HG = found
+if test $HAS_GIT = found
 then
-    HGVERSION="hg id -i \$(srcdir)"
-    HGTAG="hg id -t \$(srcdir)"
-    HGBRANCH="hg id -b \$(srcdir)"
+    GITVERSION="git -C \$(srcdir) rev-parse --short HEAD"
+    GITTAG="git -C \$(srcdir) describe --all --always --dirty"
+    GITBRANCH="git -C \$(srcdir) name-rev --name-only HEAD"
 else
-    HGVERSION=""
-    HGTAG=""
-    HGBRANCH=""
+    GITVERSION=""
+    GITTAG=""
+    GITBRANCH=""
 fi
 
 AC_CONFIG_SRCDIR([Include/object.h])
@@ -56,13 +56,8 @@ AC_SUBST(host)
 # pybuilddir.txt will be created by --generate-posix-vars in the Makefile
 rm -f pybuilddir.txt
 
-AC_CHECK_PROGS(PYTHON_FOR_GEN, python$PACKAGE_VERSION python3 python, not-found)
-if test "$PYTHON_FOR_GEN" = not-found; then
-    PYTHON_FOR_GEN='@echo "Cannot generate $@, python not found !" && \
-    echo "To skip re-generation of $@ run <make touch> or <make -t $@>." && \
-    echo "Otherwise, set python in PATH and run configure or run <make PYTHON_FOR_GEN=python>." && false &&'
-fi
-AC_SUBST(PYTHON_FOR_GEN)
+AC_CHECK_PROGS(PYTHON_FOR_REGEN, python$PACKAGE_VERSION python3 python, python3)
+AC_SUBST(PYTHON_FOR_REGEN)
 
 if test "$cross_compiling" = yes; then
     AC_MSG_CHECKING([for python interpreter for cross build])
@@ -80,16 +75,12 @@ if test "$cross_compiling" = yes; then
         AC_MSG_RESULT($interp)
 	PYTHON_FOR_BUILD='_PYTHON_PROJECT_BASE=$(abs_builddir) _PYTHON_HOST_PLATFORM=$(_PYTHON_HOST_PLATFORM) PYTHONPATH=$(shell test -f pybuilddir.txt && echo $(abs_builddir)/`cat pybuilddir.txt`:)$(srcdir)/Lib:$(srcdir)/Lib/$(PLATDIR) '$interp
     fi
-    # Used to comment out stuff for rebuilding generated files
-    GENERATED_COMMENT='#'
 elif test "$cross_compiling" = maybe; then
     AC_MSG_ERROR([Cross compiling required --host=HOST-TUPLE and --build=ARCH])
 else
     PYTHON_FOR_BUILD='./$(BUILDPYTHON) -E'
-    GENERATED_COMMENT=''
 fi
 AC_SUBST(PYTHON_FOR_BUILD)
-AC_SUBST(GENERATED_COMMENT)
 
 dnl Ensure that if prefix is specified, it does not end in a slash. If
 dnl it does, we get path names containing '//' which is both ugly and
@@ -1237,7 +1228,7 @@ Py_OPT='false'
 AC_MSG_CHECKING(for --enable-optimizations)
 AC_ARG_ENABLE(optimizations, AS_HELP_STRING([--enable-optimizations], [Enable expensive optimizations (PGO, maybe LTO, etc).  Disabled by default.]),
 [
-if test "$withval" != no
+if test "$enableval" != no
 then
   Py_OPT='true'
   AC_MSG_RESULT(yes);
@@ -1403,6 +1394,7 @@ esac
 # tweak OPT based on compiler and platform, only if the user didn't set
 # it on the command line
 AC_SUBST(OPT)
+AC_SUBST(CFLAGS_ALIASING)
 if test "${OPT-unset}" = "unset"
 then
     case $GCC in
@@ -1415,30 +1407,49 @@ then
            WRAP="-fwrapv"
         fi
 
-        # Clang also needs -fwrapv
         case $CC in
-            *clang*) WRAP="-fwrapv"
-            ;;
+            *clang*)
+                cc_is_clang=1
+                ;;
+            *)
+                if $CC --version 2>&1 | grep -q clang
+                then
+                    cc_is_clang=1
+                else
+                    cc_is_clang=
+                fi
         esac
 
+        if test -n "${cc_is_clang}"
+        then
+            # Clang also needs -fwrapv
+            WRAP="-fwrapv"
+            # bpo-30104: disable strict aliasing to compile correctly dtoa.c,
+            # see Makefile.pre.in for more information
+            CFLAGS_ALIASING="-fno-strict-aliasing"
+        fi
+
 	case $ac_cv_prog_cc_g in
 	yes)
 	    if test "$Py_DEBUG" = 'true' ; then
 		# Optimization messes up debuggers, so turn it off for
 		# debug builds.
                 if "$CC" -v --help 2>/dev/null |grep -- -Og > /dev/null; then
-                    OPT="-g -Og -Wall $STRICT_PROTO"
+                    OPT="-g -Og -Wall"
                 else
-                    OPT="-g -O0 -Wall $STRICT_PROTO"
+                    OPT="-g -O0 -Wall"
                 fi
 	    else
-		OPT="-g $WRAP -O3 -Wall $STRICT_PROTO"
+		OPT="-g $WRAP -O3 -Wall"
 	    fi
 	    ;;
 	*)
-	    OPT="-O3 -Wall $STRICT_PROTO"
+	    OPT="-O3 -Wall"
 	    ;;
 	esac
+
+	OPT="$OPT $STRICT_PROTO"
+
 	case $ac_sys_system in
 	    SCO_SV*) OPT="$OPT -m486 -DSCO5"
 	    ;;
